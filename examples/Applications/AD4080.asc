Version 4
SHEET 1 12976 5124
WIRE 9024 2656 9024 2608
WIRE 9184 2656 9184 2608
WIRE 9344 2656 9344 2608
WIRE 9504 2656 9504 2608
WIRE 9024 2768 9024 2736
WIRE 9184 2768 9184 2736
WIRE 9344 2768 9344 2736
WIRE 9504 2768 9504 2736
WIRE 10688 3008 10544 3008
WIRE 10752 3008 10688 3008
WIRE 10752 3040 10752 3008
WIRE 10752 3152 10752 3120
WIRE 8384 3184 8192 3184
WIRE 8528 3184 8464 3184
WIRE 8704 3184 8528 3184
WIRE 8944 3184 8784 3184
WIRE 9024 3184 8944 3184
WIRE 9152 3184 9024 3184
WIRE 9360 3200 9328 3200
WIRE 9392 3200 9360 3200
WIRE 10544 3200 10544 3008
WIRE 8528 3216 8528 3184
WIRE 8944 3216 8944 3184
WIRE 9728 3216 9680 3216
WIRE 9952 3216 9808 3216
WIRE 10096 3216 9952 3216
WIRE 10320 3216 10096 3216
WIRE 9024 3232 9024 3184
WIRE 9424 3248 9360 3248
WIRE 11392 3248 10848 3248
WIRE 8192 3264 8192 3184
WIRE 9328 3280 9328 3200
WIRE 9360 3280 9360 3248
WIRE 9552 3280 9392 3280
WIRE 11392 3280 11392 3248
WIRE 10320 3296 10320 3216
WIRE 11184 3296 10848 3296
WIRE 11248 3296 11184 3296
WIRE 9152 3312 9152 3184
WIRE 9232 3312 9152 3312
WIRE 9280 3312 9232 3312
WIRE 8528 3328 8528 3280
WIRE 9680 3328 9680 3216
WIRE 9728 3328 9680 3328
WIRE 9856 3328 9808 3328
WIRE 10112 3328 9856 3328
WIRE 10288 3328 10112 3328
WIRE 8944 3344 8944 3296
WIRE 9024 3344 9024 3296
WIRE 9024 3344 8944 3344
WIRE 9248 3344 9024 3344
WIRE 9280 3344 9248 3344
WIRE 9552 3344 9456 3344
WIRE 9680 3344 9680 3328
WIRE 9680 3344 9552 3344
WIRE 8192 3360 8192 3344
WIRE 8192 3360 7728 3360
WIRE 9856 3360 9856 3328
WIRE 9952 3360 9952 3216
WIRE 10288 3360 10160 3360
WIRE 7728 3376 7728 3360
WIRE 8192 3376 8192 3360
WIRE 8944 3376 8896 3376
WIRE 9024 3376 8944 3376
WIRE 9232 3376 9024 3376
WIRE 9280 3376 9232 3376
WIRE 10992 3392 10848 3392
WIRE 11072 3392 10992 3392
WIRE 11168 3392 11136 3392
WIRE 11392 3392 11392 3360
WIRE 8368 3408 8288 3408
WIRE 8528 3408 8448 3408
WIRE 8704 3408 8528 3408
WIRE 8896 3408 8896 3376
WIRE 8896 3408 8784 3408
WIRE 8944 3408 8944 3376
WIRE 9024 3408 9024 3376
WIRE 9248 3408 9152 3408
WIRE 9280 3408 9248 3408
WIRE 9552 3408 9456 3408
WIRE 9680 3408 9552 3408
WIRE 10896 3424 10864 3424
WIRE 9280 3440 9248 3440
WIRE 9680 3440 9680 3408
WIRE 9712 3440 9680 3440
WIRE 9856 3440 9856 3424
WIRE 9856 3440 9792 3440
WIRE 10112 3440 9856 3440
WIRE 10160 3440 10160 3360
WIRE 10160 3440 10112 3440
WIRE 10864 3440 10864 3424
WIRE 10864 3440 10848 3440
WIRE 10896 3440 10896 3424
WIRE 11248 3440 11248 3296
WIRE 8528 3456 8528 3408
WIRE 7728 3472 7728 3456
WIRE 9248 3472 9248 3440
WIRE 10992 3472 10848 3472
WIRE 11072 3472 10992 3472
WIRE 11168 3472 11136 3472
WIRE 8192 3504 8192 3456
WIRE 8288 3504 8288 3408
WIRE 8288 3504 8192 3504
WIRE 8944 3520 8944 3488
WIRE 9024 3520 9024 3472
WIRE 9024 3520 8944 3520
WIRE 9152 3520 9152 3408
WIRE 9152 3520 9024 3520
WIRE 9392 3520 9392 3472
WIRE 10448 3520 10448 3488
WIRE 9680 3536 9680 3440
WIRE 9712 3536 9680 3536
WIRE 9952 3536 9952 3424
WIRE 9952 3536 9792 3536
WIRE 10112 3536 9952 3536
WIRE 10320 3536 10320 3392
WIRE 10320 3536 10112 3536
WIRE 8528 3568 8528 3520
WIRE 9328 3584 9328 3472
WIRE 9360 3584 9328 3584
WIRE 9392 3584 9360 3584
WIRE 11248 3600 11248 3520
FLAG 11248 3600 0
FLAG 10752 3152 0
FLAG 11392 3392 0
FLAG 10448 3520 0
FLAG 11168 3392 0
FLAG 11168 3472 0
FLAG 10992 3392 vout
FLAG 10992 3472 vout_dsp
FLAG 11184 3296 cnv
FLAG 9424 3248 VOCM
FLAG 9360 3200 VS+
FLAG 9360 3584 VS-
FLAG 9248 3472 0
FLAG 9024 2768 0
FLAG 9184 2768 0
FLAG 9344 2768 0
FLAG 9024 2608 VS+
FLAG 9184 2608 VS-
FLAG 9344 2608 VOCM
FLAG 9504 2768 0
FLAG 9504 2608 _DIS
FLAG 9360 3472 _DIS
FLAG 9248 3344 FB-
FLAG 9232 3312 FDA_IN+
FLAG 9248 3408 FB+
FLAG 9232 3376 FDA_IN-
FLAG 7728 3472 0
FLAG 9392 3520 0
FLAG 9552 3280 VREF
FLAG 8528 3328 0
FLAG 8528 3568 0
FLAG 10096 3216 AUXIN+
FLAG 10112 3328 ADC_IN+
FLAG 10112 3440 ADC_IN-
FLAG 10112 3536 AUXIN-
FLAG 10688 3008 VREF
FLAG 9552 3344 FDA_ON
FLAG 9552 3408 FDA_OP
FLAG 10896 3440 0
SYMBOL voltage 11248 3424 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -52 175 Right 2
WINDOW 0 -33 10 Right 2
SYMATTR Value PULSE(0 1.1 {Tdelay} .2n .2n {0.9*Ts} {Ts})
SYMATTR InstName V3
SYMBOL voltage 10752 3024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {VREF}
SYMBOL voltage 11392 3264 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 3.3
SYMBOL cap 11136 3376 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.1p
SYMBOL cap 11136 3456 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.1p
SYMBOL OpAmps\\ADA4945-HP 9328 3376 R0
WINDOW 3 92 85 Left 2
SYMATTR InstName U2
SYMBOL voltage 8192 3248 R0
WINDOW 3 -34 85 Right 2
WINDOW 123 36 87 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {VinAmp/2} {VinFreq})
SYMATTR Value2 AC 1
SYMATTR InstName V8
SYMBOL voltage 9024 2640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 5
SYMBOL voltage 9184 2640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value -2.5
SYMBOL voltage 9344 2640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value 1.5
SYMBOL voltage 9504 2640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value 3.3
SYMBOL res 8928 3312 M180
WINDOW 0 31 88 Left 2
WINDOW 3 29 10 Left 2
SYMATTR InstName R1
SYMATTR Value {RF}
SYMBOL res 8480 3168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {(RG/2)}
SYMBOL res 8928 3504 M180
WINDOW 0 30 89 Left 2
WINDOW 3 31 11 Left 2
SYMATTR InstName R3
SYMATTR Value {RF}
SYMBOL res 8464 3392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {(RG/2)}
SYMBOL voltage 8192 3360 R0
WINDOW 3 -38 19 Right 2
WINDOW 123 14 103 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {VinAmp/2} {VinFreq})
SYMATTR Value2 AC 1
SYMATTR InstName V13
SYMBOL voltage 7728 3360 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vicm
SYMATTR Value 0
SYMBOL cap 9008 3232 R0
WINDOW 3 27 58 Left 2
SYMATTR Value {CFilt_2}
SYMATTR InstName C3
SYMBOL cap 9008 3408 R0
WINDOW 3 32 55 Left 2
SYMATTR Value {CFilt_2}
SYMATTR InstName C4
SYMBOL cap 8512 3216 R0
WINDOW 3 27 56 Left 2
SYMATTR Value {CFilt_1}
SYMATTR InstName C5
SYMBOL cap 8512 3456 R0
WINDOW 3 30 57 Left 2
SYMATTR Value {CFilt_1}
SYMATTR InstName C6
SYMBOL res 9824 3312 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 25
SYMBOL res 9808 3424 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 25
SYMBOL res 9824 3200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100
SYMBOL res 9808 3520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL cap 9840 3360 R0
SYMATTR InstName C7
SYMATTR Value 39p
SYMBOL cap 9936 3360 R0
SYMATTR InstName C8
SYMATTR Value 10p
SYMBOL res 8800 3168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {(RG/2)}
SYMBOL res 8800 3392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {(RG/2)}
SYMBOL AD4080 10544 3344 R0
SYMATTR InstName U1
TEXT 8064 4296 Left 2 !.param ac_mag=1
TEXT 11296 3568 Left 2 !.param Tdelay=10n Ts=25n
TEXT 11296 3528 Left 4 ;CNV Pulse
TEXT 10584 4264 Left 2 !.tran 100u
TEXT 7608 3608 Left 2 !.param VinAmp=2.9999 VinFreq=100k
TEXT 9264 4248 Left 2 ;.noise V(vout_dsp) Vicm dec 100 10 200Meg
TEXT 9264 4464 Left 2 ;THESE MEASUREMENTS CALCULATE DYNAMIC RANGE and SNR\nThe result can be found in the "Error Log" file
TEXT 9264 4568 Left 2 !.meas NOISE ad4080_noise_rms INTEG V(onoise) FROM 10 TO {Fmax}
TEXT 9264 4608 Left 2 !.meas rngRMS PARAM 2*VREF/(2*sqrt(2))
TEXT 10656 2920 Left 2 !.param VREF=3
TEXT 9264 4648 Left 2 !.meas ad4080_DYN_rng PARAM 20*log10(rngRMS/ad4080_noise_rms)
TEXT 9264 4528 Left 2 !.param Fmax=95.5Meg
TEXT 8520 3808 Left 2 !.param RF=499 RG=499
TEXT 9264 4688 Left 2 !.meas ENOB PARAM (ad4080_DYN_rng - 1.76)/6.02
TEXT 8520 3840 Left 2 !.param CFilt_1=82pF CFilt_2=56pF
TEXT 8056 4480 Left 2 ;THESE MEASUREMENTS CALCULATE -3dB BW\nThe result can be found in the "Error Log" file
TEXT 8056 4552 Left 2 !.meas AC vout_max MAX MAG(V(vout))
TEXT 8056 4592 Left 2 !.meas AC vout_3db param vout_max/sqrt(2)
TEXT 9272 4424 Left 3 ;ONLY COMPUTES WITH .noise SIM ENABLED
TEXT 8056 4432 Left 3 ;ONLY COMPUTES WITH .ac SIM ENABLED
TEXT 8056 4632 Left 2 !.meas AC bw_3db FIND freq WHEN mag(V(vout))=(vout_3db)
TEXT 7640 3552 Left 4 ;INPUT SIGNAL
TEXT 9176 2496 Left 4 ;FDA SUPPLIES
TEXT 10656 2792 Left 4 ;VREF
TEXT 10656 2824 Left 2 ;Always set to 3V only\nParameterized here so can be used in\nDynamic Range calculation
TEXT 8512 3728 Left 4 ;FDA:  Gain and Filter Setting
TEXT 8384 3032 Left 4 ;FILTER POLE 1
TEXT 8384 3072 Left 2 ;RG, CFilt_1\nSet for required signal BW
TEXT 8896 3032 Left 4 ;FILTER POLE 2
TEXT 8904 3080 Left 2 ;RF, CFilt_2\nSet for required signal BW
TEXT 9664 3024 Left 4 ;ADC Kickback Filter
TEXT 9664 3080 Left 2 ;RF, CFilt_2\nSet for required signal BW
TEXT 8520 3768 Left 2 ;Gain = (RF/RG)
TEXT 8064 4256 Left 2 ;.ac dec 1000 1 100Meg
TEXT 8056 4192 Left 5 ;AC SIMULATION
TEXT 9264 4192 Left 5 ;NOISE SIMULATION
TEXT 10576 4184 Left 5 ;TRANSIENT SIMULATION
TEXT 8056 4384 Left 4 ;3dB BANDWIDTH CALCULATION
TEXT 9264 4376 Left 4 ;DYNAMIC RANGE CALCULATION
TEXT 9264 4280 Left 2 ;.noise V(vout) Vicm dec 100 10 200Meg
LINE Normal 8848 4336 8032 4336 2
LINE Normal 10144 4336 9248 4336 2
LINE Normal 9248 4336 10144 4336 2
LINE Normal 9248 4336 9248 4336 2
RECTANGLE Normal 8016 3664 7584 3520 2
RECTANGLE Normal 8912 2464 9728 2832 2
RECTANGLE Normal 11136 2960 10608 2752 2
RECTANGLE Normal 8672 3616 8352 2992 2
RECTANGLE Normal 9184 3616 8880 2992 2
RECTANGLE Normal 10016 3616 9632 2992 2
RECTANGLE Normal 9088 3888 8432 3680 2
RECTANGLE Normal 11856 3648 11280 3504 2
RECTANGLE Normal 8848 4688 8032 4144 2
RECTANGLE Normal 11264 4352 10544 4144 2
RECTANGLE Normal 10144 4736 9248 4160 2
