Version 4
SHEET 1 2696 1372
WIRE -1120 -832 -1120 -880
WIRE -1008 -832 -1008 -880
WIRE -896 -832 -896 -880
WIRE -1120 -720 -1120 -752
WIRE -1008 -720 -1008 -752
WIRE -1008 -720 -1120 -720
WIRE -896 -720 -896 -752
WIRE -896 -720 -1008 -720
WIRE -1008 -704 -1008 -720
WIRE -192 -672 -224 -672
WIRE -64 -672 -128 -672
WIRE -32 -672 -64 -672
WIRE -544 -624 -688 -624
WIRE -192 -624 -192 -672
WIRE -128 -624 -128 -672
WIRE -64 -624 -64 -672
WIRE -688 -560 -688 -624
WIRE -736 -544 -912 -544
WIRE -736 -496 -784 -496
WIRE 864 -368 784 -368
WIRE 1120 -368 1056 -368
WIRE 1600 -368 1536 -368
WIRE -544 -336 -544 -624
WIRE -512 -336 -544 -336
WIRE -480 -336 -512 -336
WIRE 688 -336 624 -336
WIRE 784 -336 784 -368
WIRE 1056 -336 1056 -368
WIRE 1536 -336 1536 -368
WIRE 688 -320 688 -336
WIRE 736 -320 688 -320
WIRE -912 -304 -912 -544
WIRE -912 -304 -1184 -304
WIRE -688 -304 -688 -480
WIRE -688 -304 -832 -304
WIRE -1184 -272 -1184 -304
WIRE -832 -272 -832 -304
WIRE 736 -272 688 -272
WIRE -512 -256 -544 -256
WIRE -480 -256 -512 -256
WIRE 688 -256 688 -272
WIRE 688 -256 624 -256
WIRE 784 -224 784 -256
WIRE 1056 -224 1056 -256
WIRE 1536 -224 1536 -256
WIRE -1184 -160 -1184 -192
WIRE -832 -160 -832 -192
WIRE -688 -96 -688 -304
WIRE -912 -80 -912 -304
WIRE -736 -80 -912 -80
WIRE 880 -48 784 -48
WIRE 976 -48 928 -48
WIRE -736 -32 -784 -32
WIRE 784 -32 784 -48
WIRE 928 -16 928 -48
WIRE 880 0 880 -48
WIRE -688 32 -688 -16
WIRE -544 32 -544 -256
WIRE -544 32 -688 32
WIRE 784 64 784 48
WIRE 880 64 880 48
WIRE 880 64 784 64
WIRE 928 64 880 64
WIRE -192 80 -192 32
WIRE -192 80 -224 80
WIRE -128 80 -128 32
WIRE 112 80 112 32
WIRE 176 80 176 32
WIRE 176 80 112 80
WIRE 208 80 176 80
WIRE 336 80 336 32
WIRE 784 80 784 64
WIRE -208 224 -320 224
WIRE -64 224 -64 32
WIRE -64 224 -128 224
WIRE -320 368 -320 224
WIRE -208 368 -320 368
WIRE -16 368 -16 32
WIRE -16 368 -128 368
WIRE -320 512 -320 368
WIRE -208 512 -320 512
WIRE 32 512 32 32
WIRE 32 512 -128 512
WIRE -320 576 -320 512
FLAG -784 -496 0
FLAG -784 -32 0
FLAG -1120 -880 P15V
FLAG -1008 -880 N15V
FLAG -896 -880 P5V
FLAG -1008 -704 0
FLAG -224 -672 P15V
FLAG -32 -672 P5V
FLAG 208 80 P5V
FLAG -224 80 N15V
FLAG -128 80 0
FLAG 336 80 0
FLAG -832 -160 0
FLAG -1184 -160 0
FLAG -320 576 0
FLAG 784 -224 0
FLAG 864 -368 AFE_Out
FLAG -512 -336 IN+
FLAG -512 -256 IN-
FLAG 784 80 0
FLAG 976 -48 CoreADC_Noise
FLAG 1056 -224 0
FLAG 1120 -368 RTO_Noise
FLAG 1536 -224 0
FLAG 1600 -368 RTI_Noise
SYMBOL voltage -1120 -848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage -1008 -848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -15
SYMBOL voltage -896 -848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL voltage -832 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vicm
SYMATTR Value {Voffset}
SYMBOL e -688 -576 R0
SYMATTR InstName E1
SYMATTR Value 0.5
SYMBOL e -688 -112 R0
SYMATTR InstName E2
SYMATTR Value 0.5
SYMBOL voltage -1184 -288 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vin
SYMATTR Value SINE(0 {Ampl} 10k)
SYMBOL voltage -112 368 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName VA1
SYMATTR Value {GAIN1}
SYMBOL voltage -112 224 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName VA2
SYMATTR Value {GAIN2}
SYMBOL voltage -112 512 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName VA0
SYMATTR Value {GAIN0}
SYMBOL e 784 -352 R0
SYMATTR InstName E3
SYMATTR Value 1
SYMBOL res 768 -48 R0
SYMATTR InstName R1
SYMATTR Value 60.343
SYMBOL e 928 -32 R0
SYMATTR InstName E4
SYMATTR Value {ADC_Noise}
SYMBOL bv 1056 -352 R0
SYMATTR InstName B1
SYMATTR Value V=V(AFE_Out)+V(CoreADC_Noise)
SYMBOL bv 1536 -352 R0
WINDOW 3 32 130 Left 2
SYMATTR Value V=V(RTO_Noise)/{AFE_GAIN}
SYMATTR InstName B2
SYMBOL ADAQ7768-1 -112 -320 R0
SYMATTR InstName U1
TEXT -2456 256 Left 2 !.param Voffset    = table(ind, 0,5.6, 1,8.8, 2,10.4, 3,11.2, 4,11.6, 5,11.8, 6,11.9)
TEXT -2504 -304 Left 3 ;Simulation Commands:
TEXT -2488 -264 Left 2 ;.noise V(RTI_Noise) Vin dec 100 100 {BW_3dB}
TEXT -2488 -192 Left 2 !.TRAN 200u
TEXT -2488 -224 Left 2 ;.AC dec 100 100 10Meg
TEXT -2480 -16 Left 2 !.meas NOISE noise_integ INTEG V(onoise)
TEXT -2504 -88 Left 3 ;Measurements Commands: (View "Spice Error Log")
TEXT -2488 -48 Left 2 ;RMS Noise:
TEXT -2488 24 Left 2 ;AC - 3dB BW:
TEXT -2456 360 Left 2 ;.param ind=2
TEXT -2456 504 Left 2 !.param GAIN0 = table(ind, 0,0, 1,5, 2,0, 3,5, 4,0, 5,5 ,6,0)
TEXT -2472 56 Left 2 !.meas AC GAIN FIND mag(V(AFE_Out)) AT 100
TEXT -2472 88 Left 2 !.meas AC BW WHEN mag(V(AFE_Out)) = GAIN/sqrt(2)
TEXT -2456 328 Left 2 !.step param ind list 0 1 2 3 4 5 6
TEXT -1080 192 Left 2 ;GAIN2
TEXT -976 192 Left 2 ;GAIN1
TEXT -856 192 Left 2 ;GAIN0
TEXT -752 192 Left 2 ;Gain (V/V)
TEXT -1056 584 Left 2 ;L
TEXT -720 584 Left 2 ;20.8
TEXT -840 536 Left 2 ;H
TEXT -720 536 Left 2 ;10.4
TEXT -720 488 Left 2 ;5.2
TEXT -720 440 Left 2 ;2.6
TEXT -720 392 Left 2 ;1.3
TEXT -720 344 Left 2 ;0.65
TEXT -720 296 Left 2 ;0.325
TEXT -696 240 Center 2 ;SHDN PGA
TEXT -1056 536 Left 2 ;L
TEXT -1056 488 Left 2 ;L
TEXT -1056 440 Left 2 ;L
TEXT -944 536 Left 2 ;L
TEXT -944 584 Left 2 ;L
TEXT -840 584 Left 2 ;L
TEXT -840 488 Left 2 ;L
TEXT -944 392 Left 2 ;L
TEXT -840 392 Left 2 ;L
TEXT -944 344 Left 2 ;L
TEXT -840 296 Left 2 ;L
TEXT -944 488 Left 2 ;H
TEXT -944 440 Left 2 ;H
TEXT -840 440 Left 2 ;H
TEXT -1056 392 Left 2 ;H
TEXT -1056 344 Left 2 ;H
TEXT -1056 296 Left 2 ;H
TEXT -1056 240 Left 2 ;H
TEXT -840 344 Left 2 ;H
TEXT -944 296 Left 2 ;H
TEXT -944 240 Left 2 ;H
TEXT -840 240 Left 2 ;H
TEXT -512 176 Center 2 ;FULL SCALE\nINPUT RANGE
TEXT -576 584 Left 2 ;+/- 0.197
TEXT -576 536 Left 2 ;+/- 0.394
TEXT -576 488 Left 2 ;+/- 0.788
TEXT -576 440 Left 2 ;+/- 1.575
TEXT -576 392 Left 2 ;+/- 3.151
TEXT -576 344 Left 2 ;+/- 6.302
TEXT -576 296 Left 2 ;+/- 12.603
TEXT -520 240 Left 2 ;NA
TEXT -2456 440 Left 2 !.param GAIN2 = table(ind, 0,5, 1,5, 2,5, 3,0, 4,0, 5,0, 6,0)
TEXT -2456 472 Left 2 !.param GAIN1 = table(ind, 0,5, 1,0, 2,0, 3,5, 4,5, 5,0, 6,0)
TEXT -2456 632 Left 2 !.param Ampl    = table(ind, 0,12.603, 1,6.302, 2,3.151, 3,1.575, 4,0.788, 5,0.394, 6,0.197)
TEXT -1168 -1000 Left 3 ;Power Supplies:
TEXT -2504 176 Left 3 ;Control Parameters:
TEXT -2480 296 Left 2 ;Table Indent Param:
TEXT -2480 408 Left 2 ;GAIN2, GAIN1, GAIN0 Parameter Table:
TEXT -2480 592 Left 2 ;Input Signal Amplitude Parameter Table:
TEXT -2480 216 Left 2 ;Input Common Mode Voltage Param:
TEXT -1152 176 Center 2 ;GAIN\nMODE
TEXT -1168 584 Left 2 ;6
TEXT -1168 536 Left 2 ;5
TEXT -1168 488 Left 2 ;4
TEXT -1168 440 Left 2 ;3
TEXT -1168 392 Left 2 ;2
TEXT -1168 344 Left 2 ;1
TEXT -1168 296 Left 2 ;0
TEXT 776 -96 Left 3 ;Core ADC Noise
TEXT -2456 536 Left 2 !.param AFE_GAIN = table(ind, 0,0.325, 1,0.65, 2,1.3, 3,2.6, 4,5.2, 5,10.4 ,6,20.8)
TEXT 1616 -328 Left 2 ;RTI_Noise is approximately equal to ADAQ7768-1 datasheet\nNoise Spectral Density (at 1 kHz) and\nIntegrated Voltage Noise using default test conditions.
TEXT -2472 -808 Left 2 ;This model itself covers only the Analog Front-End (AFE) of the ADAQ7768-1.\nIt does not include the core ADC, mainly because\nLTspice is limited in implementing high order digital filters.\n \nIn this macromodel test fixture, an ADC Noise block was included\nto give an approximation on the noise of a complete ADAQ7768-1.\nAlso consider using ADI's online Noise Tool.\n \nNoise simulation:\nTo integrate noise only up to the brickwall passband,\nthe stop frequency of the .noise command is limited to the BW_3dB parameter.\n \nAC simulation:\nResult only shows the analog front-end filter\nAC response, without digital filter.
TEXT -2504 -848 Left 3 ;Simulation and Measurement Notes:
TEXT 1320 152 Left 2 ;Example ADC settings: (See datasheet for complete list of settings)\nADC Power Mode = Fast\nMCLK = 16.384 MHz, 13.1072 MHz, 12.288 MHz\nMCLK_DIV = 2, 4, 8, 16\nFILTER = Wideband Low Ripple (BW*0.433), Sinc5 (BW*0.204), Sinc3 (BW*0.2617)\nDEC_RATE = 32 to 1024 for Wideband\nDefault ODR = 256 kSPS\nDefault BW_3dB = 110 kHz
TEXT 784 200 Left 2 !.param MCLK=16.384Meg
TEXT 784 232 Left 2 !.param MCLK_DIV=2
TEXT 1144 64 Left 2 !.param ADC_Noise=33*sqrt(16.384Meg/(2*MCLK/MCLK_DIV))
TEXT 784 360 Left 2 !.param BW_3dB=ODR*BW_Factor
TEXT 784 296 Left 2 !.param DEC_RATE=32
TEXT 784 328 Left 2 !.param ODR=MCLK/(MCLK_DIV*DEC_RATE)
TEXT 784 264 Left 2 !.param BW_Factor=0.433
TEXT 792 144 Left 2 ;ADC Settings:
LINE Normal -992 624 -992 160
LINE Normal -880 624 -880 160
LINE Normal -768 624 -768 160
LINE Normal -1216 224 -416 224
LINE Normal -1216 272 -416 272
LINE Normal -1216 320 -416 320
LINE Normal -1216 368 -416 368
LINE Normal -1216 416 -416 416
LINE Normal -1216 464 -416 464
LINE Normal -1216 512 -416 512
LINE Normal -1216 560 -416 560
LINE Normal -608 624 -608 160
LINE Normal -1104 624 -1104 160
RECTANGLE Normal -1280 -128 -2544 -336 2
RECTANGLE Normal -560 -672 -1200 -1024 2
RECTANGLE Normal -1280 128 -2544 -112 2
RECTANGLE Normal -1280 672 -2544 144 2
RECTANGLE Normal 2352 416 736 -128 2
RECTANGLE Normal -2544 -352 -1280 -880 2
