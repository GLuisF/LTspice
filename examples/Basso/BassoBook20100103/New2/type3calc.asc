Version 4
SHEET 1 2068 1136
WIRE -80 -432 -224 -432
WIRE 208 -432 64 -432
WIRE 320 -432 288 -432
WIRE 688 -432 400 -432
WIRE 784 -432 688 -432
WIRE 896 -432 784 -432
WIRE 960 -432 896 -432
WIRE -224 -416 -224 -432
WIRE 784 -400 784 -432
WIRE 896 -368 896 -432
WIRE 0 -352 0 -384
WIRE 112 -352 0 -352
WIRE -224 -288 -224 -336
WIRE 112 -288 112 -352
WIRE 112 -288 -224 -288
WIRE 784 -288 784 -320
WIRE -224 -272 -224 -288
WIRE -64 -208 -64 -384
WIRE 112 -192 112 -288
WIRE 784 -192 784 -224
WIRE 784 -192 112 -192
WIRE 896 -192 896 -288
WIRE 896 -192 784 -192
WIRE 112 -160 112 -192
WIRE 688 -112 688 -432
WIRE 848 -112 688 -112
WIRE 848 -64 848 -112
WIRE 688 32 688 -112
WIRE 352 64 256 64
WIRE 496 64 416 64
WIRE 848 80 848 16
WIRE 256 128 256 64
WIRE 400 128 336 128
WIRE 496 128 496 64
WIRE 496 128 464 128
WIRE 496 176 496 128
WIRE 688 176 688 112
WIRE 688 176 496 176
WIRE 848 176 848 144
WIRE 848 176 688 176
WIRE 496 208 496 176
WIRE 496 208 416 208
WIRE 688 208 688 176
WIRE -64 224 -64 0
WIRE -64 224 -144 224
WIRE 48 224 -64 224
WIRE 256 224 256 128
WIRE 256 224 128 224
WIRE 352 224 256 224
WIRE 496 240 416 240
WIRE -144 256 -144 224
WIRE 496 304 496 240
WIRE -144 336 -144 320
WIRE 496 400 496 384
WIRE 688 400 688 288
WIRE 688 400 496 400
WIRE -144 496 -144 416
WIRE 496 496 496 400
WIRE 496 496 -144 496
WIRE 496 528 496 496
FLAG -224 -272 0
FLAG 112 -160 0
FLAG 960 -432 Vout
FLAG 496 528 0
FLAG -144 224 verr
IOPIN -144 224 Out
SYMBOL voltage -224 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL ind 192 -416 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L
SYMATTR Value 75µ
SYMBOL res 768 -416 R0
SYMATTR InstName Resr
SYMATTR Value 70m
SYMBOL cap 768 -288 R0
SYMATTR InstName Cout
SYMATTR Value 220µ
SYMBOL res 304 -416 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R5
SYMATTR Value 100m
SYMBOL cap 416 48 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C1
SYMATTR Value {C2}
SYMBOL cap 464 112 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C2
SYMATTR Value {C1}
SYMBOL res 352 112 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R1
SYMATTR Value {R2}
SYMBOL voltage 496 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 34 42 Left 0
WINDOW 3 33 67 Left 0
SYMATTR InstName V3
SYMATTR Value 2.5
SYMBOL res 672 16 R0
SYMATTR InstName Rupper
SYMATTR Value {Rupper}
SYMBOL res 672 192 R0
SYMATTR InstName Rlower
SYMATTR Value {Rlower}
SYMBOL ampsimp 384 224 M0
WINDOW 3 -12 40 Left 0
SYMATTR Value AMPSIMP
SYMATTR InstName U2
SYMATTR SpiceModel ""
SYMATTR SpiceLine POLE=30 GAIN=30000 VHIGH=3 VLOW=100mV
SYMBOL ind 32 240 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L1
SYMATTR Value 1kH
SYMBOL cap -160 256 R0
SYMATTR InstName C3
SYMATTR Value 1kF
SYMBOL voltage -144 320 R0
WINDOW 123 33 85 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 34 54 Left 0
WINDOW 3 33 67 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V2
SYMATTR Value ""
SYMBOL res 880 -384 R0
SYMATTR InstName Rload
SYMATTR Value 2.5
SYMBOL PWMVM -32 -400 R0
SYMATTR InstName U3
SYMBOL res 832 -80 R0
SYMATTR InstName R2
SYMATTR Value {R3}
SYMBOL cap 832 80 R0
SYMATTR InstName C4
SYMATTR Value {C3}
SYMBOL gain -64 -80 R270
WINDOW 39 -4 87 VRight 0
SYMATTR SpiceLine Gain = .5
SYMATTR InstName U4
TEXT -520 -1008 Left 0 !.tran 0 5m 1u
TEXT -544 -1088 Left 0 !;ac dec 100 1 1000000
TEXT -512 -632 Left 0 !.include pwmswitch.lib
TEXT -512 -608 Left 0 !.include application.lib
TEXT 1088 -440 Left 0 !.param Rupper = 10k \n+ Rlower=10k \n+fc=5k \n+pm = 45\n+Gfc= -9.2 \n+ps = -146 \n \n+G=10**(-Gfc/20) \n+Boost = pm-(ps)-90\n+pi=3.14159\n+K =(tan((boost/4+45)*pi/180))**2\n+ C2=1/(2*pi*fc*G*Rupper)\n+ C1=C2*(K-1) \n+ R2 =sqrt(K)/(2*pi*fc*C1)\n+ R3 = Rupper/(K-1)\n+ C3 = 1/(2*pi*fc*sqrt(K)*R3)
