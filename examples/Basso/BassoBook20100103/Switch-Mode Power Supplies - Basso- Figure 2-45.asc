Version 4
SHEET 1 1220 1876
WIRE -160 -16 -192 -16
WIRE 16 -16 -160 -16
WIRE 304 -16 240 -16
WIRE 448 -16 384 -16
WIRE 560 -16 448 -16
WIRE 784 -16 560 -16
WIRE 816 -16 784 -16
WIRE 448 32 448 -16
WIRE 560 32 560 -16
WIRE 784 32 784 -16
WIRE -160 80 -160 -16
WIRE 16 80 -48 80
WIRE 448 144 448 96
WIRE -160 224 -160 160
WIRE 192 224 192 112
WIRE 192 224 -160 224
WIRE 448 224 448 208
WIRE 448 224 192 224
WIRE 560 224 560 96
WIRE 560 224 448 224
WIRE -160 256 -160 224
WIRE 784 272 784 112
WIRE 784 272 672 272
WIRE 672 288 672 272
WIRE 320 304 192 304
WIRE 496 304 384 304
WIRE 192 384 192 304
WIRE 224 384 192 384
WIRE 384 384 288 384
WIRE 496 384 496 304
WIRE 496 384 448 384
WIRE 784 384 784 272
WIRE 672 416 672 352
WIRE -512 480 -640 480
WIRE -336 480 -368 480
WIRE -640 544 -640 480
WIRE 496 560 496 384
WIRE 496 560 400 560
WIRE 672 560 672 480
WIRE 672 560 496 560
WIRE 784 560 784 448
WIRE 784 560 672 560
WIRE -48 576 -48 80
WIRE 192 576 192 384
WIRE 192 576 -48 576
WIRE 336 576 192 576
WIRE -512 592 -512 576
WIRE 432 592 400 592
WIRE -640 640 -640 624
WIRE 432 656 432 592
WIRE 192 672 192 576
WIRE 192 672 144 672
WIRE 784 672 784 560
WIRE 432 768 432 736
WIRE 784 768 784 736
WIRE 784 768 432 768
WIRE 784 800 784 768
FLAG -160 256 0
FLAG 816 -16 OUT
IOPIN 816 -16 Out
FLAG -192 -16 IN
IOPIN -192 -16 In
FLAG 784 800 0
FLAG 144 672 Verr
IOPIN 144 672 In
FLAG -512 592 0
FLAG -640 640 0
FLAG -336 480 sin
IOPIN -336 480 Out
SYMBOL voltage -160 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 39 43 Left 0
WINDOW 3 38 73 Left 0
SYMATTR InstName Vin
SYMATTR Value 10V
SYMBOL ind2 288 0 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 4 56 VBottom 0
SYMATTR InstName L1
SYMATTR Value 75µH
SYMBOL res2 768 384 R0
SYMATTR InstName Rupper
SYMATTR Value {Rupper}
SYMBOL res2 432 32 R0
SYMATTR InstName Resr
SYMATTR Value 70m
SYMBOL cap 432 144 R0
SYMATTR InstName Cout
SYMATTR Value 220µF
SYMBOL res2 544 32 R0
SYMATTR InstName Rload
SYMATTR Value 5
SYMBOL res2 768 672 R0
SYMATTR InstName Rlower
SYMATTR Value 10k
SYMBOL voltage 432 640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 45 45 Left 0
WINDOW 3 45 73 Left 0
SYMATTR InstName V2
SYMATTR Value 2.5V
SYMBOL SpecialFunctions\\modulate2 -512 480 R0
WINDOW 0 0 -76 Left 0
WINDOW 39 2 -50 Left 0
SYMATTR InstName A1
SYMATTR SpiceLine mark=25k space=0
SYMBOL Misc\\signal -640 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 0 20m)
SYMBOL bv 784 16 R0
SYMATTR InstName B1
SYMATTR Value V=V(sin)*5m
SYMBOL res2 656 288 R0
SYMATTR InstName R3
SYMATTR Value {R3}
SYMBOL cap 656 416 R0
SYMATTR InstName C3
SYMATTR Value {C3}
SYMBOL res2 224 368 M90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName R2
SYMATTR Value {R2}
SYMBOL cap 384 368 M90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C1
SYMATTR Value {C1}
SYMBOL cap 320 288 M90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C2
SYMATTR Value {C2}
SYMBOL BUCK-CCM-DCM-VM 160 32 R0
WINDOW 39 -142 -121 Left 0
SYMATTR InstName X1
SYMATTR SpiceLine L=75u Fsw=100k
SYMBOL Opamps\\opamp 368 512 M0
WINDOW 0 32 -46 Right 0
WINDOW 39 32 -14 Right 0
WINDOW 40 32 18 Right 0
SYMATTR InstName X2
TEXT -712 800 Left 0 !.tran 0 20m 0
TEXT -712 768 Left 0 !.lib opamp.sub
TEXT -704 -240 Left 0 !.PARAM Rupper=10k\n.PARAM fc=5k\n.PARAM pm=50\n.PARAM Gfc=-2.9\n.PARAM pfc=-150\n \n.PARAM G=10^(-Gfc/20)\n.PARAM boost=pm-(pfc)-90\n.PARAM pi=3.141592\n.PARAM C2=1/(2*pi*fc*G*Rupper)\n.PARAM C1=C2*(fK-1)\n.PARAM R2=sqrt(fK)/(2*pi*fc*C1)+1m
TEXT -704 208 Left 0 !.PARAM R3=Rupper/(fK-1)\n.PARAM C3=1/(2*pi*fc*sqrt(fK)*R3)
TEXT -336 -240 Left 0 ;Warning: here tan() expresion uses radians, LTSpice does not accept radians in tan() expresion\nResolution: any expresion using tan (like fK) must be replaced with the real value or convert radians into degrees\nLTSpice is not very happy with tan() functions because of convergence errors; use direct replacement when possible\n1rad = 57.29578deg (180/pi)
TEXT -704 120 Left 0 ;.PARAM fK=(tan((boost/4+45)*pi/180))^2
TEXT -704 152 Left 0 !.PARAM fK=10.0589386
RECTANGLE Normal 1024 864 -736 -304
