Version 4
SHEET 1 1164 896
WIRE -384 -32 -432 -32
WIRE -144 -32 -384 -32
WIRE 112 -32 80 -32
WIRE 208 -32 112 -32
WIRE 352 -32 288 -32
WIRE 448 -32 352 -32
WIRE 576 -32 528 -32
WIRE -384 0 -384 -32
WIRE -144 0 -144 -32
WIRE 80 0 80 -32
WIRE -384 112 -384 80
WIRE -144 112 -144 80
WIRE -144 112 -384 112
WIRE 80 112 80 80
WIRE 80 112 -144 112
WIRE 576 112 80 112
WIRE -384 224 -432 224
WIRE 272 224 80 224
WIRE -384 288 -384 224
WIRE 80 288 80 224
WIRE -384 432 -384 368
WIRE 80 432 80 368
WIRE 80 432 -384 432
WIRE -384 464 -384 432
WIRE -288 544 -384 544
WIRE 272 544 80 544
WIRE 80 592 80 544
WIRE -384 608 -384 544
WIRE -384 752 -384 688
WIRE 80 752 80 672
WIRE 80 752 -384 752
WIRE -384 784 -384 752
FLAG -384 464 0
FLAG -432 -32 nA
IOPIN -432 -32 BiDir
FLAG 576 -32 nC
IOPIN 576 -32 BiDir
FLAG 576 112 nP
IOPIN 576 112 BiDir
FLAG -432 224 nD
IOPIN -432 224 In
FLAG 272 224 nDC
IOPIN 272 224 Out
FLAG -288 544 nDP
IOPIN -288 544 Out
FLAG 272 544 nDPC
IOPIN 272 544 Out
FLAG -384 784 0
FLAG 112 -32 nCx
FLAG 352 -32 nCz
SYMBOL Misc\\Gpoly -144 96 R180
WINDOW 0 24 104 Left 2
WINDOW 3 272 -48 Right 2
SYMATTR InstName GA
SYMATTR Value Value={V(nDC)/(V(nDC)+V(nDPC))*I(VSense)} ; GA
SYMBOL Misc\\Epoly 80 -16 R0
WINDOW 3 -144 192 Left 2
SYMATTR Value Value={V(nDC)/(V(nDC)+V(nDPC))*V(nA,nP)} ; EC
SYMATTR InstName EC
SYMBOL res -400 272 R0
SYMATTR InstName RDuty
SYMATTR Value 1G
SYMBOL res -400 -16 R0
SYMATTR InstName Rin
SYMATTR Value 1G
SYMBOL res 544 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rout
SYMATTR Value 1m
SYMBOL voltage 192 -32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName VSense
SYMATTR Value 0V
SYMBOL Misc\\Epoly -384 592 R0
WINDOW 0 -112 96 Left 2
WINDOW 3 39 185 Left 2
SYMATTR InstName EDutyP
SYMATTR Value Value={2*{Lsw}*{Fsw}*I(VSense)/(V(nDC)*V(nA,nCx)+1u)-V(nDC)} ; EDutyP
SYMBOL Misc\\Epoly 80 272 R0
SYMATTR InstName EDClamp
SYMATTR Value Value={Limit(V(nD),{DCMin},{DCMax})} ; EDClamp
SYMBOL Misc\\Epoly 80 576 R0
SYMATTR InstName EDPClamp
SYMATTR Value Value={Limit(V(nDP),1-{DCMax},1-V(nDC))} ; EDPClamp
TEXT -400 -112 Left 2 !.Param Lsw=100uH Fsw=100kHz DCMax=0.95 DCMin=0.05
