Version 4
SHEET 1 1188 680
WIRE -336 -208 -416 -208
WIRE -224 -208 -336 -208
WIRE -64 -208 -144 -208
WIRE 0 -208 -64 -208
WIRE 96 -208 0 -208
WIRE 256 -208 176 -208
WIRE 320 -208 256 -208
WIRE 368 -208 320 -208
WIRE 480 -208 368 -208
WIRE 704 -208 480 -208
WIRE 368 -192 368 -208
WIRE -416 -176 -416 -208
WIRE 0 -160 0 -208
WIRE 256 -160 256 -208
WIRE -48 -144 -112 -144
WIRE 480 -144 480 -208
WIRE -208 -128 -208 -160
WIRE -48 -64 -48 -96
WIRE -416 -32 -416 -96
WIRE 0 -32 0 -80
WIRE 256 -32 256 -96
WIRE 368 -32 368 -112
WIRE 480 -32 480 -64
WIRE -160 80 -160 -160
WIRE -112 80 -112 -144
WIRE -112 112 -112 80
WIRE 240 144 224 144
WIRE 336 144 320 144
WIRE 432 144 400 144
WIRE 512 144 480 144
WIRE 608 144 592 144
WIRE 704 144 704 -208
WIRE 704 144 672 144
WIRE -64 176 -96 176
WIRE -64 208 -64 176
WIRE -160 256 -160 80
WIRE -112 256 -112 176
WIRE -112 256 -160 256
WIRE 432 256 432 144
WIRE 432 256 384 256
WIRE 480 256 480 144
WIRE 480 256 432 256
WIRE 560 256 480 256
WIRE 704 256 704 144
WIRE 704 256 640 256
WIRE 224 272 224 144
WIRE 224 272 0 272
WIRE 320 272 224 272
WIRE 432 288 384 288
WIRE 80 304 0 304
WIRE -160 320 -160 256
WIRE 432 320 432 288
WIRE 80 336 80 304
WIRE 432 336 432 320
WIRE 80 432 80 416
WIRE -160 448 -160 400
WIRE 432 464 432 416
FLAG 80 432 0
FLAG 0 272 ctrl
FLAG -160 448 0
FLAG 0 304 t
FLAG -48 -64 0
FLAG 0 -32 0
FLAG -416 -32 0
FLAG 256 -32 0
FLAG 368 -32 0
FLAG -208 -128 0
FLAG -64 208 0
FLAG -336 -208 g
FLAG -64 -208 sw
FLAG 320 -208 out
FLAG -160 80 c
FLAG -112 80 cinv
FLAG 432 464 0
FLAG 480 -32 0
FLAG 432 320 ref
SYMBOL sw -240 -208 R270
SYMATTR InstName S1
SYMBOL sw 0 -64 M180
SYMATTR InstName S2
SYMBOL ind 80 -192 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L1
SYMATTR Value 1µ
SYMBOL cap 240 -160 R0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL voltage -416 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vg
SYMATTR Value 3.3
SYMBOL res 352 -208 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL voltage 80 320 R0
WINDOW 3 -167 151 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 43 57 Left 0
SYMATTR Value PULSE({Vlow} {Vhigh} 0 {Tr} {Ts-Tr} 0 {Ts})
SYMATTR InstName Vsaw
SYMBOL bv -160 304 R0
WINDOW 3 -246 53 Left 0
SYMATTR Value V=if(v(ctrl,t)+0.5,1,0)
SYMATTR InstName Bpwm
SYMBOL Digital\\inv -176 176 R270
WINDOW 0 22 102 Left 0
SYMATTR InstName A1
SYMBOL Opamps\\opamp 352 208 M0
SYMATTR InstName U1
SYMATTR SpiceLine Aol=10K
SYMBOL res 656 240 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL voltage 432 320 R0
WINDOW 0 37 40 Left 0
WINDOW 3 39 73 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value PWL(0 0 500u 1)
SYMBOL cap 400 128 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C2
SYMATTR Value 0.1n
SYMBOL res 336 128 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R3
SYMATTR Value 30k
SYMBOL current 480 -144 R0
WINDOW 3 47 32 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL(0 0A 800u 0A 801u 1A)
SYMATTR InstName I1
SYMBOL res 608 128 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL cap 672 128 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C3
SYMATTR Value 0.5n
TEXT -152 512 Left 0 !.param Fs=1meg Tr={0.9/Fs} Ts={1/Fs} Vlow=1 Vhigh=2
TEXT -152 544 Left 0 !.tran 0 1000u 0 2n
TEXT -312 -304 Left 0 !.model SW SW(Ron=.05 Roff=1Meg Vt=0.5 Vh=0)
TEXT 232 336 Left 0 !.lib opamp.sub
TEXT -56 72 Left 0 ;ECEN4827/5827 PWM controller behavioral model
TEXT -32 -352 Left 0 ;Buck switched-mode DC-DC converter
TEXT 528 -80 Left 0 ;step change in load current
