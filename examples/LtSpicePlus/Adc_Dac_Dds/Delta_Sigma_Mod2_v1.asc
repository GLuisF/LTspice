Version 4
SHEET 1 1956 1060
WIRE -128 48 -176 48
WIRE 32 48 -16 48
WIRE 160 48 112 48
WIRE 192 48 160 48
WIRE 288 48 256 48
WIRE 336 48 288 48
WIRE 416 48 336 48
WIRE 544 48 496 48
WIRE 576 48 544 48
WIRE 672 48 640 48
WIRE 720 48 672 48
WIRE 832 48 720 48
WIRE 928 48 880 48
WIRE 960 48 928 48
WIRE 1232 48 1088 48
WIRE 1504 48 1392 48
WIRE -176 96 -176 48
WIRE 1232 96 1200 96
WIRE 288 112 288 48
WIRE 672 112 672 48
WIRE 960 112 960 48
WIRE 240 128 208 128
WIRE 624 128 592 128
WIRE 880 128 880 48
WIRE 1088 128 1088 48
WIRE 832 144 832 48
WIRE 160 176 160 48
WIRE 240 176 160 176
WIRE 544 176 544 48
WIRE 624 176 544 176
WIRE -176 224 -176 176
WIRE 160 224 160 176
WIRE 288 224 288 192
WIRE 544 224 544 176
WIRE 672 224 672 192
WIRE 832 240 832 192
WIRE 880 240 880 208
WIRE 960 240 960 192
WIRE 1088 240 1088 208
WIRE 160 352 160 304
WIRE 192 352 160 352
WIRE 416 352 400 352
WIRE 544 352 544 304
WIRE 576 352 544 352
WIRE 816 352 800 352
WIRE 416 368 416 352
WIRE 816 368 816 352
WIRE -128 416 -176 416
WIRE -176 448 -176 416
WIRE 416 464 416 448
WIRE 816 464 816 448
WIRE -176 560 -176 528
WIRE 560 688 464 688
WIRE 656 688 560 688
WIRE 704 688 656 688
WIRE 832 688 784 688
WIRE 880 688 832 688
WIRE 1024 688 960 688
WIRE 1072 688 1024 688
WIRE 1200 688 1152 688
WIRE 1280 688 1200 688
WIRE 1344 688 1280 688
WIRE 560 704 560 688
WIRE 1280 704 1280 688
WIRE 464 720 464 688
WIRE 656 720 656 688
WIRE 832 720 832 688
WIRE 1024 720 1024 688
WIRE 1200 720 1200 688
WIRE 464 816 464 800
WIRE 560 816 560 784
WIRE 656 816 656 784
WIRE 832 816 832 784
WIRE 1024 816 1024 784
WIRE 1200 816 1200 784
WIRE 1280 816 1280 784
FLAG 208 128 0
FLAG 288 224 0
FLAG -16 48 x1
IOPIN -16 48 In
FLAG 192 352 ref1b
IOPIN 192 352 In
FLAG 1200 96 C1
FLAG 1088 240 0
FLAG 816 464 0
FLAG 576 352 ref1
IOPIN 576 352 In
FLAG -128 48 x1
FLAG -176 224 0
FLAG -176 560 0
FLAG -128 416 C1
FLAG 1504 48 Y1
IOPIN 1504 48 Out
FLAG 592 128 0
FLAG 672 224 0
FLAG 720 48 i2
FLAG 416 464 0
FLAG 880 240 0
FLAG 960 240 0
FLAG 832 240 0
FLAG 928 48 c2
FLAG 336 48 i1
FLAG 800 352 ref1
IOPIN 800 352 Out
FLAG 400 352 ref1b
IOPIN 400 352 Out
FLAG 656 816 0
FLAG 832 816 0
FLAG 1024 816 0
FLAG 1200 816 0
FLAG 1280 816 0
FLAG 560 816 0
FLAG 1344 688 FOUT
IOPIN 1344 688 Out
FLAG 464 816 0
SYMBOL res 16 64 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rb1
SYMATTR Value {Rb1}
SYMBOL res 176 320 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Ra1
SYMATTR Value {Ra1}
SYMBOL e 288 96 R0
SYMATTR InstName E1
SYMATTR Value 1e5
SYMBOL cap 192 64 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL Digital\\dflop 1312 0 R0
SYMATTR InstName A1
SYMATTR SpiceLine td=1n
SYMBOL bv 1088 112 R0
SYMATTR InstName B1
SYMATTR Value V=0.5+tanh(1e5*V(c2))
SYMBOL bv 816 352 R0
SYMATTR InstName Bsw2
SYMATTR Value V=if(V(Y1)>0.5,{REFH},{REFL})
SYMBOL voltage -176 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 .8 1k)
SYMBOL voltage -176 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 1p 1p .5u 1u)
SYMBOL res 400 64 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rc1
SYMATTR Value {Rc1}
SYMBOL res 560 320 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Ra2
SYMATTR Value {Ra2}
SYMBOL e 672 96 R0
SYMATTR InstName E2
SYMATTR Value 1e5
SYMBOL cap 576 64 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL bv 416 352 R0
SYMATTR InstName Bsw1
SYMATTR Value V=if(V(Y1)>0.5,{REFL},{REFH})
SYMBOL g 880 112 R0
SYMATTR InstName G1
SYMATTR Value {c2}
SYMBOL res 944 96 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL ind 688 704 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName LF1
SYMATTR Value {LF2}
SYMBOL ind 864 704 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName LF2
SYMATTR Value {LF4}
SYMBOL ind 1056 704 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName KF3
SYMATTR Value {LF2}
SYMBOL cap 816 720 R0
SYMATTR InstName CF2
SYMATTR Value {CF3}
SYMBOL cap 1008 720 R0
SYMATTR InstName CF3
SYMATTR Value {CF3}
SYMBOL cap 1184 720 R0
SYMATTR InstName CF4
SYMATTR Value {CF1}
SYMBOL cap 640 720 R0
SYMATTR InstName CF1
SYMATTR Value {CF1}
SYMBOL Misc\\EuropeanResistor 544 800 M180
WINDOW 0 31 76 Left 0
WINDOW 3 31 40 Left 0
SYMATTR InstName RF1
SYMATTR Value 1
SYMBOL Misc\\EuropeanResistor 1264 688 R0
SYMATTR InstName RF2
SYMATTR Value 1
SYMBOL bi2 464 720 R0
WINDOW 3 -31 149 Left 0
SYMATTR InstName B2
SYMATTR Value I=if(V(Y1)>0.5,2,-2)
TEXT -176 -480 Left 0 !.tran 0 4500u 500u 5n uic
TEXT -176 -448 Left 0 !.options plotwinsize=0
TEXT 184 -480 Left 0 !.param b1=0.25 a1=0.25 a2=0.25 c1=1/3 c2=2\n.param REFH=1 REFL=-1 R0=10k\n.param Rb1=R0/b1 Ra1=R0/a1 Ra2=R0/a2 Rc1=R0/c1
TEXT 608 408 Left 0 ;1*(REFH-REFL)
TEXT 200 408 Left 0 ;-1*(REFH-REFL)
TEXT 112 720 Left 0 !.param fg=20k\n.param CF1=0.07083/(1*fg)\n.param LF2=0.1985*1/fg\n.param CF3=0.2868/(1*fg)\n.param LF4=0.3183*1/fg
TEXT 120 616 Left 0 ;Only for FFT-Test of V(FOUT)
TEXT 280 -240 Left 0 ;INTEG
TEXT 664 -240 Left 0 ;INTEG
TEXT 1288 -256 Left 0 ;A
TEXT 1320 -224 Left 0 ;D
TEXT 864 -240 Left 0 ;c2
TEXT 536 -152 Left 0 ;a2
TEXT 144 -152 Left 0 ;a1
TEXT 448 -240 Left 0 ;c1
TEXT 40 -240 Left 0 ;b1
TEXT -56 -248 Left 0 ;X
TEXT 1432 -256 Left 0 ;Y
TEXT 112 -256 Left 0 ;+
TEXT 168 -200 Left 0 ;-
TEXT 504 -264 Left 0 ;+
TEXT 560 -200 Left 0 ;-
TEXT 1088 -240 Left 0 ;CMP
TEXT -176 -560 Left 0 ;DELTA-SIGMA MODULATOR (ADC)
TEXT -184 8 Left 0 ;TEST SIGNAL
TEXT -104 464 Left 0 ;CLOCK
TEXT -176 -528 Left 0 ;Plot V(FOUT) and make a FFT with 131072 data points.
TEXT 808 -536 Left 0 ;http://en.wikipedia.org/wiki/Delta-sigma_modulation\n \nUnderstanding Delta Sigma Converters\nRichard Schreier, Gabor C. Temes, ISBN 0-471-46585-2\nThe circuit parameters are from page 284 of this book.
LINE Normal 32 -192 32 -288
LINE Normal 80 -240 32 -192
LINE Normal 32 -288 80 -240
LINE Normal 112 -128 160 -176
LINE Normal 128 -128 112 -128
LINE Normal 208 -128 128 -128
LINE Normal 160 -176 208 -128
LINE Normal 504 -128 552 -176
LINE Normal 520 -128 504 -128
LINE Normal 600 -128 520 -128
LINE Normal 552 -176 600 -128
LINE Normal 440 -192 440 -288
LINE Normal 488 -240 440 -192
LINE Normal 440 -288 488 -240
LINE Normal 856 -192 856 -288
LINE Normal 904 -240 856 -192
LINE Normal 856 -288 904 -240
LINE Normal 1080 -160 1080 -320
LINE Normal 1160 -240 1080 -160
LINE Normal 1080 -320 1160 -240
LINE Normal 1360 -288 1264 -192
LINE Normal 264 -240 192 -240
LINE Normal 520 -240 488 -240
LINE Normal 647 -241 583 -241
LINE Normal 856 -238 744 -238
LINE Normal 1080 -239 904 -239
LINE Normal 1408 -237 1360 -237
LINE Normal 1408 -80 1408 -237
LINE Normal 552 -80 1408 -80
LINE Normal 552 -128 552 -80
LINE Normal 160 -80 552 -80
LINE Normal 160 -128 160 -80
LINE Normal 160 -208 160 -176
LINE Normal 552 -208 552 -176
LINE Normal 440 -239 360 -239
LINE Normal 128 -240 80 -240
LINE Normal -32 -240 32 -240
LINE Normal 1264 -240 1160 -240
LINE Normal 1448 -237 1408 -237
RECTANGLE Normal 1472 896 48 592
RECTANGLE Normal 360 -192 264 -288
RECTANGLE Normal 744 -192 648 -288
RECTANGLE Normal 1360 -192 1264 -288
RECTANGLE Normal 1472 496 16 -32
CIRCLE Normal 192 -208 128 -272
CIRCLE Normal 584 -208 520 -272
