Version 4
SHEET 1 1856 820
WIRE 160 -16 -128 -16
WIRE 304 -16 224 -16
WIRE 880 0 592 0
WIRE 1024 0 944 0
WIRE 1568 16 1280 16
WIRE 1712 16 1632 16
WIRE 192 112 192 96
WIRE -256 128 -352 128
WIRE -128 128 -128 -16
WIRE -128 128 -176 128
WIRE -80 128 -128 128
WIRE 48 128 0 128
WIRE 160 128 48 128
WIRE 912 128 912 112
WIRE 304 144 304 -16
WIRE 304 144 224 144
WIRE 464 144 304 144
WIRE 592 144 592 0
WIRE 592 144 544 144
WIRE 640 144 592 144
WIRE 768 144 720 144
WIRE 880 144 768 144
WIRE 1600 144 1600 128
WIRE 160 160 128 160
WIRE 1024 160 1024 0
WIRE 1024 160 944 160
WIRE 1152 160 1024 160
WIRE 1280 160 1280 16
WIRE 1280 160 1232 160
WIRE 1328 160 1280 160
WIRE 1456 160 1408 160
WIRE 1568 160 1456 160
WIRE -352 176 -352 128
WIRE 48 176 48 128
WIRE 880 176 848 176
WIRE 1712 176 1712 16
WIRE 1712 176 1632 176
WIRE 1760 176 1712 176
WIRE 192 192 192 176
WIRE 768 192 768 144
WIRE 1568 192 1536 192
WIRE 912 208 912 192
WIRE 1456 208 1456 160
WIRE 1600 224 1600 208
WIRE 128 256 128 160
WIRE 304 256 304 144
WIRE 304 256 128 256
WIRE 848 272 848 176
WIRE 1024 272 1024 160
WIRE 1024 272 848 272
WIRE -352 288 -352 256
WIRE 48 288 48 240
WIRE 1536 288 1536 192
WIRE 1712 288 1712 176
WIRE 1712 288 1536 288
WIRE 768 304 768 256
WIRE 1456 320 1456 272
WIRE -352 480 -352 432
WIRE -240 480 -240 432
WIRE -352 592 -352 560
WIRE -240 592 -240 560
FLAG 192 96 +5V
FLAG 192 192 -5V
FLAG -352 288 0
FLAG -352 592 0
FLAG -240 592 0
FLAG -352 432 +5V
FLAG -240 432 -5V
FLAG -352 128 in
FLAG 48 288 0
FLAG 912 112 +5V
FLAG 912 208 -5V
FLAG 768 304 0
FLAG 1600 128 +5V
FLAG 1600 224 -5V
FLAG 1760 176 out
IOPIN 1760 176 Out
FLAG 1456 320 0
SYMBOL Opamps\\LT1807 192 80 R0
SYMATTR InstName U1
SYMBOL cap 160 0 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL res -272 144 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value 470
SYMBOL voltage -352 160 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage -352 464 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -240 464 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -5
SYMBOL res -96 144 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R5
SYMATTR Value 470
SYMBOL cap 32 176 R0
SYMATTR InstName C3
SYMATTR Value 100p
SYMBOL Opamps\\LT1807 912 96 R0
SYMATTR InstName U2
SYMBOL cap 880 16 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL res 448 160 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value 470
SYMBOL res 624 160 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R3
SYMATTR Value 470
SYMBOL cap 752 192 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL Opamps\\LT1807 1600 112 R0
SYMATTR InstName U3
SYMBOL cap 1568 32 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL res 1136 176 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value 470
SYMBOL res 1312 176 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL cap 1440 208 R0
SYMATTR InstName C6
SYMATTR Value 100p
TEXT -400 -8 Left 0 !.ac dec 100 1e4 1e7
TEXT -392 32 Left 0 !.op
TEXT -8 376 Left 0 ;Group Delay\n \nTg = -dphi/dw = -dphi/df/2/pi\n \nTg = -d(im(log(H(w)))/dw = -d(im(log(H(w)))/df/2/pi\n \nPlot definition for LTspice with .AC analysis:\n \n.func Tg(x) -d(im(log(x)))/2/pi*1s*1Hz\n \nUsage: "Add trace": Tg(V(out))\nUse plot type "Cartesian" and hide the \nright (imaginary) y-axis scale.
TEXT 672 432 Left 0 ;The second formula of group delay is based on the equation\n \nz = r * exp(i*phi)\n \nlog(z) = log(r) + i*phi\n \nd(log(z))/dw =  d(log(r))/dw + i*dphi/dw\n \nim(d(log(z)))/dw = dphi/dw
TEXT 96 -184 Left 0 ;Making A Group Delay Plot Useful For Data Export Too\n \nYou can use "File->Export" Tg(V(out)) to export the data.\nChoose the "Cartesian(re,im)" format in this dialog window.
