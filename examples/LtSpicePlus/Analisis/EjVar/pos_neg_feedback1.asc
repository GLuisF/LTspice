Version 4
SHEET 1 1792 1860
WIRE -1152 192 -1152 160
WIRE -1152 240 -1152 192
WIRE -1152 352 -1152 320
WIRE -1152 640 -1152 608
WIRE -1152 688 -1152 640
WIRE -1152 800 -1152 768
WIRE -1152 1280 -1152 1232
WIRE -1152 1680 -1152 1648
WIRE -1152 1728 -1152 1680
WIRE -1152 1840 -1152 1808
WIRE -1072 640 -1152 640
WIRE -1072 1680 -1152 1680
WIRE -1056 192 -1152 192
WIRE -1056 1232 -1152 1232
WIRE -832 192 -976 192
WIRE -832 640 -992 640
WIRE -832 1232 -976 1232
WIRE -832 1680 -992 1680
WIRE -800 384 -800 368
WIRE -800 480 -800 464
WIRE -800 1424 -800 1408
WIRE -800 1520 -800 1504
WIRE -768 640 -832 640
WIRE -768 1680 -832 1680
WIRE -752 192 -832 192
WIRE -752 1232 -832 1232
WIRE -288 192 -672 192
WIRE -288 368 -800 368
WIRE -288 368 -288 192
WIRE -288 640 -688 640
WIRE -288 640 -288 368
WIRE -272 1232 -672 1232
WIRE -272 1408 -800 1408
WIRE -272 1408 -272 1232
WIRE -256 368 -288 368
WIRE -240 1408 -272 1408
WIRE -80 1216 -80 1184
WIRE -80 1264 -80 1216
WIRE -80 1376 -80 1344
WIRE -80 1712 -80 1664
WIRE 0 1664 -80 1664
WIRE 16 1216 -80 1216
WIRE 240 1216 96 1216
WIRE 240 1664 80 1664
WIRE 272 1408 272 1392
WIRE 272 1504 272 1488
WIRE 304 1664 240 1664
WIRE 320 1216 240 1216
WIRE 816 1392 272 1392
WIRE 816 1664 384 1664
WIRE 816 1664 816 1392
WIRE 848 1392 816 1392
FLAG -1152 352 0
FLAG -832 192 in-
FLAG -832 640 in+
FLAG -256 368 out
IOPIN -256 368 Out
FLAG -800 480 0
FLAG -1152 800 0
FLAG -1152 160 1
IOPIN -1152 160 In
FLAG -1152 608 2
IOPIN -1152 608 In
FLAG -832 1232 in_-
FLAG -832 1680 in_+
FLAG -240 1408 out_
IOPIN -240 1408 Out
FLAG -800 1520 0
FLAG -1152 1840 0
FLAG -1152 1648 2_
IOPIN -1152 1648 In
FLAG -80 1376 0
FLAG 240 1216 in__-
FLAG 240 1664 in__+
FLAG 848 1392 out__
IOPIN 848 1392 Out
FLAG 272 1504 0
FLAG -80 1712 0
FLAG -80 1184 1__
IOPIN -80 1184 In
FLAG -1152 1280 0
SYMBOL res -1072 208 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -768 208 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -1088 656 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -784 656 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL voltage -1152 224 R0
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage -1152 672 R0
SYMATTR InstName V2
SYMATTR Value 1
SYMBOL bv -800 368 R0
SYMATTR InstName B1
SYMATTR Value V=limit(-10, {GAIN}*V(in+,in-), 10)
SYMBOL res -1072 1248 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1_
SYMATTR Value 10k
SYMBOL res -768 1248 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2_
SYMATTR Value 10k
SYMBOL res -1088 1696 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R3_
SYMATTR Value 10k
SYMBOL voltage -1152 1712 R0
SYMATTR InstName V4
SYMATTR Value 1
SYMBOL bv -800 1408 R0
SYMATTR InstName B2
SYMATTR Value V=limit(-10, {GAIN}*V(in_+,in_-), 10)
SYMBOL res 0 1232 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1__
SYMATTR Value 10k
SYMBOL res -16 1680 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R3__
SYMATTR Value 10k
SYMBOL res 288 1680 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4__
SYMATTR Value 10k
SYMBOL voltage -80 1248 R0
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL bv 272 1392 R0
SYMATTR InstName B3
SYMATTR Value V=limit(-10, {GAIN}*V(in__+,in__-), 10)
TEXT -864 352 Left 0 ;in-
TEXT -864 480 Left 0 ;in+
TEXT -744 312 Left 0 ;Amplifier\nVout=GAIN*V(in+,in-)
TEXT -1160 24 Left 0 !.op
TEXT -864 1408 Left 0 ;in-
TEXT -864 1520 Left 0 ;in+
TEXT -744 1352 Left 0 ;Amplifier\nVout=GAIN*V(in+,in-)
TEXT 208 1392 Left 0 ;in-
TEXT 208 1504 Left 0 ;in+
TEXT 328 1336 Left 0 ;Amplifier\nVout=GAIN*V(in+,in-)
TEXT -904 936 Left 0 ;With correctly connected feedback\nV(1)=0, R4=infinity\n \nVout = (R1+R2)/(R1+(R1+R2)/G)\n \nVout = 1.996V  with GAIN=1000
TEXT 168 928 Left 0 ;With wrongly connected feedback\nV(2)=0, R2=infinity\n \nVout = (R3+R4)/(R3-(R3+R4)/G)\n \nVout = 2.004V  with GAIN=1000
TEXT -1168 -16 Left 0 !.param GAIN=1000
TEXT -920 -72 Left 0 ;The general case with positive and negative feedback\n \nGAIN is the open loop gain of the amplifier.\n \nVout = ( V2*R4/(R3+R4) - V1*R2/(R1+R2) ) / ( 1/GAIN + R1/(R1+R2) - R3/(R3+R4) )\n \nVout = 3.97614V  with R1, R2,R3=10k, R4=20k, G=1000
TEXT -72 192 Left 0 ;Why is the result of the .OP analysis nearly the same\nregardless on which pin the feedback is connected?\n \nThis example shows that there is a theoretical solution \nwith only feedback to the positive input of an amplifier.\nThis solution is only possible in the static calculation \nof an .OP analysis which is done in .OP, .DC, .AC and \n.NOISE analysis of SPICE, but not in a dynamic large\nsignal calculation of a .TRAN analysis. The output voltage \nwould run to the limits of the amplifier in the ladder case.\nHelmut Sennewald
TEXT -464 832 VRight 0 ;C O R R E C T
TEXT -248 784 Left 0 ;B
TEXT -224 808 Left 0 ;A
TEXT -200 832 Left 0 ;D
TEXT -160 872 Left 0 ;I
TEXT -136 896 Left 0 ;D
TEXT -88 944 Left 0 ;A
TEXT -112 920 Left 0 ;E
LINE Normal -928 352 -928 192
LINE Normal -880 352 -928 352
LINE Normal -928 480 -880 480
LINE Normal -928 640 -928 480
LINE Normal -928 1408 -928 1232
LINE Normal -880 1408 -928 1408
LINE Normal -928 1520 -880 1520
LINE Normal -928 1680 -928 1520
LINE Normal 144 1392 144 1216
LINE Normal 192 1392 144 1392
LINE Normal 144 1504 192 1504
LINE Normal 144 1664 144 1504
LINE Normal -496 1072 -496 736
LINE Normal -432 1072 -432 736
LINE Normal -464 1104 -528 1040
LINE Normal -400 1040 -464 1104
LINE Normal -24 1040 -317 750
LINE Normal 16 990 -271 705
LINE Normal 16 1040 -64 1040
LINE Normal 16 944 16 1040
RECTANGLE Normal -336 544 -880 288
RECTANGLE Normal -304 1584 -880 1328
RECTANGLE Normal 784 1568 192 1312
