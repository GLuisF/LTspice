* type
.PARAM BC857=0
.PARAM BC857A=1
.PARAM BC857B=2
.PARAM BC857C=3

* subcircuit type
*.PARAM BJT_SOT23_BEBR_PHI
*.PARAM BJT_SOT23_BEBR_INF

* source of model
* include in toplevel scematic
*.INC ModelSource.def

.SUBCKT BC857 1 2 3 PARAMS: QMODEL={PHI}
Q1 1 2 3 {QMODEL*10+BC857}
.ENDS BC857
.SUBCKT BC857_BEBR_P 1 2 3 PARAMS: QMODEL={PHI} DMODEL={2}
X1 1 2 3 PNP_SOT23_BEBR QMODEL={QMODEL*10+BC857} DMODEL={DMODEL}
.ENDS BC857_BEBR_P

.SUBCKT BC857A 1 2 3 PARAMS: QMODEL={PHI}
Q1 1 2 3 {QMODEL*10+BC857A}
.ENDS BC857A
.SUBCKT BC857A_BEBR_P 1 2 3 PARAMS: QMODEL={PHI} DMODEL={2}
X1 1 2 3 PNP_SOT23_BEBR QMODEL={QMODEL*10+BC857A} DMODEL={DMODEL}
.ENDS BC857A_BEBR_P

.SUBCKT BC857B 1 2 3 PARAMS: QMODEL={PHI}
Q1 1 2 3 {QMODEL*10+BC857B}
.ENDS BC857B
.SUBCKT BC857B_BEBR_P 1 2 3 PARAMS: QMODEL={PHI} DMODEL={2}
X1 1 2 3 PNP_SOT23_BEBR QMODEL={QMODEL*10+BC857B} DMODEL={DMODEL}
.ENDS BC857B_BEBR_P

.SUBCKT BC857C 1 2 3 PARAMS: QMODEL={PHI}
Q1 1 2 3 {QMODEL*10+BC857C}
.ENDS BC857C
.SUBCKT BC857C_BEBR_P 1 2 3 PARAMS: QMODEL={PHI} DMODEL={2}
X1 1 2 3 PNP_SOT23_BEBR QMODEL={QMODEL*10+BC857C} DMODEL={DMODEL}
.ENDS BC857C_BEBR_P

* Transistors
* 10...19 Philips
 .MODEL 10 ako:BC857_PHI
 .MODEL 11 ako:BC857A_PHI
 .MODEL 12 ako:BC857B_PHI
 .MODEL 13 ako:BC857C_PHI
.MODEL BC857_PHI    PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45  BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5E-06 RBM=5E-06 RE=0.663 RC=0.718 XTB=0 EG=1.11 XTI=3 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.5E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.9059)
.MODEL BC857A_PHI   PNP(IS=1.17E-14  NF=0.9972 ISE=1.762E-14 NE=1.661 BF=161.3 IKF=0.15  VAF=59.62 NR=0.9967 ISC=1.506E-13 NC=1.32 BR=6.78 IKR=0.048 VAR=15.4 RB=10 IRB=5E-06 RBM=5 RE=0.689 RC=0.61 XTB=0 EG=1.11 XTI=3 CJE=1.325E-11 VJE=0.8514 MJE=0.3999 TF=8.333E-10 XTF=2.41 VTF=6.262 ITF=0.097 PTF=0 CJC=6.396E-12 VJC=0.2182 MJC=0.333 XCJC=0.6288 TR=7E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.8981)
.MODEL BC857B_PHI   PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45 BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5E-06 RBM=5E-06 RE=0.663 RC=0.718 XTB=0 EG=1.11 XTI=3 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.5E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.9059)
.MODEL BC857C_PHI   PNP(IS=3.258E-14 NF=0.999  ISE=3.003E-15 NE=1.45 BF=515.4 IKF=0.066 VAF=25 NR=0.9985 ISC=4.393E-15 NC=1.2 BR=15.26 IKR=0.039 VAR=8 RB=10 IRB=5E-06 RBM=5 RE=0.7071 RC=0.58 XTB=0 EG=1.11 XTI=3 CJE=1.024E-11 VJE=0.9 MJE=0.453 TF=5.971E-10 XTF=4.137 VTF=6.31 ITF=0.2108 PTF=0 CJC=6.345E-12 VJC=0.4254 MJC=0.423 XCJC=0.6288 TR=3.5E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.78)
.MODEL BC857_PHIP   PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45 BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5E-06 RBM=5E-06 RE=0.663 RC=0.718 XTB=0 EG=1.11 XTI=3 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.5E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.9059) 
.MODEL BC857A_PHIP  PNP(IS=1.17E-14 NF=0.9972 ISE=1.762E-14 NE=1.661 BF=161.3 IKF=0.15 VAF=59.62 NR=0.9967 ISC=1.506E-13 NC=1.32 BR=6.78 IKR=0.048 VAR=15.4 RB=10 IRB=5E-06 RBM=5 RE=0.689 RC=0.61 XTB=0 EG=1.11 XTI=3 CJE=1.325E-11 VJE=0.8514 MJE=0.3999 TF=8.333E-10 XTF=2.41 VTF=6.262 ITF=0.097 PTF=0 CJC=6.396E-12 VJC=0.2182 MJC=0.333 XCJC=0.6288 TR=7E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.8981) 
.MODEL BC857AW_PHIP PNP(IS=1.17E-14 NF=0.9972 ISE=1.762E-14 NE=1.661 BF=161.3 IKF=0.15 VAF=59.62 NR=0.9967 ISC=1.506E-13 NC=1.32 BR=6.78 IKR=0.048 VAR=15.4 RB=10 IRB=5E-06 RBM=5 RE=0.689 RC=0.61 CJE=1.325E-11 VJE=0.8514 MJE=0.3999 TF=8.333E-10 XTF=2.41 VTF=6.262 ITF=0.097 PTF=0 CJC=6.396E-12 VJC=0.2182 MJC=0.333 XCJC=0.6288 TR=7E-08 CJS=0 VJS=0.75 MJS=0.333 XTB=0 XTI=3 EG=1.11 FC=0.8981) 
.MODEL BC857B_PHIP  PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45 BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5E-06 RBM=5E-06 RE=0.663 RC=0.718 XTB=0 EG=1.11 XTI=3 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.5E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.9059) 
.MODEL BC857BW_PHIP PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45 BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5E-06 RBM=5E-06 RE=0.663 RC=0.718 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.5E-08 CJS=0 VJS=0.75 MJS=0.333 XTB=0 XTI=3 EG=1.11 FC=0.9059) 
.MODEL BC857C_PHIP  PNP(IS=3.258E-14 NF=0.999 ISE=3.003E-15 NE=1.45 BF=515.4 IKF=0.066 VAF=25 NR=0.9985 ISC=4.393E-15 NC=1.2 BR=15.26 IKR=0.039 VAR=8 RB=10 IRB=5E-06 RBM=5 RE=0.7071 RC=0.58 XTB=0 EG=1.11 XTI=3 CJE=1.024E-11 VJE=0.9 MJE=0.453 TF=5.971E-10 XTF=4.137 VTF=6.31 ITF=0.2108 PTF=0 CJC=6.345E-12 VJC=0.4254 MJC=0.423 XCJC=0.6288 TR=3.5E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.78) 
.MODEL BC857CW_PHIP PNP(IS=3.258E-14 NF=0.999 ISE=3.003E-15 NE=1.45 BF=515.4 IKF=0.066 VAF=25 NR=0.9985 ISC=4.393E-15 NC=1.2 BR=15.26 IKR=0.039 VAR=8 RB=10 IRB=5E-06 RBM=5 RE=0.7071 RC=0.58 CJE=1.024E-11 VJE=0.9 MJE=0.453 TF=5.971E-10 XTF=4.137 VTF=6.31 ITF=0.2108 PTF=0 CJC=6.345E-12 VJC=0.4254 MJC=0.423 XCJC=0.6288 TR=3.5E-08 CJS=0 VJS=0.75 MJS=0.333 XTB=0 XTI=3 EG=1.11 FC=0.78) 
.MODEL BC857W_PHIP  PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45 BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5E-06 RBM=5E-06 RE=0.663 RC=0.718 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.5E-08 CJS=0 VJS=0.75 MJS=0.333 XTB=0 XTI=3 EG=1.11 FC=0.9059) 
* 20...29 Diodes Inc.
*.MODEL 20 ako:BC857_DIO not available
 .MODEL 21 ako:BC857A_DIO
*.MODEL 21 ako:BC857AT_DIO
 .MODEL 22 ako:BC857B_DIO
*.MODEL 22 ako:BC857BLP_DIO
*.MODEL 22 ako:BC857BS_DIO
*.MODEL 22 ako:BC857BV_DIO
 .MODEL 23 ako:BC857C_DIO
*.MODEL 23 ako:BC857CT_DIO
.MODEL BC857A_DIO   PNP(IS=10.2f     NF=1.00 BF=342   VAF=121  IKF=72.9m ISE=5.59p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=0.180 RE=0.715 RB=2.86 RC=0.286 XTB=1.5 CJE=13.3p VJE=1.10 MJE=0.500 CJC=7.80p VJC=0.300 MJC=0.300 TF=581p TR=97.8n EG=1.12)
.MODEL BC857AT_DIO  PNP(IS=10.2f     NF=1.00 BF=342   VAF=121  IKF=72.9m ISE=5.59p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=0.180 RE=0.715 RB=2.86 RC=0.286 XTB=1.5 CJE=37.6p VJE=1.10 MJE=0.500 CJC=12.1p VJC=0.300 MJC=0.300 TF=488p TR=97.8n EG=1.12)
.MODEL BC857B_DIO   PNP(IS=5.51f     NF=1.00 BF=424   VAF=121  IKF=36.4m ISE=2.35p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=90.0m RE=0.765 RB=3.06 RC=0.306 XTB=1.5 CJE=26.9p VJE=1.10 MJE=0.500 CJC=8.67p VJC=0.300 MJC=0.300 TF=700p TR=121n  EG=1.12)
.MODEL BC857BLP_DIO PNP(IS=3.72f     NF=1.00 BF=650   VAF=121  IKF=54.7m ISE=1.54p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=0.135 RE=1.06  RB=4.26 RC=0.426 XTB=1.5 CJE=26.8p VJE=1.10 MJE=0.500 CJC=8.67p VJC=0.300 MJC=0.300 TF=221p TR=49.1n EG=1.12)
.MODEL BC857BS_DIO  PNP(IS=10.2f     NF=1.00 BF=650   VAF=121  IKF=42.5m ISE=2.25p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=0.105 RE=0.715 RB=2.86 RC=0.286 XTB=1.5 CJE=13.3p VJE=1.10 MJE=0.500 CJC=7.80p VJC=0.300 MJC=0.300 TF=586p TR=95.9n EG=1.12)
.MODEL BC857BV_DIO  PNP(IS=10.2f     NF=1.00 BF=650   VAF=121  IKF=42.5m ISE=2.25p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=0.105 RE=0.715 RB=2.86 RC=0.286 XTB=1.5 CJE=37.6p VJE=1.10 MJE=0.500 CJC=12.1p VJC=0.300 MJC=0.300 TF=499p TR=95.9n EG=1.12)
.MODEL BC857C_DIO   PNP(IS=10.2f     NF=1.00 BF=1.09k VAF=121  IKF=36.4m ISE=1.24p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=90.0m RE=0.715 RB=2.86 RC=0.286 XTB=1.5 CJE=13.3p VJE=1.10 MJE=0.500 CJC=7.80p VJC=0.300 MJC=0.300 TF=587p TR=95.0n EG=1.12)
.MODEL BC857CT_DIO  PNP(IS=10.2f     NF=1.00 BF=1.09k VAF=121  IKF=36.4m ISE=1.24p NE=2.00 BR=4.00 NR=1.00 VAR=20.0 IKR=90.0m RE=0.715 RB=2.86 RC=0.286 XTB=1.5 CJE=30.8p VJE=1.10 MJE=0.500 CJC=12.1p VJC=0.300 MJC=0.300 TF=526p TR=95.0n EG=1.12)
* 30...39 Infineon
 .MODEL 30 ako:BC857_INF
*.MODEL 31 ako:BC857A_INF not available
 .MODEL 31 ako:BC857A_INFP
*.MODEL 32 ako:BC857B_INF not available
 .MODEL 32 ako:BC857B_INFP
*.MODEL 33 ako:BC857C_INF not available
 .MODEL 33 ako:BC857C_INFP
.MODEL BC857_INF PNP(IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380 ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932 ISC=0.125P NC=2.074 RB=2.200 IRB=0.100M RBM=1.500 RE=0.300 RC=2.251 CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750 CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650 TF=0.600N TR=2.604N PTF=1.000 XTF=6.500 VTF=2.000 ITF=0.314 XTB=1.600 EG=1.110 XTI=3.300 KF=5.000F AF=1.000)
* PSPICE: .MODEL BC857_INFP  PNP(IS=1.32E-14 AF=1.00E+00 BF=1.96E+02 BR=3.38E+00 CJC=9.80E-12 CJE=1.56E-11 CJS=0.00E+00 EG=1.11E+00 FC=8.28E-01 IKF=8.35E-01 IKR=1.60E-02 IRB=1.31E-06 ISC=7.71E-14 ISE=8.44E-13 ITF=2.14E-01 KF=0.00E+00 MJC=3.49E-01 MJE=4.18E-01 MJS=3.30E-01 NC=1.19E+00 NE=1.83E+00 NF=1.00E+00 NR=1.00E+00 PTF=0.00E+00 RB=1.00E-02 RBM=1.00E-02 RC=1.52E+00 RE=3.00E-02 TF=6.05E-10 TR=0.00E+00 VAF=5.90E+01 VAR=1.74E+01 VJC=3.00E-01 VJE=8.00E-01 VJS=7.50E-01 VTF=4.39E+00 XCJC=1.00E+00 XTB=0.00E+00 XTF=5.81E+00 XTI=3.00E+00)
.model BC857A_INFP PNP(Is=336.7f Xti=3 Eg=1.11 Vaf=106.8 Bf=180.6 Ise=2.666p Ne=1.944 Ikf=.1094 Nk=.4986 Xtb=1.5 Br=7.16 Isc=196p Nc=1.815 Ikr=9.677 Rc=2.791 Cjc=11.51p Mjc=.3626 Vjc=.5 Fc=.5 Cje=8.397p Mje=.3865 Vje=.5 Tr=10n Tf=605.1p Itf=2.326 Xtf=20.43 Vtf=10)
.model BC857B_INFP PNP(Is=336.7f Xti=3 Eg=1.11 Vaf=62.37 Bf=277.7 Ise=1.966p Ne=2.123 Ikf=.1686 Nk=.545  Xtb=1.5 Br=7.16 Isc=196p Nc=1.815 Ikr=9.677 Rc=2.891 Cjc=11.51p Mjc=.3626 Vjc=.5 Fc=.5 Cje=8.397p Mje=.3865 Vje=.5 Tr=10n Tf=605.9p Itf=2.133 Xtf=23.02 Vtf=10)
.model BC857C_INFP PNP(Is=336.7f Xti=3 Eg=1.11 Vaf=29.03 Bf=462.2 Ise=1.648p Ne=2.405 Ikf=.1165 Nk=.5254 Xtb=1.5 Br=7.16 Isc=196p Nc=1.815 Ikr=9.677 Rc=2.791 Cjc=11.51p Mjc=.3626 Vjc=.5 Fc=.5 Cje=8.397p Mje=.3865 Vje=.5 Tr=10n Tf=605.4p Itf=3.088 Xtf=41.48 Vtf=10)
* 40...49 On Semiconductors
*.MODEL 40 ako:BC857_ONS not available
*.MODEL 41 ako:BC857A_ONS not available
 .MODEL 42 ako:BC857B_ONS
*.MODEL 42 ako:BC857Bdw1t1_ONS
*.MODEL 43 ako:BC857C_ONS not available
.MODEL BC857B_ONS      PNP(IS=1.68077e-12 BF=3385    NF=1.2121  VAF=196.745 IKF=1.30809   ISE=1.76095e-13 NE=1.56412 BR=99.5231 NR=1.23271 VAR=0.978236 IKR=10       ISC=1.76095e-13 NC=1.21727 RB=17.2944 IRB=0.1 RBM=0.1 RE=0.354597 RC=1.77298 XTB=0.100946 XTI=1 EG=1.05 CJE=1.13417e-11 VJE=0.654776 MJE=0.23     TF=5.99604e-10 XTF=1000    VTF=3935.03 ITF=31.8969 CJC=9.54039e-12 VJC=0.4 MJC=0.408114 XCJC=0.910091 FC=0.8 CJS=0 VJS=0.75 MJS=0.5 TR=1e-07 PTF=0 KF=0 AF=1)
.MODEL BC857Bdw1t1_ONS PNP(IS=1.39221e-11 BF=2456.66 NF=1.40937 VAF=1000    IKF=0.0475031 ISE=2.06918e-12 NE=1.84548 BR=3.20229 NR=1.5     VAR=22.0584  IKR=0.475031 ISC=2.06918e-12 NC=3.69802 RB=12.2677 IRB=0.1 RBM=0.1 RE=0.456435 RC=2.28218 XTB=50       XTI=1 EG=1.05 CJE=1.14641e-11 VJE=0.648943 MJE=0.248528 TF=5.9789e-10  XTF=275.711 VTF=100000  ITF=5.61426 CJC=9.36351e-12 VJC=0.4 MJC=0.414973 XCJC=0.913978 FC=0.8 CJS=0 VJS=0.75 MJS=0.5 TR=1e-07 PTF=0 KF=0 AF=1)
* 50...59 Zetex
*.MODEL 50 ako:BC857_ZTX not available
 .MODEL 51 ako:BC857A_ZTX
*.MODEL 52 ako:BC857B_ZTX not available
*.MODEL 53 ako:BC857C_ZTX not available
.MODEL BC857A_ZTX  PNP(IS=1.149E-14 ISE=5E-14 NF=.9872 NE=1.4 BF=330 BR=13 IKF=.1 IKR=.012 ISC=1.43E-14 NC=1.1 NR=.996 RB=.2 RE=.4 RC=.95 VAR=8.15 VAF=84.56 CJE=16E-12 TF=.493E-9 CJC=10.5E-12 TR=73.55E-9 MJC=.415 VJC=.565)

* Z-Diodes for BE breakdown
* 1...9 D for V(BR)EB0
* Philips
.MODEL 1 ako:VBREB0_PHI
.MODEL 2 ako:VBREB0_MYPHI
.MODEL 3 ako:VBREB0_HEL
.MODEL VBREB0_PHI   D(IS=2.593E-14 N=1.296 BV=1000 IBV=0.001 RS=100 CJO=0 VJ=1 M=0.5 FC=0 TT=0 XTI=2 EG=1.11 XTI=2)
* modified Philips
.MODEL VBREB0_MYPHI D(IS=2.593E-14 N=1.296 BV=5 IBV=0.001 RS=100 CJO=0 VJ=1 M=0.5 FC=0 TT=0 XTI=2 EG=1.11 XTI=2)
* Helmut Sennewald (Choose IS of the diode a factor of 10^-10 lower than IS of the transistor.)
.MODEL VBREB0_HEL   D(Is=2e-24 BV=5 IBV=1m RS=20)

* general subcircuit
.LIB PackagedSpecial.sub

