Version 4
SHEET 1 880 752
WIRE -176 128 -256 128
WIRE -160 128 -176 128
WIRE -256 144 -256 128
WIRE -416 176 -432 176
WIRE -304 176 -416 176
WIRE -32 176 -48 176
WIRE -16 176 -32 176
WIRE 96 176 64 176
WIRE 112 176 96 176
WIRE 176 176 160 176
WIRE 192 176 176 176
WIRE -432 192 -432 176
WIRE -304 192 -304 176
WIRE -160 192 -160 128
WIRE -48 192 -48 176
WIRE 112 192 112 176
WIRE 160 192 160 176
WIRE -256 240 -256 224
WIRE -240 240 -256 240
WIRE -256 256 -256 240
WIRE -432 288 -432 272
WIRE -304 288 -304 272
WIRE -304 288 -432 288
WIRE -48 288 -48 272
WIRE 112 288 112 272
WIRE 112 288 -48 288
WIRE 160 288 160 272
WIRE -432 304 -432 288
WIRE -48 304 -48 288
WIRE -256 352 -256 336
WIRE -176 352 -256 352
WIRE -160 352 -160 272
WIRE -160 352 -176 352
WIRE -304 400 -320 400
WIRE 128 400 112 400
WIRE 144 400 128 400
WIRE 240 400 192 400
WIRE 288 400 240 400
WIRE -304 416 -304 400
WIRE 112 416 112 400
WIRE 192 416 192 400
WIRE 288 416 288 400
WIRE 144 432 144 400
WIRE -304 512 -304 496
WIRE 112 512 112 496
WIRE 144 512 144 480
WIRE 192 512 192 496
WIRE 288 512 288 480
FLAG -432 304 0
FLAG -240 240 0
FLAG -304 512 0
FLAG -304 400 coreA
FLAG -416 176 1
FLAG -176 128 2
FLAG -176 352 3
FLAG -48 304 0
FLAG -32 176 4
FLAG 112 512 0
FLAG 128 400 coreB
FLAG 176 176 6
FLAG 160 288 0
FLAG 96 176 5
FLAG 144 512 0
FLAG 192 512 0
FLAG 288 512 0
FLAG 240 400 fluxB
SYMBOL ind2 -288 288 R180
WINDOW 0 36 80 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Wa1
SYMATTR Value n=1
SYMATTR Prefix X
SYMATTR Type ind
SYMATTR SpiceModel coreAwinding
SYMBOL voltage -432 176 R0
WINDOW 0 36 56 Left 0
WINDOW 3 24 148 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 24 126 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 1 5k)
SYMATTR SpiceLine Rser=1m
SYMBOL res -176 176 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL ind2 -272 240 M180
WINDOW 0 36 80 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Wa2
SYMATTR Value n=2
SYMATTR Prefix X
SYMATTR Type ind
SYMATTR SpiceModel coreAwinding
SYMBOL ind -288 400 M0
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL ind2 -272 352 M180
WINDOW 0 36 80 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Wa3
SYMATTR Value n=2
SYMATTR Prefix X
SYMATTR Type ind
SYMATTR SpiceModel coreAwinding
SYMBOL ind2 128 288 R180
WINDOW 0 36 80 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Wb1
SYMATTR Value n=10
SYMATTR Prefix X
SYMATTR Type ind
SYMATTR SpiceModel coreBwinding
SYMBOL ind2 144 288 M180
WINDOW 0 36 80 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Wb2
SYMATTR Value n=10
SYMATTR Prefix X
SYMATTR Type ind
SYMATTR SpiceModel coreBwinding
SYMBOL voltage -48 176 R0
WINDOW 0 36 56 Left 0
WINDOW 3 24 148 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 24 126 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(1 1 5k)
SYMBOL ind 128 400 M0
WINDOW 123 36 102 Left 0
SYMATTR InstName L2
SYMATTR Value n=1 Hc=16 Bs=.44 Br=0.1
SYMATTR Value2 A=25u Lm=20m Lg=0m7
SYMBOL res 80 160 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R2
SYMATTR Value 30m
SYMBOL g 192 400 R0
WINDOW 0 32 24 Left 0
WINDOW 3 8 98 Left 0
SYMATTR InstName G1
SYMATTR Value {1u/25u}
SYMBOL cap 272 416 R0
SYMATTR InstName C1
SYMATTR Value 1µ
TEXT -424 584 Left 0 !.subckt coreAwinding 2 1 params: n=1\n.global coreA\nE1 1 3 coreA 0 {n}\nV1 3 2 0\nF1 0 coreA V1 {n}\n.ends
TEXT -456 128 Left 0 !.tran 0 1m 1u uic
TEXT -224 432 Center 0 ;Linear core\nexample\n(uninteresting)
TEXT -440 -16 Left 0 ;Note: This model uses the standard inductor symbol edited to appear as a winding \nsubcircuit on a core (connected through a global node).  The core may be linear or \nnonlinear (e.g.,  LTspice's built in Chan model) and may have as many windings as \nrequired.  Due to the use of a global core node (which must be different for each \ncore), a different subcircuit is required for each core.
TEXT -64 584 Left 0 !.subckt coreBwinding 2 1 params: n=1\n.global coreB\nE1 1 3 coreB 0 {n}\nV1 3 2 0\nF1 0 coreB V1 {n}\n.ends
TEXT -16 400 Center 0 ;Nonlinear\nChan core\nexample
TEXT 240 528 Top 0 ;Gain = C/Ac
TEXT 88 528 Right 0 ;Note: core turns must be 1
TEXT 240 344 Center 0 ;Flux Calculation\n(optional)
TEXT -72 -112 Center 0 ;Building a Multi-Winding Saturating Core \nTransformer Model in LTspice\n(analogspiceman - Dec 2006)
LINE Normal -288 320 -288 160
LINE Normal -272 160 -272 320
LINE Normal 128 272 128 192
LINE Normal 144 192 144 272
RECTANGLE Normal 368 736 -512 -144
