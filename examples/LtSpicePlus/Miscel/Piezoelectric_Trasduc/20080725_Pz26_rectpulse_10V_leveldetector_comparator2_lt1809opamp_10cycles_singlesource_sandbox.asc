Version 4
SHEET 1 2268 1780
WIRE 1136 -720 864 -720
WIRE 1456 -720 1136 -720
WIRE 1968 -720 1456 -720
WIRE 1136 -688 1136 -720
WIRE 1136 -592 1136 -608
WIRE 1296 -592 1136 -592
WIRE 1904 -592 1296 -592
WIRE -1008 -576 -1536 -576
WIRE -848 -576 -928 -576
WIRE -816 -576 -848 -576
WIRE 1136 -576 1136 -592
WIRE 864 -560 864 -720
WIRE 864 -560 704 -560
WIRE -1056 -512 -1072 -512
WIRE -816 -512 -1056 -512
WIRE -576 -512 -720 -512
WIRE -448 -512 -480 -512
WIRE -400 -512 -448 -512
WIRE -240 -512 -304 -512
WIRE -192 -512 -240 -512
WIRE 32 -512 -96 -512
WIRE 416 -512 128 -512
WIRE 512 -512 416 -512
WIRE -576 -480 -672 -480
WIRE -400 -480 -480 -480
WIRE -192 -480 -304 -480
WIRE -32 -480 -96 -480
WIRE 864 -480 864 -560
WIRE 1136 -480 1136 -496
WIRE 1296 -480 1136 -480
WIRE 1456 -480 1456 -720
WIRE 1456 -480 1440 -480
WIRE -1072 -464 -1072 -512
WIRE 1136 -464 1136 -480
WIRE -672 -448 -672 -480
WIRE -400 -448 -400 -480
WIRE -304 -448 -304 -480
WIRE -32 -448 -32 -480
WIRE 160 -448 128 -448
WIRE 192 -448 160 -448
WIRE 336 -448 192 -448
WIRE 192 -416 192 -448
WIRE 512 -416 512 -432
WIRE -1536 -384 -1536 -576
WIRE 864 -368 864 -400
WIRE 1136 -368 1136 -384
WIRE 1968 -352 1968 -720
WIRE 1968 -352 1952 -352
WIRE 704 -336 704 -560
WIRE 704 -336 416 -336
WIRE 192 -304 192 -336
WIRE 1440 -304 1440 -480
WIRE 1456 -304 1456 -480
WIRE 384 -288 288 -288
WIRE 1296 -288 1296 -480
WIRE 1408 -288 1296 -288
WIRE 1696 -272 1472 -272
WIRE 1728 -272 1696 -272
WIRE -1536 -256 -1536 -304
WIRE 576 -256 528 -256
WIRE 784 -256 576 -256
WIRE 992 -256 784 -256
WIRE 1136 -256 1056 -256
WIRE 1216 -256 1136 -256
WIRE 1296 -256 1216 -256
WIRE 1408 -256 1296 -256
WIRE 1728 -240 1728 -272
WIRE 336 -224 336 -448
WIRE 384 -224 336 -224
WIRE 1136 -208 1136 -256
WIRE 1296 -208 1296 -256
WIRE 1424 -208 1424 -240
WIRE 1440 -208 1440 -240
WIRE 1440 -208 1424 -208
WIRE 1456 -208 1456 -240
WIRE 1456 -208 1440 -208
WIRE 1952 -176 1952 -352
WIRE 1968 -176 1968 -352
WIRE 1904 -160 1904 -592
WIRE 1920 -160 1904 -160
WIRE 2176 -144 1984 -144
WIRE 1728 -128 1728 -160
WIRE 1840 -128 1728 -128
WIRE 1920 -128 1840 -128
WIRE -1472 -96 -1536 -96
WIRE -1408 -96 -1472 -96
WIRE -544 -96 -608 -96
WIRE -480 -96 -544 -96
WIRE 208 -96 176 -96
WIRE 288 -96 288 -288
WIRE 400 -96 288 -96
WIRE 576 -96 576 -256
WIRE 576 -96 480 -96
WIRE 1728 -80 1728 -128
WIRE 1936 -80 1936 -112
WIRE 1952 -80 1952 -112
WIRE 1952 -80 1936 -80
WIRE 1968 -80 1968 -112
WIRE 1968 -80 1952 -80
WIRE 2176 -80 2176 -144
WIRE -1536 -64 -1536 -96
WIRE -608 -64 -608 -96
WIRE 1136 -64 1136 -144
WIRE 1296 -64 1296 -128
WIRE 1296 -64 1136 -64
WIRE 1456 -64 1456 -208
WIRE 1456 -64 1296 -64
WIRE 1136 -16 1136 -64
WIRE 1728 32 1728 -16
WIRE 1952 32 1952 -80
WIRE 2176 32 2176 0
WIRE -1472 80 -1536 80
WIRE -1408 80 -1472 80
WIRE -544 80 -608 80
WIRE -480 80 -544 80
WIRE -1536 112 -1536 80
WIRE -608 112 -608 80
WIRE -1472 256 -1536 256
WIRE -1408 256 -1472 256
WIRE -544 256 -608 256
WIRE -480 256 -544 256
WIRE -1536 288 -1536 256
WIRE -608 288 -608 256
WIRE -1472 432 -1536 432
WIRE -1408 432 -1472 432
WIRE -544 432 -608 432
WIRE -480 432 -544 432
WIRE -1536 464 -1536 432
WIRE -608 464 -608 432
WIRE -1472 608 -1536 608
WIRE -1408 608 -1472 608
WIRE -544 608 -608 608
WIRE -480 608 -544 608
WIRE -1536 640 -1536 608
WIRE -608 640 -608 608
FLAG -448 -512 frontT
FLAG -304 -448 0
FLAG -400 -448 0
FLAG 512 -416 0
FLAG -240 -512 frontR
FLAG 416 -512 backR
FLAG -848 -576 in
FLAG 160 -448 out
FLAG 192 -304 0
FLAG -672 -448 0
FLAG -32 -448 0
FLAG -1072 -384 0
FLAG -1056 -512 backT
FLAG 1136 -16 0
FLAG -1536 -256 0
FLAG 1216 -256 Detector
FLAG -1472 -96 Pulse00
FLAG -1472 80 Pulse01
FLAG -1472 256 Pulse02
FLAG -1472 432 Pulse03
FLAG -1536 16 0
FLAG -1536 192 0
FLAG -1536 368 0
FLAG -1536 544 0
FLAG -544 -96 Pulse05
FLAG -608 16 0
FLAG -544 80 Pulse06
FLAG -608 192 0
FLAG -544 256 Pulse07
FLAG -608 368 0
FLAG -544 432 Pulse08
FLAG -608 544 0
FLAG -1472 608 Pulse04
FLAG -1536 720 0
FLAG -544 608 Pulse09
FLAG -608 720 0
FLAG 1696 -272 comparator
FLAG 1728 32 0
FLAG 1952 32 0
FLAG 2176 32 0
FLAG 2176 -144 comparator2
FLAG 1840 -128 filter
FLAG 784 -256 Ampout
FLAG 416 -176 0
FLAG 176 -96 0
FLAG 1296 -480 Threshold_1
FLAG 1296 -592 Threshold_2
FLAG 864 -368 0
FLAG 1136 -368 0
SYMBOL res 496 -528 R0
SYMATTR InstName RBR
SYMATTR Value {z0RB}
SYMBOL ltline -352 -496 R0
WINDOW 3 -3 -81 Center 0
SYMATTR Value LossyAluminiumTline
SYMATTR InstName O1
SYMBOL res 176 -432 R0
SYMATTR InstName R1
SYMATTR Value 75
SYMBOL PZTtrans -768 -544 R0
SYMATTR InstName U1
SYMBOL PZTrec 80 -480 R180
SYMATTR InstName U2
SYMBOL ltline -528 -496 R0
SYMATTR InstName O2
SYMATTR Value LossyBondTlineT
SYMBOL ltline -144 -496 R0
SYMATTR InstName O3
SYMATTR Value LossyBondTlineR
SYMBOL res -1088 -480 R0
SYMATTR InstName RBT
SYMATTR Value {z0TB}
SYMBOL voltage -1024 -576 R270
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL diode 992 -240 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 1120 -208 R0
SYMATTR InstName C1
SYMATTR Value 270p
SYMBOL res 1280 -224 R0
SYMATTR InstName R2
SYMATTR Value 20e3
SYMBOL voltage -1536 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 {Bit00*pulseamp} 1e-6 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -1536 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 {Bit01*pulseamp} {1e-6+1*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -1536 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 {Bit02*pulseamp} {1e-6+2*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -1536 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 {Bit03*pulseamp} {1e-6+3*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -608 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 {Bit05*pulseamp} {1e-6+5*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -608 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PULSE(0 {Bit06*pulseamp} {1e-6+6*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -608 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value PULSE(0 {Bit07*pulseamp} {1e-6+7*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -608 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value PULSE(0 {Bit08*pulseamp} {1e-6+8*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -1536 624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value PULSE(0 {Bit04*pulseamp} {1e-6+4*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL voltage -608 624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value PULSE(0 {Bit09*pulseamp} {1e-6+9*cycleT} 1e-9 1e-9 {Pulsewidth})
SYMBOL Comparators\\LT1719 1440 -336 R0
SYMATTR InstName U3
SYMBOL res 1712 -256 R0
SYMATTR InstName R3
SYMATTR Value 8.2e3
SYMBOL cap 1712 -80 R0
SYMATTR InstName C2
SYMATTR Value 180p
SYMBOL Comparators\\LT1719 1952 -208 R0
SYMATTR InstName U4
SYMBOL res 2160 -96 R0
SYMATTR InstName R4
SYMATTR Value 1e6
SYMBOL res 304 -112 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL Opamps\\LT1809 416 -256 R0
SYMATTR InstName U6
SYMBOL res 496 -112 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R5
SYMATTR Value 150
SYMBOL bv -1536 -400 R0
WINDOW 3 34 75 Left 0
SYMATTR Value V=V(Pulse00)+V(Pulse01)+V(Pulse02)+V(Pulse03)+V(Pulse04)+V(Pulse05)+V(Pulse06)+V(Pulse07)+V(Pulse08)+V(Pulse09)
SYMATTR InstName B1
SYMBOL voltage 864 -496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 4
SYMBOL res 1120 -704 R0
SYMATTR InstName R7
SYMATTR Value 1000
SYMBOL res 1120 -592 R0
SYMATTR InstName R8
SYMATTR Value 550
SYMBOL res 1120 -480 R0
SYMATTR InstName R9
SYMATTR Value 450
TEXT -600 -656 Left 0 !.tran {1e-6+(patternlength+1)*cycleT}
TEXT -1056 -1296 Left 0 ;*Pz26 *adapted from Morris 1986/Puttmer 1997/Leach 1994/van Deventer 2000/Sherrit 2005
TEXT -456 -1248 Left 0 ;Tline Material
TEXT -456 -1200 Left 0 !.params rhoTL=2770
TEXT 320 -1248 Left 0 ;Receive Backing
TEXT -72 -1200 Left 0 !.params e33R=e33T
TEXT -72 -1176 Left 0 !.params rhoR=rhoT
TEXT -72 -1128 Left 0 !.params vDR=SQRT(c33DR/rhoR)
TEXT -72 -1056 Left 0 !.params thickR=thickT
TEXT -72 -1104 Left 0 !.params QR=QT
TEXT -72 -1080 Left 0 !.params resfreqR=vDR/(2*thickR)
TEXT -72 -1224 Left 0 !.params eSR=eST
TEXT -72 -1248 Left 0 ;Receive Piezo
TEXT -72 -1032 Left 0 !.params areaR=areaT
TEXT -1248 -1248 Left 0 ;Transmit Backing
TEXT -856 -1208 Left 0 !.params e33T=14.7
TEXT -856 -1184 Left 0 !.params rhoT=7700
TEXT -856 -1136 Left 0 !.params vDT=SQRT(c33DT/rhoT)
TEXT -856 -1088 Left 0 !.params thickT=2e-3
TEXT -856 -1112 Left 0 !.params QT=3023
TEXT -856 -1064 Left 0 !.params resfreqT=vDT/(2*thickT)
TEXT -856 -1232 Left 0 !.params eST=(699.7)*8.8542e-12
TEXT -856 -1248 Left 0 ;Transmit Piezo
TEXT -856 -1040 Left 0 !.params areaT=pi*(19e-3)*(19e-3)
TEXT -456 -1128 Left 0 !.params areaTL=areaT
TEXT -456 -1152 Left 0 !.params vDTL=SQRT(yTL/rhoTL)
TEXT -1248 -1168 Left 0 !.params zTB=rhoTB*vDTB
TEXT -1240 -1144 Left 0 !.params z0TB=zTB*areaT
TEXT 320 -1152 Left 0 !.params zRB=rhoRB*vDRB
TEXT 320 -1128 Left 0 !.params z0RB=zRB*areaT
TEXT -1248 -1216 Left 0 !.params rhoTB=1.25
TEXT -1248 -1192 Left 0 !.params vDTB=343.4
TEXT 320 -1200 Left 0 !.params rhoRB=rhoTB
TEXT 320 -1176 Left 0 !.params vDRB=vDTB
TEXT -856 -1016 Left 0 !.params c0T=eST*areaT/thickT
TEXT -856 -992 Left 0 !.params hT=e33T/eST
TEXT -856 -968 Left 0 !.params hc0T=hT*c0T
TEXT -856 -872 Left 0 !.params rT=2*pi*resfreqT*LT/QT
TEXT -856 -920 Left 0 !.params LT=z0T/vDT
TEXT -856 -944 Left 0 !.params z0T=rhoT*vDT*areaT
TEXT -856 -896 Left 0 !.params cT=1/(vDT*z0T)
TEXT -72 -1008 Left 0 !.params c0R=eSR*areaR/thickR
TEXT -72 -984 Left 0 !.params hR=e33R/eSR
TEXT -72 -960 Left 0 !.params hc0R=hR*c0R
TEXT -72 -864 Left 0 !.params rR=2*pi*resfreqR*LR/QR
TEXT -72 -912 Left 0 !.params LR=z0R/vDR
TEXT -72 -936 Left 0 !.params z0R=rhoR*vDR*areaR
TEXT -72 -888 Left 0 !.params cR=1/(vDR*z0R)
TEXT -600 -768 Left 0 !.model LossyAluminiumTline LTRA(len=lengthTL R=rTL L=LTL C=cTL)
TEXT -456 -1032 Left 0 !.params LTL=rhoTL*areaTL
TEXT -456 -1056 Left 0 !.params rTL= w*rhoTL*areaTL/qTL
TEXT -456 -1008 Left 0 !.params cTL=1/(yTL*areaTL)
TEXT -456 -1104 Left 0 !.params qTL=1000
TEXT -456 -1080 Left 0 !.params w=2*pi*resfreqT
TEXT -456 -1176 Left 0 !.params yTL=73.1e9
TEXT -856 -1160 Left 0 !.params c33DT=1.58e11
TEXT -72 -1152 Left 0 !.params c33DR=c33DT
TEXT -456 -1224 Left 0 !.params lengthTL=1.6e-3
TEXT -1248 -1072 Left 0 ;Bondline Transmit
TEXT -1248 -1048 Left 0 !.params lengthBT=100u
TEXT -1248 -904 Left 0 !.params rBT=w*rhoBT*areaBT/qBT
TEXT -1248 -880 Left 0 !.params LBT=rhoBT*areaBT
TEXT -1248 -856 Left 0 !.params cBT=1/(yBT*areaBT)
TEXT -1248 -928 Left 0 !.params qBT=23.4
TEXT -1248 -1024 Left 0 !.params rhoBT=3890.2
TEXT -1248 -1000 Left 0 !.params yBT=7.28e9
TEXT -1248 -976 Left 0 !.params vDBT=SQRT(yBT/rhoBT)
TEXT -1248 -952 Left 0 !.params areaBT=areaT
TEXT 328 -1080 Left 0 ;Bondline Receive
TEXT 328 -1056 Left 0 !.params lengthBR=lengthBT
TEXT 328 -912 Left 0 !.params rBR=w*rhoBR*areaBR/qBR
TEXT 328 -888 Left 0 !.params LBR=rhoBR*areaBR
TEXT 328 -864 Left 0 !.params cBR=1/(yBR*areaBR)
TEXT 328 -936 Left 0 !.params qBR=23.4
TEXT 328 -1032 Left 0 !.params rhoBR=3890.2
TEXT 328 -1008 Left 0 !.params yBR=7.28e9
TEXT 328 -984 Left 0 !.params vDBR=SQRT(yBR/rhoBR)
TEXT 328 -960 Left 0 !.params areaBR=areaT
TEXT -600 -744 Left 0 !.model LossyBondTlineT LTRA(len=lengthBT R=rBT L=LBT C=cBT)
TEXT -600 -720 Left 0 !.model LossyBondTlineR LTRA(len=lengthBR R=rBR L=LBR C=cBR)
TEXT -1248 -664 Left 0 !.param cycleT=10*1/cyclef
TEXT -1248 -688 Left 0 !.param cyclef=1.15e6
TEXT -1248 -768 Left 0 ;Pulse Variables
TEXT -1248 -736 Left 0 !.param pulsewidth=250n
TEXT -1248 -640 Left 0 !.param pulseamp=10
TEXT -1512 -936 Left 0 ;Bit pattern
TEXT -1512 -904 Left 0 !.param Bit00=1\n.param Bit01=1\n.param Bit02=0\n.param Bit03=1\n.param Bit04=1\n.param Bit05=1\n.param Bit06=0\n.param Bit07=0\n.param Bit08=1\n.param Bit09=0
TEXT -1512 -624 Left 0 !.param patternLength=10
TEXT -600 -680 Left 0 ;.param analysislength=1e-6+(patternlength+2)*cycleT
TEXT 312 -16 Left 0 ;*opamp notes\ngain = 1 + R5/R6 = 2.5
TEXT -1248 -712 Left 0 !.param Ncycles=10
