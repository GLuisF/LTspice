Version 4
SHEET 1 1992 1184
WIRE -576 -368 -576 -384
WIRE -480 -512 -480 -544
WIRE -480 -384 -576 -384
WIRE -480 -384 -480 -432
WIRE -480 -208 -480 -304
WIRE -304 -144 -304 -544
WIRE -272 -544 -304 -544
WIRE -272 -464 -272 -496
WIRE -224 -560 -224 -624
WIRE -224 -416 -224 -480
WIRE -128 -416 -224 -416
WIRE -128 -368 -128 -416
WIRE -128 -240 -128 -288
WIRE -128 -144 -304 -144
WIRE -128 -96 -128 -144
WIRE -128 32 -128 -16
WIRE -64 -560 -64 -624
WIRE -64 -416 -128 -416
WIRE -64 -416 -64 -480
WIRE -32 -144 -128 -144
WIRE -16 -464 -16 -496
WIRE 32 -544 -16 -544
WIRE 32 -144 -32 -144
WIRE 32 -144 32 -544
WIRE 112 -608 112 -672
WIRE 144 -672 112 -672
WIRE 144 -672 144 -704
WIRE 144 -656 144 -672
WIRE 144 -608 112 -608
WIRE 144 -528 144 -560
WIRE 144 -240 144 -528
WIRE 144 -112 144 -160
WIRE 224 -640 192 -640
WIRE 224 -528 144 -528
WIRE 224 -528 224 -640
WIRE 400 -128 400 -192
WIRE 416 -416 304 -416
WIRE 448 -640 224 -640
WIRE 448 -640 448 -688
WIRE 464 -448 464 -496
WIRE 464 -432 464 -448
WIRE 464 -288 464 -336
WIRE 464 -240 464 -288
WIRE 464 -192 400 -192
WIRE 464 -128 400 -128
WIRE 464 -128 464 -144
WIRE 464 -112 144 -112
WIRE 464 -112 464 -128
WIRE 464 -96 464 -112
WIRE 464 -80 464 -96
WIRE 496 -448 464 -448
WIRE 496 -384 464 -384
WIRE 496 -384 496 -448
WIRE 512 -640 448 -640
WIRE 544 -288 464 -288
WIRE 544 -160 512 -160
WIRE 544 -160 544 -288
WIRE 560 -704 144 -704
WIRE 560 -656 560 -704
WIRE 560 -496 464 -496
WIRE 560 -496 560 -560
WIRE 592 -656 560 -656
WIRE 592 -608 560 -608
WIRE 592 -608 592 -656
WIRE 608 -160 544 -160
WIRE 624 -688 448 -688
WIRE 624 -640 624 -688
WIRE 624 -384 624 -448
WIRE 656 -496 560 -496
WIRE 656 -448 624 -448
WIRE 656 -448 656 -496
WIRE 656 -432 656 -448
WIRE 656 -384 624 -384
WIRE 656 -288 656 -336
WIRE 656 -240 656 -288
WIRE 656 -128 656 -144
WIRE 656 -96 464 -96
WIRE 656 -96 656 -128
WIRE 704 -192 656 -192
WIRE 704 -128 656 -128
WIRE 704 -128 704 -192
WIRE 752 -288 656 -288
WIRE 752 -288 752 -336
WIRE 752 -240 752 -288
WIRE 752 640 752 576
WIRE 752 800 752 720
WIRE 784 -336 752 -336
WIRE 784 384 720 384
WIRE 784 480 784 432
WIRE 800 -416 704 -416
WIRE 832 368 832 272
WIRE 832 480 832 448
WIRE 880 -640 624 -640
WIRE 880 -240 752 -240
WIRE 928 -704 560 -704
WIRE 928 -672 928 -704
WIRE 928 -656 928 -672
WIRE 928 -464 928 -560
WIRE 928 -336 848 -336
WIRE 928 -336 928 -464
WIRE 928 -320 928 -336
WIRE 928 -192 928 -224
WIRE 928 -96 656 -96
WIRE 928 -96 928 -192
WIRE 928 272 832 272
WIRE 960 -672 928 -672
WIRE 960 -608 928 -608
WIRE 960 -608 960 -672
WIRE 960 -272 928 -272
WIRE 960 -192 928 -192
WIRE 960 -192 960 -272
WIRE 1024 -464 928 -464
WIRE 1040 272 928 272
WIRE 1040 288 1040 272
WIRE 1040 400 1040 368
WIRE 1040 576 752 576
WIRE 1040 640 1040 576
WIRE 1040 800 1040 720
WIRE 1120 -464 1024 -464
WIRE 1120 -432 1120 -464
WIRE 1120 -336 1120 -368
FLAG 752 800 0
FLAG 1040 800 0
FLAG 800 -416 V+
FLAG -128 -240 0
FLAG -272 -464 0
FLAG -16 -464 0
FLAG -128 32 0
FLAG -64 -624 V-
FLAG -224 -624 V+
FLAG 304 -416 V-
FLAG -576 -368 0
FLAG -480 -544 Vdd
FLAG -480 -208 Vss
FLAG 464 -80 Vss
FLAG 560 -704 Vdd
FLAG 1120 -336 0
FLAG 1024 -464 Vo
FLAG 784 480 0
FLAG 832 480 0
FLAG 1040 400 0
FLAG 928 272 Videal
FLAG -32 -144 Vd
FLAG 720 384 Vd
SYMBOL voltage 752 624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {Cn5}
SYMBOL res 1024 624 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL pmos4 416 -336 M180
SYMATTR InstName M1
SYMATTR Value p_30
SYMATTR Value2 l={L_canal_resto} w={W_canal_1_2} ad={A_1_2} as={A_1_2} pd={P_1_2} ps={P_1_2}
SYMBOL pmos4 704 -336 R180
SYMATTR InstName M2
SYMATTR Value p_30
SYMATTR Value2 l={L_canal_resto} w={W_canal_1_2} ad={A_1_2} as={A_1_2} pd={P_1_2} ps={P_1_2}
SYMBOL voltage -128 -384 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcm
SYMATTR Value 0
SYMBOL e -224 -576 R0
SYMATTR InstName E1
SYMATTR Value 0.5
SYMBOL e -64 -576 M0
SYMATTR InstName E2
SYMATTR Value -0.5
SYMBOL voltage -128 -112 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vd
SYMATTR Value SINE(0 10m 1k)
SYMBOL nmos4 512 -240 M0
SYMATTR InstName M3
SYMATTR Value n_30
SYMATTR Value2 l={L_canal_3_4_7} w={W_canal_3_4} ad={A_3_4} as={A_3_4} pd={P_3_4} ps={P_3_4}
SYMBOL voltage -480 -528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vdd
SYMATTR Value {Vdd}
SYMBOL voltage -480 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vss
SYMATTR Value {-1*Vss}
SYMBOL nmos4 608 -240 R0
SYMATTR InstName M4
SYMATTR Value n_30
SYMATTR Value2 l={L_canal_3_4_7} w={W_canal_3_4} ad={A_3_4} as={A_3_4} pd={P_3_4} ps={P_3_4}
SYMBOL nmos4 880 -320 R0
SYMATTR InstName M6
SYMATTR Value n_30
SYMATTR Value2 l={L_canal_resto} w={W_canal_6} ad={A_6} as={A_6} pd={P_6} ps={P_6}
SYMBOL cap 784 -320 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName Cc
SYMATTR Value 1.02p
SYMBOL pmos4 880 -560 M180
SYMATTR InstName M5
SYMATTR Value p_30
SYMATTR Value2 l={L_canal_resto} w={W_canal_5} ad={A_5} as={A_5} pd={P_5} ps={P_5}
SYMBOL pmos4 512 -560 M180
SYMATTR InstName M7
SYMATTR Value p_30
SYMATTR Value2 l={L_canal_3_4_7} w={W_canal_7} ad={A_7} as={A_7} pd={P_7} ps={P_7}
SYMBOL pmos4 192 -560 R180
SYMATTR InstName M8
SYMATTR Value p_30
SYMATTR Value2 l={L_canal_resto} w={W_canal_8} ad={A_8} as={A_8} pd={P_8} ps={P_8}
SYMBOL current 144 -240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Iref
SYMATTR Value 2.12µ
SYMBOL cap 1104 -432 R0
SYMATTR InstName CL
SYMATTR Value 10p
SYMBOL g 832 352 R0
SYMATTR InstName G1
SYMATTR Value laplace={AvDC*(1-s/(2*pi*sz1))/((1+s/(2*pi*sd))*(1+s/(2*pi*snd1)))}
SYMBOL res 1024 272 R0
SYMATTR InstName R2
SYMATTR Value 1
TEXT -552 224 Left 0 !.params GBW=1meg delta1=0.2 delta3=0.5
TEXT -560 592 Left 0 !.params  Vbd4={delta3+0.9} Cdb2={A_1_2*70u/((1+Vbd2/0.8)**0.5)+P_1_2*390p/((1+Vbd2/0.8)**0.33)}
TEXT -560 624 Left 0 !.params Cdb4={A_3_4*330u/((1+Vbd4/0.8)**0.5)+P_3_4*440p/((1+Vbd4/0.8)**0.33)}
TEXT -552 352 Left 0 !.params  A_3_4={W_canal_3_4*3u} P_3_4={2*(W_canal_3_4+3u)} A_1_2={W_canal_1_2*3u}
TEXT -552 392 Left 0 !.params   P_1_2={2*(W_canal_1_2+3u)} A_5={W_canal_5*3u} P_5={2*(W_canal_5+3u)}
TEXT -552 432 Left 0 !.params  A_6={W_canal_6*3u} P_6={2*(W_canal_6+3u)} A_7={W_canal_7*3u}
TEXT -552 464 Left 0 !.params   P_7={2*(W_canal_7+3u)} A_8={W_canal_8*3u} P_8={2*(W_canal_8+3u)}
TEXT -560 664 Left 0 !.params  Cgs3={(2/3)*812u*W_canal_3_4*(L_canal_resto-2*350n)+Cgd4}
TEXT -560 696 Left 0 !.params Cgd2={180p*W_canal_1_2} Cgd4={280p*W_canal_3_4} Vbd2={(Vdd-delta3-0.9)-(Vss+delta3+0.9)}
TEXT -560 512 Left 0 !.params    W_canal_1_2={1.9*L_canal_resto} W_canal_3_4={0.6*L_canal_3_4_7} W_canal_5={11.8*L_canal_resto}
TEXT -568 552 Left 0 !.params  W_canal_6={22*L_canal_resto} W_canal_7={0.6*L_canal_3_4_7} W_canal_8={1*L_canal_resto}
TEXT -560 320 Left 0 !.params  L_canal_resto=5u L_canal_3_4_7=10u Iref={2*3.1416*GBW*1.02p*delta1}
TEXT -560 728 Left 0 !.params   Cn5={Cgd2+Cgd4+Cdb2+Cdb4} Cn4={Cgd2+Cgd4+Cdb2+Cdb4+2*Cgs3} pi=3.14159265358979
TEXT -560 768 Left 0 !.params   AvDC=11059.86943435560 sd=84 snd1=2.95e6
TEXT -560 808 Left 0 !.param   sz1=30e6
TEXT -544 200 Left 0 !.params Vdd=2.5V Vss=-2.5V
TEXT 552 64 Left 0 !.model P_30 PMOS (LEVEL=2 VTO=-0.9 KP=17U GAMMA=0.5 PHI=0.69 LAMBDA=0.04\n+ CGSO=2.8E-10 CGDO=2.8E-10 CJ=33E-5 MJ=0.5 CJSW=4.4E-10 MJSW=0.33 JS=0.001\n+ TOX=4.25E-8 NFS=1E11 LD=3.5E-7 UCRIT=10000 RSH=45 AF=1 KF=7.2E-29)\n.model N_30 NMOS (LEVEL=2 VTO=0.9 KP=57U GAMMA=0.3 PHI=0.7 LAMBDA=0.05 \n+ CGSO=1.8E-10 CGDO=1.8E-10 CJ=7E-5 MJ=0.5 CJSW=3.9E-10 MJSW=0.33 JS=0.001\n+ TOX=4.25E-8 NFS=1E11 LD=2.2E-7 UCRIT=10000 RSH=25 AF=1 KF=2.3E-27)
TEXT 1064 -144 Left 0 !.op
TEXT 448 -792 Center 0 ;Disign of a CMOS Miller OTA
TEXT -232 80 Left 0 ;Differential input
TEXT -488 -112 Center 0 ;Supply voltage
TEXT 536 -8 Left 0 ;O T A
TEXT 1088 -224 Left 0 ;Analysis
TEXT 1104 -144 Left 0 ;small signal parameters
TEXT 712 24 Left 0 ;Models of transistors MOS: n_30 and p_30
TEXT -560 272 Left 0 ;Calculating transistor aspec ratios and parasitic capacitances
TEXT 1104 336 Left 0 ;Ideal frequency response of\nthe OTA employing the "Laplace" option
TEXT 1088 592 Left 0 ;Checking the parameters
TEXT 160 72 Left 0 ;Vo:=Output voltage\n \nVideal:=Ideal response
TEXT 1072 -184 Left 0 !.ac dec 101 1 1G
TEXT 1064 -104 Left 0 !.print Vo Videal
CIRCLE Normal 512 32 48 192
