Version 4
SHEET 1 1224 1368
WIRE -816 80 -1632 80
WIRE -608 80 -816 80
WIRE 304 176 240 176
WIRE 528 176 384 176
WIRE -1632 288 -1632 80
WIRE -1568 288 -1632 288
WIRE -1280 288 -1568 288
WIRE -1136 288 -1280 288
WIRE -1088 288 -1136 288
WIRE -944 288 -1008 288
WIRE -896 288 -944 288
WIRE 96 288 -896 288
WIRE 240 288 240 176
WIRE 240 288 96 288
WIRE 304 288 240 288
WIRE 416 288 400 288
WIRE 528 288 528 176
WIRE 528 288 496 288
WIRE 624 288 528 288
WIRE 688 288 624 288
WIRE -608 304 -608 80
WIRE -1280 336 -1280 288
WIRE -1136 336 -1136 288
WIRE -944 336 -944 288
WIRE 96 368 96 288
WIRE -816 416 -816 80
WIRE -400 416 -816 416
WIRE -192 416 -400 416
WIRE -1136 448 -1136 416
WIRE -992 448 -1136 448
WIRE -1136 480 -1136 448
WIRE -400 480 -400 416
WIRE -608 496 -608 384
WIRE -544 496 -608 496
WIRE -432 496 -544 496
WIRE 96 512 96 448
WIRE 96 512 -368 512
WIRE 144 512 96 512
WIRE 320 512 320 336
WIRE 320 512 144 512
WIRE -432 528 -512 528
WIRE 624 576 624 288
WIRE 624 576 -16 576
WIRE -1280 608 -1280 416
WIRE -1216 608 -1280 608
WIRE -1136 608 -1136 560
WIRE -1136 608 -1216 608
WIRE -1216 640 -1216 608
WIRE -512 640 -512 528
WIRE 96 640 -512 640
WIRE 528 640 528 288
WIRE 624 752 624 576
WIRE -816 784 -816 416
WIRE -992 800 -992 448
WIRE -896 800 -992 800
WIRE -848 800 -896 800
WIRE -608 816 -608 496
WIRE -608 816 -784 816
WIRE -944 832 -944 416
WIRE -896 832 -944 832
WIRE -848 832 -896 832
WIRE -192 880 -192 416
WIRE -112 896 -160 896
WIRE 96 896 96 640
WIRE 96 896 -112 896
WIRE 320 896 320 512
WIRE -608 912 -608 816
WIRE -224 912 -608 912
WIRE -1632 928 -1632 288
WIRE -112 928 -160 928
WIRE -16 928 -16 576
WIRE -16 928 -112 928
WIRE 96 992 96 896
WIRE -1632 1152 -1632 1008
WIRE -1216 1152 -1216 720
WIRE -1216 1152 -1632 1152
WIRE -816 1152 -816 848
WIRE -816 1152 -1216 1152
WIRE -400 1152 -400 544
WIRE -400 1152 -816 1152
WIRE -192 1152 -192 944
WIRE -192 1152 -400 1152
WIRE 96 1152 96 1072
WIRE 96 1152 -192 1152
WIRE 320 1152 320 960
WIRE 320 1152 96 1152
WIRE 528 1152 528 704
WIRE 528 1152 320 1152
WIRE 624 1152 624 832
WIRE 624 1152 528 1152
WIRE -1632 1184 -1632 1152
FLAG -1632 1184 0
FLAG 688 288 OUT
IOPIN 688 288 Out
FLAG -1568 288 SUPPLY
FLAG -896 800 Ithr
FLAG -896 832 Imon
FLAG -896 288 Vm
FLAG 144 512 M1G
FLAG -544 496 U1orU2
FLAG -112 896 Vthr
FLAG -112 928 Vmon
SYMBOL voltage -1632 912 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 -19 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(18VDC 0.0 1KHz)
SYMBOL res 608 736 R0
SYMATTR InstName Rload
SYMATTR Value 1
SYMBOL voltage -1280 320 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 2.5V
SYMBOL res -1152 320 R0
SYMATTR InstName R1
SYMATTR Value 90.9
SYMBOL res -1152 464 R0
SYMATTR InstName R2
SYMATTR Value 2939
SYMBOL res -1232 624 R0
SYMATTR InstName R3
SYMATTR Value 5487
SYMBOL res -1104 304 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value 0.5
SYMBOL res -928 432 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName R5
SYMATTR Value 90.9
SYMBOL Opamps\\opamp2 -816 752 R0
SYMATTR InstName U1
SYMATTR Value LM139
SYMBOL cap 512 640 R0
SYMATTR InstName C2
SYMATTR Value 20µF
SYMBOL res 400 304 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R11
SYMATTR Value 1K
SYMBOL res 80 352 R0
SYMATTR InstName R12
SYMATTR Value 100K
SYMBOL cap 304 896 R0
SYMATTR InstName C3
SYMATTR Value 0.1µF
SYMBOL Opamps\\opamp2 -192 848 M0
SYMATTR InstName U2
SYMATTR Value LM139
SYMBOL voltage 96 976 R0
WINDOW 123 24 132 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1.5V
SYMBOL Opamps\\opamp2 -400 448 R0
SYMATTR InstName U3
SYMATTR Value LM139
SYMBOL res -624 288 R0
SYMATTR InstName R6
SYMATTR Value 100K
SYMBOL pmos 400 336 M270
WINDOW 0 97 75 VLeft 0
WINDOW 3 70 74 VLeft 0
SYMATTR InstName M1
SYMATTR Value FDS4685
SYMBOL res 288 192 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rfold
SYMATTR Value 1800
TEXT -592 112 Left 0 !.MEASURE TRAN Output FIND V(OUT) AT=10m\n.MEASURE TRAN Ripple_Out PP V(OUT)\n.MEASURE TRAN Ripple_In PP V(SUPPLY)\n.MEASURE TRAN Gain1 PARAM (Ripple_Out / Ripple_In)\n.MEASURE TRAN Q2BE PARAM V(Q2B) - V(OUT)\n.MEASURE TRAN Vmon PARAM V(Q1E) - V(OUT)
TEXT -1528 1096 Left 0 !.tran 0 0.2 0
TEXT -1528 992 Left 0 !.IC V(OUT)=0 V(M1G)=0
TEXT -1528 1016 Left 0 !.OPTIONS GMIN=1e-15
TEXT -1592 832 Left 0 ;.STEP TEMP LIST -55 25
TEXT -1528 968 Left 0 !.TEMP 25
TEXT -1528 1040 Left 0 !.LIB OPAMP.SUB
TEXT -1528 1072 Left 0 !.INCLUDE LM139.5_1
TEXT -1440 152 Left 0 ;R4 (current monitoring resistor) = 0.5 Ohms.\nWant U1 to trigger at 150mA.\nV(Comp) is set to 75mV below V(SUPPLY) by V3, R1 & R2.
TEXT -1056 880 Left 0 ;U1 goes low when\ncurrent through R4\nexceeds 150mA.
TEXT -168 976 Left 0 ;U2 goes high when\nRload & Rfold allow\nV(OUT) > 1.50V
TEXT -472 352 Left 0 ;If neither U1 nor U2 is low,\nthen M1 can be on.
TEXT 8 104 Left 0 ;Provides 10mA Foldback Current when M1 is biased off.
