Version 4
SHEET 1 1268 680
WIRE 272 -944 144 -944
WIRE 272 -912 272 -944
WIRE 144 -864 144 -944
WIRE 272 -800 272 -832
WIRE 144 -752 144 -784
WIRE 352 -752 144 -752
WIRE -16 -688 -48 -688
WIRE 96 -688 64 -688
WIRE 192 -688 96 -688
WIRE 480 -688 272 -688
WIRE 352 -656 352 -752
WIRE -48 -640 -48 -688
WIRE 144 -640 144 -752
WIRE 96 -624 96 -688
WIRE 112 -624 96 -624
WIRE 304 -608 176 -608
WIRE 480 -608 480 -688
WIRE 480 -608 400 -608
WIRE 528 -608 480 -608
WIRE 112 -592 -48 -592
WIRE 480 -592 480 -608
WIRE -48 -576 -48 -592
WIRE 320 -544 320 -560
WIRE 144 -512 144 -576
WIRE 352 -512 352 -560
WIRE 352 -512 144 -512
WIRE -48 -480 -48 -496
WIRE 144 -480 144 -512
WIRE 480 -480 480 -512
WIRE 144 -368 144 -400
WIRE 144 -256 144 -288
WIRE 272 -112 144 -112
WIRE 272 -80 272 -112
WIRE 144 -32 144 -112
WIRE 272 32 272 0
WIRE 144 80 144 48
WIRE 688 80 144 80
WIRE 688 96 688 80
WIRE -16 144 -48 144
WIRE 96 144 64 144
WIRE 192 144 96 144
WIRE 448 144 272 144
WIRE -48 176 -48 144
WIRE 144 176 144 80
WIRE 96 192 96 144
WIRE 112 192 96 192
WIRE 320 208 176 208
WIRE 448 208 448 144
WIRE 448 208 400 208
WIRE 496 208 448 208
WIRE 688 208 688 176
WIRE 688 208 640 208
WIRE 112 224 -48 224
WIRE 448 224 448 208
WIRE 640 224 640 208
WIRE -48 240 -48 224
WIRE 688 256 688 208
WIRE -48 336 -48 320
WIRE 448 336 448 304
WIRE 144 384 144 240
WIRE 688 384 688 336
WIRE 688 384 144 384
WIRE 144 416 144 384
WIRE 144 528 144 496
WIRE 144 640 144 608
FLAG 144 640 0
FLAG 272 32 0
FLAG -48 176 0
FLAG -48 336 0
FLAG 496 208 outf
FLAG 448 336 0
FLAG 640 224 0
FLAG 144 -256 0
FLAG 272 -800 0
FLAG -48 -640 0
FLAG -48 -480 0
FLAG 528 -608 out
FLAG 480 -480 0
FLAG 320 -544 0
SYMBOL voltage 272 -96 R0
SYMATTR InstName V1
SYMATTR Value 15V
SYMBOL voltage 144 512 R0
SYMATTR InstName V2
SYMATTR Value -15V
SYMBOL res 128 -48 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res 128 400 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 432 208 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 176 160 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -32 160 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R5
SYMATTR Value 2.5k
SYMBOL voltage -48 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 1 1k)
SYMBOL voltage 304 208 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 -32 56 VBottom 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL Misc\\Gpoly 688 192 R180
WINDOW 0 38 67 Left 0
WINDOW 3 0 126 Left 0
SYMATTR InstName G1
SYMATTR Value VALUE={if((I(V4)>0),I(V4),0)}
SYMBOL Misc\\Gpoly 688 352 R180
WINDOW 0 32 76 Left 0
WINDOW 3 -10 -46 Left 0
SYMATTR InstName G2
SYMATTR Value VALUE={if((I(V4)<0),-I(V4),0)}
SYMBOL voltage 272 -928 R0
SYMATTR InstName V5
SYMATTR Value 15V
SYMBOL voltage 144 -384 R0
SYMATTR InstName V6
SYMATTR Value -15V
SYMBOL res 128 -880 R0
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL res 128 -496 R0
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 464 -608 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 176 -672 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res -32 -672 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R10
SYMATTR Value 2.5k
SYMBOL voltage -48 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value SINE(0 1 1k)
SYMBOL xopps 352 -608 R0
SYMATTR InstName U2
SYMBOL xopamp 144 -672 R0
SYMATTR InstName U1
SYMATTR SpiceModel LT1013
SYMBOL xopamp 144 144 R0
SYMATTR InstName U3
SYMATTR SpiceModel LT1013
TEXT -88 -904 Left 0 !.tran 0 1m 0 1u
TEXT 248 -424 Left 0 !.SUBCKT xopps in out psp psm vgnd  \n* Additional quiescent current if needed.\n* Example:  X1 xopps ....  IQ=1m\n.PARAM IQ=1p\nV1 in out 0\nG1 psp vgnd VALUE={if((I(V1)>0),(I(V1)+IQ),IQ)}\nG2 vgnd psm VALUE={if((I(V1)<0),(-I(V1)+IQ),IQ)}\n.ends
TEXT -88 -1240 Left 0 ;Simulating Load Current From The Supply Rails               Helmut Sennewald, 1/1/2004\nA symbol xopps.asy and subcircuit xopps(.sub) is provided to draw the \noutput current from the supply rails. This has been request, because none?\nof the opamp models in ltc.lib draw the output current from the supplies.\nCalling:    X1 xopps ... IQ=1m  \nAn optional IQ=.. allows to specify a permanent quiescent current \nflowing from both rails.
TEXT -80 -872 Left 0 ;The final solution.
TEXT 360 -64 Left 0 ;The "flat" circuit shows how it works.
TEXT -80 -928 Left 0 !.include ltc.lib
