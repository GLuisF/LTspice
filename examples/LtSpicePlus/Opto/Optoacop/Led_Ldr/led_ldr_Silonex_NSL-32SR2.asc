Version 4
SHEET 1 2100 680
WIRE -496 -480 -576 -480
WIRE -448 -480 -496 -480
WIRE 32 -480 -32 -480
WIRE 128 -480 32 -480
WIRE 32 -448 32 -480
WIRE 128 -448 128 -480
WIRE -496 -432 -496 -480
WIRE -448 -432 -448 -480
WIRE 32 -336 32 -368
WIRE 32 -336 -32 -336
WIRE 128 -336 128 -384
WIRE 128 -336 32 -336
WIRE 512 -336 416 -336
WIRE 672 -336 592 -336
WIRE -496 -320 -496 -368
WIRE -496 -320 -576 -320
WIRE -448 -320 -448 -368
WIRE -448 -320 -496 -320
WIRE -480 -256 -640 -256
WIRE -416 -256 -480 -256
WIRE -352 -256 -416 -256
WIRE -176 -256 -272 -256
WIRE -96 -256 -176 -256
WIRE 32 -256 -16 -256
WIRE 80 -256 32 -256
WIRE 160 -256 128 -256
WIRE 240 -256 160 -256
WIRE 416 -256 416 -336
WIRE 416 -256 240 -256
WIRE 448 -256 416 -256
WIRE 560 -256 512 -256
WIRE 672 -256 672 -336
WIRE 672 -256 640 -256
WIRE 720 -256 672 -256
WIRE -640 -208 -640 -256
WIRE 128 -208 128 -256
WIRE 240 -208 240 -256
WIRE 672 -208 672 -256
WIRE -480 -192 -480 -256
WIRE 80 -192 80 -256
WIRE -176 -176 -176 -256
WIRE -640 -80 -640 -128
WIRE -480 -80 -480 -112
WIRE -480 -80 -640 -80
WIRE -176 -80 -176 -112
WIRE -176 -80 -480 -80
WIRE 80 -80 80 -144
WIRE 80 -80 -176 -80
WIRE 128 -80 128 -128
WIRE 128 -80 80 -80
WIRE 240 -80 240 -128
WIRE 240 -80 128 -80
WIRE 672 -80 672 -144
WIRE 672 -80 240 -80
WIRE -640 -64 -640 -80
FLAG -640 -64 0
FLAG -416 -256 ie1
FLAG 720 -256 cb2
FLAG -32 -480 ldr1
IOPIN -32 -480 In
FLAG -32 -336 ldr2
IOPIN -32 -336 In
FLAG -576 -480 led+
IOPIN -576 -480 In
FLAG -576 -320 led-
IOPIN -576 -320 In
FLAG 32 -256 id1
FLAG 160 -256 ig1
SYMBOL res -496 -208 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL bi2 -640 -208 R0
SYMATTR InstName B1
SYMATTR Value I=I(D1)*1000
SYMBOL LED -464 -432 R0
SYMATTR InstName D1
SYMATTR Value QTLP690C
SYMBOL cap -192 -176 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 224 -224 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL bi 32 -448 R0
WINDOW 3 -26 146 Left 0
SYMATTR Value I=V(ldr1,ldr2)/(1000/V(cb2))
SYMATTR InstName B2
SYMBOL cap 112 -448 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL cap 656 -208 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res -368 -240 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 544 -240 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value {Rf}
SYMBOL bi2 128 -208 R0
WINDOW 3 -82 149 Left 0
SYMATTR Value I=log(V(id1)+1)*6
SYMATTR InstName B4
SYMBOL cap -480 -432 M0
SYMATTR InstName CjoD1
SYMATTR Value 50p
SYMBOL voltage 0 -256 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Roff
SYMATTR Value 33.33µ
SYMBOL diode 448 -240 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D2
SYMBOL res 496 -320 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value {Rb}
TEXT -592 -280 Left 0 ;1V/mA
TEXT -232 -8 Left 0 ;Add here R+C, diodes and Z-diodes for transient behaviour.
TEXT 504 -152 Left 0 ;Tau=10ms
TEXT 392 -512 Left 0 ;Nonlinear filter
TEXT -72 -416 Left 0 ;LDR
TEXT -608 -400 Left 0 ;LED
TEXT -592 -64 Left 0 ;Solinex NSL-32SR2                               Date: Apr 4, 2011\n---------------\nA current controlled resistor.
TEXT -584 -504 Left 0 !.model QTLP690C D(Is=1e-22 Rs=6 N=1.5 Iave=160m Vpk=5 mfg=Fairchild type=LED)
TEXT 416 -440 Left 0 !.param Rf=10k\n.param Rb=1/(1/5k-1/Rf)
RECTANGLE Normal 800 -48 336 -480 2
