Version 4
SHEET 1 1960 840
WIRE -48 -128 -320 -128
WIRE -48 -96 -48 -128
WIRE -48 32 -48 -16
WIRE 32 96 -48 96
WIRE 96 96 32 96
WIRE 752 96 272 96
WIRE 832 96 752 96
WIRE 1056 96 928 96
WIRE -48 128 -48 96
WIRE 752 128 752 96
WIRE 928 128 928 96
WIRE 272 144 272 96
WIRE 832 176 832 96
WIRE 864 176 832 176
WIRE 32 224 32 96
WIRE -48 256 -48 208
WIRE 272 272 272 224
WIRE 752 272 752 208
WIRE 928 272 928 224
WIRE 752 336 272 336
WIRE 832 336 752 336
WIRE 1056 336 928 336
WIRE -160 352 -320 352
WIRE 32 352 32 304
WIRE 112 352 32 352
WIRE 752 368 752 336
WIRE 928 368 928 336
WIRE -160 384 -160 352
WIRE 32 384 32 352
WIRE 272 384 272 336
WIRE 832 416 832 336
WIRE 864 416 832 416
WIRE -160 496 -160 464
WIRE 272 512 272 464
WIRE 752 512 752 448
WIRE 928 512 928 464
WIRE 32 544 32 464
WIRE 32 544 -320 544
WIRE -80 608 -320 608
WIRE -80 656 -80 608
WIRE 32 656 32 544
WIRE -192 736 -320 736
WIRE -192 768 -192 736
WIRE -80 768 -80 736
WIRE 32 768 32 736
FLAG 1056 96 out
IOPIN 1056 96 Out
FLAG 272 272 COM
FLAG 928 272 COM
FLAG -48 256 COM
FLAG 96 96 ref
FLAG -320 608 vsense
IOPIN -320 608 Out
FLAG 1056 336 out
IOPIN 1056 336 Out
FLAG 272 512 COM
FLAG 928 512 COM
FLAG 112 352 200mV
FLAG -320 544 ictrl
IOPIN -320 544 Out
FLAG -320 -128 vcc
IOPIN -320 -128 Out
FLAG -80 768 COM
FLAG -48 32 COM
FLAG -320 736 com
IOPIN -320 736 In
FLAG -192 768 COM
FLAG 752 272 COM
FLAG 752 512 COM
FLAG 32 768 COM
FLAG -320 352 fb
IOPIN -320 352 Out
FLAG -160 496 COM
SYMBOL bi2 272 144 R0
SYMATTR InstName B1
SYMATTR Value I=limit(0, V(fb,ref)*35m, .3m)
SYMBOL npn 864 128 R0
SYMATTR InstName Q1
SYMATTR Value npn1051
SYMBOL res 736 112 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL bv -48 112 M0
SYMATTR InstName B2
SYMATTR Value V=limit(0, V(vcc,com)-1, 1.21)
SYMBOL res 16 368 R0
SYMATTR InstName R2
SYMATTR Value 8k
SYMBOL res 16 208 R0
SYMATTR InstName R3
SYMATTR Value 48400
SYMBOL bi2 272 384 R0
SYMATTR InstName B3
SYMATTR Value I=limit(0, V(vsense,200mV)*70m, .3m)
SYMBOL npn 864 368 R0
SYMATTR InstName Q2
SYMATTR Value npn1051
SYMBOL res 736 352 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res -96 640 R0
SYMATTR InstName R6
SYMATTR Value 1e8
SYMBOL res 16 640 R0
SYMATTR InstName R5
SYMATTR Value 1e8
SYMBOL bi -48 -96 R0
SYMATTR InstName B5
SYMATTR Value I=limit(0,(V(vcc,com)-2)/15k,0.8m)+limit(0, V(vcc,com)/2.5k, 0.8m)
SYMBOL res -176 368 R0
SYMATTR InstName R7
SYMATTR Value 1e8
TEXT 352 -112 Left 0 !.model npn1051 NPN(Is=1e-14 BF=100 VAF=50 Cjc=5p Cje=10p TF=.5n)
TEXT 80 -200 Left 0 ;TSM1051 CONSTANT VOLTAGE AND CONSTANT CURRENT CONTROLLER
