Version 4
SHEET 1 1772 760
WIRE -288 224 -288 208
WIRE -288 320 -288 304
WIRE -160 288 -160 272
WIRE -160 384 -160 368
WIRE -96 48 -96 32
WIRE -96 144 -96 128
WIRE -32 32 -96 32
WIRE -32 144 -32 32
WIRE 0 144 -32 144
WIRE 0 208 -288 208
WIRE 0 272 -160 272
WIRE 0 336 -16 336
WIRE 160 32 -32 32
WIRE 256 32 224 32
WIRE 256 144 224 144
WIRE 256 144 256 32
WIRE 320 32 256 32
WIRE 320 48 320 32
WIRE 320 272 224 272
WIRE 320 272 320 112
WIRE 368 208 224 208
WIRE 368 336 224 336
WIRE 464 208 448 208
WIRE 464 208 464 144
WIRE 464 336 448 336
WIRE 464 400 464 336
WIRE 480 144 464 144
WIRE 480 400 464 400
WIRE 528 32 528 -112
WIRE 528 64 528 32
WIRE 528 224 528 160
WIRE 528 272 320 272
WIRE 528 272 528 224
WIRE 528 320 528 272
WIRE 528 448 528 416
WIRE 624 -112 528 -112
WIRE 624 -96 624 -112
WIRE 624 0 624 -16
WIRE 624 224 528 224
WIRE 624 448 624 336
WIRE 704 352 704 336
WIRE 704 448 704 432
WIRE 800 32 528 32
WIRE 800 96 800 32
WIRE 800 224 704 224
WIRE 800 224 800 160
WIRE 800 240 800 224
WIRE 800 304 800 240
WIRE 800 448 800 368
WIRE 928 32 800 32
WIRE 928 80 928 32
WIRE 928 240 800 240
WIRE 928 240 928 160
WIRE 928 304 928 240
WIRE 928 448 928 384
FLAG -16 336 0
FLAG -96 144 0
FLAG -288 320 0
FLAG -160 384 0
FLAG 528 448 0
FLAG 800 448 0
FLAG 928 448 0
FLAG 704 448 0
FLAG 624 448 0
FLAG 624 0 0
SYMBOL ir2104 112 240 R0
SYMATTR InstName U1
SYMBOL voltage -96 32 M0
WINDOW 123 0 0 Left 0
WINDOW 39 35 84 Left 0
WINDOW 0 32 32 Left 0
WINDOW 3 35 56 Left 0
SYMATTR SpiceLine Rser=50m
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -288 208 R0
WINDOW 3 0 240 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 32 80 Left 0
WINDOW 0 32 32 Left 0
SYMATTR Value PULSE(5 0 10u 10n 10n 10u 20u)
SYMATTR SpiceLine Rser=1
SYMATTR InstName V2
SYMBOL voltage -160 272 R0
WINDOW 3 0 144 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 32 80 Left 0
WINDOW 0 32 32 Left 0
SYMATTR Value PULSE(0 5 35u 10n 10n 1 2)
SYMATTR SpiceLine Rser=1
SYMATTR InstName V3
SYMBOL diode 160 48 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D1
SYMATTR Value md
SYMBOL cap 304 48 R0
WINDOW 0 29 13 Left 0
WINDOW 3 29 51 Left 0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL nmos 480 64 R0
SYMATTR InstName M1
SYMATTR Value irf830
SYMATTR Prefix M
SYMBOL nmos 480 320 R0
SYMATTR InstName M2
SYMATTR Value irf830
SYMATTR Prefix M
SYMBOL res 352 224 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value 20
SYMBOL res 352 352 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value 20
SYMBOL cap 784 96 R0
WINDOW 123 24 92 Left 0
WINDOW 39 24 120 Left 0
SYMATTR Value2 Rser=0.5
SYMATTR SpiceLine IC=200
SYMATTR InstName C2
SYMATTR Value 220µ
SYMBOL cap 784 304 R0
WINDOW 123 24 92 Left 0
WINDOW 39 24 120 Left 0
SYMATTR Value2 Rser=0.5
SYMATTR SpiceLine IC=200
SYMATTR InstName C3
SYMATTR Value 220µ
SYMBOL res 912 64 R0
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL res 912 288 R0
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL ind2 608 240 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
WINDOW 39 85 58 VBottom 0
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR SpiceLine Rser=1 Rpar=10k
SYMATTR Type ind
SYMBOL ind2 608 352 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L2
SYMATTR Value 1µ
SYMATTR Type ind
SYMBOL res 688 336 R0
SYMATTR InstName R5
SYMATTR Value 5
SYMBOL voltage 624 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 32 80 Left 0
WINDOW 0 32 32 Left 0
WINDOW 3 35 56 Left 0
SYMATTR SpiceLine Rser=50m
SYMATTR InstName V4
SYMATTR Value 400
TEXT 672 280 Center 0 !K1 L1 L2 1
TEXT 352 -104 Center 0 ;.include irf830.spi
TEXT 352 -136 Center 0 ;.include ir2104.sub
TEXT -280 -104 Left 0 !.tran 0 100u 1u 0.1u startup uic
TEXT 192 -32 Center 0 !.model md D(Is=1e-9 Rs=0.2 Cjo=50p)
TEXT 352 -272 Center 0 ;Half Bridge IR2104  Test Circuit\nHelmut Sennewald V1.0\nmodified for better convergence - analogspiceman
TEXT 112 496 Left 0 !.model IRF830 vdmos(Vto=3.9 Kp=2 Lambda=2m9\n+ Rg=3.9 Rd=1.3 Rs=0m1 Rds=2e7 Cgs=560p Cgdmax=1n Cgdmin=10p a=1\n+ Is=3n2 Rb=19m N=1.45 Eg=1.2 Xti=3 tt=0 Cjo=530p Vj=3.8 m=0.9 Fc=0.5)
TEXT 1024 -360 Left 0 !* IR2104 Behavioral Model by analog@ieee.org\n.subckt IR2104 Vcc In _SD Com VB HO VS LO\nC1 Com In 10p Rpar=1e6\nD2 Com In Dd\nD1 In Vcc Dd\nA1 In Com 0 0 0 2 1 0 SCHMITT Vt=1.9 Vh=1\n+ Trise=1110n Tfall=100n Tripdt=50n\nA2 VB VS 0 0 0 0 3 0 SCHMITT Vt=8.9 Vh=.35\nA3 3 1 0 6 7 5 4 0 AND Trise=100n Tripdt=20n\nS1 HO VB 4 0 SH\nC2 HO VB 22p\nD3 HO VB Dd\nS2 HO VS 5 0 SL\nC3 HO VS 22p Rpar=100k\nD4 VS HO Dd\nD5 VS VB 25V\nD6 Com VB 625V\nC4 Com _SD 10p Rpar=1e6\nD8 Com _SD Dd\nD7 _SD Vcc Dd\nA4 _SD Com 0 0 0 0 6 0 SCHMITT Vt=1.9 Vh=1\n+ Trise=120n Tripdt=25n\nA5 Vcc Com 0 0 0 0 7 0 SCHMITT Vt=8.9 Vh=.35\nA6 7 6 0 2 0 9 8 0 AND Trise=100n Tripdt=20n\nS3 LO Vcc 8 0 SH\nC5 LO Vcc 22p\nD9 LO Vcc Dd\nS4 LO Com 9 0 SL\nC6 LO Com 22p Rpar=100k\nD10 Com LO Dd\nD11 Com Vcc 25V\n.model Dd D(Ron=.5 Vfwd=.5)\n.model 25V D(Ron=.5 Vfwd=.5 Vrev=25.2 Roff=25e4)\n.model 625V D(Ron=.5 Vfwd=.5 Vrev=625 Roff=12e6)\n.model SH SW(Vt=.5 Vh=-.5 Ron=42 Ilimit=.21)\n.model SL SW(Vt=.5 Vh=-.5 Ron=20 Ilimit=.36)\n.ends IR2104
