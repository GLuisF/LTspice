Version 4
SHEET 1 1416 680
WIRE -160 -336 -688 -336
WIRE 128 -336 -160 -336
WIRE 736 -336 128 -336
WIRE -160 -304 -160 -336
WIRE 128 -304 128 -336
WIRE -160 -208 -160 -240
WIRE 1040 -208 832 -208
WIRE 1152 -208 1104 -208
WIRE 1200 -208 1152 -208
WIRE 1264 -208 1200 -208
WIRE -496 -176 -576 -176
WIRE 128 -176 128 -224
WIRE 128 -176 -432 -176
WIRE 736 -176 736 -336
WIRE 832 -176 832 -208
WIRE 1264 -176 1264 -208
WIRE -576 -160 -576 -176
WIRE 1152 -160 1152 -208
WIRE 96 -112 32 -112
WIRE 128 -112 128 -176
WIRE 128 -112 96 -112
WIRE 208 -112 128 -112
WIRE 336 -112 288 -112
WIRE 512 -112 400 -112
WIRE 32 -96 32 -112
WIRE -576 -64 -576 -80
WIRE 832 -48 832 -96
WIRE 1152 -48 1152 -96
WIRE 1152 -48 832 -48
WIRE 1264 -48 1264 -96
WIRE 1264 -48 1152 -48
WIRE 32 -16 32 -32
WIRE 1152 -16 1152 -48
WIRE -208 0 -320 0
WIRE -320 48 -320 0
WIRE 736 80 736 -96
WIRE -688 128 -688 -336
WIRE 128 128 128 -112
WIRE 736 144 736 80
WIRE -320 160 -320 128
WIRE -256 160 -320 160
WIRE -160 160 -256 160
WIRE -48 160 -160 160
WIRE -16 160 -48 160
WIRE -256 176 -256 160
WIRE -160 192 -160 160
WIRE 320 224 272 224
WIRE 368 224 320 224
WIRE 528 224 368 224
WIRE 656 224 608 224
WIRE 688 224 656 224
WIRE 368 240 368 224
WIRE -256 272 -256 256
WIRE -160 272 -160 256
WIRE -160 272 -256 272
WIRE -48 272 -160 272
WIRE -16 272 -48 272
WIRE -48 320 -160 320
WIRE -16 320 -48 320
WIRE 368 320 368 304
WIRE -320 336 -320 160
WIRE -160 336 -160 320
WIRE 368 368 272 368
WIRE 416 368 368 368
WIRE 528 368 416 368
WIRE 656 368 608 368
WIRE 736 368 736 240
WIRE 736 368 656 368
WIRE 368 416 368 368
WIRE 736 416 736 368
WIRE -160 432 -160 416
WIRE -48 432 -160 432
WIRE -16 432 -48 432
WIRE -160 464 -160 432
WIRE -688 576 -688 208
WIRE -320 576 -320 416
WIRE -320 576 -688 576
WIRE -160 576 -160 528
WIRE -160 576 -320 576
WIRE 128 576 128 464
WIRE 128 576 -160 576
WIRE 368 576 368 480
WIRE 368 576 128 576
WIRE 736 576 736 496
WIRE 736 576 368 576
WIRE 128 592 128 576
FLAG 128 592 0
FLAG 368 320 0
FLAG -160 -208 0
FLAG 1152 -16 0
FLAG 1200 -208 out
FLAG -208 0 out
FLAG 32 -16 0
FLAG 512 -112 out
FLAG -576 -64 0
FLAG 656 224 gate
FLAG 656 368 sense
FLAG 736 80 drain
FLAG 96 -112 vcc
FLAG -48 320 ref
FLAG -48 432 osc
FLAG -48 160 fb
FLAG -48 272 cp
FLAG 320 224 gdrive
FLAG 416 368 sensef
SYMBOL res -176 320 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -336 32 R0
SYMATTR InstName R2
SYMATTR Value 18k
SYMBOL res -336 320 R0
SYMATTR InstName R3
SYMATTR Value 4.7k
SYMBOL res 624 352 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL cap -176 464 R0
SYMATTR InstName C1
SYMATTR Value 4.7n
SYMBOL cap -176 192 R0
WINDOW 3 59 32 Left 0
SYMATTR Value 100p
SYMATTR InstName C2
SYMBOL res -272 160 R0
SYMATTR InstName R5
SYMATTR Value 150k
SYMBOL res 720 400 R0
SYMATTR InstName R6
SYMATTR Value 1
SYMBOL cap 352 416 R0
SYMATTR InstName C3
SYMATTR Value 470p
SYMBOL res 624 208 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R7
SYMATTR Value 22
SYMBOL schottky 384 304 R180
WINDOW 0 -29 63 Left 0
WINDOW 3 -75 7 Left 0
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 112 -320 R0
SYMATTR InstName R8
SYMATTR Value 22k
SYMBOL cap -176 -304 R0
WINDOW 39 39 36 Left 0
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName C4
SYMATTR Value 220µ
SYMBOL ind2 720 -192 R0
WINDOW 0 -36 29 Left 0
WINDOW 3 -44 82 Left 0
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL ind2 848 -80 R180
WINDOW 0 -32 80 Left 0
WINDOW 3 -36 25 Left 0
SYMATTR InstName L2
SYMATTR Value 70µ
SYMATTR Type ind
SYMBOL schottky 1040 -192 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D4
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1136 -160 R0
WINDOW 39 24 92 Left 0
SYMATTR SpiceLine Rser=10m
SYMATTR InstName C7
SYMATTR Value 2200µ
SYMBOL voltage -688 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 132 Left 0
SYMATTR SpiceLine Rser=1
SYMATTR InstName V1
SYMATTR Value 180
SYMBOL res 1248 -192 R0
SYMATTR InstName R9
SYMATTR Value 20
SYMBOL res 192 -96 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R10
SYMATTR Value 220
SYMBOL cap 16 -96 R0
SYMATTR InstName C5
SYMATTR Value 47µ
SYMBOL diode 400 -128 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName D2
SYMBOL voltage -576 -176 R0
SYMATTR InstName V2
SYMATTR Value 8
SYMBOL diode -496 -160 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D3
SYMBOL nmos 688 144 R0
SYMATTR InstName M1
SYMATTR Value IRF840
SYMATTR Prefix X
SYMBOL uc1843 128 288 R0
SYMATTR InstName U1
TEXT -664 -408 Left 0 !.tran 0 30m 0 1u startup
TEXT -664 -440 Left 0 !.lib uc1843_lt.lib
TEXT 768 -248 Left 0 !K L1 L2 1
TEXT 136 64 Left 0 ;Uth: 8V on, 6V off
TEXT -584 -248 Left 0 ;quick start simulation
TEXT -152 0 Left 0 ;feedback
TEXT -664 -560 Left 0 ;This circuit has been posted sometime ago with an UC3842?.\nSo don't ask me whether it's correctly designed.
TEXT 416 -136 Left 0 ;self power
TEXT -664 -472 Left 0 !.lib IrfNmosFet.lib
TEXT 1152 -264 Left 0 ;Vnom = 12V
TEXT -376 -408 Left 0 ;The simulation runs  three times faster with trtol=7 and reltol=0.01 .
TEXT -376 -472 Left 0 !.options reltol=0.01\n.options trtol=7
LINE Normal 128 -16 128 -16 2
LINE Normal -512 -336 -512 -336 2
LINE Normal -512 -336 -512 -336 2
LINE Normal -512 -336 -512 -336 2
RECTANGLE Normal 912 -16 656 -272
RECTANGLE Normal -352 -32 -624 -288
RECTANGLE Normal 793 -88 777 -184
