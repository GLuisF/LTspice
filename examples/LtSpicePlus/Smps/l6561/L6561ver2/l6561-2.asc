Version 4
SHEET 1 1144 1092
WIRE -1264 0 -1264 -368
WIRE -1200 -464 -1200 -640
WIRE -1200 -368 -1264 -368
WIRE -1200 -368 -1200 -384
WIRE -1184 -128 -1184 -224
WIRE -1184 0 -1264 0
WIRE -1184 0 -1184 -48
WIRE -1136 -224 -1184 -224
WIRE -1136 -160 -1136 -224
WIRE -1104 -224 -1136 -224
WIRE -1104 -160 -1136 -160
WIRE -1088 -464 -1088 -528
WIRE -1088 -448 -1088 -464
WIRE -1088 -368 -1200 -368
WIRE -1072 -640 -1200 -640
WIRE -1072 -512 -1072 -640
WIRE -1072 -464 -1088 -464
WIRE -1056 -640 -1072 -640
WIRE -1024 -528 -1024 -544
WIRE -1024 -368 -1088 -368
WIRE -1024 -368 -1024 -448
WIRE -1024 -336 -1024 -368
WIRE -992 -160 -1040 -160
WIRE -944 -224 -1040 -224
WIRE -864 -576 -864 -592
WIRE -864 -544 -1024 -544
WIRE -864 -544 -864 -576
WIRE -864 -448 -864 -544
WIRE -848 -448 -864 -448
WIRE -784 -304 -784 -432
WIRE -784 -224 -944 -224
WIRE -784 -224 -784 -288
WIRE -704 -304 -784 -304
WIRE -576 -576 -864 -576
WIRE -576 -480 -576 -576
WIRE -576 -432 -608 -432
WIRE -576 272 -752 272
WIRE -576 288 -576 272
WIRE -576 384 -576 368
WIRE -576 400 -576 384
WIRE -544 272 -576 272
WIRE -528 -496 -528 -528
WIRE -528 -368 -1024 -368
WIRE -528 -368 -528 -416
WIRE -528 -304 -704 -304
WIRE -528 -288 -784 -288
WIRE -464 32 -480 32
WIRE -464 80 -464 32
WIRE -464 96 -464 80
WIRE -464 192 -464 176
WIRE -464 896 -464 864
WIRE -464 992 -464 960
WIRE -448 32 -464 32
WIRE -400 80 -464 80
WIRE -400 192 -464 192
WIRE -400 192 -400 128
WIRE -384 -256 -464 -256
WIRE -384 272 -464 272
WIRE -384 304 -384 272
WIRE -384 384 -576 384
WIRE -384 384 -384 368
WIRE -368 -480 -368 -624
WIRE -368 -448 -368 -480
WIRE -368 -368 -528 -368
WIRE -352 32 -368 32
WIRE -352 64 -352 32
WIRE -352 192 -400 192
WIRE -352 192 -352 144
WIRE -352 208 -352 192
WIRE -320 -480 -368 -480
WIRE -320 -368 -368 -368
WIRE -320 -368 -320 -432
WIRE -304 704 -304 656
WIRE -272 -496 -272 -528
WIRE -272 -368 -320 -368
WIRE -272 -368 -272 -416
WIRE -256 32 -352 32
WIRE -256 144 -256 32
WIRE -256 896 -304 896
WIRE -224 32 -256 32
WIRE -208 448 -256 448
WIRE -176 -528 -272 -528
WIRE -160 112 -192 112
WIRE -160 144 -256 144
WIRE -160 272 -384 272
WIRE -160 304 -208 304
WIRE -128 32 -160 32
WIRE -112 896 -192 896
WIRE -112 928 -192 928
WIRE -80 448 -128 448
WIRE -80 544 -80 448
WIRE -80 656 -304 656
WIRE -80 656 -80 608
WIRE 48 288 -96 288
WIRE 48 336 48 288
WIRE 64 80 64 -32
WIRE 64 448 -80 448
WIRE 64 496 64 448
WIRE 64 656 -80 656
WIRE 64 656 64 576
WIRE 80 336 48 336
WIRE 80 352 32 352
WIRE 96 -496 96 -528
WIRE 96 -368 -272 -368
WIRE 96 -368 96 -416
WIRE 112 80 64 80
WIRE 112 128 -96 128
WIRE 112 656 64 656
WIRE 112 656 112 560
WIRE 160 512 112 512
WIRE 192 -528 96 -528
WIRE 192 -496 192 -528
WIRE 192 -368 96 -368
WIRE 192 -368 192 -448
WIRE 192 32 192 0
WIRE 192 352 144 352
WIRE 192 352 192 176
WIRE 240 -496 192 -496
WIRE 240 -448 192 -448
WIRE 256 496 224 496
WIRE 256 496 256 224
WIRE 256 528 224 528
WIRE 288 -512 288 -528
WIRE 288 -368 192 -368
WIRE 288 -368 288 -432
WIRE 288 512 224 512
WIRE 288 512 288 368
WIRE 304 512 288 512
WIRE 336 80 272 80
WIRE 336 224 256 224
WIRE 336 224 336 80
WIRE 352 -528 288 -528
WIRE 352 0 192 0
WIRE 352 368 288 368
WIRE 352 368 352 0
WIRE 384 448 64 448
WIRE 384 496 368 496
WIRE 384 496 384 448
WIRE 432 528 368 528
WIRE 432 656 112 656
WIRE 432 656 432 528
WIRE 704 80 336 80
WIRE 704 176 704 80
WIRE 736 176 704 176
WIRE 736 192 704 192
WIRE 736 208 704 208
WIRE 736 224 704 224
WIRE 832 192 800 192
WIRE 832 192 832 64
WIRE 832 224 800 224
WIRE 832 256 832 224
WIRE 864 64 832 64
WIRE 864 128 864 112
WIRE 864 256 832 256
WIRE 864 336 864 304
WIRE 912 48 912 0
WIRE 912 176 912 128
WIRE 912 240 912 176
WIRE 912 336 912 320
WIRE 1008 176 912 176
FLAG -80 448 ramp
FLAG -304 704 0
FLAG -192 112 0
FLAG -752 272 cs
IOPIN -752 272 In
FLAG -576 400 0
FLAG -256 448 vcc
FLAG -304 896 vcc
IOPIN -304 896 In
FLAG -112 928 uvl
IOPIN -112 928 Out
FLAG 32 352 uvl
IOPIN 32 352 In
FLAG -112 896 uvl_
IOPIN -112 896 Out
FLAG 912 336 0
FLAG 864 336 0
FLAG 864 128 0
FLAG 704 192 uvl_
IOPIN 704 192 In
FLAG 912 0 vcc
IOPIN 912 0 In
FLAG 1008 176 gd
IOPIN 1008 176 Out
FLAG 256 528 uvl
IOPIN 256 528 In
FLAG -464 992 0
FLAG -464 864 vcc
IOPIN -464 864 In
FLAG -480 32 zcd
IOPIN -480 32 In
FLAG -128 32 dis_
IOPIN -128 32 Out
FLAG 704 208 dis_
IOPIN 704 208 In
FLAG -352 208 0
FLAG -1024 -336 0
FLAG -1088 -528 inv
IOPIN -1088 -528 In
FLAG -864 -592 comp
IOPIN -864 -592 Out
FLAG -1056 -640 ref25
IOPIN -1056 -640 Out
FLAG -944 -224 dyn_ovp
FLAG -992 -160 soft_ovp
FLAG -1184 -224 iea
FLAG -704 -304 stat_ovp
FLAG -608 -432 ref25
IOPIN -608 -432 In
FLAG -528 -528 comp_offset
IOPIN -528 -528 Out
FLAG -368 -624 mult
IOPIN -368 -624 In
FLAG -176 -528 mult_clamp
IOPIN -176 -528 Out
FLAG 352 -528 mult_out
IOPIN 352 -528 Out
FLAG -384 -256 ovp_
IOPIN -384 -256 Out
FLAG 704 224 ovp_
IOPIN 704 224 In
FLAG -208 304 mult_out
IOPIN -208 304 In
FLAG 64 -32 uvl_
IOPIN 64 -32 In
SYMBOL res -112 432 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R1
SYMATTR Value 240k
SYMBOL cap -96 544 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL sw 64 592 R180
SYMATTR InstName S1
SYMATTR Value myswitch
SYMBOL Digital\\diffschmtbuf 368 448 M0
WINDOW 3 -196 115 Left 0
SYMATTR Value trise = 100n vt = 4.9 vh = 0.1
SYMATTR InstName A3
SYMBOL Digital\\or 192 464 M0
WINDOW 3 -72 115 Left 0
SYMATTR Value trise = 100n
SYMATTR InstName A4
SYMBOL Digital\\dflop 192 32 R0
WINDOW 3 8 12 Left 0
SYMATTR Value td=10n trise=10n
SYMATTR InstName A1
SYMBOL Digital\\diffschmtbuf -160 64 R0
WINDOW 3 8 44 Left 0
SYMATTR Value trise=10n vt=-2 vh=0.1 td = 200n
SYMATTR InstName A5
SYMBOL Digital\\or 112 304 R0
SYMATTR InstName A6
SYMBOL Digital\\diffschmtbuf -160 224 R0
WINDOW 3 8 44 Left 0
SYMATTR Value td=200n tripdt=10n vt = 1m vh = 0
SYMATTR InstName A7
SYMBOL cap -400 304 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMBOL res -448 256 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R2
SYMATTR Value 40k
SYMBOL res -592 272 R0
SYMATTR InstName R3
SYMATTR Value 2meg
SYMBOL sw 912 144 M180
SYMATTR InstName S2
SYMATTR Value myswitch
SYMBOL sw 912 336 M180
SYMATTR InstName S3
SYMATTR Value myswitch
SYMBOL Digital\\and 768 144 R0
WINDOW 3 16 52 Left 0
SYMATTR Value trise=10n
SYMATTR InstName A8
SYMBOL diode -448 960 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D1
SYMATTR Value Dvcc
SYMBOL e -352 48 R0
SYMATTR InstName E1
SYMATTR Value table
SYMATTR Value2 (0,0.3)(0.6,0.6)(5.1,5.1)
SYMBOL res -352 16 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R4
SYMATTR Value 22
SYMBOL res -480 80 R0
SYMATTR InstName R5
SYMATTR Value 2meg
SYMBOL Digital\\buf1 -224 -32 R0
WINDOW 3 -21 95 Left 0
SYMATTR Value ref = 0.15 trise = 100n
SYMATTR InstName A9
SYMBOL e -1024 -544 R0
SYMATTR InstName Eopamp
SYMATTR Value table
SYMATTR Value2 (0,2)(1m,5.8)
SYMBOL res -1104 -464 R0
SYMATTR InstName R8
SYMATTR Value 2meg
SYMBOL h -1184 -144 R0
SYMATTR InstName H1
SYMATTR Value Eopamp 100000
SYMBOL e -528 -512 R0
SYMATTR InstName E6
SYMATTR Value table
SYMATTR Value2 (0,0)(0.2,0.05)(0.5,0.2)(0.7,0.33)(1,0.5)(1.5,0.9)(2,1.3)(2.5,1.6)(3.3,1.8)
SYMBOL e -272 -512 R0
SYMATTR InstName E7
SYMATTR Value table
SYMATTR Value2 (0,0)(3,3)
SYMBOL res -384 -464 R0
SYMATTR InstName R16
SYMATTR Value 2meg
SYMBOL e 288 -528 R0
SYMATTR InstName E9
SYMATTR Value table
SYMATTR Value2 (0,0)(1.6,1.6)(2,1.7)
SYMBOL Digital\\or -496 -336 R0
WINDOW 3 -8 36 Left 0
SYMATTR InstName A14
SYMATTR Value trise=10n
SYMBOL Digital\\buf -848 -512 R0
WINDOW 3 8 44 Left 0
SYMATTR Value ref = 2.25 trise = 100n tripdt=3n
SYMATTR InstName A10
SYMBOL Digital\\buf1 -1104 -224 R0
WINDOW 3 8 95 Left 0
SYMATTR Value ref = 3.7 trise = 100n
SYMATTR InstName A11
SYMBOL Digital\\diffschmitt -256 848 R0
WINDOW 3 8 44 Left 0
SYMATTR Value vt=10.75 vh=1.25
SYMATTR InstName A12
SYMATTR Value2 trise=10n td=100n
SYMBOL Digital\\diffschmitt -1104 -272 R0
WINDOW 3 8 44 Left 0
SYMATTR Value vt = 2.5 vh =1.5 trise = 100n
SYMATTR InstName A2
SYMBOL bv -1200 -480 R0
SYMATTR InstName B1
SYMATTR Value V=V(uvl_)*2.5
SYMBOL bv 96 -512 R0
SYMATTR InstName B2
SYMATTR Value V=if(v(soft_ovp),0.1,v(mult_clamp)*v(comp_offset))
TEXT 200 1016 Left 0 !.model myswitch sw(ron=25 roff=1meg vt=0.5 vh=-0.1)\n.model Dvcc d(vfwd = 0.6 vrev =20)
TEXT -338 728 Left 0 !.tran 1m
