Version 4
SHEET 1 1548 680
WIRE 368 64 -112 64
WIRE 80 96 48 96
WIRE 368 96 368 64
WIRE 368 96 304 96
WIRE 400 96 368 96
WIRE 512 96 480 96
WIRE 544 96 512 96
WIRE 656 96 608 96
WIRE 80 160 16 160
WIRE 512 160 512 96
WIRE 512 160 304 160
WIRE 544 160 512 160
WIRE 656 160 656 96
WIRE 656 160 624 160
WIRE -16 224 -16 208
WIRE 80 224 -16 224
WIRE 464 224 304 224
WIRE 656 224 656 160
WIRE 656 224 464 224
WIRE 368 256 368 96
WIRE 512 256 512 160
WIRE -112 288 -112 64
WIRE 80 288 -112 288
WIRE 320 288 304 288
WIRE 336 288 320 288
WIRE -112 320 -112 288
WIRE 16 336 16 160
WIRE 464 336 464 224
WIRE 464 336 16 336
WIRE 16 352 16 336
WIRE 320 352 320 288
WIRE 512 352 512 336
WIRE 672 352 512 352
WIRE 672 368 672 352
WIRE -112 416 -112 400
WIRE -80 416 -112 416
WIRE -80 432 -80 416
WIRE -112 464 -112 416
WIRE 16 464 16 416
WIRE 16 464 -112 464
WIRE 48 464 48 96
WIRE 48 464 16 464
WIRE 320 464 320 416
WIRE 320 464 48 464
WIRE 368 464 368 320
WIRE 368 464 320 464
WIRE 672 464 672 448
WIRE 672 464 368 464
FLAG -80 432 0
FLAG -16 208 Out555
IOPIN -16 208 Out
SYMBOL voltage -112 304 R0
WINDOW 3 -29 58 Left 0
WINDOW 0 11 11 Left 0
SYMATTR Value {vdd}
SYMATTR InstName V+
SYMBOL cap 0 352 R0
WINDOW 0 -29 9 Left 0
WINDOW 3 -35 52 Left 0
SYMATTR InstName C1
SYMATTR Value 2n7
SYMBOL res 640 144 R90
WINDOW 0 15 95 VBottom 0
WINDOW 3 -12 10 VTop 0
SYMATTR InstName Rtoff
SYMATTR Value 1e5
SYMBOL diode 544 80 M90
WINDOW 0 13 -4 VBottom 0
WINDOW 3 -10 81 VTop 0
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL Robertugo\\Pote 352 224 R0
SYMATTR InstName U2
SYMATTR Value2 Set=.667
SYMBOL cap 304 352 R0
WINDOW 0 -29 8 Left 0
WINDOW 3 -31 56 Left 0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res 496 80 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rton
SYMATTR Value 47k
SYMBOL res 496 240 R0
SYMATTR InstName R3
SYMATTR Value 1e5
SYMBOL voltage 672 352 R0
WINDOW 3 -42 57 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -71 18 Left 0
SYMATTR Value {Vpwm}
SYMATTR InstName Vctrl
SYMBOL Robertugo\\555_ALL 240 208 R0
WINDOW 38 -79 74 Left 0
SYMATTR SpiceModel 555bc
SYMATTR InstName U1
TEXT 62 440 Left 0 !.tran 0 10m 0 startup
TEXT 744 112 Left 0 !.params: Vdd 12 Ronx=.1\n.step param Vpwm 0 12 1\n.meas tran ta FIND time WHEN V(out555)={Vdd/2} td=.1m rise=1\n.meas tran tb FIND time WHEN V(out555)={Vdd/2} td=.1m rise=11\n.meas tran Frec PARAM 10/(tb-ta)\n.Meas tran Tc FIND time WHEN V(Out555)={Vdd/2} td=.1m fall=1\n.Meas tran Td FIND time WHEN V(Out555)={Vdd/2} td=.1m fall=2\n.Meas tran T1 Param  (Tc-Ta)\n.Meas tran T2  Param  (Td-Ta)\n.Meas tran Ton Param If (T1>0, T1, T2)\n.Meas tran Duty% Param  Ton*Frec*100
