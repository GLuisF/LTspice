Version 4
SHEET 1 2112 680
WIRE -208 -528 -208 -560
WIRE -144 -624 -144 -672
WIRE -144 -528 -208 -528
WIRE -144 -528 -144 -544
WIRE -144 -512 -144 -528
WIRE -144 -416 -160 -416
WIRE -144 -416 -144 -432
WIRE -96 -704 -96 -720
WIRE -80 -560 -96 -560
WIRE -80 -416 -144 -416
WIRE -80 -416 -80 -560
WIRE -48 -544 -48 -576
WIRE -48 -512 -48 -544
WIRE -32 -608 -96 -608
WIRE -32 -512 -48 -512
WIRE 0 -544 -48 -544
WIRE 0 -544 0 -560
WIRE 16 -864 -16 -864
WIRE 16 -736 16 -864
WIRE 16 -656 16 -736
WIRE 32 -656 16 -656
WIRE 48 -864 16 -864
WIRE 48 -816 48 -832
WIRE 48 -800 48 -816
WIRE 48 -736 16 -736
WIRE 48 -704 0 -704
WIRE 48 -608 32 -608
WIRE 48 -592 32 -592
WIRE 48 -592 48 -608
WIRE 48 -576 32 -576
WIRE 48 -576 48 -592
WIRE 48 -544 0 -544
WIRE 48 -544 48 -576
WIRE 64 -800 48 -800
WIRE 64 -384 32 -384
WIRE 64 -336 48 -336
WIRE 64 -336 64 -352
WIRE 96 0 96 -16
WIRE 96 16 96 0
WIRE 96 112 96 80
WIRE 112 -816 48 -816
WIRE 112 -816 112 -848
WIRE 112 -16 96 -16
WIRE 128 -720 112 -720
WIRE 128 -656 112 -656
WIRE 128 -656 128 -720
WIRE 128 -336 64 -336
WIRE 128 -336 128 -368
WIRE 144 -880 112 -880
WIRE 160 -880 144 -880
WIRE 160 -720 160 -880
WIRE 160 -624 32 -624
WIRE 160 -624 160 -720
WIRE 160 -560 32 -560
WIRE 160 -400 128 -400
WIRE 160 -400 160 -560
WIRE 160 -240 160 -256
WIRE 160 -128 160 -160
WIRE 160 0 96 0
WIRE 160 16 160 0
WIRE 160 112 96 112
WIRE 160 112 160 96
WIRE 192 -592 176 -592
WIRE 192 -592 192 -672
WIRE 192 -448 192 -592
WIRE 192 -256 160 -256
WIRE 224 -768 224 -784
WIRE 224 -720 160 -720
WIRE 224 -672 192 -672
WIRE 224 -448 192 -448
WIRE 224 -400 160 -400
WIRE 224 -336 208 -336
WIRE 224 -336 224 -352
WIRE 240 -784 224 -784
WIRE 240 -256 192 -256
WIRE 240 -224 240 -256
WIRE 240 -128 160 -128
WIRE 240 -128 240 -144
WIRE 256 16 256 0
WIRE 256 112 160 112
WIRE 256 112 256 96
WIRE 304 -768 304 -784
WIRE 304 -576 256 -576
WIRE 304 -576 304 -624
WIRE 304 -496 304 -576
WIRE 304 -336 304 -352
WIRE 304 0 256 0
WIRE 320 -288 288 -288
WIRE 320 -240 320 -288
WIRE 320 -224 320 -240
WIRE 320 -128 240 -128
WIRE 320 -128 320 -144
WIRE 336 0 304 0
WIRE 336 16 336 0
WIRE 336 112 256 112
WIRE 336 112 336 96
WIRE 352 -288 320 -288
WIRE 352 -240 320 -240
WIRE 416 -672 384 -672
WIRE 416 -592 416 -672
WIRE 416 -448 384 -448
WIRE 416 -448 416 -576
WIRE 416 32 416 0
WIRE 432 -544 432 -560
WIRE 432 -528 432 -544
WIRE 432 -512 432 -528
WIRE 432 -480 432 -512
WIRE 432 32 416 32
WIRE 448 -592 416 -592
WIRE 448 -576 416 -576
WIRE 448 -560 432 -560
WIRE 448 -544 432 -544
WIRE 448 -528 432 -528
WIRE 448 -480 432 -480
WIRE 448 -288 432 -288
WIRE 448 -240 416 -240
WIRE 448 -240 448 -288
WIRE 448 -224 448 -240
WIRE 448 -128 320 -128
WIRE 448 -128 448 -144
WIRE 464 -512 432 -512
WIRE 464 -512 464 -528
WIRE 480 -288 448 -288
WIRE 480 0 416 0
WIRE 480 16 480 0
WIRE 480 112 336 112
WIRE 480 112 480 96
WIRE 496 0 480 0
WIRE 512 -512 464 -512
WIRE 512 -512 512 -544
WIRE 544 -448 416 -448
WIRE 544 -448 544 -704
WIRE 544 -128 448 -128
WIRE 576 32 576 0
WIRE 592 -672 416 -672
WIRE 592 -416 592 -672
WIRE 592 32 576 32
WIRE 624 -448 624 -464
WIRE 624 -432 624 -448
WIRE 624 -384 624 -432
WIRE 624 -368 608 -368
WIRE 624 -368 624 -384
WIRE 624 -240 576 -240
WIRE 624 -224 624 -240
WIRE 624 -128 544 -128
WIRE 624 -128 624 -144
WIRE 640 -752 640 -768
WIRE 640 -736 640 -752
WIRE 640 -688 640 -736
WIRE 640 -672 640 -688
WIRE 640 -448 624 -448
WIRE 640 -432 624 -432
WIRE 640 -416 592 -416
WIRE 640 -400 400 -400
WIRE 640 -384 624 -384
WIRE 640 0 576 0
WIRE 640 16 640 0
WIRE 640 112 480 112
WIRE 640 112 640 96
WIRE 656 -752 640 -752
WIRE 656 -736 640 -736
WIRE 656 -720 400 -720
WIRE 656 -704 544 -704
WIRE 656 -688 640 -688
WIRE 656 -368 624 -368
WIRE 656 -368 656 -384
WIRE 656 -240 624 -240
WIRE 656 0 640 0
WIRE 672 -672 640 -672
WIRE 672 -672 672 -688
WIRE 688 -672 672 -672
WIRE 688 112 640 112
WIRE 704 -464 624 -464
WIRE 704 -432 704 -464
WIRE 720 -768 640 -768
WIRE 720 -736 720 -768
WIRE 736 32 736 0
WIRE 752 -784 304 -784
WIRE 752 -576 512 -576
WIRE 752 -576 752 -784
WIRE 752 -336 304 -336
WIRE 752 -336 752 -576
WIRE 752 -240 736 -240
WIRE 784 -240 752 -240
WIRE 784 -240 784 -272
WIRE 784 -208 784 -240
WIRE 784 -128 624 -128
WIRE 784 -128 784 -144
WIRE 800 -704 720 -704
WIRE 800 -640 800 -704
WIRE 800 -400 704 -400
WIRE 800 -400 800 -624
WIRE 800 0 736 0
WIRE 800 16 800 0
WIRE 800 112 688 112
WIRE 800 112 800 96
WIRE 832 -672 832 -688
WIRE 832 -656 832 -672
WIRE 832 -608 832 -656
WIRE 832 -592 832 -608
WIRE 832 -240 784 -240
WIRE 848 -672 832 -672
WIRE 848 -656 832 -656
WIRE 848 -640 800 -640
WIRE 848 -624 800 -624
WIRE 848 -608 832 -608
WIRE 864 -592 832 -592
WIRE 864 -592 864 -608
WIRE 880 -592 864 -592
WIRE 880 -432 848 -432
WIRE 880 -432 880 -576
WIRE 912 -688 832 -688
WIRE 912 -656 912 -688
WIRE 912 -240 896 -240
WIRE 928 -240 912 -240
WIRE 928 -224 928 -240
WIRE 928 -128 784 -128
WIRE 928 -128 928 -144
WIRE 944 -272 784 -272
WIRE 944 -240 944 -272
WIRE 944 0 928 0
WIRE 944 16 944 0
WIRE 944 112 800 112
WIRE 944 112 944 96
WIRE 960 -624 912 -624
WIRE 960 -576 880 -576
WIRE 976 -240 944 -240
WIRE 1008 -640 1008 -736
WIRE 1008 -544 992 -544
WIRE 1008 -544 1008 -560
WIRE 1008 -528 1008 -544
WIRE 1008 -432 880 -432
WIRE 1008 -432 1008 -448
WIRE 1040 16 1040 0
WIRE 1040 112 944 112
WIRE 1040 112 1040 96
WIRE 1056 -240 1040 -240
WIRE 1072 -336 1056 -336
WIRE 1072 -336 1072 -352
WIRE 1072 -240 1056 -240
WIRE 1072 -224 1072 -240
WIRE 1072 -128 928 -128
WIRE 1072 -128 1072 -144
WIRE 1104 -704 800 -704
WIRE 1104 -656 1088 -656
WIRE 1104 -400 800 -400
WIRE 1104 -352 1072 -352
WIRE 1152 -736 1008 -736
WIRE 1152 -736 1152 -816
WIRE 1152 -720 1152 -736
WIRE 1152 -496 1136 -496
WIRE 1152 -496 1152 -640
WIRE 1152 -416 1152 -496
WIRE 1152 -336 1072 -336
WIRE 1152 -288 1136 -288
WIRE 1152 -224 1152 -288
WIRE 1152 -128 1072 -128
WIRE 1152 -128 1152 -144
WIRE 1152 0 1040 0
WIRE 1152 16 1152 0
WIRE 1152 112 1040 112
WIRE 1152 112 1152 96
WIRE 1168 -16 1152 -16
WIRE 1168 0 1152 0
WIRE 1168 0 1168 -16
FLAG 176 -592 Vdd
IOPIN 176 -592 In
FLAG 32 -384 Comp
IOPIN 32 -384 In
FLAG 992 -544 Ppout
IOPIN 992 -544 Out
FLAG 1152 -816 Vdd
IOPIN 1152 -816 In
FLAG 1136 -496 CBout
IOPIN 1136 -496 Out
FLAG -208 -560 CAout
IOPIN -208 -560 Out
FLAG -144 -672 Vdd
IOPIN -144 -672 In
FLAG -16 -864 Sigin
IOPIN -16 -864 In
FLAG 112 -752 ca
FLAG 144 -880 cc
FLAG 48 -336 Vss
FLAG 208 -336 Vss
FLAG 608 -368 Vss
FLAG 848 -432 Vss
FLAG 1056 -336 Vss
FLAG -160 -416 Vss
FLAG -32 -512 Vss
FLAG 256 -576 Vss
FLAG 240 -784 Vss
FLAG 64 -800 Vss
FLAG 0 -704 Vss
FLAG 448 -480 Vss
FLAG 688 -672 Vss
FLAG 880 -592 Vss
FLAG 1088 -656 Vss
FLAG -96 -704 Vss
FLAG -96 -800 ca
FLAG 688 112 Vss
FLAG 928 0 Vcoin
IOPIN 928 0 In
FLAG 304 0 Mix
FLAG 576 32 Ir2
FLAG 592 80 Vdd
FLAG 656 0 r2
IOPIN 656 0 In
FLAG 416 32 Ir1
FLAG 432 80 Mix
FLAG 496 0 r1
IOPIN 496 0 In
FLAG 544 -128 Vss
FLAG 192 -256 Adj
FLAG 480 -288 Ce1
IOPIN 480 -288 In
FLAG 288 -288 Ce2
IOPIN 288 -288 In
FLAG 576 -240 Pul
FLAG 752 -240 Sqr
FLAG 912 -240 13
FLAG 1056 -240 14
FLAG 1136 -288 Vcout
IOPIN 1136 -288 Out
FLAG 736 32 Inh
IOPIN 736 32 In
FLAG 112 -16 Zener
IOPIN 112 -16 Out
FLAG 1152 -16 Demout
IOPIN 1152 -16 Out
SYMBOL Digital\\dflop 304 -624 M180
SYMATTR InstName ADff1
SYMBOL Digital\\dflop 304 -496 R0
SYMATTR InstName ADff2
SYMBOL Digital\\or 688 -784 R0
WINDOW 0 -20 70 Left 0
WINDOW 3 -45 136 Left 0
SYMATTR InstName An1
SYMATTR Value td=20n
SYMBOL Digital\\or 672 -480 R0
WINDOW 0 -21 68 Left 0
WINDOW 3 -12 121 Left 0
SYMATTR InstName An2
SYMATTR Value td=20n
SYMBOL Digital\\xor -16 -656 M0
WINDOW 0 -34 12 Left 0
SYMATTR InstName Axor
SYMBOL Digital\\or 880 -704 R0
WINDOW 0 -19 64 Left 0
SYMATTR InstName An3
SYMBOL Digital\\and 480 -624 R0
WINDOW 0 -29 66 Left 0
WINDOW 3 -83 199 Left 0
SYMATTR InstName And
SYMATTR Value td=20n tripdt=20n
SYMBOL sw 1152 -624 M180
WINDOW 0 -25 54 Left 0
WINDOW 3 -52 99 Left 0
SYMATTR InstName SH
SYMATTR Value Std
SYMBOL sw 1152 -320 M180
WINDOW 0 -27 54 Left 0
WINDOW 3 -59 116 Left 0
SYMATTR InstName SL
SYMATTR Value Std
SYMBOL sw 1008 -544 M180
WINDOW 0 -25 54 Left 0
WINDOW 3 -50 107 Left 0
SYMATTR InstName pcpo
SYMATTR Value Std
SYMBOL res 1024 -432 R180
WINDOW 0 32 79 Left 0
WINDOW 3 34 45 Left 0
SYMATTR InstName Rpout
SYMATTR Value 10k
SYMBOL sw -144 -528 R180
WINDOW 0 -22 50 Left 0
WINDOW 3 6 105 Left 0
SYMATTR InstName Sca
SYMATTR Value Std
SYMBOL res -160 -528 R0
WINDOW 0 25 46 Left 0
WINDOW 3 22 97 Left 0
SYMATTR InstName Rcpa
SYMATTR Value 10k
SYMBOL Digital\\schmitt 64 -448 R0
WINDOW 3 -256 140 Invisible 0
SYMATTR Value vt={Vdd/2} vh={(Vdd/2)-.5} td=20n tripdt=50n
SYMATTR InstName Acmp
SYMBOL Digital\\schmitt 48 -800 R0
WINDOW 3 -181 102 Invisible 0
WINDOW 0 34 35 Left 0
SYMATTR Value vt=0 vh=150m td=20n tripdt=50n
SYMATTR InstName Aca
SYMBOL Digital\\schmitt 48 -928 R0
WINDOW 3 129 35 Invisible 0
WINDOW 0 25 30 Left 0
SYMATTR Value vt={Vdd/2} vh={(Vdd/2)-.5} td=20n tripdt=50n
SYMATTR InstName Acc
SYMBOL res 128 -672 R90
WINDOW 0 -1 78 VBottom 0
WINDOW 3 -25 25 VTop 0
SYMATTR InstName Rbias
SYMATTR Value 1e7
SYMBOL res -112 -816 R0
SYMATTR InstName Rdumy
SYMATTR Value 1g
SYMBOL res 928 0 R0
WINDOW 0 -51 41 Left 0
WINDOW 3 -67 69 Left 0
SYMATTR InstName Rin
SYMATTR Value {Rin}
SYMBOL bv 336 0 R0
WINDOW 0 -18 58 Left 0
WINDOW 3 -279 128 Left 0
SYMATTR InstName Bm
SYMATTR Value V=(if(v(vcoin,vss)<v(vdd,vss),S1*v(vcoin,vss),S2*(v(vcoin,vss)-v(vdd,vss))+v(vdd,vss))*Kb+Vfree)
SYMBOL res 240 0 R0
WINDOW 0 24 47 Left 0
SYMATTR InstName Rm
SYMATTR Value 1
SYMBOL e 640 112 M180
WINDOW 0 -17 58 Left 0
WINDOW 3 -59 96 Left 0
SYMATTR InstName Er1
SYMATTR Value 2e8
SYMBOL e 480 112 M180
WINDOW 0 -17 58 Left 0
WINDOW 3 -58 96 Left 0
SYMATTR InstName Er2
SYMATTR Value 2e8
SYMBOL bv 240 -240 R0
WINDOW 0 -30 56 Left 0
WINDOW 3 -191 127 Left 0
SYMATTR InstName Badj
SYMATTR Value V=TABLE ((abs(V(vdd)*V(mix)/I(Er2)*I(Er1))),.5,1.43, 1,1.6, 10,1.04, 50,.67, 100,.84, 101,1, 102,1, 1000,1)
SYMBOL res 144 -256 R0
WINDOW 0 33 16 Left 0
WINDOW 3 34 48 Left 0
SYMATTR InstName Radj
SYMATTR Value 1g
SYMBOL bi 448 -224 R0
WINDOW 0 -19 24 Left 0
WINDOW 3 -396 138 Left 0
SYMATTR InstName Bim
SYMATTR Value I=((M1*I(Er1)*V(adj)+M2*I(Er2))*Kc*V(sqr))
SYMBOL voltage 320 -240 R0
WINDOW 0 -32 55 Left 0
WINDOW 3 42 81 Left 0
SYMATTR InstName vcext
SYMATTR Value 0
SYMBOL cap 416 -256 R90
WINDOW 0 56 28 VBottom 0
WINDOW 3 -12 -16 VTop 0
SYMATTR InstName Cstray
SYMATTR Value 5p
SYMBOL res 448 -304 R90
WINDOW 0 17 123 VBottom 0
WINDOW 3 -11 11 VTop 0
SYMATTR InstName Rcext
SYMATTR Value 1g
SYMBOL bv 624 -240 R0
WINDOW 0 -26 59 Left 0
WINDOW 3 -52 155 Left 0
SYMATTR InstName Bsqr
SYMATTR Value V=(1.2e6*V(sqr)-1e7*V(Ce1))
SYMBOL res 752 -256 R90
WINDOW 0 -2 112 VBottom 0
WINDOW 3 -28 61 VTop 0
SYMATTR InstName Rint
SYMATTR Value .1T
SYMBOL cap 768 -208 R0
WINDOW 0 -58 29 Left 0
WINDOW 3 -47 57 Left 0
SYMATTR InstName Cint
SYMATTR Value 10f
SYMBOL diode 832 -224 R270
WINDOW 0 -28 32 VTop 0
WINDOW 3 42 -3 VBottom 0
SYMATTR InstName Dlimh
SYMATTR Value Dio
SYMBOL voltage 928 -240 R0
WINDOW 0 -67 99 Left 0
WINDOW 3 -30 61 Left 0
SYMATTR InstName Vlimh
SYMATTR Value {Vdd}
SYMBOL diode 1040 -256 R90
WINDOW 0 1 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Dliml
SYMATTR Value Dio
SYMBOL voltage 1072 -128 R180
WINDOW 0 20 15 Left 0
WINDOW 3 -30 56 Left 0
SYMATTR InstName Vliml
SYMATTR Value {Vdd}
SYMBOL bv 1152 -240 R0
WINDOW 0 -28 58 Left 0
WINDOW 3 -492 187 Left 0
SYMATTR InstName BOut
SYMATTR Value V=table ((1-u(v(inh)))*(v(sqr)),.1,.1, v(vdd),v(vdd))
SYMBOL res 784 0 R0
WINDOW 0 -41 21 Left 0
WINDOW 3 -34 65 Left 0
SYMATTR InstName Rinh
SYMATTR Value 1e6
SYMBOL zener 112 80 R180
WINDOW 0 -17 62 Left 0
WINDOW 3 -33 -15 Left 0
SYMATTR InstName Dz
SYMATTR Value Zen
SYMBOL res 144 0 R0
WINDOW 0 59 49 Right 0
WINDOW 3 30 84 Left 0
SYMATTR InstName Rz
SYMATTR Value 1g
SYMBOL bv 1152 0 R0
WINDOW 0 -32 57 Left 0
WINDOW 3 28 156 Right 0
SYMATTR InstName bdem
SYMATTR Value V=table (2e8*v(vcoin,demout)*(1-u(v(inh))),-20,-20, 20,20)
SYMBOL res 1024 0 R0
WINDOW 0 31 17 Left 0
SYMATTR InstName Rdem
SYMATTR Value 1g
TEXT -72 -896 Left 0 ;14
TEXT -16 -408 Left 0 ;3
TEXT -208 -664 VLeft 0 ;2
TEXT 1088 -528 Left 0 ;13
TEXT 896 -520 Left 0 ;1
TEXT -208 -312 Left 0 ;cc vt={Vdd/2} vh={(Vdd/2)-.5} td=1e-7 tripdt=20n\nca vt=0 vh=150m td=1e-7 tripdt=20n
TEXT 216 -896 Left 0 !.model zen D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484 Vj=.75 Fc=.5\n+Isr=1.8n Nr=2 Bv=7 Ibv=27.721m Nbv=1.178 Ibvl=1.165m Nbvl=21.894 Tbv1=176.47u)\n.model Dio D (IS=10u N=0.1 CJO=80f RS=1m)\n.model Std Sw(Ron=10 Roff=1t Vt=.5 Vh=.4
