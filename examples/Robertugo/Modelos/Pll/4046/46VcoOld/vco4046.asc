Version 4
SHEET 1 1740 680
WIRE -112 -96 -112 -112
WIRE -112 16 -112 -16
WIRE -80 272 -80 240
WIRE -80 288 -80 272
WIRE -80 400 -80 368
WIRE -64 -112 -112 -112
WIRE -16 -112 -64 -112
WIRE -16 -80 -16 -112
WIRE -16 16 -112 16
WIRE -16 16 -16 0
WIRE 16 288 16 256
WIRE 16 400 -80 400
WIRE 16 400 16 368
WIRE 32 256 16 256
WIRE 64 -96 48 -96
WIRE 64 -96 64 -144
WIRE 64 -80 64 -96
WIRE 64 16 -16 16
WIRE 64 16 64 0
WIRE 96 -144 64 -144
WIRE 96 -96 64 -96
WIRE 128 288 128 256
WIRE 128 400 16 400
WIRE 128 400 128 368
WIRE 144 256 128 256
WIRE 192 -144 176 -144
WIRE 192 -96 160 -96
WIRE 192 -96 192 -144
WIRE 192 -80 192 -96
WIRE 192 16 64 16
WIRE 192 16 192 0
WIRE 224 -96 192 -96
WIRE 224 288 224 272
WIRE 224 400 128 400
WIRE 224 400 224 368
WIRE 288 272 224 272
WIRE 336 272 288 272
WIRE 336 288 336 272
WIRE 336 400 224 400
WIRE 336 400 336 368
WIRE 400 272 400 256
WIRE 400 400 336 400
WIRE 400 400 400 352
WIRE 464 256 400 256
WIRE 480 16 192 16
WIRE 496 256 464 256
WIRE 496 304 496 256
WIRE 496 400 400 400
WIRE 496 400 496 384
WIRE 544 400 496 400
WIRE 576 224 576 128
WIRE 576 368 576 288
WIRE 608 224 576 224
WIRE 608 368 576 368
WIRE 624 -96 576 -96
WIRE 624 -80 624 -96
WIRE 624 16 480 16
WIRE 624 16 624 0
WIRE 640 176 624 176
WIRE 640 224 608 224
WIRE 640 320 624 320
WIRE 640 368 608 368
WIRE 672 -96 624 -96
WIRE 688 128 576 128
WIRE 688 160 688 128
WIRE 688 272 688 240
WIRE 688 288 576 288
WIRE 688 304 688 288
WIRE 688 400 544 400
WIRE 688 400 688 384
WIRE 784 -96 752 -96
WIRE 784 -96 784 -128
WIRE 784 -80 784 -96
WIRE 784 16 624 16
WIRE 784 16 784 -16
WIRE 800 128 688 128
WIRE 800 144 800 128
WIRE 800 240 800 224
WIRE 800 288 688 288
WIRE 800 304 800 288
WIRE 800 384 784 384
WIRE 832 -96 784 -96
WIRE 848 272 688 272
WIRE 848 400 688 400
WIRE 848 400 848 272
WIRE 896 304 896 288
WIRE 896 400 848 400
WIRE 896 400 896 384
WIRE 912 -96 896 -96
WIRE 928 -96 912 -96
WIRE 928 -80 928 -96
WIRE 928 16 784 16
WIRE 928 16 928 0
WIRE 928 176 928 160
WIRE 928 272 848 272
WIRE 928 272 928 240
WIRE 944 -128 784 -128
WIRE 944 -96 944 -128
WIRE 960 -96 944 -96
WIRE 960 288 896 288
WIRE 960 304 960 288
WIRE 960 400 896 400
WIRE 960 400 960 384
WIRE 976 160 928 160
WIRE 976 176 976 160
WIRE 976 272 928 272
WIRE 976 272 976 256
WIRE 976 288 960 288
WIRE 992 160 976 160
WIRE 1024 304 1024 288
WIRE 1024 400 960 400
WIRE 1024 400 1024 384
WIRE 1056 -96 1024 -96
WIRE 1072 -96 1056 -96
WIRE 1072 -80 1072 -96
WIRE 1072 16 928 16
WIRE 1072 16 1072 0
WIRE 1072 288 1024 288
WIRE 1136 288 1072 288
WIRE 1136 304 1136 288
WIRE 1136 400 1024 400
WIRE 1136 400 1136 384
WIRE 1152 -80 1152 -96
WIRE 1152 16 1072 16
WIRE 1152 16 1152 0
WIRE 1168 -96 1152 -96
FLAG 544 400 Vss
FLAG -80 272 Vdd
FLAG 32 256 Vcoin
FLAG 288 272 Vlim
FLAG 464 256 Mix
FLAG 608 368 Ir2
FLAG 624 320 Vdd
FLAG 784 384 r2
FLAG 608 224 Ir1
FLAG 624 176 Mix
FLAG 800 240 r1
FLAG 480 16 Vss
FLAG -64 -112 Adj
FLAG 224 -96 Ce1
FLAG 48 -96 Ce2
FLAG 576 -96 Pul
FLAG 784 -128 Sqr
FLAG 912 -96 13
FLAG 1056 -96 14
FLAG 1152 -96 Vcout
FLAG 144 256 Inh
FLAG 976 288 Off
FLAG 992 160 Zener
FLAG 1072 288 Demout
SYMBOL res 0 272 R0
WINDOW 0 33 47 Left 0
WINDOW 3 26 86 Left 0
SYMATTR InstName Rin
SYMATTR Value {Rin}
SYMBOL res -96 272 R0
WINDOW 0 27 45 Left 0
WINDOW 3 27 84 Left 0
SYMATTR InstName Rvdd
SYMATTR Value 1g
SYMBOL bv 336 272 R0
WINDOW 0 -24 58 Left 0
WINDOW 3 -426 144 Left 0
SYMATTR InstName Blim
SYMATTR Value V=(if(v(vcoin,vss)<v(vdd,vss),S1*v(vcoin,vss),S2*(v(vcoin,vss)-v(vdd,vss))+v(vdd,vss)))
SYMBOL res 208 272 R0
WINDOW 0 27 45 Left 0
WINDOW 3 27 84 Left 0
SYMATTR InstName Rlim
SYMATTR Value 1e6
SYMBOL bv 496 288 R0
WINDOW 0 -32 59 Left 0
WINDOW 3 429 129 Left 0
SYMATTR InstName Bmul
SYMATTR Value V=(v(vlim)*Kb+Vfree)
SYMBOL res 384 256 R0
SYMATTR InstName Rmul
SYMATTR Value 1
SYMBOL e 688 288 R0
WINDOW 0 -17 58 Left 0
WINDOW 3 5 98 Left 0
SYMATTR InstName Er2
SYMATTR Value 1e3
SYMBOL voltage 800 288 R0
WINDOW 0 -19 59 Left 0
SYMATTR InstName Vr2
SYMATTR Value 0
SYMBOL e 688 144 R0
WINDOW 0 -17 58 Left 0
WINDOW 3 4 98 Left 0
SYMATTR InstName Er1
SYMATTR Value 1e3
SYMBOL voltage 800 128 R0
WINDOW 0 -16 59 Left 0
SYMATTR InstName Vr1
SYMATTR Value 0
SYMBOL bv -16 -96 R0
WINDOW 0 -30 56 Left 0
WINDOW 3 -94 131 Left 0
SYMATTR InstName Bosc
SYMATTR Value V=TABLE ((abs(V(vdd)*V(mix)/I(VR2)*I(VR1))),.5,1.43, 1,1.6, 10,1.04, 50,.67, 100,.84, 101,1, 102,1, 1000,1)
SYMBOL res -128 -112 R0
WINDOW 0 22 49 Left 0
WINDOW 3 27 84 Left 0
SYMATTR InstName Radj
SYMATTR Value 1g
SYMBOL bi 192 -80 R0
WINDOW 0 -21 22 Left 0
WINDOW 3 -303 143 Left 0
SYMATTR InstName Bim
SYMATTR Value I=((M1*I(VR1)*V(adj)+M2*I(VR2))*Kc*V(sqr))
SYMBOL voltage 64 -96 R0
WINDOW 0 -34 56 Left 0
SYMATTR InstName Vcext
SYMATTR Value 0
SYMBOL cap 160 -112 R90
WINDOW 0 56 28 VBottom 0
WINDOW 3 -12 -16 VTop 0
SYMATTR InstName Cstray
SYMATTR Value 6p
SYMBOL res 192 -160 R90
WINDOW 0 18 125 VBottom 0
WINDOW 3 -11 11 VTop 0
SYMATTR InstName Rcext
SYMATTR Value 1g
SYMBOL bv 624 -96 R0
WINDOW 0 -26 59 Left 0
WINDOW 3 -248 160 Left 0
SYMATTR InstName Bsqr
SYMATTR Value V=(-1e7*V(Ce1)+1.2e6*V(sqr))
SYMBOL res 768 -112 R90
WINDOW 0 -2 64 VBottom 0
WINDOW 3 30 86 VTop 0
SYMATTR InstName Rsq
SYMATTR Value .1T
SYMBOL cap 768 -80 R0
WINDOW 0 -58 29 Left 0
WINDOW 3 -47 57 Left 0
SYMATTR InstName Csq
SYMATTR Value 10f
SYMBOL diode 832 -80 R270
WINDOW 0 -28 32 VTop 0
WINDOW 3 42 -3 VBottom 0
SYMATTR InstName Dsq1
SYMATTR Value Dio
SYMBOL voltage 928 -96 R0
WINDOW 0 -67 99 Left 0
WINDOW 3 -30 61 Left 0
SYMATTR InstName Vsq1
SYMATTR Value {Vdd}
SYMBOL diode 1024 -112 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Dsq2
SYMATTR Value Dio
SYMBOL voltage 1072 -96 R0
WINDOW 0 -87 95 Left 0
WINDOW 3 -35 59 Left 0
SYMATTR InstName Vsq2
SYMATTR Value {-Vdd}
SYMBOL bv 1152 -96 R0
WINDOW 0 -28 58 Left 0
WINDOW 3 -428 159 Left 0
SYMATTR InstName BOut
SYMATTR Value V=table ((v(off)*(v(sqr))),.1,.1, v(vdd),v(vdd))
SYMBOL res 112 272 R0
SYMATTR InstName Rinh
SYMATTR Value 1e6
SYMBOL bv 896 288 R0
WINDOW 0 -25 59 Left 0
WINDOW 3 -624 161 Left 0
SYMATTR InstName Boff
SYMATTR Value V=(if(v(inh)<0.9,1,0))
SYMBOL res 944 288 R0
WINDOW 0 -32 16 Left 0
WINDOW 3 -30 97 Left 0
SYMATTR InstName Roff
SYMATTR Value 1e6
SYMBOL zener 944 240 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName Dzener
SYMATTR Value Zen
SYMBOL res 960 160 R0
WINDOW 0 64 49 Right 0
WINDOW 3 37 77 Left 0
SYMATTR InstName Rz
SYMATTR Value 1g
SYMBOL bv 1136 288 R0
WINDOW 0 -32 57 Left 0
WINDOW 3 26 161 Right 0
SYMATTR InstName Bdem
SYMATTR Value V=table ((2e8*v(vcoin,demout)*v(off)),-20,-20, 20,20)
SYMBOL res 1008 288 R0
WINDOW 0 22 12 Left 0
SYMATTR InstName Rdemout
SYMATTR Value 1g
TEXT -88 120 Left 0 !.model zen D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3\n+Eg=1.11 Cjo=160p M=.5484 Vj=.75 Fc=.5 Isr=1.8n\n+Nr=2 Bv=7.3 Ibv=27.721m Nbv=1.1779 Ibvl=1.1646m\n+Nbvl=21.894 Tbv1=176.47u)\n.model Dio D (IS=10u N=0.1 CJO=80f RS=1m)
TEXT 736 248 Left 0 ;2e8
TEXT 720 360 Left 0 ;2e8
