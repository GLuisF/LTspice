Version 4
SHEET 1 2112 680
WIRE -784 -768 -800 -768
WIRE -752 -768 -784 -768
WIRE -656 -768 -672 -768
WIRE -640 -768 -656 -768
WIRE 0 -768 -16 -768
WIRE 656 -768 448 -768
WIRE -208 -752 -368 -752
WIRE 448 -752 448 -768
WIRE -784 -720 -784 -768
WIRE -752 -720 -784 -720
WIRE -656 -720 -656 -768
WIRE -656 -720 -688 -720
WIRE -528 -720 -576 -720
WIRE -496 -720 -528 -720
WIRE -400 -720 -416 -720
WIRE -368 -720 -368 -752
WIRE -368 -720 -400 -720
WIRE -336 -720 -368 -720
WIRE -256 -720 -272 -720
WIRE -240 -720 -256 -720
WIRE -208 -720 -208 -752
WIRE -176 -720 -208 -720
WIRE -96 -720 -112 -720
WIRE -80 -720 -96 -720
WIRE 304 -720 288 -720
WIRE 1008 -720 960 -720
WIRE 1104 -720 1008 -720
WIRE -784 -704 -784 -720
WIRE -656 -704 -656 -720
WIRE -528 -704 -528 -720
WIRE -240 -704 -240 -720
WIRE -80 -704 -80 -720
WIRE 0 -704 0 -768
WIRE 224 -704 192 -704
WIRE 304 -704 304 -720
WIRE 368 -704 304 -704
WIRE 720 -704 544 -704
WIRE 1104 -704 1104 -720
WIRE -368 -688 -368 -720
WIRE 720 -688 672 -688
WIRE 816 -688 784 -688
WIRE 1056 -688 816 -688
WIRE 336 -656 144 -656
WIRE 368 -656 336 -656
WIRE 560 -656 528 -656
WIRE 704 -656 560 -656
WIRE 816 -656 816 -688
WIRE 848 -656 816 -656
WIRE 1056 -640 928 -640
WIRE 144 -624 144 -656
WIRE 304 -624 304 -704
WIRE 304 -624 288 -624
WIRE 560 -624 560 -656
WIRE 576 -624 560 -624
WIRE 1008 -624 1008 -720
WIRE -784 -608 -784 -624
WIRE -656 -608 -656 -624
WIRE -656 -608 -784 -608
WIRE -576 -608 -656 -608
WIRE -528 -608 -528 -624
WIRE -528 -608 -576 -608
WIRE -368 -608 -368 -624
WIRE -368 -608 -528 -608
WIRE -80 -608 -80 -624
WIRE -80 -608 -368 -608
WIRE 0 -608 0 -624
WIRE 0 -608 -80 -608
WIRE 224 -608 192 -608
WIRE 656 -608 656 -768
WIRE 656 -608 640 -608
WIRE 960 -608 912 -608
WIRE 1104 -608 1104 -624
WIRE 1104 -608 1072 -608
WIRE 848 -592 816 -592
WIRE 1072 -592 1072 -608
WIRE 336 -576 336 -656
WIRE 352 -576 336 -576
WIRE 304 -560 288 -560
WIRE 576 -560 560 -560
WIRE 928 -560 928 -640
WIRE 960 -560 928 -560
WIRE 144 -528 144 -544
WIRE 144 -528 96 -528
WIRE 192 -528 192 -560
WIRE 448 -528 448 -608
WIRE 448 -528 192 -528
WIRE 928 -528 928 -560
WIRE 928 -528 448 -528
WIRE 1008 -512 1008 -544
WIRE 1008 -512 912 -512
WIRE -832 -496 -864 -496
WIRE -784 -496 -832 -496
WIRE -720 -496 -736 -496
WIRE 16 -496 0 -496
WIRE 448 -496 448 -528
WIRE 1008 -496 1008 -512
WIRE -864 -480 -864 -496
WIRE -736 -480 -736 -496
WIRE -672 -480 -736 -480
WIRE -480 -480 -496 -480
WIRE -464 -480 -480 -480
WIRE -416 -480 -464 -480
WIRE -336 -480 -368 -480
WIRE -304 -480 -336 -480
WIRE -288 -480 -304 -480
WIRE -160 -480 -224 -480
WIRE 0 -480 -112 -480
WIRE 16 -480 16 -496
WIRE 16 -480 0 -480
WIRE -784 -464 -784 -496
WIRE -736 -464 -736 -480
WIRE -672 -464 -672 -480
WIRE -416 -464 -416 -480
WIRE -304 -464 -304 -480
WIRE -160 -464 -160 -480
WIRE -112 -464 -112 -480
WIRE 0 -464 0 -480
WIRE 96 -464 96 -528
WIRE 112 -464 96 -464
WIRE 192 -464 192 -528
WIRE -496 -448 -544 -448
WIRE -480 -448 -480 -480
WIRE -464 -448 -480 -448
WIRE -368 -448 -368 -480
WIRE -352 -448 -368 -448
WIRE -224 -448 -224 -480
WIRE 336 -448 336 -576
WIRE 368 -448 336 -448
WIRE 560 -448 560 -560
WIRE 560 -448 528 -448
WIRE 672 -448 672 -688
WIRE 672 -448 560 -448
WIRE 704 -432 704 -656
WIRE 720 -432 704 -432
WIRE 96 -416 96 -464
WIRE 112 -416 96 -416
WIRE 1104 -416 1104 -608
WIRE -608 -400 -640 -400
WIRE -496 -400 -496 -448
WIRE -496 -400 -528 -400
WIRE -464 -400 -496 -400
WIRE 304 -400 304 -560
WIRE 304 -400 288 -400
WIRE 368 -400 304 -400
WIRE 720 -400 544 -400
WIRE 816 -400 816 -592
WIRE 816 -400 784 -400
WIRE 1056 -400 816 -400
WIRE 224 -384 192 -384
WIRE -864 -368 -864 -400
WIRE -784 -368 -784 -384
WIRE -784 -368 -864 -368
WIRE -736 -368 -736 -400
WIRE -736 -368 -784 -368
WIRE -672 -368 -672 -384
WIRE -672 -368 -736 -368
WIRE -640 -368 -640 -400
WIRE -640 -368 -672 -368
WIRE -416 -368 -416 -384
WIRE -416 -368 -640 -368
WIRE -304 -368 -304 -384
WIRE -304 -368 -416 -368
WIRE -272 -368 -304 -368
WIRE -160 -368 -160 -384
WIRE -160 -368 -272 -368
WIRE -112 -368 -112 -384
WIRE -112 -368 -160 -368
WIRE 0 -368 0 -384
WIRE 0 -368 -112 -368
WIRE 912 -368 912 -512
WIRE 912 -368 896 -368
WIRE 1056 -352 1024 -352
WIRE 448 -336 448 -352
WIRE 656 -336 656 -608
WIRE 656 -336 448 -336
WIRE 928 -336 928 -528
WIRE 928 -336 896 -336
WIRE 1008 -336 1008 -416
WIRE 1008 -336 928 -336
WIRE 1024 -336 1024 -352
WIRE 1024 -336 1008 -336
WIRE 1104 -336 1024 -336
FLAG 192 -384 Comp
IOPIN 192 -384 In
FLAG 896 -368 Ppout
IOPIN 896 -368 Out
FLAG 960 -720 Vdd
IOPIN 960 -720 In
FLAG 1072 -592 CBout
IOPIN 1072 -592 Out
FLAG 112 -416 CAout
IOPIN 112 -416 Out
FLAG 352 -576 Vdd
IOPIN 352 -576 In
FLAG 192 -704 Sigin
IOPIN 192 -704 In
FLAG 896 -336 Vss
FLAG -272 -368 Vss
FLAG -544 -448 Vcoin
IOPIN -544 -448 In
FLAG -336 -480 Ir2
FLAG -352 -400 Vdd
FLAG -288 -480 r2
IOPIN -288 -480 In
FLAG -464 -480 Ir1
FLAG -496 -480 r1
IOPIN -496 -480 In
FLAG -576 -608 Vss
FLAG -832 -496 Adj
FLAG -640 -768 Ce1
IOPIN -640 -768 In
FLAG -800 -768 Ce2
IOPIN -800 -768 In
FLAG -576 -720 Pul
FLAG -400 -720 Sqr
FLAG -256 -720 13
FLAG -96 -720 14
FLAG -16 -768 Vcout
IOPIN -16 -768 Out
FLAG -224 -448 Inh
IOPIN -224 -448 In
FLAG -720 -496 Zener
IOPIN -720 -496 Out
FLAG 0 -496 Demout
IOPIN 0 -496 Out
FLAG -240 -704 Vdd
IOPIN -240 -704 In
SYMBOL Digital\\dflop 448 -608 M180
SYMATTR InstName ADff1
SYMBOL Digital\\dflop 448 -496 R0
WINDOW 0 -74 161 Left 0
SYMATTR InstName ADff2
SYMBOL Digital\\or 752 -768 R0
WINDOW 0 -20 70 Left 0
WINDOW 3 -45 136 Left 0
SYMATTR InstName An1
SYMATTR Value td=20n
SYMBOL Digital\\or 752 -480 R0
WINDOW 0 -21 68 Left 0
WINDOW 3 -33 121 Left 0
SYMATTR InstName An2
SYMATTR Value td=20n
SYMBOL Digital\\xor 240 -656 M0
WINDOW 0 -23 61 Left 0
SYMATTR InstName Axor
SYMBOL Digital\\or 880 -688 R0
WINDOW 0 -19 64 Left 0
SYMATTR InstName An3
SYMBOL Digital\\and 608 -656 R0
WINDOW 0 -29 66 Left 0
WINDOW 3 -127 113 Left 0
SYMATTR InstName And
SYMATTR Value td=20n tripdt=20n
SYMBOL sw 1104 -608 M180
WINDOW 0 -25 54 Left 0
WINDOW 3 -45 99 Left 0
SYMATTR InstName SH
SYMATTR Value Std
SYMBOL sw 1104 -320 M180
WINDOW 0 -27 54 Left 0
WINDOW 3 -59 116 Left 0
SYMATTR InstName SL
SYMATTR Value Std
SYMBOL sw 1008 -528 M180
WINDOW 0 -29 54 Left 0
WINDOW 3 -44 98 Left 0
SYMATTR InstName Spout
SYMATTR Value Std
SYMBOL res 1024 -400 R180
WINDOW 0 25 82 Left 0
WINDOW 3 34 49 Left 0
SYMATTR InstName Rpout
SYMATTR Value 10k
SYMBOL sw 144 -528 R180
WINDOW 0 -22 50 Left 0
WINDOW 3 -39 107 Left 0
SYMATTR InstName Sca
SYMATTR Value Std
SYMBOL res 208 -480 R90
WINDOW 0 -2 83 VBottom 0
WINDOW 3 -28 36 VTop 0
SYMATTR InstName Rcpa
SYMATTR Value 10k
SYMBOL Digital\\schmitt 224 -448 R0
WINDOW 3 -256 140 Invisible 0
SYMATTR Value vt={Vdd/2} vh={(Vdd/2)-.5} td=20n tripdt=50n
SYMATTR InstName Acmp
SYMBOL Digital\\schmitt 224 -768 R0
WINDOW 3 -191 2 Left 0
WINDOW 0 34 33 Left 0
SYMATTR Value vt={Vx/2} vh=100m td=20n tripdt=50n
SYMATTR InstName Ain
SYMBOL res -512 -416 R90
WINDOW 0 48 1 VBottom 0
WINDOW 3 -14 13 VTop 0
SYMATTR InstName Rin
SYMATTR Value {Rin}
SYMBOL e -304 -368 M180
WINDOW 0 -17 58 Left 0
WINDOW 3 -59 96 Left 0
SYMATTR InstName Er2
SYMATTR Value 2e8
SYMBOL e -416 -368 M180
WINDOW 0 -17 58 Left 0
WINDOW 3 -58 96 Left 0
SYMATTR InstName Er1
SYMATTR Value 2e8
SYMBOL bv -784 -480 R0
WINDOW 0 -28 58 Left 0
WINDOW 3 -86 138 Left 0
SYMATTR InstName Badj
SYMATTR Value V=TABLE ((abs((V(vdd)/I(Er2))/(V(Vcoin)/I(Er1)))),.5,1.43, 1,1.6, 10,1.04, 50,.67, 100,.84, 101,1, 102,1, 1000,1)
SYMBOL res -880 -496 R0
WINDOW 0 33 16 Left 0
WINDOW 3 34 48 Left 0
SYMATTR InstName Radj
SYMATTR Value 1g
SYMBOL bi -656 -704 R0
WINDOW 0 -19 24 Left 0
WINDOW 3 -202 115 Left 0
SYMATTR InstName Bim
SYMATTR Value I=((M1*I(Er1)*V(adj)+M2*I(Er2))*Kc*V(sqr))
SYMBOL voltage -784 -720 R0
WINDOW 0 -32 55 Left 0
WINDOW 3 42 81 Left 0
SYMATTR InstName vcext
SYMATTR Value 0
SYMBOL cap -688 -736 R90
WINDOW 0 56 28 VBottom 0
WINDOW 3 -12 -16 VTop 0
SYMATTR InstName Cstray
SYMATTR Value 5p
SYMBOL res -656 -784 R90
WINDOW 0 15 115 VBottom 0
WINDOW 3 -11 11 VTop 0
SYMATTR InstName Rcext
SYMATTR Value 1g
SYMBOL bv -528 -720 R0
WINDOW 0 -26 59 Left 0
WINDOW 3 123 130 Left 0
SYMATTR InstName Bsqr
SYMATTR Value V=(1.2e6*V(sqr)-1e7*V(Ce1))
SYMBOL res -400 -736 R90
WINDOW 0 -2 112 VBottom 0
WINDOW 3 -28 61 VTop 0
SYMATTR InstName Rint
SYMATTR Value .1T
SYMBOL cap -384 -688 R0
WINDOW 0 -58 29 Left 0
WINDOW 3 -47 57 Left 0
SYMATTR InstName Cint
SYMATTR Value 10f
SYMBOL diode -336 -704 R270
WINDOW 0 -28 32 VTop 0
WINDOW 3 42 -3 VBottom 0
SYMATTR InstName Dlimh
SYMATTR Value Dio
SYMBOL diode -112 -736 R90
WINDOW 0 1 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Dliml
SYMATTR Value Dio
SYMBOL voltage -80 -608 R180
WINDOW 0 20 15 Left 0
WINDOW 3 -30 56 Left 0
SYMATTR InstName Vliml
SYMATTR Value {Vdd}
SYMBOL bv 0 -720 R0
WINDOW 0 -28 58 Left 0
WINDOW 3 -523 162 Left 0
SYMATTR InstName BOut
SYMATTR Value V=table ((1-u(v(inh)))*(v(sqr)),.1,.1, v(vdd),v(vdd))
SYMBOL res -176 -480 R0
WINDOW 0 -41 21 Left 0
WINDOW 3 -34 65 Left 0
SYMATTR InstName Rinh
SYMATTR Value 1e6
SYMBOL zener -720 -400 R180
WINDOW 0 -17 62 Left 0
WINDOW 3 -33 -15 Left 0
SYMATTR InstName Dz
SYMATTR Value Zen
SYMBOL res -688 -480 R0
WINDOW 0 9 36 Right 0
WINDOW 3 -22 67 Left 0
SYMATTR InstName Rz
SYMATTR Value 1g
SYMBOL bv 0 -480 R0
WINDOW 0 -32 57 Left 0
WINDOW 3 34 -48 Right 0
SYMATTR InstName bdem
SYMATTR Value V=v(vcoin)*(1-u(v(inh)))
SYMBOL res -128 -480 R0
WINDOW 0 31 17 Left 0
SYMATTR InstName Rdem
SYMATTR Value 1g
TEXT 112 -728 Left 0 ;14
TEXT 96 -360 Left 0 ;3
TEXT 192 -440 Left 0 ;2
TEXT 1056 -488 Left 0 ;13
TEXT 808 -336 Left 0 ;1
TEXT 664 -808 Left 0 !.model Zen  D(Is=1e-12 Rs=40 BV=7 IBV=.5m)\n.model Dio D (IS=100u N=.1 CJO=80f RS=1m)\n.model Std Sw(Ron=10 Roff=1t Vt=.5 Vh=.4
TEXT 24 -784 Left 0 ;vt=100m vh=100m td=20n tripdt=50n ; no Vx parameter
TEXT -608 -528 Left 0 ;Bout V=(inv(v(inh)))*uramp(v(sqr))
TEXT -872 -808 Left 0 ;Enhanced Vco based on Pspice preliminary model of R. Pérez; phase detector based on Philips Hef4046 datasheet.
