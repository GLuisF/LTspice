Version 4
SHEET 1 880 680
WIRE 48 112 -336 112
WIRE 176 112 128 112
WIRE 208 112 176 112
WIRE 176 144 176 112
WIRE -48 176 -96 176
WIRE 96 176 32 176
WIRE 128 176 96 176
WIRE 144 176 128 176
WIRE -336 192 -336 112
WIRE -96 192 -96 176
WIRE 96 192 96 176
WIRE 176 256 176 208
WIRE 208 256 176 256
WIRE 208 272 208 256
WIRE -336 288 -336 272
WIRE -96 288 -96 272
WIRE -96 288 -336 288
WIRE 96 288 96 272
WIRE 96 288 -96 288
WIRE 176 288 176 256
WIRE 176 288 96 288
FLAG 208 272 0
FLAG 208 112 Flag
IOPIN 208 112 Out
FLAG 128 176 ref
SYMBOL Vreg\\tl431 160 144 R0
SYMATTR InstName U1
SYMATTR SpiceModel TL431
SYMBOL res 48 160 R90
WINDOW 0 16 104 VBottom 0
WINDOW 3 -11 17 VTop 0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 112 288 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 144 96 R90
WINDOW 0 16 104 VBottom 0
WINDOW 3 -11 17 VTop 0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage -336 176 R0
WINDOW 0 -12 58 Left 0
WINDOW 3 17 100 Left 0
SYMATTR InstName V+
SYMATTR Value 10
SYMBOL voltage -96 176 R0
WINDOW 0 -14 59 Left 0
WINDOW 3 4 100 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vct
SYMATTR Value PULSE(0 10 0 100m)
TEXT -338 100 Left 0 !.tran .1
TEXT -320 128 Left 0 ;Vth=Vref*(1+R1/R2)\nR3=(V+ -Vka_min)/Ish\n0.1mA<=Ish<=15mA
