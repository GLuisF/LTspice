Version 4
SHEET 1 1444 680
WIRE 208 160 48 160
WIRE 400 160 288 160
WIRE 416 160 400 160
WIRE 48 176 48 160
WIRE 16 208 0 208
WIRE 96 208 80 208
WIRE 528 208 288 208
WIRE 624 208 528 208
WIRE 288 224 288 208
WIRE 256 240 192 240
WIRE 0 256 0 208
WIRE 96 256 96 208
WIRE 400 256 400 160
WIRE 400 256 320 256
WIRE 256 272 224 272
WIRE 400 272 400 256
WIRE 528 272 528 208
WIRE 624 336 624 208
WIRE 0 352 0 320
WIRE 48 352 0 352
WIRE 96 352 96 320
WIRE 96 352 48 352
WIRE 192 352 192 240
WIRE 192 352 96 352
WIRE 224 368 224 272
WIRE 400 368 400 352
WIRE 400 368 224 368
WIRE 528 368 528 352
WIRE 528 368 400 368
WIRE 96 384 96 352
WIRE 224 384 224 368
WIRE 624 432 624 416
WIRE 624 432 592 432
WIRE 592 448 592 432
WIRE 96 480 96 448
WIRE 224 480 224 464
WIRE 224 480 96 480
WIRE 288 480 288 288
WIRE 288 480 224 480
WIRE 624 480 624 432
WIRE 624 480 288 480
FLAG 592 448 0
FLAG 48 352 Ramp
FLAG 416 160 Out
IOPIN 416 160 Out
SYMBOL res 384 256 R0
SYMATTR InstName Rfb
SYMATTR Value 100k
SYMBOL res 208 368 R0
WINDOW 3 24 82 Left 0
WINDOW 0 31 47 Left 0
SYMATTR Value 100k
SYMATTR InstName Rd2
SYMBOL voltage 624 320 R0
WINDOW 0 -20 58 Left 0
WINDOW 3 -252 78 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 -26 85 Left 0
SYMATTR InstName V+
SYMATTR Value PULSE(0 {VDD} 0 1u)
SYMBOL res 512 256 R0
SYMATTR InstName Rd1
SYMATTR Value 100k
SYMBOL Robertugo\\OPAMP5 288 192 R0
WINDOW 0 -29 64 Left 0
SYMATTR InstName U2
SYMATTR SpiceModel TL082
SYMBOL diode -16 256 R0
WINDOW 0 36 35 Left 0
WINDOW 3 20 62 Left 0
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL diode 112 320 R180
WINDOW 0 -34 31 Left 0
WINDOW 3 -50 1 Left 0
SYMATTR InstName D4
SYMATTR Value 1N914
SYMBOL cap 80 384 R0
WINDOW 0 40 32 Left 0
WINDOW 3 38 54 Left 0
SYMATTR InstName Ct
SYMATTR Value 1n
SYMATTR SpiceLine Rpar=1e9
SYMBOL Robertugo\\Pote 112 192 R90
WINDOW 0 0 -16 VRight 0
WINDOW 3 57 26 VRight 0
WINDOW 123 34 -59 VCenter 0
SYMATTR InstName Duty
SYMATTR Value Rt=1e5
SYMATTR Value2 Set={Cursor}
SYMBOL res 192 176 R270
WINDOW 0 -26 6 VTop 0
WINDOW 3 0 73 VBottom 0
SYMATTR InstName Rf
SYMATTR Value 10k
TEXT 430 192 Left 0 !.tran 0 3m 0
TEXT 680 192 Left 0 !.step param cursor .05 .95 .15\n.param Vdd=12\n.meas tran ta FIND time WHEN V(out)={Vdd/2} td=1m rise=1\n.meas tran tb FIND time WHEN V(out)={Vdd/2} td=1m rise=11\n.meas tran Frec PARAM 10/(tb-ta)\n.Meas tran Tc FIND time WHEN V(Out)={Vdd/2} td=1m fall=1\n.Meas tran Td FIND time WHEN V(Out)={Vdd/2} td=1m fall=2\n.Meas tran T1 Param  (Tc-Ta)\n.Meas tran T2  Param  (Td-Ta)\n.Meas tran Ton Param If (T1>0, T1, T2)\n.Meas tran Duty% Param  Ton*Frec*100
