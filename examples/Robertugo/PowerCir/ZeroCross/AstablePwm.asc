Version 4
SHEET 1 1176 680
WIRE -352 320 -352 -304
WIRE -352 448 -352 400
WIRE -288 416 -288 400
WIRE -256 -304 -352 -304
WIRE -256 64 -256 -304
WIRE -256 400 -288 400
WIRE -256 400 -256 128
WIRE -256 448 -352 448
WIRE -256 448 -256 400
WIRE -192 -304 -256 -304
WIRE -192 -64 -192 -304
WIRE -192 272 -192 16
WIRE -192 448 -256 448
WIRE -192 448 -192 336
WIRE -128 192 -128 -272
WIRE -128 336 -144 336
WIRE -128 336 -128 272
WIRE -128 416 -128 336
WIRE -112 336 -128 336
WIRE -48 -272 -128 -272
WIRE -48 416 -128 416
WIRE 0 -192 0 -208
WIRE 0 -176 0 -192
WIRE 0 -64 0 -112
WIRE 0 64 0 16
WIRE 0 112 0 64
WIRE 0 240 0 192
WIRE 0 336 -32 336
WIRE 0 336 0 304
WIRE 0 352 0 336
WIRE 32 -192 0 -192
WIRE 128 -272 48 -272
WIRE 128 -192 112 -192
WIRE 128 -192 128 -272
WIRE 128 176 128 -192
WIRE 128 416 48 416
WIRE 128 416 128 256
WIRE 176 -304 -192 -304
WIRE 208 -192 128 -192
WIRE 208 -128 208 -192
WIRE 208 64 0 64
WIRE 208 64 208 -48
WIRE 208 176 208 64
WIRE 208 320 208 272
WIRE 208 448 -192 448
WIRE 208 448 208 400
WIRE 288 -304 256 -304
WIRE 288 0 288 -304
WIRE 288 224 272 224
WIRE 288 224 288 80
WIRE 304 224 288 224
WIRE 320 -192 208 -192
WIRE 320 -160 320 -192
WIRE 320 -32 320 -64
WIRE 320 112 320 -32
WIRE 336 -32 320 -32
WIRE 352 112 320 112
WIRE 384 224 368 224
WIRE 384 320 384 224
WIRE 384 448 208 448
WIRE 384 448 384 384
WIRE 400 -112 384 -112
WIRE 448 112 432 112
WIRE 448 224 384 224
WIRE 448 224 448 112
WIRE 448 272 448 224
WIRE 448 448 384 448
WIRE 448 448 448 352
WIRE 464 -64 464 -112
WIRE 496 -32 400 -32
WIRE 496 16 496 -32
WIRE 496 368 496 96
WIRE 512 -32 496 -32
WIRE 512 -32 512 -112
WIRE 512 368 496 368
WIRE 544 -112 512 -112
WIRE 544 -64 464 -64
WIRE 544 -32 544 -64
WIRE 544 448 448 448
WIRE 544 448 544 400
WIRE 592 -32 544 -32
WIRE 592 16 592 -32
WIRE 592 368 576 368
WIRE 592 368 592 96
WIRE 608 -32 592 -32
WIRE 624 -112 608 -112
WIRE 688 -192 320 -192
WIRE 688 -160 688 -192
WIRE 688 -32 672 -32
WIRE 688 -32 688 -64
WIRE 688 144 688 -32
WIRE 688 448 544 448
WIRE 688 448 688 224
WIRE 720 -192 688 -192
WIRE 720 320 720 -192
WIRE 720 448 688 448
WIRE 720 448 720 384
WIRE 752 -192 720 -192
WIRE 848 -304 288 -304
WIRE 848 -192 816 -192
WIRE 848 -192 848 -304
WIRE 848 144 848 -192
WIRE 848 448 720 448
WIRE 848 448 848 208
FLAG -288 416 0
SYMBOL pnp2 48 352 R90
WINDOW 0 33 32 VRight 0
WINDOW 3 69 6 VRight 0
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL npn2 -48 -208 R270
WINDOW 0 33 33 VRight 0
WINDOW 3 70 6 VRight 0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cap 16 -112 R180
WINDOW 0 37 32 Left 0
WINDOW 3 30 6 Left 0
SYMATTR InstName C1
SYMATTR Value 22n
SYMBOL cap 16 304 R180
WINDOW 0 39 38 Left 0
WINDOW 3 30 10 Left 0
SYMATTR InstName C2
SYMATTR Value 22n
SYMBOL res 128 -208 R90
WINDOW 0 0 68 VBottom 0
WINDOW 3 -28 24 VTop 0
SYMATTR InstName R1
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -16 320 R90
WINDOW 0 62 86 VBottom 0
WINDOW 3 34 42 VTop 0
SYMATTR InstName R2
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -112 288 R180
WINDOW 0 52 91 Bottom 0
WINDOW 3 51 32 Top 0
SYMATTR InstName R3
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 144 272 R180
WINDOW 0 54 91 Bottom 0
WINDOW 3 52 34 Top 0
SYMATTR InstName R4
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp2 272 176 M0
WINDOW 0 49 24 Left 0
WINDOW 3 19 46 Left 0
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res 16 32 R180
WINDOW 0 64 86 Bottom 0
WINDOW 3 60 54 Bottom 0
SYMATTR InstName R5
SYMATTR Value 5K6
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 224 -32 R180
WINDOW 0 61 94 Bottom 0
WINDOW 3 56 21 Top 0
SYMATTR InstName R6
SYMATTR Value 5K6
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL diode 752 -176 R270
WINDOW 0 31 -7 VTop 0
WINDOW 3 57 51 VBottom 0
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL zener 832 144 R0
WINDOW 0 -17 2 Left 0
WINDOW 3 -13 19 VRight 0
SYMATTR InstName D2
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL polcap 704 384 M180
WINDOW 0 40 52 Left 0
WINDOW 3 40 28 Left 0
SYMATTR InstName C3
SYMATTR Value 220µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=25 Irms=625m Rser=0.11 MTBF=3000 Lser=0 mfg="Nichicon" pn="UPL1E221MPH" type="Al electrolytic" ppPkg=1
SYMBOL res 272 -320 R90
WINDOW 0 52 76 VRight 0
WINDOW 3 52 14 VRight 0
SYMATTR InstName R7
SYMATTR Value 15K
SYMATTR SpiceLine tol=5 pwr=3
SYMBOL cap -272 64 R0
WINDOW 0 -44 23 Left 0
WINDOW 3 -46 53 Left 0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL voltage -352 304 R0
WINDOW 0 -20 58 Left 0
WINDOW 3 19 -153 VRight 0
WINDOW 123 0 0 Left 0
SYMATTR InstName Vac
SYMATTR Value SINE(0 311 50)
SYMATTR SpiceLine Rser=0.1
SYMBOL res -176 32 R180
WINDOW 0 43 97 Bottom 0
WINDOW 3 45 30 Top 0
SYMATTR InstName RL
SYMATTR Value 50
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL Triac_All -160 272 M0
WINDOW 0 65 2 Right 0
WINDOW 38 50 147 VLeft 0
SYMATTR InstName U1
SYMATTR SpiceModel L6008L6
SYMBOL res 16 208 R180
WINDOW 0 57 92 Bottom 0
WINDOW 3 57 60 Bottom 0
SYMATTR InstName R8
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL npn2 624 -64 M180
WINDOW 0 33 33 VRight 0
WINDOW 3 70 6 VRight 0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL npn2 384 -64 R180
WINDOW 0 33 33 VRight 0
WINDOW 3 70 6 VRight 0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL diode 304 240 R270
WINDOW 0 31 -7 VTop 0
WINDOW 3 59 71 VBottom 0
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL res 304 96 R180
WINDOW 0 52 91 Bottom 0
WINDOW 3 51 32 Top 0
SYMATTR InstName R9
SYMATTR Value 22K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL polcap 368 384 M180
WINDOW 0 -31 19 Left 0
WINDOW 3 -33 -10 Left 0
SYMATTR InstName C5
SYMATTR Value 22µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=63 Irms=215m Rser=0.52 MTBF=2000 Lser=0 mfg="Nichicon" pn="UPL1J220MPH" type="Al electrolytic" ppPkg=1
SYMBOL diode 544 -96 R270
WINDOW 0 60 29 VTop 0
WINDOW 3 63 31 VBottom 0
SYMATTR InstName D4
SYMATTR Value 1N914
SYMBOL diode 464 -96 M270
WINDOW 0 62 33 VTop 0
WINDOW 3 62 37 VBottom 0
SYMATTR InstName D5
SYMATTR Value 1N914
SYMBOL cap 400 -48 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C6
SYMATTR Value 220n
SYMBOL cap 672 -48 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C7
SYMATTR Value 220n
SYMBOL res 464 368 R180
WINDOW 0 55 23 VBottom 0
WINDOW 3 56 94 VBottom 0
SYMATTR InstName R10
SYMATTR Value 1K8
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 336 128 R270
WINDOW 0 61 57 VBottom 0
WINDOW 3 -6 57 VBottom 0
SYMATTR InstName R11
SYMATTR Value 4K7
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 512 112 R180
WINDOW 0 52 91 Bottom 0
WINDOW 3 51 32 Top 0
SYMATTR InstName R12
SYMATTR Value 27K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 608 112 R180
WINDOW 0 52 91 Bottom 0
WINDOW 3 51 32 Top 0
SYMATTR InstName R13
SYMATTR Value 15K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL Pote 480 384 R270
WINDOW 0 57 27 VRight 0
WINDOW 123 -20 123 VCenter 0
WINDOW 3 -45 128 VCenter 0
SYMATTR InstName Duty
SYMATTR Value2 Set=val
SYMATTR Value Rt=470k
SYMBOL res 224 416 R180
WINDOW 0 52 91 Bottom 0
WINDOW 3 51 32 Top 0
SYMATTR InstName R14
SYMATTR Value 150
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 704 240 R180
WINDOW 0 61 94 Bottom 0
WINDOW 3 56 21 Top 0
SYMATTR InstName R15
SYMATTR Value 6K8
SYMATTR SpiceLine tol=1 pwr=0.1
TEXT 834 -282 Right 0 !.tran 0 1.5 1
TEXT 696 -280 Right 0 !.step param val 0 1 .25
