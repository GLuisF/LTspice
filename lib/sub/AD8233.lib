* Copyright (c) 1998-2023 Analog Devices, Inc.  All rights reserved.
*
.subckt AD8233 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
E35 N90 0 N47 0 1
D21 N47 N49 DW
D20 N48 N47 DW
V33 N48 0 800m
V34 VCCX N49 900m
C6 0 N47 1µ
G19 0 N47 N18 N47 1
E2 N18 0 N23 0 1
C5 0 N23 1.5727µ
G9 0 N23 REFOUT PPP 1
C4 PPP N23 1.62µ
R7 N18 Ge 99k
R8 REFOUT Ge 1k
G7 REFOUT PPP IN- IN+ 1
G8 REFOUT PPP Ge N22 1
D19 IN+ N44 DW
D18 N45 IN+ DW
V31 N45 0 720m
V32 VCCX N44 700m
D17 IN- N37 DW
D16 N43 IN- DW
V29 N43 0 720m
V30 VCCX N37 700m
E1 N22 0 HPDRIVE 0 1
C16 HPDRIVE 0 1.5727µ
G10 0 HPDRIVE N022 HPSENSE 1
E15 VCM 0 N46 0 1
G11 0 IN+ N25 IN+ 1
G12 0 IN- -INN IN- 1
VOSIN_IA N25 Vnp 1m
I20 PPP 0 2.5µ
I_IBN -IN 0 37p
I_IBP +IN 0 63p
E7 N50 0 +IN 0 1
E36 N54 0 -IN 0 1
C15 0 N28 15.915µ
C17 0 N40 15.915µ
E16 VVV 0 N28 N40 1
E38 N17 0 Value={IF(V(VVV)<0, -V(VVV)-55m, V(VVV)-55m)}
D13 N17 N55 DZ
E21 N56 0 N55 0 3.46
G14 Ge 0 Value={((V(+IN)-V(-IN))/0.3)*0.0000063*V(N56)}
E17 N36 0 N53 0 1
C7 VCM N53 1.05n
C8 N36 N26 1.05n
G13 PPP 0 N26 0 90m
E22 N51 0 N24 0 1
C9 VCM N24 2n
E23 N38 0 N30 0 1
C10 N51 N19 800n
C11 N38 N21 800n
E24 N29 0 N35 0 1
C12 VCM N35 2n
E25 N32 0 N33 0 1
C13 N29 N31 700n
C14 N32 N34 700n
G16 PPP 0 Value={IF(V(VVV)<0, V(XXX)*0.08*(V(VVV)/-.3),0)}
G15 PPP 0 Value={IF(V(VVV)<0, V(YYY)*0.08*(V(VVV)/.3),0)}
D8 N2 N6 DX
D3 N10 N2 DX
V10 N10 1 100m
V5 VCCX N6 100m
D1 N1 N9 DX
D10 N8 N1 DX
V11 N8 1 100m
V8 VCCX N9 100m
G3 1 N2 OPAMP- N2 1
G2 1 N1 N4 N1 1
IBP_OPAMP OPAMP+ 1 150p
IBN_OPAMP OPAMP- 1 50p
VOSIN_OPAMP OPAMP+ N4 1m
C3 1 N3 {Cfp1_A1}
D2 N3 N5 DX
D9 N7 N3 DX
V9 N7 1 100m
V4 VCCX N5 100m
G1 1 N3 N1 N2 1
E6 N100 1 N031 1 1
C1 1 N11 {Cfp1_A2}
D5 N11 N13 DV
D4 N12 N11 DV
V13 N12 1 100m
V14 VCCX N13 100m
G5 1 N11 REFOUT RLDFB 1
E12 N91 1 N009 1 1
R5 VCM RLDFB 150k
C2 N27 1 11.37µ
D7 N27 N16 DX
D6 N15 N27 DX
V19 N15 1 100m
V20 VCCX N16 700m
E3 N92 1 N27 1 1
G4 1 N27 N14 N27 1
V18 REFIN N14 1m
I6 REFIN 1 100p
E52 VCCX 1 +VS 1 1
S_RLD 1 N112 VDDX RLD_SDN_BAR RLDSDNSW
E_VDD VDDX 1 +VS 1 1
S_REFOUT 1 N111 VDDX SDN_BAR SDNSW
S_LOD1 LOD_COMP 0 N94 N93 COMPDC
V_DCLODREF VDDX N93 0.175
S_LOD2 LOD_COMP 0 N97 N93 COMPDC
S_LODDC N96 N94 VDDX AC_DC_BAR SWITCH
S_REFOUT_RLD N91 N112 RLD_SDN_BAR 1 RLDSDNSW
S_REFIN_REFOUT N92 N111 SDN_BAR 1 SDNSW
E_INP_LOD N96 0 +IN 0 1
E_INN_LOD N97 0 -IN 0 1
S_LODAC3 N94 N95 AC_DC_BAR 0 SWITCH
E_IAOUT_FR N104 0 IAOUT 0 1
S_FRCOMP1 FR_COMP 0 N104 N105 COMP
V_VDD_FRREF VDDX N105 0.1
S_FRCOMP2 FR_COMP 0 N106 N104 COMP
V_FRREF_GND N106 0 0.1
S_FR1 N107 VDDX VDDX FR_COMP SWITCH
S_SW2 N110 SW2 QQ 0 SWITCH
S_FR3 FR_OUT N108 VDDX LOD SWITCH
S_LOD3 N95 N114 N102 N103 COMP
V_ACLODREF N103 0 0.7
V_CLK30 CLK30 0 PULSE(0 1.5 0 0.5u 0.5u 160m 160.003m -1)
A0 FR_OUT 0 CLK 0 0 0 QQ 0 DFLOP Vhigh=3 ic=0
V_TS218 TS218 0 PULSE(0 1.5 0 0.5u 0.5u 40m 80.0015m -1)
S_SW1 N109 SW1 QQ 0 SWITCH
S_FR2 N108 N107 FR 0 SWITCH
E_INP_INN N102 0 +IN -IN 1
S_SW10 0 SW1 VDDX QQ SWITCH
S_SW20 0 SW2 VDDX QQ SWITCH
S_LOD4 LOD N014 VDDX LOD_COMP SWITCH
S_IAOUT N90 IAOUT SDN_BAR 0 SDNSW
I_SDN +VS 1 0.5µ
G_SDN +VS 1 Value={IF(V(SDN_BAR)<1.35, 0, 49.5u)}
G_ACLOD1 VDDX +IN Value={IF(V(AC_DC_BAR)<1, 0, 125n)}
G_ACLOD2 -IN 0 Value={IF(V(AC_DC_BAR)<1, 0, 150n)}
G_HPSENSE_IAOUT HPSENSE IAOUT Value={IF(V(SW1)>1, ((V(HPSENSE)-V(IAOUT))/10000),100p)}
G_REFOUT_SW REFOUT SW Value={IF(V(SW2)>1, ((V(REFOUT)-V(SW))/10000),100p)}
S_OUT 1 N113 VDDX SDN_BAR SDNSW
S_OPAMP_OUT N100 N113 SDN_BAR 1 SDNSW
E4 REFOUT 1 N111 1 1
E5 RLD 1 N112 1 1
E8 OUT 1 N113 1 1
G_IN1 +IN -IN Value={IF(V(N102)>3, (V(N102)-3)/100m, 0)}
G_IN2 +IN -IN Value={IF(V(N102)<-1,(V(N102)+1)/100m, 0)}
E_CLK CLK 0 Value={IF(V(VDDX)<=1.80, V(CLK18), V(CLK30))}
V_CLK18 CLK18 0 PULSE(0 1.5 0 0.5u 0.5u 80m 80.0015m -1)
E_TS1 N109 0 Value={IF(V(VDDX)<=1.80, V(CLK18), V(CLK30))}
V_TS230 TS230 0 PULSE(0 1.5 0 0.5u 0.5u 80m 160.003m -1)
E_TS2 N110 0 Value={IF(V(VDDX)<=1.80, V(TS218), V(TS230))}
Rserp +IN +INN R_NONOISE 10
Rsern -IN -INN R_NONOISE 10
F1 -IN N1000 VI_corr 1
F2 -IN N1000 VI_inn 1
F3 +IN N1000 VI_corr 1
F4 +IN N1000 VI_inp 1
E9 N1000 1 N002 1 1
R50 N1000 1 R_NONOISE 1Meg
R51 VCCX N002 R_NONOISE 1Meg
R52 N002 1 R_NONOISE 1Meg
R11 IN- 0 R_NONOISE 10Meg
R10 IN+ 0 R_NONOISE 10Meg
R12 IN- N46 R_NONOISE 100Meg
R13 N46 IN+ R_NONOISE 100Meg
G6 N1000 N037 N036 N1000 1
R3 N038 N1000 R_NONOISE 1
R22 N036 N1000 R_NONOISE 100000
VI_corr N037 N038 0
G17 N1000 N040 N039 N1000 1
R23 N041 N1000 R_NONOISE 1
R24 N039 N1000 R_NONOISE 100000
VI_inp N040 N041 0
G18 N1000 N043 N042 N1000 1
R44 N044 N1000 R_NONOISE 1
R45 N042 N1000 R_NONOISE 100000
VI_inn N043 N044 0
V1 Vn2 N1000 0.65
D11 Vn2 Vn1 Diode_Vn
Vmeas1 Vn1 N1000 0
V2 Vn4 N1000 0.65
D12 Vn4 Vn3 Diode_Vn
Vmeas2 Vn3 N1000 0
H1 Vn5 +INN Vmeas1 707.1067812
H2 Vn5 Vnp Vmeas2 707.1067812
A1 N1000 N1000 N1000 N1000 N1000 N1000 N036 N1000 OTA G=100p Iout=1m Vhigh=1k Vlow=-1k en=table(freq,1m,90p,1,90p,10,90p,100,500p,1k,3n,1.5k,5n,2k,7n,2.5k,9.8n,5k,29n,10k,75n,16k,132n,20k,166.5n,24k,198n,30k,240n,40k,300n,100k,420n,250k,440n,500k,460n,1E6,440n,2.5E6,280n,5E6,160n,7E6,120n,10E6,80n)
A2 N1000 N1000 N1000 N1000 N1000 N1000 N039 N1000 OTA G=10p Iout=1m Vhigh=1k Vlow=-1k en=table(freq,0,5n,200,5.1n,500,5.5n,1k,6.9n,2k,10.6n,6k,28n,10k,53.5n,12.6k,69n,15.8k,88n,20k,113n,25.1k,143n,31.6k,181n,100k,573n,200k,1.12u,300k,1.63u,398k,2.08u,500k,2.45u,631k,2.8u,800k,3.13u,1E6,3.3u,5E6,1.6u,10E6,800n)
A3 N1000 N1000 N1000 N1000 N1000 N1000 N042 N1000 OTA G=10p Iout=1m Vhigh=1k Vlow=-1k en=table(freq,0,5n,200,5.1n,500,5.5n,1k,6.8n,2k,10.6n,6k,29n,10k,53.5n,12.6k,69n,15.8k,88n,20k,113n,25.1k,143n,31.6k,181n,100k,573n,200k,1.12u,300k,1.63u,398k,2.08u,500k,2.45u,631k,2.8u,800k,3.13u,1E6,3.3u,5E6,1.6u,10E6,800n)
R47 PPP 0 R_NONOISE 10Meg
R6 N23 0 R_NONOISE 320k
R9 HPDRIVE 0 R_NONOISE 320k
R46 N47 0 R_NONOISE 10Meg
R15 N50 N28 R_NONOISE 1Meg
R16 N54 N40 R_NONOISE 1Meg
R26 N55 0 R_NONOISE 3.3k
R17 N53 0 R_NONOISE 1.8k
R25 N26 0 R_NONOISE 1.8k
R27 N24 0 R_NONOISE 1k
R29 N30 0 R_NONOISE 1k
R33 XXX 0 R_NONOISE 1k
R36 N35 0 R_NONOISE 1k
R38 N33 0 R_NONOISE 1k
R41 YYY 0 R_NONOISE 1k
R18 VCM N53 R_NONOISE 160k
R19 N36 N26 R_NONOISE 160k
R28 VCM N24 R_NONOISE 100k
R30 N51 N30 R_NONOISE 3.1k
R34 N38 XXX R_NONOISE 3.1k
R37 VCM N35 R_NONOISE 100k
R39 N29 N33 R_NONOISE 2.2k
R42 N32 YYY R_NONOISE 2.2k
R31 N19 N30 R_NONOISE 20
R35 N21 XXX R_NONOISE 20
R40 N31 N33 R_NONOISE 20
R43 N34 YYY R_NONOISE 20
R14 N27 1 R_NONOISE 100k
R4 N11 1 R_NONOISE 100k
R32 N3 1 R_NONOISE 100k
R1 N1 1 R_NONOISE 10G
R2 N2 1 R_NONOISE 10G
R20 VDDX FR_COMP R_NONOISE 1k
R21 FR_OUT 0 R_NONOISE 1k
R_VDD_LODCOMP VDDX LOD_COMP R_NONOISE 1k
R_VDD_LOD LOD N016 R_NONOISE 1k
G_RLDSDN +VS 1 Value={IF(V(RLD_SDN_BAR)<1.29, 0, 7u)}
G_WU +VS 1 Value={IF(V(SDN_BAR)<1.35 & V(LOD)<1.5, 150n, 0)}
V_LODL N016 0 0.05
V_LODH VDDX N014 0.05
G_ACLOD3 VDDX +IN Value={IF(V(SDN_BAR)<1.3, 125n, 0)}
G_ACLOD4 -IN 0 Value={IF(V(SDN_BAR)<1.3, 150n, 0)}
S_LODAC1 N114 VDDX AC_DC_BAR 0 SWITCH
R_LOD3_GND N95 0 R_NONOISE 1k
VOSIN_HPA N022 REFOUT 25µ
R48 +VS 5 1µ Noiseless
R49 REFIN 9 1µ Noiseless
R53 14 IAOUT 1µ Noiseless
R58 -IN 19 1µ Noiseless
R60 +IN 18 1µ Noiseless
R55 20 RLD 1µ Noiseless
R61 RLDFB 15 1µ Noiseless
R62 11 REFOUT 1µ Noiseless
R63 17 HPDRIVE 1µ Noiseless
R64 13 HPSENSE 1µ Noiseless
R68 4 OUT 1µ Noiseless
R69 OPAMP- 8 1µ Noiseless
R70 OPAMP+ 12 1µ Noiseless
R72 16 SW 1µ Noiseless
R73 2 SDN_BAR 1µ Noiseless
R75 7 RLD_SDN_BAR 1µ Noiseless
R74 6 AC_DC_BAR 1µ Noiseless
R76 10 FR 1µ Noiseless
R77 3 LOD 1µ Noiseless
R81 SW 0 10G
R82 N030 1 1Meg Noiseless
G20 1 N030 N3 1 1µ
C22 N030 1 {Cfp2_A1}
R83 N031 1 1Meg Noiseless
G21 1 N031 N030 1 1µ
C23 N031 1 {Cfp2_A1}
R84 N007 1 1Meg Noiseless
G22 1 N007 N11 1 1µ
C24 N007 1 {Cfp2_A2}
R85 N008 1 1Meg Noiseless
G23 1 N008 N007 1 1µ
C25 N008 1 {Cfp2_A2}
R88 N009 1 1Meg Noiseless
G24 1 N009 N008 1 1µ
C26 N009 1 {Cfp2_A2}
.model DW  D(Noiseless)
.model DV  D(IS=1 Noiseless)
.model DX  D(IS=0.1 Noiseless)
.model DY  D(IBV=1e-012 Noiseless)
.model SWITCH SW(Ron=0.0001 Roff=100T Vt=1 Lser=0 Vser=0)
.model COMPDC SW(Ron=0.0001 Roff=100T Vt=0 Vh=0.034)
.model COMP SW(Ron=0.0001 Roff=100T Vt=0 )
.model R_NONOISE RES(T_ABS=-273.15)
.model Diode_Vn D(KF={KFX} IS={ISX})
.param KFX=7.83064E-18
.param ISX = 7.62628E-13
.model SDNSW SW(Ron=0.0001 Roff=100T Vt=1.35 Vh=0.45 Lser=0 Vser=0)
.model RLDSDNSW SW(Ron=0.0001 Roff=100T Vt=1.29 Vh=0.06 Lser=0 Vser=0)
.model DZ  D(IS=1e-008 Noiseless)
.param fp1_A1=0.16 fp2_A1=200k
.param Cfp1_A1={1 / (2 * pi * fp1_A1 * 100k)}
.param Cfp2_A1={1 / (2 * pi * fp2_A1 * 1Meg)}
.param fp1_A2=0.31 fp2_A2=250k
.param Cfp1_A2={1 / (2 * pi * fp1_A2 * 100k)}
.param Cfp2_A2={1 / (2 * pi * fp2_A2 * 1Meg)}
.ends AD8233
