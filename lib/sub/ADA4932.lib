* Copyright (c) 1998-2024 Analog Devices, Inc.  All rights reserved.
*
.subckt ADA4932 1 2 3 4 5 6 7 8 9 10
R1 1 7 1m Noiseless
R2 4 8 1m Noiseless
R3 7 CMIN 750 Noiseless
R4 8 CMIN 750 Noiseless
R5 5 10 50k Noiseless
R6 6 10 50k Noiseless
Vos 2 N080 0.5m
C12 4 0 1f Rpar=1G Noiseless
C13 1 0 1f Rpar=1G Noiseless
Rz1 5 N011 1µ Noiseless
Rz2 6 N024 1µ Noiseless
G12 MID N023 N022 MID 1m
RInP1 N023 MID 1k Noiseless
R18 N016 MID 2.947Meg Noiseless
C14 N016 MID 1p
VOS1 N022 N021 1m
R19 N018 MID 74.068 Noiseless
R20 MID N015 10 Noiseless
R21 N019 MID 1.1749k Noiseless
L1 N015 N017 23.069n
C15 N017 N018 13.056p
Rs1 N025 CMIN 1m Noiseless
G13 MID N020 N019 MID 1
B1 MID N016 I=Uplim(Dnlim(486.4u* V(DIFF_VOCM,MID), -208.6u, 2.086u), 208.6u, 2.086u)
G14 0 VCCi N011 0 1
G15 0 VEEi N024 0 1
R22 VCCi 0 1 Noiseless
R23 VEEi 0 1 Noiseless
R24 N012 VCCi 1Meg Noiseless
R25 N012 VEEi 1Meg Noiseless
C16 N012 0 1
E1 MID 0 N012 0 1
R26 MID 0 1Meg Noiseless
C17 VCCi 0 1n
C18 VEEi 0 1n
RsVCM N020 CMOUT 1m Noiseless
Bsrc1 N011 0 I=Dnlim(I(RsVCM), 0,1u)
Bsink1 N024 0 I=Uplim(I(RsVCM), 0,1u)
G16 MID N019 N015 MID 1m
D1 N013 N023 DO
D2 N023 N014 DO
I1 VCCi N013 {1k*Vcm_max_Vocm}
R27 VCCi N013 1m
C19 VCCi N013 1n
I2 VEEi N014 {1k*Vcm_min_Vocm}
R28 VEEi N014 1m
C20 VEEi N014 1n
Rs3 N021 10 1m Noiseless
G17 MID DIFF_VOCM N023 N025 1
G18 MID N015 N016 MID 0.1
R29 9 N010 1m Noiseless
C21 N010 0 1f Rpar=1G
A1 N010 5 MID MID MID MID ENgd MID SCHMITT Vt={-ENVt-10m} Vh={ENVh} Trise={ENTon*2} Tfall={ENToff*2}
G19 MID Vs 5 6 1m
R30 Vs MID 1k Noiseless
A2 Vs MID MID MID MID MID VminGD MID SCHMITT Vt={Vsmin-10m} Vh=10m Trise=5n
A3 Vs MID MID MID MID VmaxGD MID MID SCHMITT Vt={Vsmax+10m} Vh=10m Trise=5n
A4 ENgd MID VminGD MID VmaxGD MID EN MID AND Trise=5n
D3 N010 5 DPD
IPD1 5 N010 2.5n
R31 MID VminGD 1G
R32 VmaxGD MID 1G
R33 EN MID 1G
R34 ENgd MID 1G
S1 MID DIFF_VOCM EN MID ENA
S2 MID N020 EN MID ENA
Rs2 N030 CMOUT 1m Noiseless
IbiasP1 N030 MID 2.5µ
IbiasN1 N046 MID 2.5µ
RinCMP1 MID N030 10Meg Noiseless
RinCMN1 N046 MID 10Meg Noiseless
CinCMP1 MID N030 450f
CinCMN1 N046 MID 450f
IOS1 N046 N030 25n
RinDiff1 N046 N030 16Meg Noiseless
CinDiff1 N046 N030 550f
RInP2 N045 MID 1k Noiseless
R35 N035 MID 284.2k Noiseless
C22 N035 MID 1.02p
Brail1 0 Rail I=1m*LIMIT(M* V(5,6)+ OS, 6.36, 6.52)
Rrail1 0 Rail 1k
Crail1 0 Rail 1n
R36 N036 N037 10 Noiseless
L2 N036 N026 1657.862n
C23 N026 N037 42441.27p
R37 N037 MID 24.24 Noiseless
R38 N038 MID 10 Noiseless
R39 N038 N039 32.985 Noiseless
L3 N039 N040 18.003n
C24 N040 MID 140.697p
R40 N041 N042 10 Noiseless
L4 N041 N027 7.234n
C25 N027 N042 289.372p
R41 N042 MID 57.176 Noiseless
R42 N043 MID 1k Noiseless
Lout1 N044 N031 3.1n
Cout1 N031 MID 3p
RsAn N032 8 1m Noiseless
Rs5 N046 3 1m Noiseless
B2 MID N035 I=Uplim(Dnlim(5.044m* V(DIFFAn,MID), -2.8m, 28u), 2.8m, 28u)
Bsrc2 N011 0 I=Dnlim(I(RsAn), 0,1u)
Bsink2 N024 0 I=Uplim(I(RsAn), 0,1u)
BIq N011 N024 I=IF(V(EN,MID)>0.5, {2*Iq_on}, {2*Iq_off})
G22 MID N044 N043 MID {1/26}
A5 N030 0 0 0 0 0 0 0 OTA G=0 In=1p
A6 N046 0 0 0 0 0 0 0 OTA G=0 In=1p
G23 MID N033 N030 MID 1m
R50 N033 MID 1k Noiseless
C30 N033 MID 1f
D4 N028 N045 DO
D5 N045 N029 DO
I3 VCCi N028 {1k*Vcm_max}
R56 VCCi N028 1m
C32 VCCi N028 1n
I4 VEEi N029 {1k*Vcm_min}
R57 VEEi N029 1m
C33 VEEi N029 1n
G27 MID N041 N038 MID 1k
R58 N041 MID 1m Noiseless
G28 MID N038 N037 MID 141.25m
G29 MID N036 N035 MID 1k
R59 N036 MID 1m Noiseless
G30 MID N045 N034 MID 1m
G31 MID DIFFAn N045 N046 1
G32 MID N043 N042 MID 1.1749m
D6 N047 N031 DO
D7 N031 N048 DO
R60 MID N047 1m
C34 MID N047 1n
R61 MID N048 1m
C35 MID N048 1n
G33 MID N047 VCCi MID 1k
G34 MID N048 VEEi MID 1k
D8 N049 N035 DO
D9 N035 N050 DO
R62 N051 N049 1m
C36 N051 N049 1n
R63 N052 N050 1m
C37 N052 N050 1n
G35 N051 N049 VCCi MID 1.027k
G36 N052 N050 VEEi MID 1.027k
R64 0 N051 1m
G37 0 N051 Rail 0 1k
R65 0 N052 1m
G38 0 N052 Rail 0 -1k
DOI1 N031 N032 LIM
COI1 N032 N031 1p
S3 MID DIFFAn EN MID ENA
S4 MID N044 EN MID ENZ
Rs4 N054 CMOUT 1m Noiseless
IbiasP2 N054 MID 2.5µ
IbiasN2 N075 MID 2.5µ
RinCMP2 MID N054 10Meg Noiseless
RinCMN2 N075 MID 10Meg Noiseless
CinCMP2 MID N054 450f
CinCMN2 N075 MID 450f
IOS2 N075 N054 25n
RinDiff2 N075 N054 16Meg Noiseless
CinDiff2 N075 N054 550f
RInP3 N074 MID 1k Noiseless
R43 N064 MID 284.2k Noiseless
C26 N064 MID 1.02p
R44 N065 N066 10 Noiseless
L5 N065 N055 1657.862n
C27 N055 N066 42441.27p
R45 N066 MID 24.24 Noiseless
R46 N067 MID 10 Noiseless
R47 N067 N068 32.985 Noiseless
L6 N068 N069 18.003n
C28 N069 MID 140.697p
R48 N070 N071 10 Noiseless
L7 N070 N056 7.234n
C29 N056 N071 289.372p
R52 N071 MID 57.176 Noiseless
R53 N072 MID 1k Noiseless
Lout2 N073 N059 3.1n
Cout2 N059 MID 3p
RsAp N060 7 1m Noiseless
Rs6 N075 N080 1m Noiseless
B3 MID N064 I=Uplim(Dnlim(5.044m* V(DIFFAp,MID), -2.8m, 28u), 2.8m, 28u)
G20 MID N073 N072 MID {1/26}
A8 N054 0 0 0 0 0 0 0 OTA G=0 In=1p
A9 N075 0 0 0 0 0 0 0 OTA G=0 In=1p
R54 E_nP MID 100k Noiseless
A10 MID MID MID MID MID MID E_nP MID OTA G=10u Iout=1m En={En} Enk={Enk} Vhigh=1k Vlow=-1k
G21 MID N061 N054 MID 1m
R55 N061 MID 1k Noiseless
C31 N061 MID 1f
G25 N061 N062 E_nP MID 1m
R66 N062 N061 1k Noiseless
D10 N057 N074 DO
D11 N074 N058 DO
I5 VCCi N057 {1k*Vcm_max}
R67 VCCi N057 1m
C38 VCCi N057 1n
I6 VEEi N058 {1k*Vcm_min}
R68 VEEi N058 1m
C39 VEEi N058 1n
G26 MID N070 N067 MID 1k
R69 N070 MID 1m Noiseless
G39 MID N067 N066 MID 141.25m
G40 MID N065 N064 MID 1k
R70 N065 MID 1m Noiseless
G41 MID N074 N063 MID 1m
G42 MID DIFFAp N074 N075 1
G43 MID N072 N071 MID 1.1749m
D12 N076 N059 DO
D13 N059 N077 DO
R71 MID N076 1m
C40 MID N076 1n
R72 MID N077 1m
C41 MID N077 1n
G44 MID N076 VCCi MID 1k
G45 MID N077 VEEi MID 1k
D14 N078 N064 DO
D15 N064 N079 DO
R73 N081 N078 1m
C42 N081 N078 1n
R74 N082 N079 1m
C43 N082 N079 1n
G46 N081 N078 VCCi MID 1.027k
G47 N082 N079 VEEi MID 1.027k
R75 0 N081 1m
G48 0 N081 Rail 0 1k
R76 0 N082 1m
G49 0 N082 Rail 0 -1k
DOI2 N059 N060 LIM
COI2 N060 N059 1p
S5 MID DIFFAp EN MID ENA
S6 MID N073 EN MID ENZ
Bsrc3 N011 0 I=Dnlim(I(RsAp), 0,1u)
Bsink3 N024 0 I=Uplim(I(RsAp), 0,1u)
C45 CMRR N053 {C1a_CMR}
G52 MID N053 N054 MID {G1_CMR}
R79 N053 MID 1 Noiseless
R80 CMRR N053 {R1a_CMR} Noiseless
R81 CMRR MID {R2a_CMR} Noiseless
G53 N062 N063 CMRR MID 1m
R82 N063 N062 1k Noiseless
R49 E_nN MID 100k Noiseless
A7 MID MID MID MID MID MID E_nN MID OTA G=10u Iout=1m En={En} Enk={Enk} Vhigh=1k Vlow=-1k
G24 N033 N034 E_nN MID 1m
R51 N034 N033 1k Noiseless
.model DO D(Vfwd=1k Vrev=0 Revepsilon=0.1 Ron=1m Noiseless)
.model DPD D(Ron=1Meg Roff=1G Ilimit=244n Revilimit=3n Epsilon=1 Vfwd=1 Noiseless)
.model LIM D(Vfwd=1n Vrev=1n Ron=1m Roff=1m Ilimit={Iscp} Revilimit={-Iscn} Epsilon=1u Noiseless)
.model ENA SW(Vt=0.5 Vh=-0.1 Ron=1 Roff=1u Noiseless)
.model ENZ SW(Vt=0.5 Vh=-0.1 Ron=26 Roff=1u Noiseless)
.model PD SW(Vt=0.5 Vh=-0.1 Ron=1m Roff=1G Noiseless)
.param Iq_on=4.35m Iq_off=450u
.param Vcm_min=0.2 Vcm_max=-1.8
.param Vcm_min_Vocm=1.66 Vcm_max_Vocm=-1.66
.param Iscp=80m Iscn=-80m
.param Vsmin=3 Vsmax=11
.param ENVt=2.5 ENVh=0.3
.param ENTon=1.1u ENToff=16n
.param M=20m, OS=6.3
.param gain_CMR = {pow(10, (-Rej_dc_CMR/20))}
.param C1a_CMR = {1 / (2 * pi * R1a_CMR * fz1_CMR)}
.param R2a_CMR = {R1a_CMR/ ((2 * pi * fp1_CMR * C1a_CMR
+* R1a_CMR) - 1)}
.param actual1_CMR = {R2a_CMR / (R1a_CMR + R2a_CMR)}
.param G1_CMR = {gain_CMR/actual1_CMR}
.param Rej_dc_CMR=100
.param R1a_CMR=100Meg
.param fz1_CMR=325k
.param fp1_CMR=32G
.param En=1.25n Enk=485
.ends ADA4932
