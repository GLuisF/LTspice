* Copyright (c) 1998-2024 Analog Devices, Inc.  All rights reserved.
*
.subckt ADA4938 1 2 3 4 5 6 7 8 9
I0 3 N019 400µ
Q1 4 N021 N019 0 QX
VOS 1 N021 -1.95m
DLIM+ N005 N006 DX
VLIM+ 3 N006 1.92
DLIM N009 N005 DX
VLIM N009 4 1.92
DLIM- N033 N026 DX
VLIM- N033 4 1.92
DLIM-B N026 N027 DX
VLIM-B 3 N027 1.92
DOCMA N029 N023 DX
VOCMA 3 N023 1.95
DOCMB N032 N029 DX
VOCMB N032 4 1.95
I1 3 QN 400µ
Q2 4 2 QN 0 QX
CIN 1 2 0.88p
C1 N007 N020 0.35p
C2 MID N020 0.005f
C3 MID N007 0.005f
R11 MID N020 250k Noiseless
R12 MID N007 250k Noiseless
GP1 0 N004 N007 MID 0.7
RP1 N004 0 1 Noiseless
CP1 0 N004 0.55p
GP2 0 N008 N020 MID 0.7
RP2 N008 0 1 Noiseless
CP2 0 N008 0.55p
D17 N008 N016 DX
VO1 N016 N013 177m
VO2 N013 N012 177m
D16 N012 N008 DX
G30 N013 N003 3 N008 91m
G31 N031 N013 N008 4 91m
RO30 N013 N003 11 Noiseless
RO31 N031 N013 11 Noiseless
D17B N004 N015 DX
VO1B N015 N010 177m
VO2B N010 N011 177m
D16B N011 N004 DX
G30B N010 N002 3 N004 91m
G31B N030 N010 N004 4 91m
RO30B N002 N010 11 Noiseless
RO31B N030 N010 11 Noiseless
GOCM_A 0 N004 7 0 1
GOCM_B 0 N008 7 0 1
ROCM1 N029 3 400k Noiseless
ROCM2 4 N029 400k Noiseless
VOFFSET N029 7 -1m
VBF1 N008 N026 0
VBF2 N004 N005 0
VSUPP N002 N034 10.6
DOVD1 3 N002 DOVD
DOVD2 N034 4 DOVD
R_VFD+ 8 5 1m Noiseless
R_VFD- 9 6 1m Noiseless
R_VIOUT1 3 N003 1m Noiseless
R_VIOUT2 N031 4 1m Noiseless
Ron N013 6 1m Noiseless
R_VIOUTB1 3 N002 1m Noiseless
R_VIOUTB2 N030 4 1m Noiseless
Rop N010 5 1m Noiseless
C15 8 0 1f Rpar=1G
C16 9 0 1f Rpar=1G
Bop_src 3 0 I=Dnlim(I(Rop), 0,1u)
Bon_src 3 0 I=Dnlim(I(Ron), 0,1u)
Bop_sink 4 0 I=Uplim(I(Rop), 0,1u)
Bon_sink 4 0 I=Uplim(I(Ron), 0,1u)
B1 MID 0 V=(V(3)+V(4))/2
A1 0 0 0 0 0 0 E_n 0 OTA G=10u Iout=1m Vhigh=1k Vlow=-1k En=2.6n Enk=1.3k
R19 E_n 0 100k Noiseless
G12 N019 QP E_n 0 1k
R20 QP N019 1m Noiseless
A3 2 0 0 0 0 0 0 0 OTA G=0 In=4.8p
A2 N021 0 0 0 0 0 0 0 OTA G=0 In=4.8p
Bs N020 N007 I=Uplim(Dnlim(5m* V(QP,QN), {Isink}, 100u), {Isrc}, 100u)
.model QX PNP (BF=228 Is=1f KF=500f AF=1 Noiseless)
.model QY NPN (BF=228 Is=1f KF=500f AF=1 Noiseless)
.model DX D(IS=10f Noiseless)
.model DEN D(IS=1n RS=1 KF=0.1f AF=1 Noiseless)
.model DOVD D(IS=1f Noiseless)
.param Isrc=2.45m Isink={-Isrc}
.ends ADA4938
