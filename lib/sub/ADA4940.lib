* Copyright (c) 1998-2021 Analog Devices, Inc.  All rights reserved.
*
.subckt ADA4940 1 2 3 4 5 6 7 8 9 10
V_Vos 4 N010 0.33m
Q_Q2 6 N025 IN2 0 QbreakP 1u
Q_Q7 6 3 N013 0 QbreakP 25u
Q_Q4 6 N024 IN1 0 QbreakP 1u
Q_Q5 6 N010 N011 0 QbreakP 25u
Q_Q8 5 3 N024 0 QbreakN 25u
Q_Q1 5 N011 IN2 0 QbreakN 1u
Q_Q3 5 N013 IN1 0 QbreakN 1u
Q_Q6 5 N010 N025 0 QbreakN 25u
I_I6 N024 6 1m
I_I7 5 N011 1m
I_I5 N025 6 1m
I_I8 5 N013 1m
D_D14 VMS N021 Dbreak
V_V18 N021 STAGE2 7
G_G9 0 SHIFT2 9 0 1
G_G8 0 SHIFT1 9 0 1
R_R19 6 MID 200k
R_R18 MID 5 200k
V_V14 MID 9 1m
V_V19 N019 VMS 7
D_D15 STAGE2 N019 Dbreak
G_G2 0 SHIFT2 STAGE2B VMS 1
R_R22 BASE1 0 1
R_R24 0 BASE2 1
C_C3 STAGE2B VMS {C1}
R_R4 0 SHIFT2 1
R_R2 STAGE2B VMS 50k
C_C2 VMS STAGE2A {C1}
G_G3 0 SHIFT1 STAGE2A VMS 1
R_R1 STAGE2A VMS 50k
R_R3 SHIFT1 0 1
C_C7 BASE1 0 1p
C_C6 0 BASE2 1p
C_C5 0 SHIFT2 {C2}
C_C1 STAGE2A STAGE2B {C1}
C_C4 SHIFT1 0 {C2}
V_V16 5 N004 1.2
D_D9 9 N004 Dbreak
D_D10 N028 9 Dbreak
V_V17 N028 6 1.2
D_D21 IN1 IN2 Dbreak 1u
D_D22 IN2 IN1 Dbreak 1u
Q_Q10 6 N017 8 0 QbreakP 1m
Q_Q9 5 N008 8 0 QbreakN 1m
V_V12 5 N005 0.8
V_V6 5 N002 1.85
V_V9 N027 6 0.6
V_V7 N026 6 0.6
V_V13 N029 6 0.8
V_V8 5 N003 1.85
V_V11 N030 6 0.8
V_V10 5 N006 0.8
D_D1 IN1 N002 Dbreak
D_D2 N026 IN1 Dbreak
D_D3 IN2 N003 Dbreak
D_D4 N027 IN2 Dbreak
D_D5 SHIFT2 N006 Dbreak
D_D6 N030 SHIFT2 Dbreak
D_D7 SHIFT1 N005 Dbreak
D_D8 N029 SHIFT1 Dbreak
R_R20 VMS STAGE2 100
Q_Q13 6 BASE2 N008 0 QbreakP 1m
Q_Q14 5 BASE2 N017 0 QbreakN 1m
Q_Q11 5 N009 7 0 QbreakN 1m
Q_Q12 6 N018 7 0 QbreakP 1m
V_V27 2 7 0
V_V26 1 8 0
I_I11 N017 6 1m
I_I12 5 N008 1m
Q_Q15 6 BASE1 N009 0 QbreakP 1m
Q_Q16 5 BASE1 N018 0 QbreakN 1m
I_I13 5 N009 1m
I_I14 N018 6 1m
BE_E3 VMS 0 V=(V(5)+V(6))*0.5
A1 10 6 0 0 0 0 N034 0 SCHMITT Vt={PDVt} Vh=10m Trise={PDTon*2} Vlow=0 Vhigh=1 Tfall={PDToff*2}
A2 0 N034 0 0 0 0 EN 0 AND Tau=50n
BIq 5 6 I={Iq_off}+V(EN)* {Iq_on-Iq_off}-10m
G2 0 BASE1 SHIFT1 0 1
G3 0 BASE2 SHIFT2 0 1
B1 VMS STAGE2 I=V(IN1,IN2)*V(EN)
Rpu 10 5 10Meg
B4 STAGE2B STAGE2A I=Uplim(Dnlim(10m*V(STAGE2,VMS), {Ineg}, 20m), {Ipos}, 20m)
R1 0 2 1T noiseless
R5 1 0 1T noiseless
.model QbreakP PNP (Kf=1e-14 Af=1.07)
.model QbreakN NPN (Kf=1e-14 Af=1.07)
.model Dbreak D(Is=1e-14)
.param PDVt = 1.4
.param PDTon=0.6u PDToff=10u
.param Iq_off=20.75u Iq_on=1.257m
.param C1=225p C2=1n
.param Ipos=33.9m Ineg={-Ipos}
.ends ADA4940
