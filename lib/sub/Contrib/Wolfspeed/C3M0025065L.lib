**************************************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
**************************************************************************************************************************************************************************************************
*******************************************************************************
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not rdlimed to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************

***********************************************************
****	Wolfspeed SiC MOSFET C3M0025065L Spice Library
****	Revision 1.0 Date: 11-24-2023
***********************************************************
****	Revision record
****	Revision 1	Initial Release
*********************************************************************************
****Parasitics Included
****Tj = Junction Temperature
****Tc = Case Temperature
****D = Drain
****G = Gate
****S1 = Kelvin Source
****S2 = Power Source
***********************************************************

.subckt C3M0025065L d g s1 s2 Tj Tc

* Put in specified Rgint
.param Rgint = 1.3

Ci_d d 0 1p Rpar=1G
Ci_g	g 0 1p Rpar=1G
Ci_s1 s1 0 1p Rpar=1G
Ci_s2 s2 0 1p Rpar=1G
Ci_Tj Tj 0 1p Rpar=1G
Ci_Tc Tc 0 1p Rpar=1G

.func rdlim(x,n,p,z) {
+	uplim(dnlim(x,n,z),p,z)
+}

R1022	Tjc	0	1E6
E1022	Tjc	0 	value {rdlim(v(Tj),-40,175,.1)}

R100	gk	0	1E6
E100	gk	0 	value {rdlim(v(g1,s),-4,19,.1)}


e33	NET3	0	Value {rdlim(12.7502u*V(Tjc)**2+-6.3737m*V(Tjc)+3.1252,-3.5,3.5,0.01)}
R_cc	NET3	0 	1E6

Ls1 		s1	sv	3.17n Rser=8.85m
R_Ls1 		s1	sv  	100

Ls2 		s2	sv	1.8n Rser=0.877m
R_Ls2 		s2	sv  	100

Rv		sv	s	100
Lv		sv	s	0.65n Rser=0.1m

*R_gg 		g1	s	1E6
R_g 		g1	g2	{Rgint}
Lg 			g	g2	7.7n Rser=13.255m
R_Lg 		g	g2	100

Ld 		d	d3	4.366n Rser=87.416u
R_Ld		d	d3	100


Rdrain_s	d3	d1	10u
Cdrs		d3	d1	1p
Gheat		0	Tj	value = {abs((V(d1,s)*I(Rdrain_s)))+abs((V(g1,g2)**2/Rgint))}
CGS		g1	s	2968p Rpar=100k

*Body Diode Implementation
.func rbody(vgs,t) {table(t,-40,r1(vgs),25,r2(vgs),175,r3(vgs))}
.func r1(vgs) {table(vgs,-4,18.61m,-2,22.38m,0,27.9m,5,30m,10,40m,15,60m)}
.func r2(vgs) {table(vgs,-4,21.46m,-2,25.15m,0,30.72m,5,40m,10,50m,15,65m)}
.func r3(vgs) {table(vgs,-4,23.37m,-2,26.72m,0,31.48m,5,45m,10,55m,15,70m)}

.func nd(vgs,t) {table(t,-40,nd_n40(vgs),25,nd_25(vgs),175,nd_175(vgs))}
.func nd_n40(vgs) {table(vgs,-4,328.9m,-2,271.8m,0,194.8m,5,40m,10,10m,15,1m)}
.func nd_25(vgs) {table(vgs,-4,288.1m,-2,236.1m,0,166.2m,5,55m,10,35m,15,20m)}
.func nd_175(vgs) {table(vgs,-4,253.546m,-2,210.237m,0,157.66m,5,40m,10,10m,15,1m)}

GRbd d1 dd2 value {V(d1,dd2)/rdlim(rbody(V(gk),V(Tjc)),10m,60m,0.1)}
GITQ s dd2 value {uplim(1u*(-1+exp(V(s,dd2)/(V(ND)))),1e4,1m)}

Ef	ND	0	value {rdlim(nd(V(gk),V(Tjc)),1m,320m,0.01)}
Rf	ND	0	10Meg	

CDS1		dd2	s	1p
CGD1		g1	d3	1p
R_DS1		dd2	s	0.5G


R0 N1 Tj 67.69m
R1 N2 N1 0.1874
R2 N3 N2 86.19m
R3 Tc N3 0.1163

C0 Tj 0 1.265m
C1 N1 0 6.301m
C2 N2 0 21.38m
C3 N3 0 51.74m

R_tc Tc 0 10k

****************************************
.func gain(vgs,t) {
+	table(t,-40,g1(vgs),25,g2(vgs),175,g3(vgs))
+}

.func nval(vgs,t) {
+	table(t,-40,n1(vgs),25,n2(vgs),175,n3(vgs))
+}

.func lam(vgs,t) {
+	table(t,-40,l1(vgs),25,l2(vgs),175,l3(vgs))
+}

.func drain_current(vgs,vds,vth,g,n,l) {
+	g*(vgs-vth)*(log(1+exp(vgs-vth))**2 - log(1+exp(vgs-vth-n*vds))**2)*(1+l*vds)
+}

.func g1(vgs) {table(vgs,3,0.178996,3.32653,0.156083,3.65306,0.132928,3.97959,0.111651,4.30612,0.0943696,4.63265,0.0832023,4.95918,0.0802678,5.28571,0.0839281,5.61224,0.0888771,5.93878,0.0946977,6.26531,0.101043,6.59184,0.107567,6.91837,0.113921,7.2449,0.120027,7.57143,0.126301,7.89796,0.132641,8.22449,0.138914,8.55102,0.144992,8.87755,0.150744,9.20408,0.156209,9.53061,0.161806,9.85714,0.16726,10.1837,0.172231,10.5102,0.17638,10.8367,0.179364,11.1633,0.180905,11.4898,0.181207,11.8163,0.180458,12.1429,0.178803,12.4694,0.176388,12.7959,0.17336,13.1224,0.169825,13.449,0.165546,13.7755,0.160627,14.102,0.155285,14.4286,0.14974,14.7551,0.144209,15.0816,0.138889,15.4082,0.133488,15.7347,0.127945,16.0612,0.122386,16.3878,0.116935,16.7143,0.111721,17.0408,0.106864,17.3673,0.102255,17.6939,0.0978018,18.0204,0.0935359,18.3469,0.0894901,18.6735,0.0856969,19,0.0821888)}
.func n1(vgs) {table(vgs,3,1.89542e-05,3.32653,0.157441,3.65306,0.316303,3.97959,0.464406,4.30612,0.589547,4.63265,0.679527,4.95918,0.722144,5.28571,0.730039,5.61224,0.737282,5.93878,0.743621,6.26531,0.748333,6.59184,0.75069,6.91837,0.749966,7.2449,0.746603,7.57143,0.743073,7.89796,0.739459,8.22449,0.735721,8.55102,0.73182,8.87755,0.727716,9.20408,0.723035,9.53061,0.716865,9.85714,0.709895,10.1837,0.702952,10.5102,0.696868,10.8367,0.69247,11.1633,0.691172,11.4898,0.696363,11.8163,0.707057,12.1429,0.721578,12.4694,0.738254,12.7959,0.755409,13.1224,0.771703,13.449,0.789353,13.7755,0.808824,14.102,0.82974,14.4286,0.851723,14.7551,0.874397,15.0816,0.897436,15.4082,0.921558,15.7347,0.946829,16.0612,0.972865,16.3878,0.99928,16.7143,1.02569,17.0408,1.05171,17.3673,1.07754,17.6939,1.10341,18.0204,1.12935,18.3469,1.15533,18.6735,1.18138,19,1.20748)}
.func l1(vgs) {table(vgs,3,0.00750296,3.32653,0.00914618,3.65306,0.0108092,3.97959,0.0123582,4.30612,0.0136591,4.63265,0.014578,4.95918,0.0149811,5.28571,0.0149973,5.61224,0.0149941,5.93878,0.0149839,6.26531,0.014974,6.59184,0.0149719,6.91837,0.014985,7.2449,0.0150144,7.57143,0.0150479,7.89796,0.0150826,8.22449,0.0151159,8.55102,0.0151455,8.87755,0.0151691,9.20408,0.0151808,9.53061,0.0151685,9.85714,0.0151349,10.1837,0.0150844,10.5102,0.0150213,10.8367,0.0149498,11.1633,0.014868,11.4898,0.0147473,11.8163,0.0145962,12.1429,0.0144295,12.4694,0.0142624,12.7959,0.0141098,13.1224,0.0139829,13.449,0.0138549,13.7755,0.0137261,14.102,0.0136069,14.4286,0.013508,14.7551,0.0134399,15.0816,0.0134117,15.4082,0.0133981,15.7347,0.0133865,16.0612,0.0133769,16.3878,0.0133693,16.7143,0.0133637,17.0408,0.01336,17.3673,0.0133567,17.6939,0.013353,18.0204,0.0133495,18.3469,0.0133466,18.6735,0.0133446,19,0.0133441)}
.func g2(vgs) {table(vgs,3,1.84687,3.32653,1.47407,3.65306,1.09618,3.97959,0.744354,4.30612,0.449727,4.63265,0.24344,4.95918,0.15663,5.28571,0.158384,5.61224,0.162531,5.93878,0.167398,6.26531,0.172495,6.59184,0.177335,6.91837,0.181428,7.2449,0.184783,7.57143,0.188296,7.89796,0.191853,8.22449,0.195289,8.55102,0.198438,8.87755,0.201134,9.20408,0.203267,9.53061,0.204907,9.85714,0.20597,10.1837,0.206353,10.5102,0.205955,10.8367,0.204673,11.1633,0.202271,11.4898,0.198065,11.8163,0.192416,12.1429,0.185847,12.4694,0.17888,12.7959,0.172037,13.1224,0.165748,13.449,0.159452,13.7755,0.153021,14.102,0.146551,14.4286,0.14014,14.7551,0.133884,15.0816,0.127869,15.4082,0.12193,15.7347,0.116047,16.0612,0.110304,16.3878,0.104784,16.7143,0.0995717,17.0408,0.0947478,17.3673,0.09016,17.6939,0.0857265,18.0204,0.0815076,18.3469,0.0775634,18.6735,0.0739542,19,0.0707401)}
.func n2(vgs) {table(vgs,3,0.107952,3.32653,0.275884,3.65306,0.444885,3.97959,0.602244,4.30612,0.735254,4.63265,0.831206,4.95918,0.877391,5.28571,0.88682,5.61224,0.894612,5.93878,0.900307,6.26531,0.90295,6.59184,0.901585,6.91837,0.895258,7.2449,0.884563,7.57143,0.872991,7.89796,0.861029,8.22449,0.849004,8.55102,0.837244,8.87755,0.826078,9.20408,0.815293,9.53061,0.803605,9.85714,0.79207,10.1837,0.781962,10.5102,0.774554,10.8367,0.771121,11.1633,0.773526,11.4898,0.785117,11.8163,0.803994,12.1429,0.827503,12.4694,0.852988,12.7959,0.877797,13.1224,0.899645,13.449,0.920676,13.7755,0.941954,14.102,0.963695,14.4286,0.986115,14.7551,1.00943,15.0816,1.03388,15.4082,1.05992,15.7347,1.08735,16.0612,1.1157,16.3878,1.14454,16.7143,1.17341,17.0408,1.20187,17.3673,1.23013,17.6939,1.25849,18.0204,1.28696,18.3469,1.31553,18.6735,1.34421,19,1.37298)}
.func l2(vgs) {table(vgs,3,0.018979,3.32653,0.0180198,3.65306,0.0170483,3.97959,0.0161462,4.30612,0.0153954,4.63265,0.0148775,4.95918,0.0146742,5.28571,0.0147096,5.61224,0.0147628,5.93878,0.014825,6.26531,0.0148905,6.59184,0.0149537,6.91837,0.0150088,7.2449,0.015056,7.57143,0.0151056,7.89796,0.0151557,8.22449,0.0152037,8.55102,0.0152471,8.87755,0.0152834,9.20408,0.0153079,9.53061,0.0153126,9.85714,0.0152989,10.1837,0.0152688,10.5102,0.0152247,10.8367,0.0151685,11.1633,0.0150973,11.4898,0.0149858,11.8163,0.014842,12.1429,0.0146797,12.4694,0.0145125,12.7959,0.0143542,13.1224,0.0142146,13.449,0.0140668,13.7755,0.0139131,14.102,0.0137665,14.4286,0.01364,14.7551,0.0135466,15.0816,0.0134977,15.4082,0.0134677,15.7347,0.013443,16.0612,0.0134233,16.3878,0.013408,16.7143,0.0133967,17.0408,0.0133891,17.3673,0.013382,17.6939,0.0133745,18.0204,0.0133674,18.3469,0.0133616,18.6735,0.0133579,19,0.0133573)}
.func g3(vgs) {table(vgs,3,0.318208,3.32653,0.33025,3.65306,0.342294,3.97959,0.353184,4.30612,0.361765,4.63265,0.366883,4.95918,0.367382,5.28571,0.363809,5.61224,0.358626,5.93878,0.352258,6.26531,0.3451,6.59184,0.337549,6.91837,0.329998,7.2449,0.32266,7.57143,0.315202,7.89796,0.307465,8.22449,0.299303,8.55102,0.290572,8.87755,0.281127,9.20408,0.270548,9.53061,0.258053,9.85714,0.244269,10.1837,0.229945,10.5102,0.215826,10.8367,0.20266,11.1633,0.190947,11.4898,0.179708,11.8163,0.168826,12.1429,0.158403,12.4694,0.148542,12.7959,0.139347,13.1224,0.130873,13.449,0.122718,13.7755,0.114855,14.102,0.107389,14.4286,0.100426,14.7551,0.0940733,15.0816,0.0884156,15.4082,0.0831038,15.7347,0.0780173,16.0612,0.0732118,16.3878,0.068743,16.7143,0.0646666,17.0408,0.061034,17.3673,0.0575745,17.6939,0.0541813,18.0204,0.0509673,18.3469,0.0480455,18.6735,0.0455289,19,0.0435305)}
.func n3(vgs) {table(vgs,3,1.2985,3.32653,1.2693,3.65306,1.2399,3.97959,1.21031,4.30612,1.18054,4.63265,1.15059,4.95918,1.12048,5.28571,1.08984,5.61224,1.05839,5.93878,1.02666,6.26531,0.99518,6.59184,0.964475,6.91837,0.935078,7.2449,0.905775,7.57143,0.874063,7.89796,0.842662,8.22449,0.814512,8.55102,0.79255,8.87755,0.779716,9.20408,0.777452,9.53061,0.781208,9.85714,0.789268,10.1837,0.800357,10.5102,0.813201,10.8367,0.826525,11.1633,0.839325,11.4898,0.852479,11.8163,0.866326,12.1429,0.880992,12.4694,0.896606,12.7959,0.913293,13.1224,0.93127,13.449,0.951403,13.7755,0.973462,14.102,0.996929,14.4286,1.02128,14.7551,1.046,15.0816,1.07061,15.4082,1.0957,15.7347,1.12147,16.0612,1.14772,16.3878,1.17427,16.7143,1.20091,17.0408,1.22746,17.3673,1.25401,17.6939,1.2807,18.0204,1.30751,18.3469,1.33446,18.6735,1.36153,19,1.38873)}
.func l3(vgs) {table(vgs,3,0.0153182,3.32653,0.0154,3.65306,0.0154742,3.97959,0.0155344,4.30612,0.015574,4.63265,0.0155862,4.95918,0.0155646,5.28571,0.0154947,5.61224,0.0153763,5.93878,0.0152347,6.26531,0.0150954,6.59184,0.0149839,6.91837,0.0149258,7.2449,0.0149292,7.57143,0.0149588,7.89796,0.0150033,8.22449,0.015053,8.55102,0.0150981,8.87755,0.0151288,9.20408,0.0151388,9.53061,0.0151362,9.85714,0.0151222,10.1837,0.0150971,10.5102,0.0150612,10.8367,0.0150148,11.1633,0.0149473,11.4898,0.0148051,11.8163,0.0146076,12.1429,0.0143865,12.4694,0.0141736,12.7959,0.0140003,13.1224,0.0138921,13.449,0.0138052,13.7755,0.0137262,14.102,0.0136571,14.4286,0.0136003,14.7551,0.0135578,15.0816,0.0135314,15.4082,0.0135098,15.7347,0.013489,16.0612,0.0134698,16.3878,0.0134529,16.7143,0.0134393,17.0408,0.0134297,17.3673,0.0134214,17.6939,0.013413,18.0204,0.013405,18.3469,0.0133982,18.6735,0.0133932,19,0.0133909)}


****************************************
G2 d1 s value {
+	if(V(d3,s)<=0,
+		if (V(gk)<=V(NET3),
+		0
+		,
+		-drain_current(V(gk),V(s,d3),V(NET3),gain(V(gk),V(Tjc)),nval(V(gk),V(Tjc)),lam(V(gk),V(Tjc)))
+		)
+		,
+		if (V(gk)<=V(NET3),
+		0
+		,
+		drain_current(V(gk),V(d3,s),V(NET3),gain(V(gk),V(Tjc)),nval(V(gk),V(Tjc)),lam(V(gk),V(Tjc)))
+		)
+			)
+			}
****************************************
.param k1=1785p
.param k2=0.51
.param ka=49
.param kb=0.32
.param kc=3.5

G11 g1 d11 value {
+		k1*(
+		(1+(rdlim(v(d3,g1),0.1,270,0.01))*(1+ka*(1+TANH(kb*V(d3,g1)-kc))/2))**(-k2)
+		)*ddt(v(g1,d3))
+			} Rpar=1Meg
R_CGD d11 d3 1E-4


.param Cjo = 2600p
.param Vj  = 2.55
.param M   = 0.525

G12 d12 s value {
+		(Cjo/(1+(rdlim(v(d3,s),0.1,270,0.01)/Vj)**M))*ddt(v(d3,s))
+			} Rpar=1Meg
R_CDS d12 d3 1E-4

****************************************


.ends C3M0025065L

****************************************

