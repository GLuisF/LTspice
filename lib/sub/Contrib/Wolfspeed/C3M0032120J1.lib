**************************************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
**************************************************************************************************************************************************************************************************
*******************************************************************************
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not rdlimed to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************

***********************************************************
****	Wolfspeed SiC MOSFET C3M0032120J1 Spice Library
****	Version 1.0 Date: 07-05-2019
****	Version 2.0 Date: 02-15-2022
****	Version 3.0 Date: 07-31-2023
***********************************************************
****	Revision record
****	Version 1	Initial Release
****	Version 2	Updated dynamic performance
****	Version 3	Updated to new model structure
*********************************************************************************
****Parasitics Included
****Tj = Junction Temperature
****Tc = Case Temperature
****D = Drain
****G = Gate
****S1 = Kelvin Source
****S2 = Power Source
***********************************************************

.subckt C3M0032120J1 d g s1 s2 Tj Tc
.param Rgint = 1.7

Ci_d d 0 1p Rpar=1G
Ci_g	g 0 1p Rpar=1G
Ci_s1 s1 0 1p Rpar=1G
Ci_s2 s2 0 1p Rpar=1G
Ci_Tj Tj 0 1p Rpar=1G
Ci_Tc Tc 0 1p Rpar=1G

.func rdlim(x,n,p,z) {
+	uplim(dnlim(x,n,z),p,z)
+}

R1022	Tjc	0	1E6
E1022	Tjc	0 	value {rdlim(v(Tj),-55,260,0.1)}

R100	gk	0	1E6
E100	gk	0 	value {rdlim(v(g1,s),-4,19,0.1)}


e33	NET3	0	Value {rdlim(14.1813u*V(Tjc)**2-5.3301m*V(Tjc)+2.1897,-3.5,3.5,0.01)}
R_cc	NET3	0 	1E6

Ls1 		s1	sv	2.41n Rser=8.85m
R_Ls1 		s1	sv  	100

Ls2 		s2	sv	1.48n Rser=0.998m
R_Ls2 		s2	sv  	100

Rv		sv	s	100
Lv		sv	s	0.3n Rser=0

R_gg 		g1	s	1E6
R_g 		g1	g2	{Rgint}
Lg 			g	g2	7.44n Rser=13.255m
R_Lg 		g	g2	100

Ld 		d	d3	4.366n Rser=87.416u
R_Ld		d	d3	100

Ed		Id	0	value {I(Rdrain_s)}
Rdd		Id	0	1E6

Rdrain_s	d3	d1	10u
Cdrs		d3	d1	10p
Gheat		0	Tj	value = {abs((V(d1,s)*v(Id)))+abs((V(g1,g2)**2/Rgint))}
CGS		g1	s	3349p

* Body Diode Implementation
.func rbody(vgs,t) {table(t,-40,r1(vgs),25,r2(vgs),175,r3(vgs))}
.func r1(vgs) {table(vgs,-4,16.99m,-2,18.73m,0,22.36m,5,30m,10,40m,15,60m)}
.func r2(vgs) {table(vgs,-4,18.71m,-2,20.596m,0,24.69m,5,35m,10,50m,15,1m)}
.func r3(vgs) {table(vgs,-4,18.05m,-2,19.534m,0,22.39m,5,10m,10,30m,15,60m)}

.func nd(vgs,t) {table(t,-40,nd_n40(vgs),25,nd_25(vgs),175,nd_175(vgs))}
.func nd_n40(vgs) {table(vgs,-4,297.77m,-2,271.09m,0,224.76m,5,40m,10,10m,15,1m)}
.func nd_25(vgs) {table(vgs,-4,263.09m,-2,239.29m,0,196.65m,5,60m,10,40m,15,20m)}
.func nd_175(vgs) {table(vgs,-4,232.46m,-2,213.71m,0,187.01m,5,40m,10,10m,15,1m)}

GRbd d1 dd2 value {V(d1,dd2)/rdlim(rbody(V(gk),V(Tjc)),10m,60m,0.1)}
GITQ s dd2 value {uplim(1u*(-1+exp(V(s,dd2)/(V(ND)))),1e4,1m)}

Ef	ND	0	value {rdlim(nd(V(gk),V(Tjc)),1m,320m,0.01)}
Rf	ND	0	10Meg	


CDS1		dd2	s	1p
CGD1		g1	d3	1p
R_DS1		dd2	s	0.5G


R0 N1 Tj 51.889m
R1 N2 N1 139.008m
R2 N3 N2 105.831m
R3 Tc N3 148.683m

C0 Tj 0 1.612m
C1 N1 0 7.933m
C2 N2 0 24.943m
C3 N3 0 118.248m

R_tc Tc 0 10k

****************************************
.func gain(vgs,t) {
+	table(t,-40,g1(vgs),25,g2(vgs),175,g3(vgs))
+}

.func nval(vgs,t) {
+	table(t,-40,n1(vgs),25,n2(vgs),175,n3(vgs))
+}

.func lam(vgs,t) {
+	table(t,-40,l1(vgs),25,l2(vgs),175,l3(vgs))
+}

.func drain_current(vgs,vds,vth,g,n,l) {
+	g*(vgs-vth)*(log(1+exp(vgs-vth))**2 - log(1+exp(vgs-vth-n*vds))**2)*(1+l*vds)
+}

.func g1(vgs) {table(vgs,3,0.103954,3.32653,0.0896533,3.65306,0.0751838,3.97959,0.0619856,4.30612,0.0514987,4.63265,0.0451631,4.95918,0.0444189,5.28571,0.0483255,5.61224,0.0534684,5.93878,0.0594262,6.26531,0.0658213,6.59184,0.0722762,6.91837,0.0784131,7.2449,0.0841029,7.57143,0.0897666,7.89796,0.0954249,8.22449,0.101075,8.55102,0.106714,8.87755,0.112338,9.20408,0.118104,9.53061,0.124408,9.85714,0.130878,10.1837,0.137072,10.5102,0.14255,10.8367,0.146872,11.1633,0.149655,11.4898,0.15104,11.8163,0.151217,12.1429,0.150342,12.4694,0.148571,12.7959,0.146059,13.1224,0.142928,13.449,0.138985,13.7755,0.134341,14.102,0.129208,14.4286,0.123797,14.7551,0.118319,15.0816,0.112957,15.4082,0.107277,15.7347,0.101266,16.0612,0.0951863,16.3878,0.0892974,16.7143,0.0838608,17.0408,0.0791308,17.3673,0.0748105,17.6939,0.0706982,18.0204,0.0669035,18.3469,0.0635354,18.6735,0.0607034,19,0.0585168)}
.func n1(vgs) {table(vgs,3,0.549981,3.32653,0.530324,3.65306,0.515886,3.97959,0.507782,4.30612,0.507127,4.63265,0.515035,4.95918,0.53262,5.28571,0.568785,5.61224,0.628777,5.93878,0.699805,6.26531,0.76888,6.59184,0.823018,6.91837,0.849229,7.2449,0.845711,7.57143,0.834398,7.89796,0.818237,8.22449,0.799091,8.55102,0.77882,8.87755,0.759285,9.20408,0.740932,9.53061,0.720286,9.85714,0.698684,10.1837,0.677975,10.5102,0.660003,10.8367,0.646618,11.1633,0.639662,11.4898,0.639771,11.8163,0.645713,12.1429,0.656126,12.4694,0.669647,12.7959,0.684914,13.1224,0.700825,13.449,0.718951,13.7755,0.739266,14.102,0.761065,14.4286,0.783641,14.7551,0.806287,15.0816,0.828348,15.4082,0.850416,15.7347,0.872797,16.0612,0.895388,16.3878,0.918084,16.7143,0.940783,17.0408,0.963382,17.3673,0.985931,17.6939,1.0085,18.0204,1.03109,18.3469,1.05369,18.6735,1.07632,19,1.09897)}
.func l1(vgs) {table(vgs,3,0.017892,3.32653,0.0176247,3.65306,0.0173551,3.97959,0.0171053,4.30612,0.0168973,4.63265,0.016753,4.95918,0.0166944,5.28571,0.0167017,5.61224,0.0167166,5.93878,0.0167369,6.26531,0.0167613,6.59184,0.0167886,6.91837,0.0168175,7.2449,0.0168505,7.57143,0.0168934,7.89796,0.0169401,8.22449,0.0169839,8.55102,0.0170183,8.87755,0.0170367,9.20408,0.017022,9.53061,0.0169404,9.85714,0.0168074,10.1837,0.0166429,10.5102,0.016467,10.8367,0.0162995,11.1633,0.0161515,11.4898,0.0159879,11.8163,0.0158142,12.1429,0.015645,12.4694,0.0154943,12.7959,0.0153767,13.1224,0.0153027,13.449,0.0152453,13.7755,0.0151964,14.102,0.0151574,14.4286,0.0151291,14.7551,0.0151128,15.0816,0.0151092,15.4082,0.0151095,15.7347,0.0151098,16.0612,0.0151101,16.3878,0.0151104,16.7143,0.0151107,17.0408,0.0151109,17.3673,0.0151111,17.6939,0.0151113,18.0204,0.0151115,18.3469,0.0151117,18.6735,0.0151119,19,0.0151121)}
.func g2(vgs) {table(vgs,3,0.00553354,3.32653,0.0210813,3.65306,0.0362699,3.97959,0.0507257,4.30612,0.0640751,4.63265,0.0759442,4.95918,0.0859595,5.28571,0.0945088,5.61224,0.102593,5.93878,0.110132,6.26531,0.117029,6.59184,0.123187,6.91837,0.128512,7.2449,0.133152,7.57143,0.13762,7.89796,0.14187,8.22449,0.145827,8.55102,0.149417,8.87755,0.152567,9.20408,0.15532,9.53061,0.157954,9.85714,0.160234,10.1837,0.161879,10.5102,0.162607,10.8367,0.162137,11.1633,0.160002,11.4898,0.155251,11.8163,0.148553,12.1429,0.140815,12.4694,0.132942,12.7959,0.125839,13.1224,0.120268,13.449,0.115337,13.7755,0.110638,14.102,0.106094,14.4286,0.101629,14.7551,0.0971667,15.0816,0.0926263,15.4082,0.0879012,15.7347,0.0830795,16.0612,0.0783063,16.3878,0.0737267,16.7143,0.0694856,17.0408,0.0657239,17.3673,0.0622471,17.6939,0.0589399,18.0204,0.0558836,18.3469,0.0531593,18.6735,0.0508483,19,0.0490319)}
.func n2(vgs) {table(vgs,3,0.379464,3.32653,0.409632,3.65306,0.444762,3.97959,0.483856,4.30612,0.525917,4.63265,0.56995,4.95918,0.614956,5.28571,0.668822,5.61224,0.738943,5.93878,0.814722,6.26531,0.885358,6.59184,0.940048,6.91837,0.967989,7.2449,0.965099,7.57143,0.945412,7.89796,0.915174,8.22449,0.880059,8.55102,0.845737,8.87755,0.817882,9.20408,0.798476,9.53061,0.777976,9.85714,0.757725,10.1837,0.740319,10.5102,0.728357,10.8367,0.724436,11.1633,0.731545,11.4898,0.751946,11.8163,0.781782,12.1429,0.816507,12.4694,0.851575,12.7959,0.88244,13.1224,0.905083,13.449,0.922425,13.7755,0.937174,14.102,0.950974,14.4286,0.965471,14.7551,0.982308,15.0816,1.00305,15.4082,1.02702,15.7347,1.05302,16.0612,1.08035,16.3878,1.1083,16.7143,1.13616,17.0408,1.16324,17.3673,1.18987,17.6939,1.21652,18.0204,1.2432,18.3469,1.2699,18.6735,1.29663,19,1.32339)}
.func l2(vgs) {table(vgs,3,0.016377,3.32653,0.016412,3.65306,0.0164456,3.97959,0.0164776,4.30612,0.0165079,4.63265,0.0165362,4.95918,0.0165624,5.28571,0.0165851,5.61224,0.0166031,5.93878,0.0166185,6.26531,0.0166332,6.59184,0.0166493,6.91837,0.0166688,7.2449,0.0166985,7.57143,0.0167468,7.89796,0.0168051,8.22449,0.0168642,8.55102,0.0169149,8.87755,0.0169478,9.20408,0.0169455,9.53061,0.0168816,9.85714,0.0167759,10.1837,0.0166521,10.5102,0.0165338,10.8367,0.0164447,11.1633,0.0164116,11.4898,0.0164562,11.8163,0.0165522,12.1429,0.0166677,12.4694,0.0167711,12.7959,0.0168303,13.1224,0.0168093,13.449,0.0166577,13.7755,0.0164144,14.102,0.0161363,14.4286,0.0158804,14.7551,0.0157038,15.0816,0.0156577,15.4082,0.0156581,15.7347,0.0156587,16.0612,0.0156595,16.3878,0.0156603,16.7143,0.0156611,17.0408,0.0156618,17.3673,0.0156625,17.6939,0.0156632,18.0204,0.0156639,18.3469,0.0156646,18.6735,0.0156653,19,0.0156661)}
.func g3(vgs) {table(vgs,3,0.157271,3.32653,0.173249,3.65306,0.188983,3.97959,0.203624,4.30612,0.216323,4.63265,0.226231,4.95918,0.232498,5.28571,0.235945,5.61224,0.238769,5.93878,0.24082,6.26531,0.241915,6.59184,0.24187,6.91837,0.240502,7.2449,0.237808,7.57143,0.234168,7.89796,0.229657,8.22449,0.224333,8.55102,0.218252,8.87755,0.211473,9.20408,0.203762,9.53061,0.194321,9.85714,0.183635,10.1837,0.172308,10.5102,0.160941,10.8367,0.150139,11.1633,0.140267,11.4898,0.130394,11.8163,0.120572,12.1429,0.111073,12.4694,0.102172,12.7959,0.0941426,13.1224,0.0871802,13.449,0.0807002,13.7755,0.0746057,14.102,0.0690034,14.4286,0.0640001,14.7551,0.0597024,15.0816,0.0561936,15.4082,0.0530416,15.7347,0.0500665,16.0612,0.0472922,16.3878,0.0447424,16.7143,0.042441,17.0408,0.0404089,17.3673,0.0384572,17.6939,0.036515,18.0204,0.0346589,18.3469,0.0329654,18.6735,0.0315111,19,0.0303726)}
.func n3(vgs) {table(vgs,3,0.352273,3.32653,0.383398,3.65306,0.418143,3.97959,0.4558,4.30612,0.495663,4.63265,0.537023,4.95918,0.579174,5.28571,0.628392,5.61224,0.690463,5.93878,0.756952,6.26531,0.819262,6.59184,0.868796,6.91837,0.896955,7.2449,0.896095,7.57143,0.869608,7.89796,0.827738,8.22449,0.780819,8.55102,0.739185,8.87755,0.71317,9.20408,0.707395,9.53061,0.706297,9.85714,0.708364,10.1837,0.713903,10.5102,0.723223,10.8367,0.736632,11.1633,0.754372,11.4898,0.775911,11.8163,0.800356,12.1429,0.826831,12.4694,0.854458,12.7959,0.88236,13.1224,0.909834,13.449,0.937968,13.7755,0.966865,14.102,0.996186,14.4286,1.02559,14.7551,1.05474,15.0816,1.08332,15.4082,1.11149,15.7347,1.13946,16.0612,1.1673,16.3878,1.19509,16.7143,1.22291,17.0408,1.25082,17.3673,1.2788,17.6939,1.30679,18.0204,1.33479,18.3469,1.3628,18.6735,1.39083,19,1.41886)}
.func l3(vgs) {table(vgs,3,0.0165724,3.32653,0.0166183,3.65306,0.0166631,3.97959,0.0167058,4.30612,0.0167452,4.63265,0.0167801,4.95918,0.0168094,5.28571,0.0168338,5.61224,0.0168561,5.93878,0.0168766,6.26531,0.016896,6.59184,0.0169145,6.91837,0.0169327,7.2449,0.0169514,7.57143,0.0169707,7.89796,0.0169888,8.22449,0.017004,8.55102,0.0170143,8.87755,0.0170181,9.20408,0.0170038,9.53061,0.0169426,9.85714,0.0168499,10.1837,0.0167448,10.5102,0.0166466,10.8367,0.0165746,11.1633,0.016541,11.4898,0.0165154,11.8163,0.0164924,12.1429,0.0164736,12.4694,0.0164601,12.7959,0.0164531,13.1224,0.0164535,13.449,0.0164556,13.7755,0.016458,14.102,0.0164607,14.4286,0.0164638,14.7551,0.0164674,15.0816,0.0164715,15.4082,0.0164761,15.7347,0.0164809,16.0612,0.0164858,16.3878,0.0164905,16.7143,0.0164949,17.0408,0.0164987,17.3673,0.0165023,17.6939,0.0165058,18.0204,0.016509,18.3469,0.0165119,18.6735,0.0165145,19,0.0165166)}

****************************************
G2 d1 s value {
+	if(V(d3,s)<=0,
+		if (V(gk)<=V(NET3),
+		0
+		,
+		-drain_current(V(gk),V(s,d3),V(NET3),gain(V(gk),V(Tjc)),nval(V(gk),V(Tjc)),lam(V(gk),V(Tjc)))
+		)
+		,
+		if (V(gk)<=V(NET3),
+		0
+		,
+		drain_current(V(gk),V(d3,s),V(NET3),gain(V(gk),V(Tjc)),nval(V(gk),V(Tjc)),lam(V(gk),V(Tjc)))
+		)
+			)
+			}
****************************************
.param k1=1263p
.param k2=0.5
.param ka=35
.param kb=0.3
.param kc=4.03

G11 g1 d11 value {
+		k1*(
+		(1+(rdlim(v(d3,g1),0.1,270,0.01))*(1+ka*(1+TANH(kb*V(d3,g1)-kc))/2))**(-k2)
+		)*ddt(v(g1,d3))
+			} Rpar=1Meg
R_CGD d11 d3 1E-4


.param Cjo = 2749p
.param Vj  = 3.43
.param M   = 0.63


G12 d12 s value {
+		(Cjo/(1+(rdlim(v(d3,s),0.1,270,0.01)/Vj)**M))*ddt(v(d3,s))
+			} Rpar=1Meg
R_CDS d12 d3 1E-4

****************************************


.ends cds_C3M0032120J1

****************************************

