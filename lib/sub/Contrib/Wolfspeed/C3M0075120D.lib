**************************************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
**************************************************************************************************************************************************************************************************
*******************************************************************************
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not rdlimed to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************

***********************************************************
****	Cree SiC MOSFET C3M0075120D Spice Library
****	Revision 2.0 Date: 11-27-2017
****	Revision 3.0 Date: 01-22-2018
****	Revision 4.0 Date: 06-19-2018
****	Revision 5.0 Date: 09-20-2019
****	Revision 6.0 Date: 02-24-2021
****	Revision 7.0 Date: 06-14-2023
***********************************************************
****	Revision record
****	Revision 1	Initial Release
****	Revisionn 2	Include Tc at gmos subcircuit
****	Revision 3	This spice model is compatible to both Ltspice and Orcad Pspsice
****	Revision 4	Update the thermal RC model
****	Revision 5	Update datasheet version D 07-2019 and excluded reactive power loss
****	Revision 6	Improved dynamic performance
****	Revision 7	Updated to reflect new modeling structure
*********************************************************************************
****Parasitics Included
****Tj = Junction Temperature
****Tc = Case Temperature
****D = Drain
****G = Gate
****S1 = Kelvin Source
***********************************************************

.subckt C3M0075120D d g s1 Tj Tc

* Put in specified Rgint
.param Rgint = 9

Ci_d d 0 1p Rpar=1G
Ci_g	g 0 1p Rpar=1G
Ci_s1 s1 0 1p Rpar=1G
Ci_Tj Tj 0 1p Rpar=1G
Ci_Tc Tc 0 1p Rpar=1G

.func rdlim(x,n,p,z) {
+	uplim(dnlim(x,n,z),p,z)
+}

R1022	Tjc	0	1E6
E1022	Tjc	0 	value {rdlim(v(Tj),-40,175,.1)}

R100	gk	0	1E6
E100	gk	0 	value {rdlim(v(g1,s),-4,19,.1)}


e33	NET3	0	Value {rdlim(12.5178u*V(Tjc)**2-6.5986m*V(Tjc)+3.2829,-3.5,3.5,0.01)}
R_cc	NET3	0 	1E6

Ls1 		s1	s	2.17n Rser=3.946m
R_Ls1 		s1	s  	100

*R_gg 		g1	s	1E6
R_g 		g1	g2	{Rgint}
Lg 			g	g2	7.7n Rser=13.255m
R_Lg 		g	g2	100

Ld 		d	d3	4.366n Rser=87.416u
R_Ld		d	d3	100


Rdrain_s	d3	d1	10u
Cdrs		d3	d1	1p
Gheat		0	Tj	value = {abs((V(d1,s)*I(Rdrain_s)))+abs((V(g1,g2)**2/Rgint))}
CGS		g1	s	1437.7p Rpar=100k

* Body Diode Implementation
.func rbody(vgs,t) {table(t,-40,r1(vgs),25,r2(vgs),175,r3(vgs))}
.func r1(vgs) {table(vgs,-4,39.58m,-2,43.64m,0,51.76m,5,20m,10,30m,15,60m)}
.func r2(vgs) {table(vgs,-4,42.082m,-2,47.26m,0,56.25m,5,75m,10,97m,15,198m)}
.func r3(vgs) {table(vgs,-4,40.23m,-2,43.644m,0,48.602m,5,10m,10,30m,15,60m)}

.func nd(vgs,t) {table(t,-40,nd_n40(vgs),25,nd_25(vgs),175,nd_175(vgs))}
.func nd_n40(vgs) {table(vgs,-4,327.77m,-2,293.42m,0,240.06m,5,40m,10,10m,15,1m)}
.func nd_25(vgs) {table(vgs,-4,294.07m,-2,261.95m,0,213.557m,5,75m,10,35m,15,20m)}
.func nd_175(vgs) {table(vgs,-4,258.546m,-2,234.237m,0,204.66m,5,40m,10,10m,15,1m)}


GRbd d1 dd2 value {V(d1,dd2)/rdlim(rbody(V(gk),V(Tjc)),10m,60m,0.1)}
GITQ s dd2 value {uplim(1u*(-1+exp(V(s,dd2)/(V(ND)))),1e4,1m)}

Ef	ND	0	value {rdlim(nd(V(gk),V(Tjc)),1m,320m,0.01)}
Rf	ND	0	10Meg	

CDS1		dd2	s	1p
CGD1		g1	d3	1p
R_DS1		dd2	s	0.5G


R0 N1 Tj 63.78m
R1 N2 N1 0.1553
R2 N3 N2 99.42m
R3 Tc N3 0.1417

C0 Tj 0 1.31m
C1 N1 0 6.698m
C2 N2 0 19.41m
C3 N3 0 73.01m

R_tc Tc 0 10k

****************************************
.func gain(vgs,t) {
+	table(t,-40,g1(vgs),25,g2(vgs),175,g3(vgs))
+}

.func nval(vgs,t) {
+	table(t,-40,n1(vgs),25,n2(vgs),175,n3(vgs))
+}

.func lam(vgs,t) {
+	table(t,-40,l1(vgs),25,l2(vgs),175,l3(vgs))
+}

.func drain_current(vgs,vds,vth,g,n,l) {
+	g*(vgs-vth)*(log(1+exp(vgs-vth))**2 - log(1+exp(vgs-vth-n*vds))**2)*(1+l*vds)
+}

.func g1(vgs) {table(vgs,3,0.0103141,3.32653,0.0155696,3.65306,0.0207623,3.97959,0.0256539,4.30612,0.0300057,4.63265,0.0335792,4.95918,0.0361359,5.28571,0.037853,5.61224,0.0393371,5.93878,0.0406709,6.26531,0.0419292,6.59184,0.043187,6.91837,0.0445193,7.2449,0.0459666,7.57143,0.0474647,7.89796,0.0489772,8.22449,0.05047,8.55102,0.0519095,8.87755,0.0532618,9.20408,0.0545258,9.53061,0.0557806,9.85714,0.0569823,10.1837,0.0580748,10.5102,0.0590019,10.8367,0.0597074,11.1633,0.0601256,11.4898,0.0601852,11.8163,0.0599277,12.1429,0.0594085,12.4694,0.0586831,12.7959,0.0578072,13.1224,0.0568089,13.449,0.0554694,13.7755,0.0537986,14.102,0.0518847,14.4286,0.0498157,14.7551,0.0476797,15.0816,0.0455494,15.4082,0.0431905,15.7347,0.0406064,16.0612,0.0379442,16.3878,0.0353508,16.7143,0.0329732,17.0408,0.0309547,17.3673,0.0291389,17.6939,0.0274112,18.0204,0.0258226,18.3469,0.0244243,18.6735,0.0232676,19,0.0224035)}
.func n1(vgs) {table(vgs,3,1.03241,3.32653,0.902081,3.65306,0.771392,3.97959,0.652401,4.30612,0.557164,4.63265,0.497736,4.95918,0.48617,5.28571,0.520749,5.61224,0.577913,5.93878,0.646139,6.26531,0.714122,6.59184,0.77056,6.91837,0.804148,7.2449,0.814855,7.57143,0.824353,7.89796,0.833107,8.22449,0.840441,8.55102,0.845678,8.87755,0.84814,9.20408,0.847622,9.53061,0.845764,9.85714,0.843277,10.1837,0.840732,10.5102,0.8387,10.8367,0.837751,11.1633,0.838596,11.4898,0.842268,11.8163,0.848512,12.1429,0.856891,12.4694,0.866968,12.7959,0.878306,13.1224,0.890895,13.449,0.908464,13.7755,0.930881,14.102,0.956765,14.4286,0.984736,14.7551,1.01341,15.0816,1.04154,15.4082,1.07062,15.7347,1.10118,16.0612,1.13269,16.3878,1.16467,16.7143,1.1966,17.0408,1.22799,17.3673,1.25909,17.6939,1.29022,18.0204,1.32139,18.3469,1.3526,18.6735,1.38385,19,1.41514)}
.func l1(vgs) {table(vgs,3,0.0149783,3.32653,0.0155664,3.65306,0.0161417,3.97959,0.0166762,4.30612,0.0171415,4.63265,0.0175094,4.95918,0.0177518,5.28571,0.0178974,5.61224,0.0180181,5.93878,0.0181032,6.26531,0.0181408,6.59184,0.0181189,6.91837,0.0180257,7.2449,0.0178409,7.57143,0.0175622,7.89796,0.0172348,8.22449,0.0169054,8.55102,0.0166209,8.87755,0.0164279,9.20408,0.0163487,9.53061,0.0163112,9.85714,0.0162946,10.1837,0.0162853,10.5102,0.0162698,10.8367,0.0162346,11.1633,0.0161689,11.4898,0.0160848,11.8163,0.0159925,12.1429,0.0159006,12.4694,0.0158174,12.7959,0.0157515,13.1224,0.015709,13.449,0.0156737,13.7755,0.015642,14.102,0.0156158,14.4286,0.0155971,14.7551,0.0155878,15.0816,0.0155896,15.4082,0.0155962,15.7347,0.015604,16.0612,0.0156125,16.3878,0.0156208,16.7143,0.0156283,17.0408,0.0156343,17.3673,0.0156398,17.6939,0.0156454,18.0204,0.0156508,18.3469,0.0156559,18.6735,0.0156604,19,0.0156641)}
.func g2(vgs) {table(vgs,3,0.00123285,3.32653,0.0128987,3.65306,0.0245221,3.97959,0.0354065,4.30612,0.0448549,4.63265,0.0521707,4.95918,0.0566571,5.28571,0.0590117,5.61224,0.061145,5.93878,0.0630479,6.26531,0.0646845,6.59184,0.066019,6.91837,0.0670156,7.2449,0.0677706,7.57143,0.0685593,7.89796,0.0693377,8.22449,0.0700465,8.55102,0.0706269,8.87755,0.0710199,9.20408,0.0711789,9.53061,0.0711263,9.85714,0.070883,10.1837,0.0704673,10.5102,0.0698973,10.8367,0.0691913,11.1633,0.0683056,11.4898,0.0669281,11.8163,0.0651209,12.1429,0.0630129,12.4694,0.0607328,12.7959,0.0584094,13.1224,0.0561407,13.449,0.0537193,13.7755,0.0511451,14.102,0.0485004,14.4286,0.0458676,14.7551,0.0433292,15.0816,0.0409587,15.4082,0.0386351,15.7347,0.0363334,16.0612,0.0341058,16.3878,0.0320044,16.7143,0.0300814,17.0408,0.0283868,17.3673,0.0268068,17.6939,0.0252869,18.0204,0.0238765,18.3469,0.0226248,18.6735,0.0215811,19,0.0207946)}
.func n2(vgs) {table(vgs,3,0.71322,3.32653,0.67624,3.65306,0.644546,3.97959,0.620926,4.30612,0.608167,4.63265,0.609054,4.95918,0.626374,5.28571,0.669813,5.61224,0.742304,5.93878,0.828337,6.26531,0.912209,6.59184,0.97822,6.91837,1.01067,7.2449,1.00743,7.57143,0.995472,7.89796,0.978961,8.22449,0.960756,8.55102,0.943715,8.87755,0.930694,9.20408,0.922729,9.53061,0.914857,9.85714,0.907135,10.1837,0.900224,10.5102,0.894786,10.8367,0.891482,11.1633,0.891255,11.4898,0.895898,11.8163,0.904914,12.1429,0.917464,12.4694,0.932707,12.7959,0.949805,13.1224,0.968367,13.449,0.99203,13.7755,1.02052,14.102,1.05227,14.4286,1.08569,14.7551,1.11922,15.0816,1.1514,15.4082,1.18353,15.7347,1.21632,16.0612,1.24955,16.3878,1.28301,16.7143,1.31648,17.0408,1.34975,17.3673,1.38293,17.6939,1.41615,18.0204,1.44942,18.3469,1.48274,18.6735,1.51611,19,1.54952)}
.func l2(vgs) {table(vgs,3,0.0152646,3.32653,0.0155374,3.65306,0.0158112,3.97959,0.0160668,4.30612,0.0162848,4.63265,0.0164459,4.95918,0.0165309,5.28571,0.0165599,5.61224,0.0165869,5.93878,0.0166107,6.26531,0.0166291,6.59184,0.0166402,6.91837,0.0166418,7.2449,0.0166354,7.57143,0.0166282,7.89796,0.0166201,8.22449,0.0166109,8.55102,0.0166003,8.87755,0.0165879,9.20408,0.016573,9.53061,0.0165537,9.85714,0.01653,10.1837,0.0165025,10.5102,0.0164716,10.8367,0.0164378,11.1633,0.0163972,11.4898,0.0163301,11.8163,0.0162463,12.1429,0.0161602,12.4694,0.0160865,12.7959,0.0160397,13.1224,0.0160309,13.449,0.0160339,13.7755,0.0160392,14.102,0.0160462,14.4286,0.016054,14.7551,0.0160618,15.0816,0.016069,15.4082,0.0160761,15.7347,0.0160833,16.0612,0.0160906,16.3878,0.0160976,16.7143,0.0161042,17.0408,0.0161103,17.3673,0.0161159,17.6939,0.0161213,18.0204,0.0161264,18.3469,0.0161311,18.6735,0.0161354,19,0.0161391)}
.func g3(vgs) {table(vgs,3,0.154198,3.32653,0.149504,3.65306,0.144957,3.97959,0.140661,4.30612,0.136721,4.63265,0.133241,4.95918,0.130324,5.28571,0.128083,5.61224,0.126421,5.93878,0.125073,6.26531,0.123776,6.59184,0.122264,6.91837,0.120275,7.2449,0.117688,7.57143,0.114746,7.89796,0.111504,8.22449,0.108003,8.55102,0.104284,8.87755,0.10039,9.20408,0.0962716,9.53061,0.0916966,9.85714,0.0868045,10.1837,0.0817701,10.5102,0.0767684,10.8367,0.0719742,11.1633,0.0674888,11.4898,0.0630177,11.8163,0.0585923,12.1429,0.0543146,12.4694,0.0502866,12.7959,0.0466103,13.1224,0.0433576,13.449,0.0402989,13.7755,0.0374011,14.102,0.0347112,14.4286,0.032276,14.7551,0.0301424,15.0816,0.0283474,15.4082,0.0267104,15.7347,0.0251596,16.0612,0.0237098,16.3878,0.0223758,16.7143,0.0211725,17.0408,0.0201132,17.3673,0.0190997,17.6939,0.0180949,18.0204,0.017139,18.3469,0.0162725,18.6735,0.0155356,19,0.0149686)}
.func n3(vgs) {table(vgs,3,0.357649,3.32653,0.385808,3.65306,0.419052,3.97959,0.456335,4.30612,0.496613,4.63265,0.538842,4.95918,0.581976,5.28571,0.63332,5.61224,0.699934,5.93878,0.772118,6.26531,0.839976,6.59184,0.893613,6.91837,0.923135,7.2449,0.92168,7.57143,0.896608,7.89796,0.857439,8.22449,0.813555,8.55102,0.774337,8.87755,0.749168,9.20408,0.741966,9.53061,0.737735,9.85714,0.735395,10.1837,0.735632,10.5102,0.739129,10.8367,0.746571,11.1633,0.758419,11.4898,0.77352,11.8163,0.791079,12.1429,0.810468,12.4694,0.831059,12.7959,0.852226,13.1224,0.873463,13.449,0.895556,13.7755,0.918652,14.102,0.94259,14.4286,0.967209,14.7551,0.992348,15.0816,1.01787,15.4082,1.04422,15.7347,1.07139,16.0612,1.09908,16.3878,1.12702,16.7143,1.15494,17.0408,1.18256,17.3673,1.21,17.6939,1.23747,18.0204,1.26495,18.3469,1.29246,18.6735,1.31998,19,1.34752)}
.func l3(vgs) {table(vgs,3,0.0150175,3.32653,0.0150612,3.65306,0.0151031,3.97959,0.0151431,4.30612,0.0151806,4.63265,0.0152156,4.95918,0.0152475,5.28571,0.0152747,5.61224,0.0152964,5.93878,0.0153147,6.26531,0.0153322,6.59184,0.0153511,6.91837,0.0153739,7.2449,0.0154093,7.57143,0.0154684,7.89796,0.0155395,8.22449,0.0156098,8.55102,0.0156669,8.87755,0.0156981,9.20408,0.0156835,9.53061,0.0155998,9.85714,0.0154685,10.1837,0.0153145,10.5102,0.015163,10.8367,0.0150389,11.1633,0.0149587,11.4898,0.0148876,11.8163,0.0148204,12.1429,0.0147597,12.4694,0.0147079,12.7959,0.0146675,13.1224,0.0146398,13.449,0.0146139,13.7755,0.0145885,14.102,0.0145661,14.4286,0.0145488,14.7551,0.0145391,15.0816,0.014539,15.4082,0.0145428,15.7347,0.0145475,16.0612,0.0145525,16.3878,0.0145575,16.7143,0.0145619,17.0408,0.0145653,17.3673,0.0145683,17.6939,0.0145714,18.0204,0.0145744,18.3469,0.0145772,18.6735,0.0145796,19,0.0145814)}


****************************************
G2 d1 s value {
+	if(V(d3,s)<=0,
+		if (V(gk)<=V(NET3),
+		0
+		,
+		-drain_current(V(gk),V(s,d3),V(NET3),gain(V(gk),V(Tjc)),nval(V(gk),V(Tjc)),lam(V(gk),V(Tjc)))
+		)
+		,
+		if (V(gk)<=V(NET3),
+		0
+		,
+		drain_current(V(gk),V(d3,s),V(NET3),gain(V(gk),V(Tjc)),nval(V(gk),V(Tjc)),lam(V(gk),V(Tjc)))
+		)
+			)
+			}
****************************************
.param k1=625.96p
.param k2=0.3922
.param ka=8019.5
.param kb=0.1333
.param kc=3.9275

G11 g1 d11 value {
+		k1*(
+		(1+(rdlim(v(d3,g1),0.1,270,0.01))*(1+ka*(1+TANH(kb*V(d3,g1)-kc))/2))**(-k2)
+		)*ddt(v(g1,d3))
+			} Rpar=1Meg
R_CGD d11 d3 1E-4


.param Cjo = 935.91p
.param Vj  = 5.74
.param Ma   = 0.7257

G12 d12 s value {
+		(Cjo/(1+(rdlim(v(d3,s),0.1,270,0.01)/Vj)**M))*ddt(v(d3,s))
+			} Rpar=1Meg
R_CDS d12 d3 1E-4

****************************************


.ends C3M0075120D

****************************************

