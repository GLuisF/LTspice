******************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
******************************************************************************************************************************************************************************

*******************************************************************************
**	Wolfspeed, Inc
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not limited to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************
**	To find other WOLFSPEED SiC models, please visit:
**	https://www.wolfspeed.com/power/tools-and-support/all-models
*******************************************************************************
**	This library model file is intended for use in LTspice ONLY
**	Use in any other software will result in syntax or compilation errors!
*******************************************************************************

*********************************************************************
****	
****	Wolfspeed SiC Module Half-bridge SPICE Library
****		Version 1.0	Date: 2023-05-03
****	
****		Models avilable in this library:
****		CAB320M17XM3,CAB400M12XM3,CAB425M12XM3,CAB450M12XM3,CAB500M17HM3,CAB530M12BM3,CAB650M17HM3,CAB760M12HM3,CAS175M12BM3,CAS310M17BM3,CAS350M12BM3,CAS380M17HM3,CAS480M12HM3,CAS530M12BM3,EAB450M12XM3,EAB460M12XM3P,WAB300M12BM3,WAB400M12BM3,WAS175M12BM3,WAS310M17BM3,WAS350M12BM3,WAS530M12BM3,CAB011M12FM3,CAB016M12FM3,CAB008M12GM3,CAB008A12GM3,CAB006M12GM3,CAB006A12GM3
****	
*********************************************************************
****	Node Definitions:
****		Electrical
****		V+  = High side Drain
****		Mid = AC terminal
****		V-  = Low side source
****		G1  = HS Gate
****		K1  = HS Kelvin
****		G2  = LS Gate
****		K2  = LS Kelvin
****		Thermal
****		Tc1  = High Side Case Thermal Connection [apply coolant temperature as a voltage]
****		Tc2  = Low  Side Case Thermal Connection [apply coolant temperature as a voltage]
****		TjQ1 = High Side MOSFET Junction Temperature
****		TjQ2 = Low  Side MOSFET Junction Temperature
****		TjD1 = High Side Schottky Junction Temperature
****		TjD2 = Low  Side Schottky Junction Temperature
****		Electrical (EMI)
****		Baseplate = Node for studying current induced 
****					through heatsink into grounding system
*********************************************************************
****	Model Complexity Control:
****		BPC      = enable basepalte capacitance
****					0: no BPC (zero current on Baseplate node)
****					1: Include BPC (slower)
****		Thermals = enable closed loop thermals
****					0: Fixed Tj defined by TEMP
****					1: Include BPC (slower)
****		level    = change the complexity / accuracy of the model
****					1: Body diode at -4V only
****					2: Full third quadrant conduction
****					3: Full third quadrant conduction with reverse recovery
****	Parameter Definitions:
****		Vths = Threshold voltage shift (V)
****		Rdss = Drain Resistance shift (Ω)
****		Rp   = Inductor parallel res (Ω)
****				low pass filter on ringing
****				100 (default) good balance of bandwidth and sim-time
****				1m   removes impact of packaging but greatly improves sim time
*********************************************************************



.SUBCKT Module_HalfBridge V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate



*** SiC MOSFETS ***
XQ1 Vd GHI Vp TjQ1 IQ1 {LmflagQ1} PARAMS: die={die} Rp={Rp} AFm={AFm} Vths={Vths} Rdss={Rdss} Lcsi={LcsiQ1} dummy=1m
XQ2 Vp GLI Vs TjQ2 IQ2 {LmflagQ2} PARAMS: die={die} Rp={Rp} AFm={AFm} Vths={Vths} Rdss={Rdss} Lcsi={LcsiQ2} dummy=1m

*** SiC Schottky ***
XD1 Vp Vd TjD1 ID1 {Schottky} PARAMS: AF={AFs} dummy=1m
XD2 Vs Vp TjD2 ID2 {Schottky} PARAMS: AF={AFs} dummy=1m

*** Thermal Networks ***
XQ1_Thermal TjQ1 Tc1 Vd Vp IQ1 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Tj={Tj} dummy=1m
XQ2_Thermal TjQ2 Tc2 Vp Vs IQ2 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Tj={Tj} dummy=1m
XD1_Thermal TjD1 Tc1 Vd Vp ID1 {SchottkyThermal} PARAMS: Ct1={SchCt1} Ct2={SchCt2} Ct3={SchCt3} Rt1={SchRt1} Rt2={SchRt2} Rt3={SchRt3} Tj={Tj} dummy=1m
XD2_Thermal TjD2 Tc2 Vp Vs ID2 {SchottkyThermal} PARAMS: Ct1={SchCt1} Ct2={SchCt2} Ct3={SchCt3} Rt1={SchRt1} Rt2={SchRt2} Rt3={SchRt3} Tj={Tj} dummy=1m

*** Baseplate Capacitance ***
XU3 Vd Vp Vs Baseplate {BPC} PARAMS: Cug={Cug} Cag={Cag} Clg={Clg} dummy=1m

*** Parasitic Parameters ***

Ld V+ Vd {Ld} Rser={Rdesr} Rpar={Rp}
Lp Mid Vp {Lp} Rser={Rpesr} Rpar={Rp}
Ls V- Vs {Ls} Rser={Rsesr} Rpar={Rp}
Lg1 G1 GHI {LgQ1/2} Rser={Rgi/2}
Lk1 K1 Vp {LgQ1/2} Rser={Rgi/2}
Lg2 GLI G2 {LgQ2/2} Rser={Rgi/2}
Lk2 K2 Vs {LgQ2/2} Rser={Rgi/2}

.ENDS Module_HalfBridge

*** SUBCKT 1/2: BPC ***
.SUBCKT 1 VD VP VS BP
R BP 0 1
.ENDS

.SUBCKT 2 VD VP VS BP
C1 VD BP {Cug}
C2 VP BP {Cag}
C3 VS BP {Clg}
.ENDS
 
*** SUBCKT 3/4: THERMALS ***
.SUBCKT 3 Tj Tc Vp Vn Vi  PARAMS: Ct1=1 Ct2=1 Ct3=1 Rt1=1 Rt2=1 Rt3=1
Vt Tj1 0 {Tj}
Rt Tj1 Tj 1m
RTground Tc 0 10k
.ENDS 3

.SUBCKT 4 Tj Tc Vp Vn Vi PARAMS: Ct1=1 Ct2=1 Ct3=1 Rt1=1 Rt2=1 Rt3=1
Gpwr 0 Tj Value {abs(V(Vp,Vn)*(V(Vi)))}
Ct1 Tj 0 {Ct1}
Ct2 1 0 {Ct2}
Ct3 2 0 {Ct3}
Rt1 Tj 1 {Rt1}
Rt2 1 2 {Rt2}
Rt3 2 Tc {Rt3}
RTground Tc 0 10k
.ic V(Tj) = {Tj} V(1) = {Tj} V(2) = {Tj}
.ENDS 4

*** SUBCKT 5: If Schottky doesn't exist ***
.SUBCKT 5 A K Tj Id
V Id 0 1
.ENDS

** SUBCKT 6/7: Common-source inductance or no? **
.SUBCKT 6 D G S Tj IMos
X1 D G S Tj IMos {die} PARAMS: AF={AFm} Vths={Vths} Rdss={Rdss} dummy=1m
.ENDS 6
.SUBCKT 7 D G S Tj IMos
Lcsi S s1 {Lcsi} Rser=50u Rpar={Rp}
X1 D G s1 Tj IMos {die} PARAMS: AF={AFm} Vths={Vths} Rdss={Rdss} dummy=1m
.ENDS 7
 
.SUBCKT CAB320M17XM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=10 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=100.00u Rsesr=630.00u PackageRgi=2.30 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=300.00p LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*1.62m/AFm} Rt2={AFnomM*14.33m/AFm} Rt3={AFnomM*80.79m/AFm} Ct1={AFm*1.77m/AFnomM} Ct2={AFm*50.84m/AFnomM} Ct3={AFm*354.53m/AFnomM} SchRt1={AFnomS*1.62m/AFs} SchRt2={AFnomS*14.33m/AFs} SchRt3={AFnomS*80.79m/AFs} SchCt1={AFs*1.77m/AFnomS} SchCt2={AFs*50.84m/AFnomS} SchCt3={AFs*354.53m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB320M17XM3

 
.SUBCKT CAB400M12XM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=20 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=300.00p LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*2.44m/AFm} Rt2={AFnomM*20.05m/AFm} Rt3={AFnomM*98.06m/AFm} Ct1={AFm*1.50m/AFnomM} Ct2={AFm*28.45m/AFnomM} Ct3={AFm*203.13m/AFnomM} SchRt1={AFnomS*2.44m/AFs} SchRt2={AFnomS*20.05m/AFs} SchRt3={AFnomS*98.06m/AFs} SchCt1={AFs*1.50m/AFnomS} SchCt2={AFs*28.45m/AFnomS} SchCt3={AFs*203.13m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB400M12XM3

 
.SUBCKT CAB425M12XM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=20 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=3.40 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=300.00p LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*2.03m/AFm} Rt2={AFnomM*17.98m/AFm} Rt3={AFnomM*88.27m/AFm} Ct1={AFm*1.76m/AFnomM} Ct2={AFm*41.30m/AFnomM} Ct3={AFm*304.30m/AFnomM} SchRt1={AFnomS*2.03m/AFs} SchRt2={AFnomS*17.98m/AFs} SchRt3={AFnomS*88.27m/AFs} SchCt1={AFs*1.76m/AFnomS} SchCt2={AFs*41.30m/AFnomS} SchCt3={AFs*304.30m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB425M12XM3

 
.SUBCKT CAB450M12XM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=30 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=300.00p LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*1.56m/AFm} Rt2={AFnomM*14.05m/AFm} Rt3={AFnomM*77.28m/AFm} Ct1={AFm*1.73m/AFnomM} Ct2={AFm*55.15m/AFnomM} Ct3={AFm*381.32m/AFnomM} SchRt1={AFnomS*1.56m/AFs} SchRt2={AFnomS*14.05m/AFs} SchRt3={AFnomS*77.28m/AFs} SchCt1={AFs*1.73m/AFnomS} SchCt2={AFs*55.15m/AFnomS} SchCt3={AFs*381.32m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB450M12XM3

 
.SUBCKT CAB500M17HM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=8 AFs=1 AFnomM=8 AFnomS=1 die=10 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.24 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=397.93p LcsiQ1=0.00 LcsiQ2=0.00 Clg=231.50p Rt1={AFnomM*1.29m/AFm} Rt2={AFnomM*12.12m/AFm} Rt3={AFnomM*54.12m/AFm} Ct1={AFm*3.13m/AFnomM} Ct2={AFm*73.74m/AFnomM} Ct3={AFm*632.24m/AFnomM} SchRt1={AFnomS*1.29m/AFs} SchRt2={AFnomS*12.12m/AFs} SchRt3={AFnomS*54.12m/AFs} SchCt1={AFs*3.13m/AFnomS} SchCt2={AFs*73.74m/AFnomS} SchCt3={AFs*632.24m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB500M17HM3

 
.SUBCKT CAB530M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=420.00u Rpesr=250.00u Rsesr=280.00u PackageRgi=15.00 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*1.98m/AFm} Rt2={AFnomM*18.15m/AFm} Rt3={AFnomM*54.46m/AFm} Ct1={AFm*2.73m/AFnomM} Ct2={AFm*50.74m/AFnomM} Ct3={AFm*500.86m/AFnomM} SchRt1={AFnomS*1.98m/AFs} SchRt2={AFnomS*18.15m/AFs} SchRt3={AFnomS*54.46m/AFs} SchCt1={AFs*2.73m/AFnomS} SchCt2={AFs*50.74m/AFnomS} SchCt3={AFs*500.86m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB530M12BM3

 
.SUBCKT CAB650M17HM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=12 AFs=1 AFnomM=12 AFnomS=1 die=10 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.24 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=397.93p LcsiQ1=0.00 LcsiQ2=0.00 Clg=231.50p Rt1={AFnomM*942.69u/AFm} Rt2={AFnomM*10.01m/AFm} Rt3={AFnomM*41.68m/AFm} Ct1={AFm*4.46m/AFnomM} Ct2={AFm*130.92m/AFnomM} Ct3={AFm*1.28/AFnomM} SchRt1={AFnomS*942.69u/AFs} SchRt2={AFnomS*10.01m/AFs} SchRt3={AFnomS*41.68m/AFs} SchCt1={AFs*4.46m/AFnomS} SchCt2={AFs*130.92m/AFnomS} SchCt3={AFs*1.28/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB650M17HM3

 
.SUBCKT CAB760M12HM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=12 AFs=1 AFnomM=12 AFnomS=1 die=20 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=250.00u Rsesr=126.30u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=397.93p LcsiQ1=0.00 LcsiQ2=0.00 Clg=231.50p Rt1={AFnomM*13.26m/AFm} Rt2={AFnomM*20.29m/AFm} Rt3={AFnomM*30.69m/AFm} Ct1={AFm*300.68m/AFnomM} Ct2={AFm*686.37m/AFnomM} Ct3={AFm*4.38/AFnomM} SchRt1={AFnomS*13.26m/AFs} SchRt2={AFnomS*20.29m/AFs} SchRt3={AFnomS*30.69m/AFs} SchCt1={AFs*300.68m/AFnomS} SchCt2={AFs*686.37m/AFnomS} SchCt3={AFs*4.38/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB760M12HM3

 
.SUBCKT CAS175M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=2 AFs=2 AFnomM=2 AFnomS=2 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=2.30m Rpesr=250.00u Rsesr=2.12m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*5.79m/AFm} Rt2={AFnomM*48.41m/AFm} Rt3={AFnomM*136.51m/AFm} Ct1={AFm*1.03m/AFnomM} Ct2={AFm*15.06m/AFnomM} Ct3={AFm*118.80m/AFnomM} SchRt1={AFnomS*4.58m/AFs} SchRt2={AFnomS*43.28m/AFs} SchRt3={AFnomS*164.20m/AFs} SchCt1={AFs*1.21m/AFnomS} SchCt2={AFs*21.50m/AFnomS} SchCt3={AFs*109.71m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAS175M12BM3

 
.SUBCKT CAS310M17BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=10 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=2.20 DieRgi=5.20 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*2.48m/AFm} Rt2={AFnomM*23.22m/AFm} Rt3={AFnomM*65.48m/AFm} Ct1={AFm*2.37m/AFnomM} Ct2={AFm*41.84m/AFnomM} Ct3={AFm*386.53m/AFnomM} SchRt1={AFnomS*2.48m/AFs} SchRt2={AFnomS*23.22m/AFs} SchRt3={AFnomS*65.48m/AFs} SchCt1={AFs*2.37m/AFnomS} SchCt2={AFs*41.84m/AFnomS} SchCt3={AFs*386.53m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*97}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAS310M17BM3

 
.SUBCKT CAS350M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*3.18m/AFm} Rt2={AFnomM*29.42m/AFm} Rt3={AFnomM*76.62m/AFm} Ct1={AFm*2.11m/AFnomM} Ct2={AFm*35.87m/AFnomM} Ct3={AFm*349.97m/AFnomM} SchRt1={AFnomS*2.35m/AFs} SchRt2={AFnomS*20.13m/AFs} SchRt3={AFnomS*85.40m/AFs} SchCt1={AFs*1.99m/AFnomS} SchCt2={AFs*35.52m/AFnomS} SchCt3={AFs*224.90m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAS350M12BM3

 
.SUBCKT CAS380M17HM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=12 AFs=10 AFnomM=12 AFnomS=10 die=10 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=9.56 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=0.00 LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*1.66m/AFm} Rt2={AFnomM*14.45m/AFm} Rt3={AFnomM*61.84m/AFm} Ct1={AFm*2.63m/AFnomM} Ct2={AFm*49.65m/AFnomM} Ct3={AFm*403.19m/AFnomM} SchRt1={AFnomS*1.34m/AFs} SchRt2={AFnomS*15.96m/AFs} SchRt3={AFnomS*71.80m/AFs} SchCt1={AFs*3.21m/AFnomS} SchCt2={AFs*101.18m/AFnomS} SchCt3={AFs*527.72m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*97}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAS380M17HM3

 
.SUBCKT CAS480M12HM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=7 AFs=6 AFnomM=7 AFnomS=6 die=20 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=250.00u Rsesr=126.30u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=397.93p LcsiQ1=0.00 LcsiQ2=0.00 Clg=231.50p Rt1={AFnomM*3.00m/AFm} Rt2={AFnomM*39.34m/AFm} Rt3={AFnomM*83.35m/AFm} Ct1={AFm*7.14m/AFnomM} Ct2={AFm*160.73m/AFnomM} Ct3={AFm*2.92/AFnomM} SchRt1={AFnomS*2.98m/AFs} SchRt2={AFnomS*39.01m/AFs} SchRt3={AFnomS*82.83m/AFs} SchCt1={AFs*7.09m/AFnomS} SchCt2={AFs*159.44m/AFnomS} SchCt3={AFs*2.84/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAS480M12HM3

 
.SUBCKT CAS530M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=6 AFs=6 AFnomM=6 AFnomS=6 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=900.00u Rpesr=250.00u Rsesr=970.00u PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*1.98m/AFm} Rt2={AFnomM*18.15m/AFm} Rt3={AFnomM*54.46m/AFm} Ct1={AFm*2.73m/AFnomM} Ct2={AFm*50.74m/AFnomM} Ct3={AFm*500.86m/AFnomM} SchRt1={AFnomS*1.60m/AFs} SchRt2={AFnomS*14.24m/AFs} SchRt3={AFnomS*58.83m/AFs} SchCt1={AFs*2.63m/AFnomS} SchCt2={AFs*53.87m/AFnomS} SchCt3={AFs*364.99m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAS530M12BM3

 
.SUBCKT EAB450M12XM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=30 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=300.00p LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*1.56m/AFm} Rt2={AFnomM*14.05m/AFm} Rt3={AFnomM*77.28m/AFm} Ct1={AFm*1.73m/AFnomM} Ct2={AFm*55.15m/AFnomM} Ct3={AFm*381.32m/AFnomM} SchRt1={AFnomS*1.56m/AFs} SchRt2={AFnomS*14.05m/AFs} SchRt3={AFnomS*77.28m/AFs} SchCt1={AFs*1.73m/AFnomS} SchCt2={AFs*55.15m/AFnomS} SchCt3={AFs*381.32m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS EAB450M12XM3

 
.SUBCKT EAB460M12XM3P V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=40 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=0.00 DieRgi=6.00 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.40p LcsiQ1=0.00 LcsiQ2=0.00 Clg=4.10p Rt1={AFnomM*1.73m/AFm} Rt2={AFnomM*20.92m/AFm} Rt3={AFnomM*77.93m/AFm} Ct1={AFm*2.27m/AFnomM} Ct2={AFm*59.20m/AFnomM} Ct3={AFm*305.02m/AFnomM} SchRt1={AFnomS*1.73m/AFs} SchRt2={AFnomS*20.92m/AFs} SchRt3={AFnomS*77.93m/AFs} SchCt1={AFs*2.27m/AFnomS} SchCt2={AFs*59.20m/AFnomS} SchCt3={AFs*305.02m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS EAB460M12XM3P

 
.SUBCKT WAB300M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=20 Ld=6.30n Lp=19.00n Ls=2.50n Rdesr=600.00u Rpesr=250.00u Rsesr=510.00u PackageRgi=3.00 DieRgi=2.60 LgQ1=25.00n LgQ2=20.00n Cug=89.50p Cag=151.60p LcsiQ1=0.00 LcsiQ2=0.00 Clg=107.00p Rt1={AFnomM*29.46m/AFm} Rt2={AFnomM*59.51m/AFm} Rt3={AFnomM*74.12m/AFm} Ct1={AFm*72.26m/AFnomM} Ct2={AFm*253.46m/AFnomM} Ct3={AFm*3.98/AFnomM} SchRt1={AFnomS*29.46m/AFs} SchRt2={AFnomS*59.51m/AFs} SchRt3={AFnomS*74.12m/AFs} SchCt1={AFs*72.26m/AFnomS} SchCt2={AFs*253.46m/AFnomS} SchCt3={AFs*3.98/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS WAB300M12BM3

 
.SUBCKT WAB400M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=50 Ld=6.30n Lp=19.00n Ls=2.50n Rdesr=600.00u Rpesr=250.00u Rsesr=510.00u PackageRgi=4.00 DieRgi=6.70 LgQ1=25.00n LgQ2=20.00n Cug=89.50p Cag=151.60p LcsiQ1=0.00 LcsiQ2=0.00 Clg=107.00p Rt1={AFnomM*27.11m/AFm} Rt2={AFnomM*50.43m/AFm} Rt3={AFnomM*50.96m/AFm} Ct1={AFm*96.26m/AFnomM} Ct2={AFm*323.62m/AFnomM} Ct3={AFm*3.39/AFnomM} SchRt1={AFnomS*27.11m/AFs} SchRt2={AFnomS*50.43m/AFs} SchRt3={AFnomS*50.96m/AFs} SchCt1={AFs*96.26m/AFnomS} SchCt2={AFs*323.62m/AFnomS} SchCt3={AFs*3.39/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS WAB400M12BM3

 
.SUBCKT WAS175M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=2 AFs=2 AFnomM=2 AFnomS=2 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=2.30m Rpesr=250.00u Rsesr=2.12m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*5.79m/AFm} Rt2={AFnomM*48.41m/AFm} Rt3={AFnomM*136.51m/AFm} Ct1={AFm*1.03m/AFnomM} Ct2={AFm*15.06m/AFnomM} Ct3={AFm*118.80m/AFnomM} SchRt1={AFnomS*4.58m/AFs} SchRt2={AFnomS*43.28m/AFs} SchRt3={AFnomS*164.20m/AFs} SchCt1={AFs*1.21m/AFnomS} SchCt2={AFs*21.50m/AFnomS} SchCt3={AFs*109.71m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS WAS175M12BM3

 
.SUBCKT WAS310M17BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=10 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=2.20 DieRgi=5.20 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*2.48m/AFm} Rt2={AFnomM*23.22m/AFm} Rt3={AFnomM*65.48m/AFm} Ct1={AFm*2.37m/AFnomM} Ct2={AFm*41.84m/AFnomM} Ct3={AFm*386.53m/AFnomM} SchRt1={AFnomS*2.48m/AFs} SchRt2={AFnomS*23.22m/AFs} SchRt3={AFnomS*65.48m/AFs} SchCt1={AFs*2.37m/AFnomS} SchCt2={AFs*41.84m/AFnomS} SchCt3={AFs*386.53m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*97}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS WAS310M17BM3

 
.SUBCKT WAS350M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*3.18m/AFm} Rt2={AFnomM*29.42m/AFm} Rt3={AFnomM*76.62m/AFm} Ct1={AFm*2.11m/AFnomM} Ct2={AFm*35.87m/AFnomM} Ct3={AFm*349.97m/AFnomM} SchRt1={AFnomS*2.35m/AFs} SchRt2={AFnomS*20.13m/AFs} SchRt3={AFnomS*85.40m/AFs} SchCt1={AFs*1.99m/AFnomS} SchCt2={AFs*35.52m/AFnomS} SchCt3={AFs*224.90m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS WAS350M12BM3

 
.SUBCKT WAS530M12BM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=1 AFm=6 AFs=6 AFnomM=6 AFnomS=6 die=20 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=900.00u Rpesr=250.00u Rsesr=970.00u PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=196.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.50p Rt1={AFnomM*1.98m/AFm} Rt2={AFnomM*18.15m/AFm} Rt3={AFnomM*54.46m/AFm} Ct1={AFm*2.73m/AFnomM} Ct2={AFm*50.74m/AFnomM} Ct3={AFm*500.86m/AFnomM} SchRt1={AFnomS*1.60m/AFs} SchRt2={AFnomS*14.24m/AFs} SchRt3={AFnomS*58.83m/AFs} SchCt1={AFs*2.63m/AFnomS} SchCt2={AFs*53.87m/AFnomS} SchCt3={AFs*364.99m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS WAS530M12BM3

 
.SUBCKT CAB011M12FM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=2 AFs=1 AFnomM=2 AFnomS=1 die=60 Ld=7.50n Lp=4.60n Ls=3.70n Rdesr=1.98m Rpesr=250.00u Rsesr=1.85m PackageRgi=3.10 DieRgi=3.30 LgQ1=12.50n LgQ2=12.50n Cug=61.50p Cag=85.30p LcsiQ1=0.00 LcsiQ2=0.00 Clg=41.90p Rt1={AFnomM*11.16m/AFm} Rt2={AFnomM*103.25m/AFm} Rt3={AFnomM*438.01m/AFm} Ct1={AFm*1.38m/AFnomM} Ct2={AFm*22.30m/AFnomM} Ct3={AFm*175.08m/AFnomM} SchRt1={AFnomS*11.16m/AFs} SchRt2={AFnomS*103.25m/AFs} SchRt3={AFnomS*438.01m/AFs} SchCt1={AFs*1.38m/AFnomS} SchCt2={AFs*22.30m/AFnomS} SchCt3={AFs*175.08m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB011M12FM3

 
.SUBCKT CAB016M12FM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=2 AFs=1 AFnomM=2 AFnomS=1 die=70 Ld=7.54n Lp=4.60n Ls=3.70n Rdesr=1.98m Rpesr=250.00u Rsesr=1.85m PackageRgi=3.20 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=61.50p Cag=85.30p LcsiQ1=0.00 LcsiQ2=0.00 Clg=41.90p Rt1={AFnomM*15.27m/AFm} Rt2={AFnomM*137.77m/AFm} Rt3={AFnomM*488.10m/AFm} Ct1={AFm*1.01m/AFnomM} Ct2={AFm*15.93m/AFnomM} Ct3={AFm*148.15m/AFnomM} SchRt1={AFnomS*15.27m/AFs} SchRt2={AFnomS*137.77m/AFs} SchRt3={AFnomS*488.10m/AFs} SchCt1={AFs*1.01m/AFnomS} SchCt2={AFs*15.93m/AFnomS} SchCt3={AFs*148.15m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB016M12FM3

 
.SUBCKT CAB008M12GM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=70 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=1.02m Rpesr=250.00u Rsesr=940.00u PackageRgi=5.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=103.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=50.40p Rt1={AFnomM*5.02m/AFm} Rt2={AFnomM*40.48m/AFm} Rt3={AFnomM*128.28m/AFm} Ct1={AFm*1.58m/AFnomM} Ct2={AFm*20.40m/AFnomM} Ct3={AFm*219.42m/AFnomM} SchRt1={AFnomS*5.02m/AFs} SchRt2={AFnomS*40.48m/AFs} SchRt3={AFnomS*128.28m/AFs} SchCt1={AFs*1.58m/AFnomS} SchCt2={AFs*20.40m/AFnomS} SchCt3={AFs*219.42m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB008M12GM3

 
.SUBCKT CAB008A12GM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=70 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=1.02m Rpesr=250.00u Rsesr=940.00u PackageRgi=5.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=81.30p Cag=187.00p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.20p Rt1={AFnomM*7.60m/AFm} Rt2={AFnomM*68.10m/AFm} Rt3={AFnomM*286.87m/AFm} Ct1={AFm*1.95m/AFnomM} Ct2={AFm*31.11m/AFnomM} Ct3={AFm*265.35m/AFnomM} SchRt1={AFnomS*7.60m/AFs} SchRt2={AFnomS*68.10m/AFs} SchRt3={AFnomS*286.87m/AFs} SchCt1={AFs*1.95m/AFnomS} SchCt2={AFs*31.11m/AFnomS} SchCt3={AFs*265.35m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB008A12GM3

 
.SUBCKT CAB006M12GM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=70 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.35 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=103.50p LcsiQ1=0.00 LcsiQ2=0.00 Clg=50.40p Rt1={AFnomM*2.93m/AFm} Rt2={AFnomM*28.40m/AFm} Rt3={AFnomM*105.01m/AFm} Ct1={AFm*1.45m/AFnomM} Ct2={AFm*34.94m/AFnomM} Ct3={AFm*446.85m/AFnomM} SchRt1={AFnomS*2.93m/AFs} SchRt2={AFnomS*28.40m/AFs} SchRt3={AFnomS*105.01m/AFs} SchCt1={AFs*1.45m/AFnomS} SchCt2={AFs*34.94m/AFnomS} SchCt3={AFs*446.85m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB006M12GM3

 
.SUBCKT CAB006A12GM3 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=70 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.35 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=81.30p Cag=187.00p LcsiQ1=0.00 LcsiQ2=0.00 Clg=90.20p Rt1={AFnomM*5.79m/AFm} Rt2={AFnomM*59.34m/AFm} Rt3={AFnomM*229.62m/AFm} Ct1={AFm*3.55m/AFnomM} Ct2={AFm*62.42m/AFnomM} Ct3={AFm*511.93m/AFnomM} SchRt1={AFnomS*5.79m/AFs} SchRt2={AFnomS*59.34m/AFs} SchRt3={AFnomS*229.62m/AFs} SchCt1={AFs*3.55m/AFnomS} SchCt2={AFs*62.42m/AFnomS} SchCt3={AFs*511.93m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ1 = {if(LcsiQ1+0.5,7,6}
.param LmflagQ2 = {if(LcsiQ2+0.5,7,6}
.param SchottkyD = {Schottky*96}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {RgiPerDie/Afm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Tc1 Tc2 Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD+5} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3}

.ENDS CAB006A12GM3



**********************************************************************
********************* SiC MOSFET Models ******************************
**********************************************************************
.SUBCKT 11 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,2.1818e-08,1,5.7125e-07,1.5,1.4957e-05,2,0.0003916,2.5,0.010253,3,0.26844,3.5,0.73703,4,1.6869,4.5,3.4064,5,6.2214,5.5,10.4687,6,16.4614,6.5,24.5962,7,35.2151,7.5,48.4783,8,64.5935,8.5,83.7514,9,106.5269,9.5,131.1492,10,156.8332,10.5,181.9994,11,203.6325,11.5,225.4455,12,244.0067,12.5,261.0057,13,274.1054,13.5,286.7598,14,294.7133,14.5,302.4806,15,309.2126,15.5,317.9953,16,327.8575,16.5,338.1683,17,348.5525,17.5,358.9871,18,368.4293)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.96423,5,0.91031,5.5,0.84185,6,0.76111,6.5,0.66759,7,0.59765,7.5,0.53736,8,0.4829,8.5,0.43287,9,0.38545,9.5,0.3496,10,0.32201,10.5,0.30331,11,0.29551,11.5,0.29176,12,0.29311,12.5,0.29523,13,0.30538,13.5,0.31503,14,0.33231,14.5,0.3451,15,0.35738,15.5,0.36142,16,0.36294,16.5,0.36294,17,0.36294,17.5,0.36294,18,0.36294)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,6e-05,2.5,0.00021227,3,0.00057773,3.5,0.0013014,4,0.0027809,4.5,0.0052597,5,0.009114,5.5,0.014853,6,0.023873,6.5,0.03639,7,0.052546,7.5,0.072506,8,0.096603,8.5,0.12404,9,0.15091,9.5,0.19086,10,0.27377,10.5,0.47311,11,0.95562,11.5,1.4464,12,1.9328,12.5,2.3713,13,2.6873,13.5,2.7132,14,2.7272,14.5,2.7277,15,2.728,15.5,2.728,16,2.728,16.5,2.728,17,2.728,17.5,2.728,18,2.728)}
.func RTJ(Tj) {table(Tj,25,0.0076252,50,0.010157,75,0.013321,100,0.018372,125,0.021199,150,0.025721,175,0.031492)}
.func Vth(Tj) {table(Tj,25,-0.76656,50,-0.55715,75,-0.34374,100,0,125,0.042108,150,0.2011,175,0.39341)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0023279,50,-0.0037695,75,-0.004169,100,0,125,-0.0002284,150,0.0046549,175,0.011924)}
.func VthBD(Tj) {table(Tj,25,-0.24611,50,-0.21667,75,-0.18139,100,0,125,0.20512,150,0.58589,175,1.1434)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,7.739,0.015,7.746,0.022,7.723,0.033,7.708,0.050,7.685,0.075,7.631,0.111,7.576,0.167,7.469,0.249,7.341,0.372,7.157,0.556,6.921,0.831,6.651,1.242,6.304,1.856,5.896,2.774,5.419,4.146,4.892,6.196,4.329,9.260,3.720,13.840,2.752,20.684,2.330,30.913,1.959,46.200,1.444,69.048,1.006,103.195,0.762,154.228,0.598,230.500,0.476,344.491,0.384,514.854,0.311,769.469,0.254,1150.000,0.237)}

.func Cdg(V) {table(V,0.010,2.504,0.015,2.487,0.022,2.485,0.033,2.457,0.050,2.422,0.075,2.384,0.111,2.312,0.167,2.222,0.249,2.083,0.372,1.901,0.556,1.694,0.831,1.491,1.242,1.313,1.856,1.115,2.774,0.926,4.146,0.747,6.196,0.579,9.260,0.403,13.840,0.100,20.684,0.080,30.913,0.068,46.200,0.054,69.048,0.038,103.195,0.031,154.228,0.026,230.500,0.022,344.491,0.020,514.854,0.017,769.469,0.015,1150.000,0.015)}

.func Cgs(V) {table(V,-5.000,8.061,-4.750,7.367,-4.500,6.745,-4.250,6.302,-4.000,6.073,-3.750,6.027,-3.500,6.032,-3.250,6.045,-3.000,6.063,-2.750,6.090,-2.500,6.124,-2.250,6.163,-2.000,6.215,-1.750,6.277,-1.500,6.344,-1.250,6.419,-1.000,6.523,-0.750,6.696,-0.500,6.987,-0.250,7.373,0.000,7.748,0.250,8.079,0.500,8.361,0.750,8.626,1.000,8.855,1.250,9.089,1.500,9.294,1.750,9.465,2.000,9.604,2.250,9.702,2.500,9.779,2.750,9.837,3.000,9.885,3.250,9.921,3.500,9.950,3.750,9.975,4.000,9.999,4.250,10.017,4.500,10.032,4.750,10.047,5.000,10.061,6.000,10.105,7.000,10.138,8.000,10.166,9.000,10.190,10.000,10.210,11.000,10.229,12.000,10.246,13.000,10.262,14.000,10.276,15.000,10.289)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.462108e-01
.param Rs_ideal=1.563262e-02
.ENDS 11

.SUBCKT 12 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,2.1818e-08,1,5.7125e-07,1.5,1.4957e-05,2,0.0003916,2.5,0.010253,3,0.26844,3.5,0.73703,4,1.6869,4.5,3.4064,5,6.2214,5.5,10.4687,6,16.4614,6.5,24.5962,7,35.2151,7.5,48.4783,8,64.5935,8.5,83.7514,9,106.5269,9.5,131.1492,10,156.8332,10.5,181.9994,11,203.6325,11.5,225.4455,12,244.0067,12.5,261.0057,13,274.1054,13.5,286.7598,14,294.7133,14.5,302.4806,15,309.2126,15.5,317.9953,16,327.8575,16.5,338.1683,17,348.5525,17.5,358.9871,18,368.4293)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.96423,5,0.91031,5.5,0.84185,6,0.76111,6.5,0.66759,7,0.59765,7.5,0.53736,8,0.4829,8.5,0.43287,9,0.38545,9.5,0.3496,10,0.32201,10.5,0.30331,11,0.29551,11.5,0.29176,12,0.29311,12.5,0.29523,13,0.30538,13.5,0.31503,14,0.33231,14.5,0.3451,15,0.35738,15.5,0.36142,16,0.36294,16.5,0.36294,17,0.36294,17.5,0.36294,18,0.36294)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,6e-05,2.5,0.00021227,3,0.00057773,3.5,0.0013014,4,0.0027809,4.5,0.0052597,5,0.009114,5.5,0.014853,6,0.023873,6.5,0.03639,7,0.052546,7.5,0.072506,8,0.096603,8.5,0.12404,9,0.15091,9.5,0.19086,10,0.27377,10.5,0.47311,11,0.95562,11.5,1.4464,12,1.9328,12.5,2.3713,13,2.6873,13.5,2.7132,14,2.7272,14.5,2.7277,15,2.728,15.5,2.728,16,2.728,16.5,2.728,17,2.728,17.5,2.728,18,2.728)}
.func RTJ(Tj) {table(Tj,25,0.0076252,50,0.010157,75,0.013321,100,0.018372,125,0.021199,150,0.025721,175,0.031492)}
.func Vth(Tj) {table(Tj,25,-0.76656,50,-0.55715,75,-0.34374,100,0,125,0.042108,150,0.2011,175,0.39341)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.54621,-4,0.51395,-3,0.47348,-2,0.4242,-1,0.36687,0,0.30652,1,0.24898,2,0.19858,3,0.15692,4,0.128,5,0.11262,6,0.10737,7,0.10171,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.2301,15,0.44619,16,0.73689,17,1.0564,18,1.3493)}
.func Rs(Vgs) {table(Vgs,-5,0.015633,-4,0.016799,-3,0.018641,-2,0.021115,-1,0.024063,0,0.027002,1,0.029358,2,0.030905,3,0.031976,4,0.033653,5,0.037818,6,0.046068,7,0.059147,8,0.079361,9,0.10435,10,0.13512,11,0.18554,12,0.30112,13,0.62445,14,2.189,15,6.4812,16,16.1341,17,33.7734,18,59.8618)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0023279,50,-0.0037695,75,-0.004169,100,0,125,-0.0002284,150,0.0046549,175,0.011924)}
.func VthBD(Tj) {table(Tj,25,-0.24611,50,-0.21667,75,-0.18139,100,0,125,0.20512,150,0.58589,175,1.1434)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,7.739,0.015,7.746,0.022,7.723,0.033,7.708,0.050,7.685,0.075,7.631,0.111,7.576,0.167,7.469,0.249,7.341,0.372,7.157,0.556,6.921,0.831,6.651,1.242,6.304,1.856,5.896,2.774,5.419,4.146,4.892,6.196,4.329,9.260,3.720,13.840,2.752,20.684,2.330,30.913,1.959,46.200,1.444,69.048,1.006,103.195,0.762,154.228,0.598,230.500,0.476,344.491,0.384,514.854,0.311,769.469,0.254,1150.000,0.237)}

.func Cdg(V) {table(V,0.010,2.504,0.015,2.487,0.022,2.485,0.033,2.457,0.050,2.422,0.075,2.384,0.111,2.312,0.167,2.222,0.249,2.083,0.372,1.901,0.556,1.694,0.831,1.491,1.242,1.313,1.856,1.115,2.774,0.926,4.146,0.747,6.196,0.579,9.260,0.403,13.840,0.100,20.684,0.080,30.913,0.068,46.200,0.054,69.048,0.038,103.195,0.031,154.228,0.026,230.500,0.022,344.491,0.020,514.854,0.017,769.469,0.015,1150.000,0.015)}

.func Cgs(V) {table(V,-5.000,8.061,-4.750,7.367,-4.500,6.745,-4.250,6.302,-4.000,6.073,-3.750,6.027,-3.500,6.032,-3.250,6.045,-3.000,6.063,-2.750,6.090,-2.500,6.124,-2.250,6.163,-2.000,6.215,-1.750,6.277,-1.500,6.344,-1.250,6.419,-1.000,6.523,-0.750,6.696,-0.500,6.987,-0.250,7.373,0.000,7.748,0.250,8.079,0.500,8.361,0.750,8.626,1.000,8.855,1.250,9.089,1.500,9.294,1.750,9.465,2.000,9.604,2.250,9.702,2.500,9.779,2.750,9.837,3.000,9.885,3.250,9.921,3.500,9.950,3.750,9.975,4.000,9.999,4.250,10.017,4.500,10.032,4.750,10.047,5.000,10.061,6.000,10.105,7.000,10.138,8.000,10.166,9.000,10.190,10.000,10.210,11.000,10.229,12.000,10.246,13.000,10.262,14.000,10.276,15.000,10.289)}


.ENDS 12

.SUBCKT 13 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,12,75,16,125,30,175,45)}
.func TM(Tj) {1e-9*table(Tj,25,3,75,3,125,8,175,8)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,2.1818e-08,1,5.7125e-07,1.5,1.4957e-05,2,0.0003916,2.5,0.010253,3,0.26844,3.5,0.73703,4,1.6869,4.5,3.4064,5,6.2214,5.5,10.4687,6,16.4614,6.5,24.5962,7,35.2151,7.5,48.4783,8,64.5935,8.5,83.7514,9,106.5269,9.5,131.1492,10,156.8332,10.5,181.9994,11,203.6325,11.5,225.4455,12,244.0067,12.5,261.0057,13,274.1054,13.5,286.7598,14,294.7133,14.5,302.4806,15,309.2126,15.5,317.9953,16,327.8575,16.5,338.1683,17,348.5525,17.5,358.9871,18,368.4293)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.96423,5,0.91031,5.5,0.84185,6,0.76111,6.5,0.66759,7,0.59765,7.5,0.53736,8,0.4829,8.5,0.43287,9,0.38545,9.5,0.3496,10,0.32201,10.5,0.30331,11,0.29551,11.5,0.29176,12,0.29311,12.5,0.29523,13,0.30538,13.5,0.31503,14,0.33231,14.5,0.3451,15,0.35738,15.5,0.36142,16,0.36294,16.5,0.36294,17,0.36294,17.5,0.36294,18,0.36294)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,6e-05,2.5,0.00021227,3,0.00057773,3.5,0.0013014,4,0.0027809,4.5,0.0052597,5,0.009114,5.5,0.014853,6,0.023873,6.5,0.03639,7,0.052546,7.5,0.072506,8,0.096603,8.5,0.12404,9,0.15091,9.5,0.19086,10,0.27377,10.5,0.47311,11,0.95562,11.5,1.4464,12,1.9328,12.5,2.3713,13,2.6873,13.5,2.7132,14,2.7272,14.5,2.7277,15,2.728,15.5,2.728,16,2.728,16.5,2.728,17,2.728,17.5,2.728,18,2.728)}
.func RTJ(Tj) {table(Tj,25,0.0076252,50,0.010157,75,0.013321,100,0.018372,125,0.021199,150,0.025721,175,0.031492)}
.func Vth(Tj) {table(Tj,25,-0.76656,50,-0.55715,75,-0.34374,100,0,125,0.042108,150,0.2011,175,0.39341)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.54621,-4,0.51395,-3,0.47348,-2,0.4242,-1,0.36687,0,0.30652,1,0.24898,2,0.19858,3,0.15692,4,0.128,5,0.11262,6,0.10737,7,0.10171,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.2301,15,0.44619,16,0.73689,17,1.0564,18,1.3493)}
.func Rs(Vgs) {table(Vgs,-5,0.015633,-4,0.016799,-3,0.018641,-2,0.021115,-1,0.024063,0,0.027002,1,0.029358,2,0.030905,3,0.031976,4,0.033653,5,0.037818,6,0.046068,7,0.059147,8,0.079361,9,0.10435,10,0.13512,11,0.18554,12,0.30112,13,0.62445,14,2.189,15,6.4812,16,16.1341,17,33.7734,18,59.8618)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0023279,50,-0.0037695,75,-0.004169,100,0,125,-0.0002284,150,0.0046549,175,0.011924)}
.func VthBD(Tj) {table(Tj,25,-0.24611,50,-0.21667,75,-0.18139,100,0,125,0.20512,150,0.58589,175,1.1434)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,7.739,0.015,7.746,0.022,7.723,0.033,7.708,0.050,7.685,0.075,7.631,0.111,7.576,0.167,7.469,0.249,7.341,0.372,7.157,0.556,6.921,0.831,6.651,1.242,6.304,1.856,5.896,2.774,5.419,4.146,4.892,6.196,4.329,9.260,3.720,13.840,2.752,20.684,2.330,30.913,1.959,46.200,1.444,69.048,1.006,103.195,0.762,154.228,0.598,230.500,0.476,344.491,0.384,514.854,0.311,769.469,0.254,1150.000,0.237)}

.func Cdg(V) {table(V,0.010,2.504,0.015,2.487,0.022,2.485,0.033,2.457,0.050,2.422,0.075,2.384,0.111,2.312,0.167,2.222,0.249,2.083,0.372,1.901,0.556,1.694,0.831,1.491,1.242,1.313,1.856,1.115,2.774,0.926,4.146,0.747,6.196,0.579,9.260,0.403,13.840,0.100,20.684,0.080,30.913,0.068,46.200,0.054,69.048,0.038,103.195,0.031,154.228,0.026,230.500,0.022,344.491,0.020,514.854,0.017,769.469,0.015,1150.000,0.015)}

.func Cgs(V) {table(V,-5.000,8.061,-4.750,7.367,-4.500,6.745,-4.250,6.302,-4.000,6.073,-3.750,6.027,-3.500,6.032,-3.250,6.045,-3.000,6.063,-2.750,6.090,-2.500,6.124,-2.250,6.163,-2.000,6.215,-1.750,6.277,-1.500,6.344,-1.250,6.419,-1.000,6.523,-0.750,6.696,-0.500,6.987,-0.250,7.373,0.000,7.748,0.250,8.079,0.500,8.361,0.750,8.626,1.000,8.855,1.250,9.089,1.500,9.294,1.750,9.465,2.000,9.604,2.250,9.702,2.500,9.779,2.750,9.837,3.000,9.885,3.250,9.921,3.500,9.950,3.750,9.975,4.000,9.999,4.250,10.017,4.500,10.032,4.750,10.047,5.000,10.061,6.000,10.105,7.000,10.138,8.000,10.166,9.000,10.190,10.000,10.210,11.000,10.229,12.000,10.246,13.000,10.262,14.000,10.276,15.000,10.289)}


.ENDS 13

.SUBCKT 21 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,3.2912e-08,1,1.2999e-06,1.5,5.1337e-05,2,0.0020275,2.5,0.080077,3,0.26452,3.5,0.71473,4,1.6389,4.5,3.3376,5,6.0898,5.5,10.2882,6,16.2661,6.5,24.3611,7,34.6055,7.5,47.4174,8,62.6933,8.5,80.6968,9,101.0675,9.5,123.5675,10,147.7718,10.5,171.2769,11,190.0091,11.5,203.7739,12,216.438,12.5,227.1703,13,236.1044,13.5,247.228,14,260.0598,14.5,269.6819,15,277.488,15.5,285.1713,16,291.8233)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.9975,4.5,0.97964,5,0.94622,5.5,0.89362,6,0.82591,6.5,0.74735,7,0.67699,7.5,0.61032,8,0.5554,8.5,0.5061,9,0.45825,9.5,0.41621,10,0.37933,10.5,0.35168,11,0.33998,11.5,0.34857,12,0.35474,12.5,0.365,13,0.37723,13.5,0.38361,14,0.38327,14.5,0.3867,15,0.39277,15.5,0.39673,16,0.39673)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,4.289e-21,2,3.9117e-05,2.5,0.00018305,3,0.0005664,3.5,0.0013804,4,0.0029383,4.5,0.0054905,5,0.0094785,5.5,0.01499,6,0.022754,6.5,0.033549,7,0.046351,7.5,0.061145,8,0.079045,8.5,0.1014,9,0.12631,9.5,0.16171,10,0.22546,10.5,0.37702,11,0.82475,11.5,1.5403,12,2.2684,12.5,2.9736,13,3.5866,13.5,3.8965,14,3.9322,14.5,3.9418,15,3.9426,15.5,3.9428,16,3.9428)}
.func RTJ(Tj) {table(Tj,25,0.0065947,50,0.0075868,75,0.0092511,100,0.013707,125,0.013767,150,0.016602,175,0.019953)}
.func Vth(Tj) {table(Tj,25,-0.44801,50,-0.54761,75,-0.36353,100,0,125,-0.0025911,150,0.15029,175,0.2946)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01)}
.func RdBD(Tj) {table(Tj,25,2.8772e-06,50,-0.00041053,75,-0.00076696,100,0,125,-0.00046652,150,0.00055632,175,0.0018315)}
.func VthBD(Tj) {table(Tj,25,-1,50,-1,75,-1,100,0,125,-0.23307,150,0.54765,175,1.2677)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,4.513,0.015,4.514,0.022,4.502,0.033,4.496,0.050,4.479,0.075,4.450,0.111,4.425,0.167,4.375,0.249,4.312,0.372,4.227,0.556,4.105,0.831,3.958,1.242,3.765,1.856,3.528,2.774,3.255,4.146,2.946,6.196,2.603,9.260,1.924,13.840,1.554,20.684,1.243,30.913,0.964,46.200,0.772,69.048,0.625,103.195,0.509,154.228,0.416,230.500,0.341,344.491,0.280,514.854,0.232,769.469,0.219,1150.000,0.216)}

.func Cdg(V) {table(V,0.010,2.204,0.015,2.196,0.022,2.181,0.033,2.161,0.050,2.132,0.075,2.095,0.111,2.032,0.167,1.946,0.249,1.816,0.372,1.647,0.556,1.457,0.831,1.272,1.242,1.103,1.856,0.925,2.774,0.751,4.146,0.594,6.196,0.441,9.260,0.092,13.840,0.061,20.684,0.049,30.913,0.036,46.200,0.030,69.048,0.025,103.195,0.022,154.228,0.019,230.500,0.016,344.491,0.014,514.854,0.013,769.469,0.013,1150.000,0.013)}

.func Cgs(V) {table(V,-5.000,6.446,-4.750,5.841,-4.500,5.355,-4.250,5.127,-4.000,5.094,-3.750,5.094,-3.500,5.101,-3.250,5.112,-3.000,5.131,-2.750,5.156,-2.500,5.191,-2.250,5.232,-2.000,5.281,-1.750,5.339,-1.500,5.406,-1.250,5.489,-1.000,5.618,-0.750,5.845,-0.500,6.156,-0.250,6.492,0.000,6.831,0.250,7.092,0.500,7.337,0.750,7.559,1.000,7.768,1.250,7.951,1.500,8.115,1.750,8.231,2.000,8.332,2.250,8.392,2.500,8.446,2.750,8.487,3.000,8.519,3.250,8.548,3.500,8.572,3.750,8.593,4.000,8.612,4.250,8.630,4.500,8.644,4.750,8.659,5.000,8.672,6.000,8.717,7.000,8.753,8.000,8.784,9.000,8.810,10.000,8.832,11.000,8.851,12.000,8.868,13.000,8.884,14.000,8.896,15.000,8.908)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.294743e-01
.param Rs_ideal=9.068788e-03
.ENDS 21

.SUBCKT 22 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,3.2912e-08,1,1.2999e-06,1.5,5.1337e-05,2,0.0020275,2.5,0.080077,3,0.26452,3.5,0.71473,4,1.6389,4.5,3.3376,5,6.0898,5.5,10.2882,6,16.2661,6.5,24.3611,7,34.6055,7.5,47.4174,8,62.6933,8.5,80.6968,9,101.0675,9.5,123.5675,10,147.7718,10.5,171.2769,11,190.0091,11.5,203.7739,12,216.438,12.5,227.1703,13,236.1044,13.5,247.228,14,260.0598,14.5,269.6819,15,277.488,15.5,285.1713,16,291.8233)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.9975,4.5,0.97964,5,0.94622,5.5,0.89362,6,0.82591,6.5,0.74735,7,0.67699,7.5,0.61032,8,0.5554,8.5,0.5061,9,0.45825,9.5,0.41621,10,0.37933,10.5,0.35168,11,0.33998,11.5,0.34857,12,0.35474,12.5,0.365,13,0.37723,13.5,0.38361,14,0.38327,14.5,0.3867,15,0.39277,15.5,0.39673,16,0.39673)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,4.289e-21,2,3.9117e-05,2.5,0.00018305,3,0.0005664,3.5,0.0013804,4,0.0029383,4.5,0.0054905,5,0.0094785,5.5,0.01499,6,0.022754,6.5,0.033549,7,0.046351,7.5,0.061145,8,0.079045,8.5,0.1014,9,0.12631,9.5,0.16171,10,0.22546,10.5,0.37702,11,0.82475,11.5,1.5403,12,2.2684,12.5,2.9736,13,3.5866,13.5,3.8965,14,3.9322,14.5,3.9418,15,3.9426,15.5,3.9428,16,3.9428)}
.func RTJ(Tj) {table(Tj,25,0.0065947,50,0.0075868,75,0.0092511,100,0.013707,125,0.013767,150,0.016602,175,0.019953)}
.func Vth(Tj) {table(Tj,25,-0.44801,50,-0.54761,75,-0.36353,100,0,125,-0.0025911,150,0.15029,175,0.2946)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.52947,-4,0.50654,-3,0.4741,-2,0.4321,-1,0.38152,0,0.32481,1,0.26764,2,0.21428,3,0.16852,4,0.13359,5,0.11232,6,0.10223,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0090688,-4,0.0094064,-3,0.010312,-2,0.011877,-1,0.014089,0,0.016638,1,0.018993,2,0.020837,3,0.022195,4,0.023588,5,0.026089,6,0.03061,7,0.036678,8,0.044459,9,0.053105,10,0.059934,11,0.066373,12,0.082119,13,0.10152,14,0.11869,15,0.13318,16,0.13804)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01)}
.func RdBD(Tj) {table(Tj,25,2.8772e-06,50,-0.00041053,75,-0.00076696,100,0,125,-0.00046652,150,0.00055632,175,0.0018315)}
.func VthBD(Tj) {table(Tj,25,-1,50,-1,75,-1,100,0,125,-0.23307,150,0.54765,175,1.2677)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,4.513,0.015,4.514,0.022,4.502,0.033,4.496,0.050,4.479,0.075,4.450,0.111,4.425,0.167,4.375,0.249,4.312,0.372,4.227,0.556,4.105,0.831,3.958,1.242,3.765,1.856,3.528,2.774,3.255,4.146,2.946,6.196,2.603,9.260,1.924,13.840,1.554,20.684,1.243,30.913,0.964,46.200,0.772,69.048,0.625,103.195,0.509,154.228,0.416,230.500,0.341,344.491,0.280,514.854,0.232,769.469,0.219,1150.000,0.216)}

.func Cdg(V) {table(V,0.010,2.204,0.015,2.196,0.022,2.181,0.033,2.161,0.050,2.132,0.075,2.095,0.111,2.032,0.167,1.946,0.249,1.816,0.372,1.647,0.556,1.457,0.831,1.272,1.242,1.103,1.856,0.925,2.774,0.751,4.146,0.594,6.196,0.441,9.260,0.092,13.840,0.061,20.684,0.049,30.913,0.036,46.200,0.030,69.048,0.025,103.195,0.022,154.228,0.019,230.500,0.016,344.491,0.014,514.854,0.013,769.469,0.013,1150.000,0.013)}

.func Cgs(V) {table(V,-5.000,6.446,-4.750,5.841,-4.500,5.355,-4.250,5.127,-4.000,5.094,-3.750,5.094,-3.500,5.101,-3.250,5.112,-3.000,5.131,-2.750,5.156,-2.500,5.191,-2.250,5.232,-2.000,5.281,-1.750,5.339,-1.500,5.406,-1.250,5.489,-1.000,5.618,-0.750,5.845,-0.500,6.156,-0.250,6.492,0.000,6.831,0.250,7.092,0.500,7.337,0.750,7.559,1.000,7.768,1.250,7.951,1.500,8.115,1.750,8.231,2.000,8.332,2.250,8.392,2.500,8.446,2.750,8.487,3.000,8.519,3.250,8.548,3.500,8.572,3.750,8.593,4.000,8.612,4.250,8.630,4.500,8.644,4.750,8.659,5.000,8.672,6.000,8.717,7.000,8.753,8.000,8.784,9.000,8.810,10.000,8.832,11.000,8.851,12.000,8.868,13.000,8.884,14.000,8.896,15.000,8.908)}


.ENDS 22

.SUBCKT 23 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,12,75,16,125,30,175,35)}
.func TM(Tj) {1e-9*table(Tj,25,3,75,3,125,8,175,8)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,3.2912e-08,1,1.2999e-06,1.5,5.1337e-05,2,0.0020275,2.5,0.080077,3,0.26452,3.5,0.71473,4,1.6389,4.5,3.3376,5,6.0898,5.5,10.2882,6,16.2661,6.5,24.3611,7,34.6055,7.5,47.4174,8,62.6933,8.5,80.6968,9,101.0675,9.5,123.5675,10,147.7718,10.5,171.2769,11,190.0091,11.5,203.7739,12,216.438,12.5,227.1703,13,236.1044,13.5,247.228,14,260.0598,14.5,269.6819,15,277.488,15.5,285.1713,16,291.8233)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.9975,4.5,0.97964,5,0.94622,5.5,0.89362,6,0.82591,6.5,0.74735,7,0.67699,7.5,0.61032,8,0.5554,8.5,0.5061,9,0.45825,9.5,0.41621,10,0.37933,10.5,0.35168,11,0.33998,11.5,0.34857,12,0.35474,12.5,0.365,13,0.37723,13.5,0.38361,14,0.38327,14.5,0.3867,15,0.39277,15.5,0.39673,16,0.39673)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,4.289e-21,2,3.9117e-05,2.5,0.00018305,3,0.0005664,3.5,0.0013804,4,0.0029383,4.5,0.0054905,5,0.0094785,5.5,0.01499,6,0.022754,6.5,0.033549,7,0.046351,7.5,0.061145,8,0.079045,8.5,0.1014,9,0.12631,9.5,0.16171,10,0.22546,10.5,0.37702,11,0.82475,11.5,1.5403,12,2.2684,12.5,2.9736,13,3.5866,13.5,3.8965,14,3.9322,14.5,3.9418,15,3.9426,15.5,3.9428,16,3.9428)}
.func RTJ(Tj) {table(Tj,25,0.0065947,50,0.0075868,75,0.0092511,100,0.013707,125,0.013767,150,0.016602,175,0.019953)}
.func Vth(Tj) {table(Tj,25,-0.44801,50,-0.54761,75,-0.36353,100,0,125,-0.0025911,150,0.15029,175,0.2946)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.52947,-4,0.50654,-3,0.4741,-2,0.4321,-1,0.38152,0,0.32481,1,0.26764,2,0.21428,3,0.16852,4,0.13359,5,0.11232,6,0.10223,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0090688,-4,0.0094064,-3,0.010312,-2,0.011877,-1,0.014089,0,0.016638,1,0.018993,2,0.020837,3,0.022195,4,0.023588,5,0.026089,6,0.03061,7,0.036678,8,0.044459,9,0.053105,10,0.059934,11,0.066373,12,0.082119,13,0.10152,14,0.11869,15,0.13318,16,0.13804)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01)}
.func RdBD(Tj) {table(Tj,25,2.8772e-06,50,-0.00041053,75,-0.00076696,100,0,125,-0.00046652,150,0.00055632,175,0.0018315)}
.func VthBD(Tj) {table(Tj,25,-1,50,-1,75,-1,100,0,125,-0.23307,150,0.54765,175,1.2677)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,4.513,0.015,4.514,0.022,4.502,0.033,4.496,0.050,4.479,0.075,4.450,0.111,4.425,0.167,4.375,0.249,4.312,0.372,4.227,0.556,4.105,0.831,3.958,1.242,3.765,1.856,3.528,2.774,3.255,4.146,2.946,6.196,2.603,9.260,1.924,13.840,1.554,20.684,1.243,30.913,0.964,46.200,0.772,69.048,0.625,103.195,0.509,154.228,0.416,230.500,0.341,344.491,0.280,514.854,0.232,769.469,0.219,1150.000,0.216)}

.func Cdg(V) {table(V,0.010,2.204,0.015,2.196,0.022,2.181,0.033,2.161,0.050,2.132,0.075,2.095,0.111,2.032,0.167,1.946,0.249,1.816,0.372,1.647,0.556,1.457,0.831,1.272,1.242,1.103,1.856,0.925,2.774,0.751,4.146,0.594,6.196,0.441,9.260,0.092,13.840,0.061,20.684,0.049,30.913,0.036,46.200,0.030,69.048,0.025,103.195,0.022,154.228,0.019,230.500,0.016,344.491,0.014,514.854,0.013,769.469,0.013,1150.000,0.013)}

.func Cgs(V) {table(V,-5.000,6.446,-4.750,5.841,-4.500,5.355,-4.250,5.127,-4.000,5.094,-3.750,5.094,-3.500,5.101,-3.250,5.112,-3.000,5.131,-2.750,5.156,-2.500,5.191,-2.250,5.232,-2.000,5.281,-1.750,5.339,-1.500,5.406,-1.250,5.489,-1.000,5.618,-0.750,5.845,-0.500,6.156,-0.250,6.492,0.000,6.831,0.250,7.092,0.500,7.337,0.750,7.559,1.000,7.768,1.250,7.951,1.500,8.115,1.750,8.231,2.000,8.332,2.250,8.392,2.500,8.446,2.750,8.487,3.000,8.519,3.250,8.548,3.500,8.572,3.750,8.593,4.000,8.612,4.250,8.630,4.500,8.644,4.750,8.659,5.000,8.672,6.000,8.717,7.000,8.753,8.000,8.784,9.000,8.810,10.000,8.832,11.000,8.851,12.000,8.868,13.000,8.884,14.000,8.896,15.000,8.908)}


.ENDS 23

.SUBCKT 31 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.5223e-08,1,2.781e-07,1.5,5.0802e-06,2,9.2805e-05,2.5,0.0016954,3,0.030971,3.5,0.56577,4,1.3795,4.5,2.8439,5,5.2513,5.5,8.9439,6,14.2329,6.5,21.4605,7,30.9733,7.5,43.0033,8,57.4244,8.5,74.4,9,93.8197,9.5,115.8148,10,139.8737,10.5,164.6179,11,188.1025,11.5,212.8349,12,234.3741,12.5,253.6763,13,268.5137,13.5,280.2235,14,287.3865,14.5,294.1904,15,299.6742,15.5,306.7556,16,315.4533,16.5,324.2526,17,332.3955,17.5,340.2522,18,347.2916)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99181,5.5,0.96283,6,0.9176,6.5,0.85505,7,0.77776,7.5,0.69593,8,0.62808,8.5,0.56736,9,0.51596,9.5,0.47107,10,0.43267,10.5,0.3991,11,0.37513,11.5,0.35336,12,0.34412,12.5,0.34149,13,0.34877,13.5,0.36434,14,0.38888,14.5,0.40911,15,0.42899,15.5,0.44094,16,0.44412,16.5,0.44412,17,0.44412,17.5,0.44412,18,0.44412)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00010249,3,0.00041581,3.5,0.00082827,4,0.0017818,4.5,0.0043926,5,0.0092025,5.5,0.01719,6,0.029267,6.5,0.046511,7,0.06971,7.5,0.097756,8,0.13713,8.5,0.18911,9,0.26254,9.5,0.35005,10,0.46519,10.5,0.6585,11,1.0152,11.5,1.3501,12,1.6697,12.5,1.9546,13,2.1466,13.5,2.1584,14,2.1648,14.5,2.165,15,2.165,15.5,2.165,16,2.165,16.5,2.165,17,2.165,17.5,2.165,18,2.165)}
.func RTJ(Tj) {table(Tj,25,0.0040517,50,0.0052602,75,0.0066554,100,0.00919,125,0.010454,150,0.012948,175,0.015528)}
.func Vth(Tj) {table(Tj,25,-0.96583,50,-0.6549,75,-0.39267,100,0,125,0.04621,150,0.30477,175,0.52943)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,0.0043353,50,0.0020059,75,0.00024889,100,0,125,-0.00054449,150,0.0012668,175,0.0037315)}
.func VthBD(Tj) {table(Tj,25,-0.1355,50,-0.070383,75,-0.029533,100,0,125,0.17231,150,0.44986,175,0.74594)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,5.458,0.015,5.451,0.022,5.440,0.033,5.449,0.050,5.424,0.075,5.403,0.111,5.364,0.167,5.326,0.249,5.247,0.372,5.160,0.556,5.025,0.831,4.855,1.242,4.635,1.856,4.355,2.774,4.027,4.146,3.655,6.196,3.250,9.260,2.646,13.840,1.988,20.684,1.597,30.913,1.239,46.200,0.989,69.048,0.800,103.195,0.652,154.228,0.534,230.500,0.438,344.491,0.361,514.854,0.299,769.469,0.268,1150.000,0.265)}

.func Cdg(V) {table(V,0.010,2.432,0.015,2.415,0.022,2.402,0.033,2.374,0.050,2.338,0.075,2.304,0.111,2.228,0.167,2.131,0.249,1.999,0.372,1.816,0.556,1.631,0.831,1.454,1.242,1.274,1.856,1.082,2.774,0.891,4.146,0.714,6.196,0.542,9.260,0.278,13.840,0.087,20.684,0.069,30.913,0.051,46.200,0.042,69.048,0.035,103.195,0.030,154.228,0.027,230.500,0.023,344.491,0.021,514.854,0.018,769.469,0.018,1150.000,0.018)}

.func Cgs(V) {table(V,-5.000,8.830,-4.750,8.114,-4.500,7.543,-4.250,7.119,-4.000,7.000,-3.750,6.992,-3.500,7.000,-3.250,7.013,-3.000,7.036,-2.750,7.066,-2.500,7.105,-2.250,7.157,-2.000,7.215,-1.750,7.283,-1.500,7.360,-1.250,7.447,-1.000,7.574,-0.750,7.806,-0.500,8.165,-0.250,8.545,0.000,8.957,0.250,9.281,0.500,9.600,0.750,9.861,1.000,10.080,1.250,10.289,1.500,10.506,1.750,10.677,2.000,10.825,2.250,10.914,2.500,10.997,2.750,11.054,3.000,11.101,3.250,11.139,3.500,11.170,3.750,11.198,4.000,11.218,4.250,11.240,4.500,11.258,4.750,11.274,5.000,11.289,6.000,11.338,7.000,11.376,8.000,11.409,9.000,11.436,10.000,11.461,11.000,11.484,12.000,11.503,13.000,11.522,14.000,11.538,15.000,11.555)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.185915e-01
.param Rs_ideal=8.495041e-03
.ENDS 31

.SUBCKT 32 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.5223e-08,1,2.781e-07,1.5,5.0802e-06,2,9.2805e-05,2.5,0.0016954,3,0.030971,3.5,0.56577,4,1.3795,4.5,2.8439,5,5.2513,5.5,8.9439,6,14.2329,6.5,21.4605,7,30.9733,7.5,43.0033,8,57.4244,8.5,74.4,9,93.8197,9.5,115.8148,10,139.8737,10.5,164.6179,11,188.1025,11.5,212.8349,12,234.3741,12.5,253.6763,13,268.5137,13.5,280.2235,14,287.3865,14.5,294.1904,15,299.6742,15.5,306.7556,16,315.4533,16.5,324.2526,17,332.3955,17.5,340.2522,18,347.2916)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99181,5.5,0.96283,6,0.9176,6.5,0.85505,7,0.77776,7.5,0.69593,8,0.62808,8.5,0.56736,9,0.51596,9.5,0.47107,10,0.43267,10.5,0.3991,11,0.37513,11.5,0.35336,12,0.34412,12.5,0.34149,13,0.34877,13.5,0.36434,14,0.38888,14.5,0.40911,15,0.42899,15.5,0.44094,16,0.44412,16.5,0.44412,17,0.44412,17.5,0.44412,18,0.44412)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00010249,3,0.00041581,3.5,0.00082827,4,0.0017818,4.5,0.0043926,5,0.0092025,5.5,0.01719,6,0.029267,6.5,0.046511,7,0.06971,7.5,0.097756,8,0.13713,8.5,0.18911,9,0.26254,9.5,0.35005,10,0.46519,10.5,0.6585,11,1.0152,11.5,1.3501,12,1.6697,12.5,1.9546,13,2.1466,13.5,2.1584,14,2.1648,14.5,2.165,15,2.165,15.5,2.165,16,2.165,16.5,2.165,17,2.165,17.5,2.165,18,2.165)}
.func RTJ(Tj) {table(Tj,25,0.0040517,50,0.0052602,75,0.0066554,100,0.00919,125,0.010454,150,0.012948,175,0.015528)}
.func Vth(Tj) {table(Tj,25,-0.96583,50,-0.6549,75,-0.39267,100,0,125,0.04621,150,0.30477,175,0.52943)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.51859,-4,0.49597,-3,0.46452,-2,0.42266,-1,0.37012,0,0.31102,1,0.25416,2,0.20391,3,0.16143,4,0.13331,5,0.1155,6,0.1097,7,0.10845,8,0.10463,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.15869,15,0.33333,16,0.59271,17,0.90577,18,1.2174)}
.func Rs(Vgs) {table(Vgs,-5,0.008495,-4,0.0088167,-3,0.0096702,-2,0.011235,-1,0.01362,0,0.016423,1,0.018722,2,0.020157,3,0.020812,4,0.020994,5,0.022273,6,0.025309,7,0.031096,8,0.039817,9,0.052178,10,0.067117,11,0.081488,12,0.1019,13,0.15646,14,0.45823,15,1.6679,16,5.1353,17,13.3029,18,28.9616)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,0.0043353,50,0.0020059,75,0.00024889,100,0,125,-0.00054449,150,0.0012668,175,0.0037315)}
.func VthBD(Tj) {table(Tj,25,-0.1355,50,-0.070383,75,-0.029533,100,0,125,0.17231,150,0.44986,175,0.74594)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,5.458,0.015,5.451,0.022,5.440,0.033,5.449,0.050,5.424,0.075,5.403,0.111,5.364,0.167,5.326,0.249,5.247,0.372,5.160,0.556,5.025,0.831,4.855,1.242,4.635,1.856,4.355,2.774,4.027,4.146,3.655,6.196,3.250,9.260,2.646,13.840,1.988,20.684,1.597,30.913,1.239,46.200,0.989,69.048,0.800,103.195,0.652,154.228,0.534,230.500,0.438,344.491,0.361,514.854,0.299,769.469,0.268,1150.000,0.265)}

.func Cdg(V) {table(V,0.010,2.432,0.015,2.415,0.022,2.402,0.033,2.374,0.050,2.338,0.075,2.304,0.111,2.228,0.167,2.131,0.249,1.999,0.372,1.816,0.556,1.631,0.831,1.454,1.242,1.274,1.856,1.082,2.774,0.891,4.146,0.714,6.196,0.542,9.260,0.278,13.840,0.087,20.684,0.069,30.913,0.051,46.200,0.042,69.048,0.035,103.195,0.030,154.228,0.027,230.500,0.023,344.491,0.021,514.854,0.018,769.469,0.018,1150.000,0.018)}

.func Cgs(V) {table(V,-5.000,8.830,-4.750,8.114,-4.500,7.543,-4.250,7.119,-4.000,7.000,-3.750,6.992,-3.500,7.000,-3.250,7.013,-3.000,7.036,-2.750,7.066,-2.500,7.105,-2.250,7.157,-2.000,7.215,-1.750,7.283,-1.500,7.360,-1.250,7.447,-1.000,7.574,-0.750,7.806,-0.500,8.165,-0.250,8.545,0.000,8.957,0.250,9.281,0.500,9.600,0.750,9.861,1.000,10.080,1.250,10.289,1.500,10.506,1.750,10.677,2.000,10.825,2.250,10.914,2.500,10.997,2.750,11.054,3.000,11.101,3.250,11.139,3.500,11.170,3.750,11.198,4.000,11.218,4.250,11.240,4.500,11.258,4.750,11.274,5.000,11.289,6.000,11.338,7.000,11.376,8.000,11.409,9.000,11.436,10.000,11.461,11.000,11.484,12.000,11.503,13.000,11.522,14.000,11.538,15.000,11.555)}


.ENDS 32

.SUBCKT 33 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,16.5,75,45,125,50,175,60)}
.func TM(Tj) {1e-9*table(Tj,25,15,75,110,125,80,175,70)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.5223e-08,1,2.781e-07,1.5,5.0802e-06,2,9.2805e-05,2.5,0.0016954,3,0.030971,3.5,0.56577,4,1.3795,4.5,2.8439,5,5.2513,5.5,8.9439,6,14.2329,6.5,21.4605,7,30.9733,7.5,43.0033,8,57.4244,8.5,74.4,9,93.8197,9.5,115.8148,10,139.8737,10.5,164.6179,11,188.1025,11.5,212.8349,12,234.3741,12.5,253.6763,13,268.5137,13.5,280.2235,14,287.3865,14.5,294.1904,15,299.6742,15.5,306.7556,16,315.4533,16.5,324.2526,17,332.3955,17.5,340.2522,18,347.2916)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99181,5.5,0.96283,6,0.9176,6.5,0.85505,7,0.77776,7.5,0.69593,8,0.62808,8.5,0.56736,9,0.51596,9.5,0.47107,10,0.43267,10.5,0.3991,11,0.37513,11.5,0.35336,12,0.34412,12.5,0.34149,13,0.34877,13.5,0.36434,14,0.38888,14.5,0.40911,15,0.42899,15.5,0.44094,16,0.44412,16.5,0.44412,17,0.44412,17.5,0.44412,18,0.44412)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00010249,3,0.00041581,3.5,0.00082827,4,0.0017818,4.5,0.0043926,5,0.0092025,5.5,0.01719,6,0.029267,6.5,0.046511,7,0.06971,7.5,0.097756,8,0.13713,8.5,0.18911,9,0.26254,9.5,0.35005,10,0.46519,10.5,0.6585,11,1.0152,11.5,1.3501,12,1.6697,12.5,1.9546,13,2.1466,13.5,2.1584,14,2.1648,14.5,2.165,15,2.165,15.5,2.165,16,2.165,16.5,2.165,17,2.165,17.5,2.165,18,2.165)}
.func RTJ(Tj) {table(Tj,25,0.0040517,50,0.0052602,75,0.0066554,100,0.00919,125,0.010454,150,0.012948,175,0.015528)}
.func Vth(Tj) {table(Tj,25,-0.96583,50,-0.6549,75,-0.39267,100,0,125,0.04621,150,0.30477,175,0.52943)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.51859,-4,0.49597,-3,0.46452,-2,0.42266,-1,0.37012,0,0.31102,1,0.25416,2,0.20391,3,0.16143,4,0.13331,5,0.1155,6,0.1097,7,0.10845,8,0.10463,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.15869,15,0.33333,16,0.59271,17,0.90577,18,1.2174)}
.func Rs(Vgs) {table(Vgs,-5,0.008495,-4,0.0088167,-3,0.0096702,-2,0.011235,-1,0.01362,0,0.016423,1,0.018722,2,0.020157,3,0.020812,4,0.020994,5,0.022273,6,0.025309,7,0.031096,8,0.039817,9,0.052178,10,0.067117,11,0.081488,12,0.1019,13,0.15646,14,0.45823,15,1.6679,16,5.1353,17,13.3029,18,28.9616)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,0.0043353,50,0.0020059,75,0.00024889,100,0,125,-0.00054449,150,0.0012668,175,0.0037315)}
.func VthBD(Tj) {table(Tj,25,-0.1355,50,-0.070383,75,-0.029533,100,0,125,0.17231,150,0.44986,175,0.74594)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,5.458,0.015,5.451,0.022,5.440,0.033,5.449,0.050,5.424,0.075,5.403,0.111,5.364,0.167,5.326,0.249,5.247,0.372,5.160,0.556,5.025,0.831,4.855,1.242,4.635,1.856,4.355,2.774,4.027,4.146,3.655,6.196,3.250,9.260,2.646,13.840,1.988,20.684,1.597,30.913,1.239,46.200,0.989,69.048,0.800,103.195,0.652,154.228,0.534,230.500,0.438,344.491,0.361,514.854,0.299,769.469,0.268,1150.000,0.265)}

.func Cdg(V) {table(V,0.010,2.432,0.015,2.415,0.022,2.402,0.033,2.374,0.050,2.338,0.075,2.304,0.111,2.228,0.167,2.131,0.249,1.999,0.372,1.816,0.556,1.631,0.831,1.454,1.242,1.274,1.856,1.082,2.774,0.891,4.146,0.714,6.196,0.542,9.260,0.278,13.840,0.087,20.684,0.069,30.913,0.051,46.200,0.042,69.048,0.035,103.195,0.030,154.228,0.027,230.500,0.023,344.491,0.021,514.854,0.018,769.469,0.018,1150.000,0.018)}

.func Cgs(V) {table(V,-5.000,8.830,-4.750,8.114,-4.500,7.543,-4.250,7.119,-4.000,7.000,-3.750,6.992,-3.500,7.000,-3.250,7.013,-3.000,7.036,-2.750,7.066,-2.500,7.105,-2.250,7.157,-2.000,7.215,-1.750,7.283,-1.500,7.360,-1.250,7.447,-1.000,7.574,-0.750,7.806,-0.500,8.165,-0.250,8.545,0.000,8.957,0.250,9.281,0.500,9.600,0.750,9.861,1.000,10.080,1.250,10.289,1.500,10.506,1.750,10.677,2.000,10.825,2.250,10.914,2.500,10.997,2.750,11.054,3.000,11.101,3.250,11.139,3.500,11.170,3.750,11.198,4.000,11.218,4.250,11.240,4.500,11.258,4.750,11.274,5.000,11.289,6.000,11.338,7.000,11.376,8.000,11.409,9.000,11.436,10.000,11.461,11.000,11.484,12.000,11.503,13.000,11.522,14.000,11.538,15.000,11.555)}


.ENDS 33

.SUBCKT 41 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.4612e-08,1,2.5622e-07,1.5,4.4928e-06,2,7.8779e-05,2.5,0.0013814,3,0.024222,3.5,0.42472,4,1.0698,4.5,2.2879,5,4.3627,5.5,7.6789,6,12.4945,6.5,19.0748,7,27.838,7.5,38.9979,8,52.689,8.5,68.914,9,88.1514,9.5,109.8732,10,134.2383,10.5,161.46,11,191.1307,11.5,223.7288,12,257.7922,12.5,285.9354,13,307.3657,13.5,322.1269,14,328.8326,14.5,332.7068,15,339.5918,15.5,349.4967,16,361.9467,16.5,377.0908,17,391.1014,17.5,404.6309,18,418.2571)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.99722,5,0.98037,5.5,0.92276,6,0.86047,6.5,0.80095,7,0.73076,7.5,0.6654,8,0.63151,8.5,0.59734,9,0.55267,9.5,0.51623,10,0.48334,10.5,0.45377,11,0.42522,11.5,0.39789,12,0.37381,12.5,0.36866,13,0.38413,13.5,0.41931,14,0.46942,14.5,0.52152,15,0.56034,15.5,0.58452,16,0.59293,16.5,0.59293,17,0.59293,17.5,0.59293,18,0.59293)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00021192,3,0.00050199,3.5,0.0011292,4,0.0026465,4.5,0.0058661,5,0.011275,5.5,0.018819,6,0.031064,6.5,0.050915,7,0.076404,7.5,0.10973,8,0.1521,8.5,0.20712,9,0.27249,9.5,0.36169,10,0.47443,10.5,0.60453,11,0.7732,11.5,0.92392,12,1.0449,12.5,1.1322,13,1.1909,13.5,1.1933,14,1.1948,14.5,1.1948,15,1.1948,15.5,1.1948,16,1.1948,16.5,1.1948,17,1.1948,17.5,1.1948,18,1.1948)}
.func RTJ(Tj) {table(Tj,25,0.0076409,50,0.0084192,75,0.009549,100,0.011163,125,0.016035,150,0.017506,175,0.020041)}
.func Vth(Tj) {table(Tj,25,-0.89699,50,-0.64729,75,-0.36417,100,0,125,-0.40978,150,-0.049952,175,0.18683)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0016989,50,-0.0028964,75,-0.0034426,100,0,125,-0.005156,150,-0.0030172,175,0.0016242)}
.func VthBD(Tj) {table(Tj,25,-0.72565,50,-0.62447,75,-0.49822,100,0,125,-0.53991,150,-0.27818,175,0.38844)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,3.851,0.015,3.823,0.022,3.835,0.033,3.838,0.050,3.831,0.075,3.794,0.111,3.783,0.167,3.771,0.249,3.708,0.372,3.684,0.556,3.594,0.831,3.493,1.242,3.341,1.856,3.153,2.774,2.921,4.146,2.656,6.196,2.363,9.260,2.014,13.840,1.489,20.684,1.203,30.913,0.935,46.200,0.728,69.048,0.584,103.195,0.475,154.228,0.388,230.500,0.319,344.491,0.263,514.854,0.218,769.469,0.183,1150.000,0.177)}

.func Cdg(V) {table(V,0.010,3.322,0.015,3.311,0.022,3.290,0.033,3.257,0.050,3.208,0.075,3.156,0.111,3.050,0.167,2.914,0.249,2.729,0.372,2.438,0.556,2.144,0.831,1.871,1.242,1.626,1.856,1.374,2.774,1.126,4.146,0.897,6.196,0.682,9.260,0.448,13.840,0.140,20.684,0.106,30.913,0.076,46.200,0.055,69.048,0.043,103.195,0.034,154.228,0.027,230.500,0.022,344.491,0.017,514.854,0.013,769.469,0.010,1150.000,0.010)}

.func Cgs(V) {table(V,-5.000,6.743,-4.750,5.924,-4.500,5.159,-4.250,4.718,-4.000,4.600,-3.750,4.595,-3.500,4.611,-3.250,4.635,-3.000,4.667,-2.750,4.708,-2.500,4.761,-2.250,4.831,-2.000,4.906,-1.750,4.988,-1.500,5.089,-1.250,5.219,-1.000,5.418,-0.750,5.796,-0.500,6.277,-0.250,6.810,0.000,7.268,0.250,7.651,0.500,7.962,0.750,8.241,1.000,8.476,1.250,8.700,1.500,8.912,1.750,9.078,2.000,9.219,2.250,9.327,2.500,9.410,2.750,9.478,3.000,9.528,3.250,9.571,3.500,9.605,3.750,9.634,4.000,9.661,4.250,9.684,4.500,9.705,4.750,9.723,5.000,9.741,6.000,9.795,7.000,9.839,8.000,9.877,9.000,9.908,10.000,9.934,11.000,9.955,12.000,9.974,13.000,9.992,14.000,10.006,15.000,10.019)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.537381e-01
.param Rs_ideal=1.232784e-02
.ENDS 41

.SUBCKT 42 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.4612e-08,1,2.5622e-07,1.5,4.4928e-06,2,7.8779e-05,2.5,0.0013814,3,0.024222,3.5,0.42472,4,1.0698,4.5,2.2879,5,4.3627,5.5,7.6789,6,12.4945,6.5,19.0748,7,27.838,7.5,38.9979,8,52.689,8.5,68.914,9,88.1514,9.5,109.8732,10,134.2383,10.5,161.46,11,191.1307,11.5,223.7288,12,257.7922,12.5,285.9354,13,307.3657,13.5,322.1269,14,328.8326,14.5,332.7068,15,339.5918,15.5,349.4967,16,361.9467,16.5,377.0908,17,391.1014,17.5,404.6309,18,418.2571)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.99722,5,0.98037,5.5,0.92276,6,0.86047,6.5,0.80095,7,0.73076,7.5,0.6654,8,0.63151,8.5,0.59734,9,0.55267,9.5,0.51623,10,0.48334,10.5,0.45377,11,0.42522,11.5,0.39789,12,0.37381,12.5,0.36866,13,0.38413,13.5,0.41931,14,0.46942,14.5,0.52152,15,0.56034,15.5,0.58452,16,0.59293,16.5,0.59293,17,0.59293,17.5,0.59293,18,0.59293)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00021192,3,0.00050199,3.5,0.0011292,4,0.0026465,4.5,0.0058661,5,0.011275,5.5,0.018819,6,0.031064,6.5,0.050915,7,0.076404,7.5,0.10973,8,0.1521,8.5,0.20712,9,0.27249,9.5,0.36169,10,0.47443,10.5,0.60453,11,0.7732,11.5,0.92392,12,1.0449,12.5,1.1322,13,1.1909,13.5,1.1933,14,1.1948,14.5,1.1948,15,1.1948,15.5,1.1948,16,1.1948,16.5,1.1948,17,1.1948,17.5,1.1948,18,1.1948)}
.func RTJ(Tj) {table(Tj,25,0.0076409,50,0.0084192,75,0.009549,100,0.011163,125,0.016035,150,0.017506,175,0.020041)}
.func Vth(Tj) {table(Tj,25,-0.89699,50,-0.64729,75,-0.36417,100,0,125,-0.40978,150,-0.049952,175,0.18683)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.55374,-4,0.51561,-3,0.46728,-2,0.40991,-1,0.34641,0,0.28341,1,0.22938,2,0.18578,3,0.15129,4,0.12698,5,0.11093,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.14437,14,0.30918,15,0.55986,16,0.86944,17,1.184,18,1.4536)}
.func Rs(Vgs) {table(Vgs,-5,0.012328,-4,0.013224,-3,0.014817,-2,0.016932,-1,0.019259,0,0.021277,1,0.02235,2,0.02252,3,0.022088,4,0.021862,5,0.022671,6,0.025518,7,0.030023,8,0.038297,9,0.052305,10,0.073652,11,0.10901,12,0.16166,13,0.42684,14,1.5668,15,4.8666,16,12.7204,17,27.9406,18,51.8241)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0016989,50,-0.0028964,75,-0.0034426,100,0,125,-0.005156,150,-0.0030172,175,0.0016242)}
.func VthBD(Tj) {table(Tj,25,-0.72565,50,-0.62447,75,-0.49822,100,0,125,-0.53991,150,-0.27818,175,0.38844)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,3.851,0.015,3.823,0.022,3.835,0.033,3.838,0.050,3.831,0.075,3.794,0.111,3.783,0.167,3.771,0.249,3.708,0.372,3.684,0.556,3.594,0.831,3.493,1.242,3.341,1.856,3.153,2.774,2.921,4.146,2.656,6.196,2.363,9.260,2.014,13.840,1.489,20.684,1.203,30.913,0.935,46.200,0.728,69.048,0.584,103.195,0.475,154.228,0.388,230.500,0.319,344.491,0.263,514.854,0.218,769.469,0.183,1150.000,0.177)}

.func Cdg(V) {table(V,0.010,3.322,0.015,3.311,0.022,3.290,0.033,3.257,0.050,3.208,0.075,3.156,0.111,3.050,0.167,2.914,0.249,2.729,0.372,2.438,0.556,2.144,0.831,1.871,1.242,1.626,1.856,1.374,2.774,1.126,4.146,0.897,6.196,0.682,9.260,0.448,13.840,0.140,20.684,0.106,30.913,0.076,46.200,0.055,69.048,0.043,103.195,0.034,154.228,0.027,230.500,0.022,344.491,0.017,514.854,0.013,769.469,0.010,1150.000,0.010)}

.func Cgs(V) {table(V,-5.000,6.743,-4.750,5.924,-4.500,5.159,-4.250,4.718,-4.000,4.600,-3.750,4.595,-3.500,4.611,-3.250,4.635,-3.000,4.667,-2.750,4.708,-2.500,4.761,-2.250,4.831,-2.000,4.906,-1.750,4.988,-1.500,5.089,-1.250,5.219,-1.000,5.418,-0.750,5.796,-0.500,6.277,-0.250,6.810,0.000,7.268,0.250,7.651,0.500,7.962,0.750,8.241,1.000,8.476,1.250,8.700,1.500,8.912,1.750,9.078,2.000,9.219,2.250,9.327,2.500,9.410,2.750,9.478,3.000,9.528,3.250,9.571,3.500,9.605,3.750,9.634,4.000,9.661,4.250,9.684,4.500,9.705,4.750,9.723,5.000,9.741,6.000,9.795,7.000,9.839,8.000,9.877,9.000,9.908,10.000,9.934,11.000,9.955,12.000,9.974,13.000,9.992,14.000,10.006,15.000,10.019)}


.ENDS 42

.SUBCKT 43 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,5,75,15,125,28,175,50)}
.func TM(Tj) {1e-9*table(Tj,25,2,75,50,125,85,175,120)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.4612e-08,1,2.5622e-07,1.5,4.4928e-06,2,7.8779e-05,2.5,0.0013814,3,0.024222,3.5,0.42472,4,1.0698,4.5,2.2879,5,4.3627,5.5,7.6789,6,12.4945,6.5,19.0748,7,27.838,7.5,38.9979,8,52.689,8.5,68.914,9,88.1514,9.5,109.8732,10,134.2383,10.5,161.46,11,191.1307,11.5,223.7288,12,257.7922,12.5,285.9354,13,307.3657,13.5,322.1269,14,328.8326,14.5,332.7068,15,339.5918,15.5,349.4967,16,361.9467,16.5,377.0908,17,391.1014,17.5,404.6309,18,418.2571)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.99722,5,0.98037,5.5,0.92276,6,0.86047,6.5,0.80095,7,0.73076,7.5,0.6654,8,0.63151,8.5,0.59734,9,0.55267,9.5,0.51623,10,0.48334,10.5,0.45377,11,0.42522,11.5,0.39789,12,0.37381,12.5,0.36866,13,0.38413,13.5,0.41931,14,0.46942,14.5,0.52152,15,0.56034,15.5,0.58452,16,0.59293,16.5,0.59293,17,0.59293,17.5,0.59293,18,0.59293)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00021192,3,0.00050199,3.5,0.0011292,4,0.0026465,4.5,0.0058661,5,0.011275,5.5,0.018819,6,0.031064,6.5,0.050915,7,0.076404,7.5,0.10973,8,0.1521,8.5,0.20712,9,0.27249,9.5,0.36169,10,0.47443,10.5,0.60453,11,0.7732,11.5,0.92392,12,1.0449,12.5,1.1322,13,1.1909,13.5,1.1933,14,1.1948,14.5,1.1948,15,1.1948,15.5,1.1948,16,1.1948,16.5,1.1948,17,1.1948,17.5,1.1948,18,1.1948)}
.func RTJ(Tj) {table(Tj,25,0.0076409,50,0.0084192,75,0.009549,100,0.011163,125,0.016035,150,0.017506,175,0.020041)}
.func Vth(Tj) {table(Tj,25,-0.89699,50,-0.64729,75,-0.36417,100,0,125,-0.40978,150,-0.049952,175,0.18683)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.55374,-4,0.51561,-3,0.46728,-2,0.40991,-1,0.34641,0,0.28341,1,0.22938,2,0.18578,3,0.15129,4,0.12698,5,0.11093,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.14437,14,0.30918,15,0.55986,16,0.86944,17,1.184,18,1.4536)}
.func Rs(Vgs) {table(Vgs,-5,0.012328,-4,0.013224,-3,0.014817,-2,0.016932,-1,0.019259,0,0.021277,1,0.02235,2,0.02252,3,0.022088,4,0.021862,5,0.022671,6,0.025518,7,0.030023,8,0.038297,9,0.052305,10,0.073652,11,0.10901,12,0.16166,13,0.42684,14,1.5668,15,4.8666,16,12.7204,17,27.9406,18,51.8241)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0016989,50,-0.0028964,75,-0.0034426,100,0,125,-0.005156,150,-0.0030172,175,0.0016242)}
.func VthBD(Tj) {table(Tj,25,-0.72565,50,-0.62447,75,-0.49822,100,0,125,-0.53991,150,-0.27818,175,0.38844)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,3.851,0.015,3.823,0.022,3.835,0.033,3.838,0.050,3.831,0.075,3.794,0.111,3.783,0.167,3.771,0.249,3.708,0.372,3.684,0.556,3.594,0.831,3.493,1.242,3.341,1.856,3.153,2.774,2.921,4.146,2.656,6.196,2.363,9.260,2.014,13.840,1.489,20.684,1.203,30.913,0.935,46.200,0.728,69.048,0.584,103.195,0.475,154.228,0.388,230.500,0.319,344.491,0.263,514.854,0.218,769.469,0.183,1150.000,0.177)}

.func Cdg(V) {table(V,0.010,3.322,0.015,3.311,0.022,3.290,0.033,3.257,0.050,3.208,0.075,3.156,0.111,3.050,0.167,2.914,0.249,2.729,0.372,2.438,0.556,2.144,0.831,1.871,1.242,1.626,1.856,1.374,2.774,1.126,4.146,0.897,6.196,0.682,9.260,0.448,13.840,0.140,20.684,0.106,30.913,0.076,46.200,0.055,69.048,0.043,103.195,0.034,154.228,0.027,230.500,0.022,344.491,0.017,514.854,0.013,769.469,0.010,1150.000,0.010)}

.func Cgs(V) {table(V,-5.000,6.743,-4.750,5.924,-4.500,5.159,-4.250,4.718,-4.000,4.600,-3.750,4.595,-3.500,4.611,-3.250,4.635,-3.000,4.667,-2.750,4.708,-2.500,4.761,-2.250,4.831,-2.000,4.906,-1.750,4.988,-1.500,5.089,-1.250,5.219,-1.000,5.418,-0.750,5.796,-0.500,6.277,-0.250,6.810,0.000,7.268,0.250,7.651,0.500,7.962,0.750,8.241,1.000,8.476,1.250,8.700,1.500,8.912,1.750,9.078,2.000,9.219,2.250,9.327,2.500,9.410,2.750,9.478,3.000,9.528,3.250,9.571,3.500,9.605,3.750,9.634,4.000,9.661,4.250,9.684,4.500,9.705,4.750,9.723,5.000,9.741,6.000,9.795,7.000,9.839,8.000,9.877,9.000,9.908,10.000,9.934,11.000,9.955,12.000,9.974,13.000,9.992,14.000,10.006,15.000,10.019)}


.ENDS 43

.SUBCKT 51 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.5325e-08,1,2.8183e-07,1.5,5.183e-06,2,9.5316e-05,2.5,0.0017529,3,0.032236,3.5,0.59282,4,1.4455,4.5,2.9798,5,5.5026,5.5,9.3723,6,14.9153,6.5,22.4903,7,32.4613,7.5,45.0713,8,60.189,8.5,77.9861,9,98.3473,9.5,121.4111,10,146.6415,10.5,172.6025,11,197.2541,11.5,223.2175,12,245.843,12.5,266.1296,13,281.7228,13.5,294.025,14,299.9655,14.5,305.7671,15,310.09,15.5,316.0117,16,323.5519,16.5,332.705,17,340.8523,17.5,348.704,18,355.7186)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99157,5.5,0.96229,6,0.9167,6.5,0.85375,7,0.77602,7.5,0.69397,8,0.6259,8.5,0.56501,9,0.51347,9.5,0.46848,10,0.43001,10.5,0.39635,11,0.37223,11.5,0.35035,12,0.34087,12.5,0.33794,13,0.34481,13.5,0.35985,14,0.38912,14.5,0.41421,15,0.43901,15.5,0.45604,16,0.4645,16.5,0.4645,17,0.4645,17.5,0.4645,18,0.4645)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00010739,3,0.00043573,3.5,0.00086808,4,0.0018669,4.5,0.0046052,5,0.0096418,5.5,0.018003,6,0.030643,6.5,0.048686,7,0.072946,7.5,0.10226,8,0.14342,8.5,0.19774,9,0.27447,9.5,0.36589,10,0.48619,10.5,0.68786,11,1.06,11.5,1.4092,12,1.7424,12.5,2.0394,13,2.2397,13.5,2.2519,14,2.2587,14.5,2.2588,15,2.2588,15.5,2.2588,16,2.2588,16.5,2.2588,17,2.2588,17.5,2.2588,18,2.2588)}
.func RTJ(Tj) {table(Tj,25,0.0042829,50,0.0053115,75,0.0064965,100,0.0085727,125,0.0097515,150,0.011898,175,0.014053)}
.func Vth(Tj) {table(Tj,25,-1.079,50,-0.71859,75,-0.41669,100,0,125,0.086468,150,0.38196,175,0.62487)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,0.005331,50,0.0026404,75,0.00055819,100,0,125,-0.000857,150,0.00047683,175,0.0024111)}
.func VthBD(Tj) {table(Tj,25,-0.15963,50,-0.0836,75,-0.037146,100,0,125,0.1734,150,0.45354,175,0.75515)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,5.458,0.015,5.451,0.022,5.440,0.033,5.449,0.050,5.424,0.075,5.403,0.111,5.364,0.167,5.326,0.249,5.247,0.372,5.160,0.556,5.025,0.831,4.855,1.242,4.635,1.856,4.355,2.774,4.027,4.146,3.655,6.196,3.250,9.260,2.646,13.840,1.988,20.684,1.597,30.913,1.239,46.200,0.989,69.048,0.800,103.195,0.652,154.228,0.534,230.500,0.438,344.491,0.361,514.854,0.299,769.469,0.268,1150.000,0.265)}

.func Cdg(V) {table(V,0.010,2.432,0.015,2.415,0.022,2.402,0.033,2.374,0.050,2.338,0.075,2.304,0.111,2.228,0.167,2.131,0.249,1.999,0.372,1.816,0.556,1.631,0.831,1.454,1.242,1.274,1.856,1.082,2.774,0.891,4.146,0.714,6.196,0.542,9.260,0.278,13.840,0.087,20.684,0.069,30.913,0.051,46.200,0.042,69.048,0.035,103.195,0.030,154.228,0.027,230.500,0.023,344.491,0.021,514.854,0.018,769.469,0.018,1150.000,0.018)}

.func Cgs(V) {table(V,-5.000,8.830,-4.750,8.114,-4.500,7.543,-4.250,7.119,-4.000,7.000,-3.750,6.992,-3.500,7.000,-3.250,7.013,-3.000,7.036,-2.750,7.066,-2.500,7.105,-2.250,7.157,-2.000,7.215,-1.750,7.283,-1.500,7.360,-1.250,7.447,-1.000,7.574,-0.750,7.806,-0.500,8.165,-0.250,8.545,0.000,8.957,0.250,9.281,0.500,9.600,0.750,9.861,1.000,10.080,1.250,10.289,1.500,10.506,1.750,10.677,2.000,10.825,2.250,10.914,2.500,10.997,2.750,11.054,3.000,11.101,3.250,11.139,3.500,11.170,3.750,11.198,4.000,11.218,4.250,11.240,4.500,11.258,4.750,11.274,5.000,11.289,6.000,11.338,7.000,11.376,8.000,11.409,9.000,11.436,10.000,11.461,11.000,11.484,12.000,11.503,13.000,11.522,14.000,11.538,15.000,11.555)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.154690e-01
.param Rs_ideal=8.148275e-03
.ENDS 51

.SUBCKT 52 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.5325e-08,1,2.8183e-07,1.5,5.183e-06,2,9.5316e-05,2.5,0.0017529,3,0.032236,3.5,0.59282,4,1.4455,4.5,2.9798,5,5.5026,5.5,9.3723,6,14.9153,6.5,22.4903,7,32.4613,7.5,45.0713,8,60.189,8.5,77.9861,9,98.3473,9.5,121.4111,10,146.6415,10.5,172.6025,11,197.2541,11.5,223.2175,12,245.843,12.5,266.1296,13,281.7228,13.5,294.025,14,299.9655,14.5,305.7671,15,310.09,15.5,316.0117,16,323.5519,16.5,332.705,17,340.8523,17.5,348.704,18,355.7186)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99157,5.5,0.96229,6,0.9167,6.5,0.85375,7,0.77602,7.5,0.69397,8,0.6259,8.5,0.56501,9,0.51347,9.5,0.46848,10,0.43001,10.5,0.39635,11,0.37223,11.5,0.35035,12,0.34087,12.5,0.33794,13,0.34481,13.5,0.35985,14,0.38912,14.5,0.41421,15,0.43901,15.5,0.45604,16,0.4645,16.5,0.4645,17,0.4645,17.5,0.4645,18,0.4645)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00010739,3,0.00043573,3.5,0.00086808,4,0.0018669,4.5,0.0046052,5,0.0096418,5.5,0.018003,6,0.030643,6.5,0.048686,7,0.072946,7.5,0.10226,8,0.14342,8.5,0.19774,9,0.27447,9.5,0.36589,10,0.48619,10.5,0.68786,11,1.06,11.5,1.4092,12,1.7424,12.5,2.0394,13,2.2397,13.5,2.2519,14,2.2587,14.5,2.2588,15,2.2588,15.5,2.2588,16,2.2588,16.5,2.2588,17,2.2588,17.5,2.2588,18,2.2588)}
.func RTJ(Tj) {table(Tj,25,0.0042829,50,0.0053115,75,0.0064965,100,0.0085727,125,0.0097515,150,0.011898,175,0.014053)}
.func Vth(Tj) {table(Tj,25,-1.079,50,-0.71859,75,-0.41669,100,0,125,0.086468,150,0.38196,175,0.62487)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.51547,-4,0.49298,-3,0.46171,-2,0.42009,-1,0.36784,0,0.30908,1,0.25259,2,0.20266,3,0.16044,4,0.13249,5,0.11479,6,0.10907,7,0.10798,8,0.10451,9,0.10034,10,0.1,11,0.1,12,0.1,13,0.1,14,0.2301,15,0.44619,16,0.73689,17,1.0564,18,1.3493)}
.func Rs(Vgs) {table(Vgs,-5,0.0081483,-4,0.0084537,-3,0.0092665,-2,0.010758,-1,0.013032,0,0.015703,1,0.017891,2,0.019255,3,0.019876,4,0.020047,5,0.02127,6,0.024179,7,0.029731,8,0.038129,9,0.05012,10,0.065075,11,0.079641,12,0.10071,13,0.15917,14,0.6067,15,2.1344,16,6.3429,17,15.8493,18,33.2998)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,0.005331,50,0.0026404,75,0.00055819,100,0,125,-0.000857,150,0.00047683,175,0.0024111)}
.func VthBD(Tj) {table(Tj,25,-0.15963,50,-0.0836,75,-0.037146,100,0,125,0.1734,150,0.45354,175,0.75515)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,5.458,0.015,5.451,0.022,5.440,0.033,5.449,0.050,5.424,0.075,5.403,0.111,5.364,0.167,5.326,0.249,5.247,0.372,5.160,0.556,5.025,0.831,4.855,1.242,4.635,1.856,4.355,2.774,4.027,4.146,3.655,6.196,3.250,9.260,2.646,13.840,1.988,20.684,1.597,30.913,1.239,46.200,0.989,69.048,0.800,103.195,0.652,154.228,0.534,230.500,0.438,344.491,0.361,514.854,0.299,769.469,0.268,1150.000,0.265)}

.func Cdg(V) {table(V,0.010,2.432,0.015,2.415,0.022,2.402,0.033,2.374,0.050,2.338,0.075,2.304,0.111,2.228,0.167,2.131,0.249,1.999,0.372,1.816,0.556,1.631,0.831,1.454,1.242,1.274,1.856,1.082,2.774,0.891,4.146,0.714,6.196,0.542,9.260,0.278,13.840,0.087,20.684,0.069,30.913,0.051,46.200,0.042,69.048,0.035,103.195,0.030,154.228,0.027,230.500,0.023,344.491,0.021,514.854,0.018,769.469,0.018,1150.000,0.018)}

.func Cgs(V) {table(V,-5.000,8.830,-4.750,8.114,-4.500,7.543,-4.250,7.119,-4.000,7.000,-3.750,6.992,-3.500,7.000,-3.250,7.013,-3.000,7.036,-2.750,7.066,-2.500,7.105,-2.250,7.157,-2.000,7.215,-1.750,7.283,-1.500,7.360,-1.250,7.447,-1.000,7.574,-0.750,7.806,-0.500,8.165,-0.250,8.545,0.000,8.957,0.250,9.281,0.500,9.600,0.750,9.861,1.000,10.080,1.250,10.289,1.500,10.506,1.750,10.677,2.000,10.825,2.250,10.914,2.500,10.997,2.750,11.054,3.000,11.101,3.250,11.139,3.500,11.170,3.750,11.198,4.000,11.218,4.250,11.240,4.500,11.258,4.750,11.274,5.000,11.289,6.000,11.338,7.000,11.376,8.000,11.409,9.000,11.436,10.000,11.461,11.000,11.484,12.000,11.503,13.000,11.522,14.000,11.538,15.000,11.555)}


.ENDS 52

.SUBCKT 53 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,15,75,22,125,28,175,33)}
.func TM(Tj) {1e-9*table(Tj,25,5,75,5,125,5,175,5)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.5325e-08,1,2.8183e-07,1.5,5.183e-06,2,9.5316e-05,2.5,0.0017529,3,0.032236,3.5,0.59282,4,1.4455,4.5,2.9798,5,5.5026,5.5,9.3723,6,14.9153,6.5,22.4903,7,32.4613,7.5,45.0713,8,60.189,8.5,77.9861,9,98.3473,9.5,121.4111,10,146.6415,10.5,172.6025,11,197.2541,11.5,223.2175,12,245.843,12.5,266.1296,13,281.7228,13.5,294.025,14,299.9655,14.5,305.7671,15,310.09,15.5,316.0117,16,323.5519,16.5,332.705,17,340.8523,17.5,348.704,18,355.7186)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99157,5.5,0.96229,6,0.9167,6.5,0.85375,7,0.77602,7.5,0.69397,8,0.6259,8.5,0.56501,9,0.51347,9.5,0.46848,10,0.43001,10.5,0.39635,11,0.37223,11.5,0.35035,12,0.34087,12.5,0.33794,13,0.34481,13.5,0.35985,14,0.38912,14.5,0.41421,15,0.43901,15.5,0.45604,16,0.4645,16.5,0.4645,17,0.4645,17.5,0.4645,18,0.4645)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00010739,3,0.00043573,3.5,0.00086808,4,0.0018669,4.5,0.0046052,5,0.0096418,5.5,0.018003,6,0.030643,6.5,0.048686,7,0.072946,7.5,0.10226,8,0.14342,8.5,0.19774,9,0.27447,9.5,0.36589,10,0.48619,10.5,0.68786,11,1.06,11.5,1.4092,12,1.7424,12.5,2.0394,13,2.2397,13.5,2.2519,14,2.2587,14.5,2.2588,15,2.2588,15.5,2.2588,16,2.2588,16.5,2.2588,17,2.2588,17.5,2.2588,18,2.2588)}
.func RTJ(Tj) {table(Tj,25,0.0042829,50,0.0053115,75,0.0064965,100,0.0085727,125,0.0097515,150,0.011898,175,0.014053)}
.func Vth(Tj) {table(Tj,25,-1.079,50,-0.71859,75,-0.41669,100,0,125,0.086468,150,0.38196,175,0.62487)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.51547,-4,0.49298,-3,0.46171,-2,0.42009,-1,0.36784,0,0.30908,1,0.25259,2,0.20266,3,0.16044,4,0.13249,5,0.11479,6,0.10907,7,0.10798,8,0.10451,9,0.10034,10,0.1,11,0.1,12,0.1,13,0.1,14,0.2301,15,0.44619,16,0.73689,17,1.0564,18,1.3493)}
.func Rs(Vgs) {table(Vgs,-5,0.0081483,-4,0.0084537,-3,0.0092665,-2,0.010758,-1,0.013032,0,0.015703,1,0.017891,2,0.019255,3,0.019876,4,0.020047,5,0.02127,6,0.024179,7,0.029731,8,0.038129,9,0.05012,10,0.065075,11,0.079641,12,0.10071,13,0.15917,14,0.6067,15,2.1344,16,6.3429,17,15.8493,18,33.2998)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,0.005331,50,0.0026404,75,0.00055819,100,0,125,-0.000857,150,0.00047683,175,0.0024111)}
.func VthBD(Tj) {table(Tj,25,-0.15963,50,-0.0836,75,-0.037146,100,0,125,0.1734,150,0.45354,175,0.75515)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,5.458,0.015,5.451,0.022,5.440,0.033,5.449,0.050,5.424,0.075,5.403,0.111,5.364,0.167,5.326,0.249,5.247,0.372,5.160,0.556,5.025,0.831,4.855,1.242,4.635,1.856,4.355,2.774,4.027,4.146,3.655,6.196,3.250,9.260,2.646,13.840,1.988,20.684,1.597,30.913,1.239,46.200,0.989,69.048,0.800,103.195,0.652,154.228,0.534,230.500,0.438,344.491,0.361,514.854,0.299,769.469,0.268,1150.000,0.265)}

.func Cdg(V) {table(V,0.010,2.432,0.015,2.415,0.022,2.402,0.033,2.374,0.050,2.338,0.075,2.304,0.111,2.228,0.167,2.131,0.249,1.999,0.372,1.816,0.556,1.631,0.831,1.454,1.242,1.274,1.856,1.082,2.774,0.891,4.146,0.714,6.196,0.542,9.260,0.278,13.840,0.087,20.684,0.069,30.913,0.051,46.200,0.042,69.048,0.035,103.195,0.030,154.228,0.027,230.500,0.023,344.491,0.021,514.854,0.018,769.469,0.018,1150.000,0.018)}

.func Cgs(V) {table(V,-5.000,8.830,-4.750,8.114,-4.500,7.543,-4.250,7.119,-4.000,7.000,-3.750,6.992,-3.500,7.000,-3.250,7.013,-3.000,7.036,-2.750,7.066,-2.500,7.105,-2.250,7.157,-2.000,7.215,-1.750,7.283,-1.500,7.360,-1.250,7.447,-1.000,7.574,-0.750,7.806,-0.500,8.165,-0.250,8.545,0.000,8.957,0.250,9.281,0.500,9.600,0.750,9.861,1.000,10.080,1.250,10.289,1.500,10.506,1.750,10.677,2.000,10.825,2.250,10.914,2.500,10.997,2.750,11.054,3.000,11.101,3.250,11.139,3.500,11.170,3.750,11.198,4.000,11.218,4.250,11.240,4.500,11.258,4.750,11.274,5.000,11.289,6.000,11.338,7.000,11.376,8.000,11.409,9.000,11.436,10.000,11.461,11.000,11.484,12.000,11.503,13.000,11.522,14.000,11.538,15.000,11.555)}


.ENDS 53

.SUBCKT 61 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.2982e-08,1,2.0225e-07,1.5,3.1509e-06,2,4.9088e-05,2.5,0.00076474,3,0.011914,3.5,0.18561,4,0.50404,4.5,1.1409,5,2.2481,5.5,4.0563,6,6.8063,6.5,10.7047,7,16.0049,7.5,22.9126,8,31.5494,8.5,42.1912,9,54.5122,9.5,68.3968,10,83.9085,10.5,100.863,11,118.5175,11.5,138.2135,12,157.1469,12.5,175.4006,13,189.7467,13.5,200.3557,14,205.9107,14.5,210.3371,15,213.8769,15.5,219.5219,16,227.0775,16.5,236.757,17,247.0227,17.5,257.1001,18,267.2358)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99444,5.5,0.97144,6,0.92724,6.5,0.87108,7,0.80127,7.5,0.72678,8,0.66109,8.5,0.60486,9,0.55937,9.5,0.52537,10,0.4975,10.5,0.47419,11,0.45986,11.5,0.43946,12,0.42662,12.5,0.42059,13,0.43357,13.5,0.46665,14,0.52582,14.5,0.5796,15,0.63066,15.5,0.66679,16,0.68558,16.5,0.68558,17,0.68558,17.5,0.68558,18,0.68558)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9266e-05,3,0.00015974,3.5,0.00034964,4,0.00074732,4.5,0.001529,5,0.0027841,5.5,0.0047254,6,0.0072501,6.5,0.01119,7,0.017804,7.5,0.026934,8,0.040122,8.5,0.054771,9,0.078503,9.5,0.11588,10,0.16675,10.5,0.24128,11,0.36574,11.5,0.4808,12,0.58083,12.5,0.66432,13,0.71941,13.5,0.72241,14,0.7241,14.5,0.72412,15,0.72412,15.5,0.72412,16,0.72412,16.5,0.72412,17,0.72412,17.5,0.72412,18,0.72412)}
.func RTJ(Tj) {table(Tj,25,0.012239,50,0.01375,75,0.01579,100,0.0197,125,0.021781,150,0.025846,175,0.030813)}
.func Vth(Tj) {table(Tj,25,-0.67733,50,-0.52234,75,-0.34322,100,0,125,-0.010908,150,0.16032,175,0.31008)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0012106,50,-0.001423,75,-0.0012215,100,0,125,-0.00016429,150,0.0013003,175,0.0031876)}
.func VthBD(Tj) {table(Tj,25,-2,50,-2,75,-1.547,100,0,125,-0.42328,150,0.53457,175,1.3329)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,3.116,0.015,3.118,0.022,3.119,0.033,3.114,0.050,3.106,0.075,3.092,0.111,3.070,0.167,3.054,0.249,3.015,0.372,2.962,0.556,2.894,0.831,2.805,1.242,2.682,1.856,2.525,2.774,2.338,4.146,2.127,6.196,1.883,9.260,1.588,13.840,1.153,20.684,0.919,30.913,0.714,46.200,0.574,69.048,0.468,103.195,0.382,154.228,0.313,230.500,0.257,344.491,0.212,514.854,0.176,769.469,0.170,1150.000,0.167)}

.func Cdg(V) {table(V,0.010,1.564,0.015,1.564,0.022,1.555,0.033,1.540,0.050,1.526,0.075,1.497,0.111,1.454,0.167,1.394,0.249,1.312,0.372,1.207,0.556,1.094,0.831,0.985,1.242,0.873,1.856,0.748,2.774,0.625,4.146,0.510,6.196,0.399,9.260,0.283,13.840,0.068,20.684,0.051,30.913,0.036,46.200,0.029,69.048,0.024,103.195,0.021,154.228,0.018,230.500,0.015,344.491,0.013,514.854,0.012,769.469,0.012,1150.000,0.012)}

.func Cgs(V) {table(V,-5.000,5.298,-4.750,4.915,-4.500,4.606,-4.250,4.336,-4.000,4.221,-3.750,4.196,-3.500,4.201,-3.250,4.212,-3.000,4.228,-2.750,4.249,-2.500,4.277,-2.250,4.312,-2.000,4.347,-1.750,4.383,-1.500,4.425,-1.250,4.481,-1.000,4.568,-0.750,4.705,-0.500,4.907,-0.250,5.158,0.000,5.411,0.250,5.637,0.500,5.828,0.750,5.979,1.000,6.117,1.250,6.239,1.500,6.355,1.750,6.465,2.000,6.566,2.250,6.642,2.500,6.708,2.750,6.754,3.000,6.793,3.250,6.820,3.500,6.845,3.750,6.864,4.000,6.881,4.250,6.893,4.500,6.905,4.750,6.915,5.000,6.924,6.000,6.954,7.000,6.976,8.000,6.993,9.000,7.008,10.000,7.020,11.000,7.031,12.000,7.042,13.000,7.051,14.000,7.060,15.000,7.068)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.763643e-01
.param Rs_ideal=1.087027e-02
.ENDS 61

.SUBCKT 62 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.2982e-08,1,2.0225e-07,1.5,3.1509e-06,2,4.9088e-05,2.5,0.00076474,3,0.011914,3.5,0.18561,4,0.50404,4.5,1.1409,5,2.2481,5.5,4.0563,6,6.8063,6.5,10.7047,7,16.0049,7.5,22.9126,8,31.5494,8.5,42.1912,9,54.5122,9.5,68.3968,10,83.9085,10.5,100.863,11,118.5175,11.5,138.2135,12,157.1469,12.5,175.4006,13,189.7467,13.5,200.3557,14,205.9107,14.5,210.3371,15,213.8769,15.5,219.5219,16,227.0775,16.5,236.757,17,247.0227,17.5,257.1001,18,267.2358)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99444,5.5,0.97144,6,0.92724,6.5,0.87108,7,0.80127,7.5,0.72678,8,0.66109,8.5,0.60486,9,0.55937,9.5,0.52537,10,0.4975,10.5,0.47419,11,0.45986,11.5,0.43946,12,0.42662,12.5,0.42059,13,0.43357,13.5,0.46665,14,0.52582,14.5,0.5796,15,0.63066,15.5,0.66679,16,0.68558,16.5,0.68558,17,0.68558,17.5,0.68558,18,0.68558)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9266e-05,3,0.00015974,3.5,0.00034964,4,0.00074732,4.5,0.001529,5,0.0027841,5.5,0.0047254,6,0.0072501,6.5,0.01119,7,0.017804,7.5,0.026934,8,0.040122,8.5,0.054771,9,0.078503,9.5,0.11588,10,0.16675,10.5,0.24128,11,0.36574,11.5,0.4808,12,0.58083,12.5,0.66432,13,0.71941,13.5,0.72241,14,0.7241,14.5,0.72412,15,0.72412,15.5,0.72412,16,0.72412,16.5,0.72412,17,0.72412,17.5,0.72412,18,0.72412)}
.func RTJ(Tj) {table(Tj,25,0.012239,50,0.01375,75,0.01579,100,0.0197,125,0.021781,150,0.025846,175,0.030813)}
.func Vth(Tj) {table(Tj,25,-0.67733,50,-0.52234,75,-0.34322,100,0,125,-0.010908,150,0.16032,175,0.31008)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.57636,-4,0.54594,-3,0.50981,-2,0.46658,-1,0.41721,0,0.36171,1,0.30294,2,0.24556,3,0.19427,4,0.15172,5,0.1203,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.01087,-4,0.011694,-3,0.012977,-2,0.014746,-1,0.01691,0,0.019396,1,0.021924,2,0.024179,3,0.025851,4,0.027347,5,0.029295,6,0.032784,7,0.036977,8,0.042498,9,0.049346,10,0.057633,11,0.067138,12,0.075784,13,0.087249,14,0.11538,15,0.14661,16,0.16337,17,0.16805,18,0.17066)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0012106,50,-0.001423,75,-0.0012215,100,0,125,-0.00016429,150,0.0013003,175,0.0031876)}
.func VthBD(Tj) {table(Tj,25,-2,50,-2,75,-1.547,100,0,125,-0.42328,150,0.53457,175,1.3329)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,3.116,0.015,3.118,0.022,3.119,0.033,3.114,0.050,3.106,0.075,3.092,0.111,3.070,0.167,3.054,0.249,3.015,0.372,2.962,0.556,2.894,0.831,2.805,1.242,2.682,1.856,2.525,2.774,2.338,4.146,2.127,6.196,1.883,9.260,1.588,13.840,1.153,20.684,0.919,30.913,0.714,46.200,0.574,69.048,0.468,103.195,0.382,154.228,0.313,230.500,0.257,344.491,0.212,514.854,0.176,769.469,0.170,1150.000,0.167)}

.func Cdg(V) {table(V,0.010,1.564,0.015,1.564,0.022,1.555,0.033,1.540,0.050,1.526,0.075,1.497,0.111,1.454,0.167,1.394,0.249,1.312,0.372,1.207,0.556,1.094,0.831,0.985,1.242,0.873,1.856,0.748,2.774,0.625,4.146,0.510,6.196,0.399,9.260,0.283,13.840,0.068,20.684,0.051,30.913,0.036,46.200,0.029,69.048,0.024,103.195,0.021,154.228,0.018,230.500,0.015,344.491,0.013,514.854,0.012,769.469,0.012,1150.000,0.012)}

.func Cgs(V) {table(V,-5.000,5.298,-4.750,4.915,-4.500,4.606,-4.250,4.336,-4.000,4.221,-3.750,4.196,-3.500,4.201,-3.250,4.212,-3.000,4.228,-2.750,4.249,-2.500,4.277,-2.250,4.312,-2.000,4.347,-1.750,4.383,-1.500,4.425,-1.250,4.481,-1.000,4.568,-0.750,4.705,-0.500,4.907,-0.250,5.158,0.000,5.411,0.250,5.637,0.500,5.828,0.750,5.979,1.000,6.117,1.250,6.239,1.500,6.355,1.750,6.465,2.000,6.566,2.250,6.642,2.500,6.708,2.750,6.754,3.000,6.793,3.250,6.820,3.500,6.845,3.750,6.864,4.000,6.881,4.250,6.893,4.500,6.905,4.750,6.915,5.000,6.924,6.000,6.954,7.000,6.976,8.000,6.993,9.000,7.008,10.000,7.020,11.000,7.031,12.000,7.042,13.000,7.051,14.000,7.060,15.000,7.068)}


.ENDS 62

.SUBCKT 63 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,10,75,16,125,25,150,28)}
.func TM(Tj) {1e-9*table(Tj,25,10,75,10,125,10,150,10)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,1.2982e-08,1,2.0225e-07,1.5,3.1509e-06,2,4.9088e-05,2.5,0.00076474,3,0.011914,3.5,0.18561,4,0.50404,4.5,1.1409,5,2.2481,5.5,4.0563,6,6.8063,6.5,10.7047,7,16.0049,7.5,22.9126,8,31.5494,8.5,42.1912,9,54.5122,9.5,68.3968,10,83.9085,10.5,100.863,11,118.5175,11.5,138.2135,12,157.1469,12.5,175.4006,13,189.7467,13.5,200.3557,14,205.9107,14.5,210.3371,15,213.8769,15.5,219.5219,16,227.0775,16.5,236.757,17,247.0227,17.5,257.1001,18,267.2358)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99444,5.5,0.97144,6,0.92724,6.5,0.87108,7,0.80127,7.5,0.72678,8,0.66109,8.5,0.60486,9,0.55937,9.5,0.52537,10,0.4975,10.5,0.47419,11,0.45986,11.5,0.43946,12,0.42662,12.5,0.42059,13,0.43357,13.5,0.46665,14,0.52582,14.5,0.5796,15,0.63066,15.5,0.66679,16,0.68558,16.5,0.68558,17,0.68558,17.5,0.68558,18,0.68558)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9266e-05,3,0.00015974,3.5,0.00034964,4,0.00074732,4.5,0.001529,5,0.0027841,5.5,0.0047254,6,0.0072501,6.5,0.01119,7,0.017804,7.5,0.026934,8,0.040122,8.5,0.054771,9,0.078503,9.5,0.11588,10,0.16675,10.5,0.24128,11,0.36574,11.5,0.4808,12,0.58083,12.5,0.66432,13,0.71941,13.5,0.72241,14,0.7241,14.5,0.72412,15,0.72412,15.5,0.72412,16,0.72412,16.5,0.72412,17,0.72412,17.5,0.72412,18,0.72412)}
.func RTJ(Tj) {table(Tj,25,0.012239,50,0.01375,75,0.01579,100,0.0197,125,0.021781,150,0.025846,175,0.030813)}
.func Vth(Tj) {table(Tj,25,-0.67733,50,-0.52234,75,-0.34322,100,0,125,-0.010908,150,0.16032,175,0.31008)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.57636,-4,0.54594,-3,0.50981,-2,0.46658,-1,0.41721,0,0.36171,1,0.30294,2,0.24556,3,0.19427,4,0.15172,5,0.1203,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.01087,-4,0.011694,-3,0.012977,-2,0.014746,-1,0.01691,0,0.019396,1,0.021924,2,0.024179,3,0.025851,4,0.027347,5,0.029295,6,0.032784,7,0.036977,8,0.042498,9,0.049346,10,0.057633,11,0.067138,12,0.075784,13,0.087249,14,0.11538,15,0.14661,16,0.16337,17,0.16805,18,0.17066)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0012106,50,-0.001423,75,-0.0012215,100,0,125,-0.00016429,150,0.0013003,175,0.0031876)}
.func VthBD(Tj) {table(Tj,25,-2,50,-2,75,-1.547,100,0,125,-0.42328,150,0.53457,175,1.3329)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,3.116,0.015,3.118,0.022,3.119,0.033,3.114,0.050,3.106,0.075,3.092,0.111,3.070,0.167,3.054,0.249,3.015,0.372,2.962,0.556,2.894,0.831,2.805,1.242,2.682,1.856,2.525,2.774,2.338,4.146,2.127,6.196,1.883,9.260,1.588,13.840,1.153,20.684,0.919,30.913,0.714,46.200,0.574,69.048,0.468,103.195,0.382,154.228,0.313,230.500,0.257,344.491,0.212,514.854,0.176,769.469,0.170,1150.000,0.167)}

.func Cdg(V) {table(V,0.010,1.564,0.015,1.564,0.022,1.555,0.033,1.540,0.050,1.526,0.075,1.497,0.111,1.454,0.167,1.394,0.249,1.312,0.372,1.207,0.556,1.094,0.831,0.985,1.242,0.873,1.856,0.748,2.774,0.625,4.146,0.510,6.196,0.399,9.260,0.283,13.840,0.068,20.684,0.051,30.913,0.036,46.200,0.029,69.048,0.024,103.195,0.021,154.228,0.018,230.500,0.015,344.491,0.013,514.854,0.012,769.469,0.012,1150.000,0.012)}

.func Cgs(V) {table(V,-5.000,5.298,-4.750,4.915,-4.500,4.606,-4.250,4.336,-4.000,4.221,-3.750,4.196,-3.500,4.201,-3.250,4.212,-3.000,4.228,-2.750,4.249,-2.500,4.277,-2.250,4.312,-2.000,4.347,-1.750,4.383,-1.500,4.425,-1.250,4.481,-1.000,4.568,-0.750,4.705,-0.500,4.907,-0.250,5.158,0.000,5.411,0.250,5.637,0.500,5.828,0.750,5.979,1.000,6.117,1.250,6.239,1.500,6.355,1.750,6.465,2.000,6.566,2.250,6.642,2.500,6.708,2.750,6.754,3.000,6.793,3.250,6.820,3.500,6.845,3.750,6.864,4.000,6.881,4.250,6.893,4.500,6.905,4.750,6.915,5.000,6.924,6.000,6.954,7.000,6.976,8.000,6.993,9.000,7.008,10.000,7.020,11.000,7.031,12.000,7.042,13.000,7.051,14.000,7.060,15.000,7.068)}


.ENDS 63

.SUBCKT 71 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AF)}
.model IdealDiode D(level=1 Is={AF*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AF)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,9.97e-09,1,1.1928e-07,1.5,1.4271e-06,2,1.7074e-05,2.5,0.00020427,3,0.0024439,3.5,0.029239,4,0.34981,4.5,0.77628,5,1.5194,5.5,2.6878,6,4.4415,6.5,6.9333,7,10.292,7.5,14.6357,8,20.15,8.5,26.9386,9,35.1106,9.5,44.6845,10,56.003,10.5,67.8842,11,80.8186,11.5,92.7067,12,104.2473,12.5,116.1648,13,127.927,13.5,138.5774,14,148.0267,14.5,156.7164,15,163.3052,15.5,169.1133,16,173.8234,16.5,179.8378,17,185.5888,17.5,190.8509,18,196.7021)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99306,6,0.9662,6.5,0.92061,7,0.86095,7.5,0.78999,8,0.71198,8.5,0.64305,9,0.58326,9.5,0.52984,10,0.47657,10.5,0.4404,11,0.41057,11.5,0.39833,12,0.39309,12.5,0.3904,13,0.38581,13.5,0.38702,14,0.39235,14.5,0.39836,15,0.41299,15.5,0.42639,16,0.43849,16.5,0.43849,17,0.43849,17.5,0.43849,18,0.43849)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.7718e-05,3.5,0.0002469,4,0.00046812,4.5,0.0008796,5,0.00162,5.5,0.0027135,6,0.0042045,6.5,0.0062194,7,0.0092754,7.5,0.013708,8,0.019053,8.5,0.024989,9,0.0327,9.5,0.040871,10,0.048897,10.5,0.070468,11,0.094808,11.5,0.20315,12,0.36665,12.5,0.53807,13,0.69636,13.5,0.85103,14,0.91936,14.5,0.93085,15,0.93286,15.5,0.9331,16,0.93314,16.5,0.93314,17,0.93314,17.5,0.93314,18,0.93314)}
.func RTJ(Tj) {table(Tj,25,0.015001,50,0.017353,75,0.020527,100,0.028959,125,0.029825,150,0.035981,175,0.043372)}
.func Vth(Tj) {table(Tj,25,-0.85922,50,-0.65491,75,-0.42628,100,0,125,-0.012587,150,0.17045,175,0.33741)}


*** Reverse Conduction Parameters ***
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0029641,50,-0.0018129,75,-0.0012143,100,0,125,-0.00029378,150,0.0018505,175,0.0046501)}
.func VthBD(Tj) {table(Tj,25,-3.8532,50,-1.169,75,-1.0517,100,0,125,-0.30056,150,0.67489,175,1.5086)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,2.290,0.015,2.267,0.022,2.266,0.033,2.267,0.050,2.259,0.075,2.247,0.111,2.232,0.167,2.220,0.249,2.180,0.372,2.149,0.556,2.096,0.831,2.025,1.242,1.936,1.856,1.820,2.774,1.685,4.146,1.529,6.196,1.359,9.260,1.137,13.840,0.830,20.684,0.661,30.913,0.514,46.200,0.413,69.048,0.336,103.195,0.274,154.228,0.225,230.500,0.186,344.491,0.154,514.854,0.129,769.469,0.122,1150.000,0.120)}

.func Cdg(V) {table(V,0.010,1.043,0.015,1.043,0.022,1.039,0.033,1.027,0.050,1.016,0.075,0.997,0.111,0.968,0.167,0.926,0.249,0.872,0.372,0.793,0.556,0.711,0.831,0.633,1.242,0.555,1.856,0.473,2.774,0.391,4.146,0.315,6.196,0.242,9.260,0.158,13.840,0.038,20.684,0.029,30.913,0.021,46.200,0.018,69.048,0.015,103.195,0.013,154.228,0.011,230.500,0.010,344.491,0.009,514.854,0.008,769.469,0.008,1150.000,0.008)}

.func Cgs(V) {table(V,-5.000,3.239,-4.750,3.024,-4.500,2.835,-4.250,2.714,-4.000,2.680,-3.750,2.679,-3.500,2.683,-3.250,2.691,-3.000,2.703,-2.750,2.718,-2.500,2.736,-2.250,2.757,-2.000,2.780,-1.750,2.804,-1.500,2.832,-1.250,2.870,-1.000,2.927,-0.750,3.018,-0.500,3.156,-0.250,3.315,0.000,3.468,0.250,3.615,0.500,3.738,0.750,3.846,1.000,3.944,1.250,4.033,1.500,4.125,1.750,4.210,2.000,4.278,2.250,4.333,2.500,4.375,2.750,4.408,3.000,4.435,3.250,4.457,3.500,4.474,3.750,4.488,4.000,4.502,4.250,4.514,4.500,4.524,4.750,4.533,5.000,4.542,6.000,4.571,7.000,4.595,8.000,4.614,9.000,4.630,10.000,4.643,11.000,4.655,12.000,4.664,13.000,4.672,14.000,4.680,15.000,4.686)}


.param Is_ideal=1.000000e-02
.param n_ideal=5.996503e-01
.param Rs_ideal=1.514717e-02
.ENDS 71

.SUBCKT 72 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AF*uplim(Is(V(G,S)+VthBD(V(Tj)))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,9.97e-09,1,1.1928e-07,1.5,1.4271e-06,2,1.7074e-05,2.5,0.00020427,3,0.0024439,3.5,0.029239,4,0.34981,4.5,0.77628,5,1.5194,5.5,2.6878,6,4.4415,6.5,6.9333,7,10.292,7.5,14.6357,8,20.15,8.5,26.9386,9,35.1106,9.5,44.6845,10,56.003,10.5,67.8842,11,80.8186,11.5,92.7067,12,104.2473,12.5,116.1648,13,127.927,13.5,138.5774,14,148.0267,14.5,156.7164,15,163.3052,15.5,169.1133,16,173.8234,16.5,179.8378,17,185.5888,17.5,190.8509,18,196.7021)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99306,6,0.9662,6.5,0.92061,7,0.86095,7.5,0.78999,8,0.71198,8.5,0.64305,9,0.58326,9.5,0.52984,10,0.47657,10.5,0.4404,11,0.41057,11.5,0.39833,12,0.39309,12.5,0.3904,13,0.38581,13.5,0.38702,14,0.39235,14.5,0.39836,15,0.41299,15.5,0.42639,16,0.43849,16.5,0.43849,17,0.43849,17.5,0.43849,18,0.43849)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.7718e-05,3.5,0.0002469,4,0.00046812,4.5,0.0008796,5,0.00162,5.5,0.0027135,6,0.0042045,6.5,0.0062194,7,0.0092754,7.5,0.013708,8,0.019053,8.5,0.024989,9,0.0327,9.5,0.040871,10,0.048897,10.5,0.070468,11,0.094808,11.5,0.20315,12,0.36665,12.5,0.53807,13,0.69636,13.5,0.85103,14,0.91936,14.5,0.93085,15,0.93286,15.5,0.9331,16,0.93314,16.5,0.93314,17,0.93314,17.5,0.93314,18,0.93314)}
.func RTJ(Tj) {table(Tj,25,0.015001,50,0.017353,75,0.020527,100,0.028959,125,0.029825,150,0.035981,175,0.043372)}
.func Vth(Tj) {table(Tj,25,-0.85922,50,-0.65491,75,-0.42628,100,0,125,-0.012587,150,0.17045,175,0.33741)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.59965,-4,0.57201,-3,0.53658,-2,0.49301,-1,0.443,0,0.38604,1,0.3245,2,0.26534,3,0.21149,4,0.16799,5,0.13596,6,0.11622,7,0.10456,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.015147,-4,0.016156,-3,0.017911,-2,0.020419,-1,0.023458,0,0.02694,1,0.030657,2,0.033828,3,0.036284,4,0.03835,5,0.040914,6,0.045465,7,0.052702,8,0.059777,9,0.067743,10,0.074538,11,0.081168,12,0.089875,13,0.099267,14,0.10804,15,0.117,16,0.12396,17,0.12354,18,0.12325)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0029641,50,-0.0018129,75,-0.0012143,100,0,125,-0.00029378,150,0.0018505,175,0.0046501)}
.func VthBD(Tj) {table(Tj,25,-3.8532,50,-1.169,75,-1.0517,100,0,125,-0.30056,150,0.67489,175,1.5086)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,2.290,0.015,2.267,0.022,2.266,0.033,2.267,0.050,2.259,0.075,2.247,0.111,2.232,0.167,2.220,0.249,2.180,0.372,2.149,0.556,2.096,0.831,2.025,1.242,1.936,1.856,1.820,2.774,1.685,4.146,1.529,6.196,1.359,9.260,1.137,13.840,0.830,20.684,0.661,30.913,0.514,46.200,0.413,69.048,0.336,103.195,0.274,154.228,0.225,230.500,0.186,344.491,0.154,514.854,0.129,769.469,0.122,1150.000,0.120)}

.func Cdg(V) {table(V,0.010,1.043,0.015,1.043,0.022,1.039,0.033,1.027,0.050,1.016,0.075,0.997,0.111,0.968,0.167,0.926,0.249,0.872,0.372,0.793,0.556,0.711,0.831,0.633,1.242,0.555,1.856,0.473,2.774,0.391,4.146,0.315,6.196,0.242,9.260,0.158,13.840,0.038,20.684,0.029,30.913,0.021,46.200,0.018,69.048,0.015,103.195,0.013,154.228,0.011,230.500,0.010,344.491,0.009,514.854,0.008,769.469,0.008,1150.000,0.008)}

.func Cgs(V) {table(V,-5.000,3.239,-4.750,3.024,-4.500,2.835,-4.250,2.714,-4.000,2.680,-3.750,2.679,-3.500,2.683,-3.250,2.691,-3.000,2.703,-2.750,2.718,-2.500,2.736,-2.250,2.757,-2.000,2.780,-1.750,2.804,-1.500,2.832,-1.250,2.870,-1.000,2.927,-0.750,3.018,-0.500,3.156,-0.250,3.315,0.000,3.468,0.250,3.615,0.500,3.738,0.750,3.846,1.000,3.944,1.250,4.033,1.500,4.125,1.750,4.210,2.000,4.278,2.250,4.333,2.500,4.375,2.750,4.408,3.000,4.435,3.250,4.457,3.500,4.474,3.750,4.488,4.000,4.502,4.250,4.514,4.500,4.524,4.750,4.533,5.000,4.542,6.000,4.571,7.000,4.595,8.000,4.614,9.000,4.630,10.000,4.643,11.000,4.655,12.000,4.664,13.000,4.672,14.000,4.680,15.000,4.686)}


.ENDS 72

.SUBCKT 73 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AF*IdT(V(D,s2),V(G,S)+Vths+Vth(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AF)}
R1 s2 S 1k
Rbypass D S 100G

.func IdT(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((RdBD(V(Tj))+Rs(V(G,S)+VthBD(V(Tj))))/(AF))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S)+VthBD(V(Tj)))*tau(V(Tj))*(-1+exp(dnlim(V(S,d2),-1n,1m)/(n(V(G,S)+VthBD(V(Tj)))))),1e4,1m)}
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AF*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,18,75,19,125,22,150,24)}
.func TM(Tj) {1e-9*table(Tj,25,6,75,6,125,6,150,6)}

*** CV Model ***

G_cdg    D    G    Value {AF*1e-9*Cdg(V(D,G))*ddt(V(D,G))}
G_cds    d2   S    Value {AF*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AF*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-10,0.5,9.97e-09,1,1.1928e-07,1.5,1.4271e-06,2,1.7074e-05,2.5,0.00020427,3,0.0024439,3.5,0.029239,4,0.34981,4.5,0.77628,5,1.5194,5.5,2.6878,6,4.4415,6.5,6.9333,7,10.292,7.5,14.6357,8,20.15,8.5,26.9386,9,35.1106,9.5,44.6845,10,56.003,10.5,67.8842,11,80.8186,11.5,92.7067,12,104.2473,12.5,116.1648,13,127.927,13.5,138.5774,14,148.0267,14.5,156.7164,15,163.3052,15.5,169.1133,16,173.8234,16.5,179.8378,17,185.5888,17.5,190.8509,18,196.7021)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99306,6,0.9662,6.5,0.92061,7,0.86095,7.5,0.78999,8,0.71198,8.5,0.64305,9,0.58326,9.5,0.52984,10,0.47657,10.5,0.4404,11,0.41057,11.5,0.39833,12,0.39309,12.5,0.3904,13,0.38581,13.5,0.38702,14,0.39235,14.5,0.39836,15,0.41299,15.5,0.42639,16,0.43849,16.5,0.43849,17,0.43849,17.5,0.43849,18,0.43849)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.7718e-05,3.5,0.0002469,4,0.00046812,4.5,0.0008796,5,0.00162,5.5,0.0027135,6,0.0042045,6.5,0.0062194,7,0.0092754,7.5,0.013708,8,0.019053,8.5,0.024989,9,0.0327,9.5,0.040871,10,0.048897,10.5,0.070468,11,0.094808,11.5,0.20315,12,0.36665,12.5,0.53807,13,0.69636,13.5,0.85103,14,0.91936,14.5,0.93085,15,0.93286,15.5,0.9331,16,0.93314,16.5,0.93314,17,0.93314,17.5,0.93314,18,0.93314)}
.func RTJ(Tj) {table(Tj,25,0.015001,50,0.017353,75,0.020527,100,0.028959,125,0.029825,150,0.035981,175,0.043372)}
.func Vth(Tj) {table(Tj,25,-0.85922,50,-0.65491,75,-0.42628,100,0,125,-0.012587,150,0.17045,175,0.33741)}


*** Reverse Conduction Parameters ***
.func n(Vgs) {table(Vgs,-5,0.59965,-4,0.57201,-3,0.53658,-2,0.49301,-1,0.443,0,0.38604,1,0.3245,2,0.26534,3,0.21149,4,0.16799,5,0.13596,6,0.11622,7,0.10456,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.015147,-4,0.016156,-3,0.017911,-2,0.020419,-1,0.023458,0,0.02694,1,0.030657,2,0.033828,3,0.036284,4,0.03835,5,0.040914,6,0.045465,7,0.052702,8,0.059777,9,0.067743,10,0.074538,11,0.081168,12,0.089875,13,0.099267,14,0.10804,15,0.117,16,0.12396,17,0.12354,18,0.12325)}
.func Is(Vgs) {table(Vgs,-5,0.01,-4,0.01,-3,0.01,-2,0.01,-1,0.01,0,0.01,1,0.01,2,0.01,3,0.01,4,0.01,5,0.01,6,0.01,7,0.01,8,0.01,9,0.01,10,0.01,11,0.01,12,0.01,13,0.01,14,0.01,15,0.01,16,0.01,17,0.01,18,0.01)}
.func RdBD(Tj) {table(Tj,25,-0.0029641,50,-0.0018129,75,-0.0012143,100,0,125,-0.00029378,150,0.0018505,175,0.0046501)}
.func VthBD(Tj) {table(Tj,25,-3.8532,50,-1.169,75,-1.0517,100,0,125,-0.30056,150,0.67489,175,1.5086)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.010,2.290,0.015,2.267,0.022,2.266,0.033,2.267,0.050,2.259,0.075,2.247,0.111,2.232,0.167,2.220,0.249,2.180,0.372,2.149,0.556,2.096,0.831,2.025,1.242,1.936,1.856,1.820,2.774,1.685,4.146,1.529,6.196,1.359,9.260,1.137,13.840,0.830,20.684,0.661,30.913,0.514,46.200,0.413,69.048,0.336,103.195,0.274,154.228,0.225,230.500,0.186,344.491,0.154,514.854,0.129,769.469,0.122,1150.000,0.120)}

.func Cdg(V) {table(V,0.010,1.043,0.015,1.043,0.022,1.039,0.033,1.027,0.050,1.016,0.075,0.997,0.111,0.968,0.167,0.926,0.249,0.872,0.372,0.793,0.556,0.711,0.831,0.633,1.242,0.555,1.856,0.473,2.774,0.391,4.146,0.315,6.196,0.242,9.260,0.158,13.840,0.038,20.684,0.029,30.913,0.021,46.200,0.018,69.048,0.015,103.195,0.013,154.228,0.011,230.500,0.010,344.491,0.009,514.854,0.008,769.469,0.008,1150.000,0.008)}

.func Cgs(V) {table(V,-5.000,3.239,-4.750,3.024,-4.500,2.835,-4.250,2.714,-4.000,2.680,-3.750,2.679,-3.500,2.683,-3.250,2.691,-3.000,2.703,-2.750,2.718,-2.500,2.736,-2.250,2.757,-2.000,2.780,-1.750,2.804,-1.500,2.832,-1.250,2.870,-1.000,2.927,-0.750,3.018,-0.500,3.156,-0.250,3.315,0.000,3.468,0.250,3.615,0.500,3.738,0.750,3.846,1.000,3.944,1.250,4.033,1.500,4.125,1.750,4.210,2.000,4.278,2.250,4.333,2.500,4.375,2.750,4.408,3.000,4.435,3.250,4.457,3.500,4.474,3.750,4.488,4.000,4.502,4.250,4.514,4.500,4.524,4.750,4.533,5.000,4.542,6.000,4.571,7.000,4.595,8.000,4.614,9.000,4.630,10.000,4.643,11.000,4.655,12.000,4.664,13.000,4.672,14.000,4.680,15.000,4.686)}


.ENDS 73



**********************************************************************
******************** SiC Schottky Models *****************************
**********************************************************************
*E1417-11_CPM3-1700-0020A
*** SiC Schottky Diode Model ***
*CPW6-1200-Z050A

.SUBCKT 101 A K Tj Id

** Conduction **
GRbd a1 K Value {V(a1,K)/((Rs(V(Tj)))/AF)}
Rbypass a1 K 1k
GDiode A a1 Value {V(N)}
EDiode N 0 Value {AF*uplim(Is*(-1+exp(dnlim(V(A,a1),-1n,1m)/(n(V(Tj))))),1e4,1m)}
** Capacitance **
G_CJ A a1 Value {AF*1e-9*Cj(V(a1,A))*ddt(V(A,a1))}

Ecurr Id 0 Value {V(N)}

.param Is = 1e-06
.func n(Tj) {table(Tj,25,0.05747,75,0.054122,125,0.050427,175,0.047078)}
.func Rs(Tj) {table(Tj,25,0.0090095,75,0.01181,125,0.015863,175,0.02094)}

.func Cj(V) {table(V,0.0010,4.3938,0.0016,4.3933,0.0026,4.3926,0.0043,4.3914,0.0069,4.3895,0.0112,4.3864,0.0181,4.3813,0.0293,4.3731,0.0475,4.3599,0.0770,4.3384,0.1248,4.3035,0.2023,4.2150,0.3277,4.0832,0.5311,3.8945,0.8606,3.6466,1.3945,3.3299,2.2596,2.9618,3.6615,2.5628,5.9331,2.1609,9.6142,1.7864,15.5790,1.4551,25.2444,1.1339,40.9065,0.8111,66.2857,0.6079,107.4105,0.4685,174.0498,0.3651,282.0333,0.2865,457.0118,0.2265,740.5499,0.1928,1200.0000,0.1907)}

.ENDS 101
*CPM3-1200-0016A_RevA-4
*** SiC Schottky Diode Model ***
*CPW6-1700-Z050A

.SUBCKT 102 A K Tj Id

** Conduction **
GRbd a1 K Value {V(a1,K)/((Rs(V(Tj)))/AF)}
Rbypass a1 K 1k
GDiode A a1 Value {V(N)}
EDiode N 0 Value {AF*uplim(Is*(-1+exp(dnlim(V(A,a1),-1n,1m)/(n(V(Tj))))),1e4,1m)}
** Capacitance **
G_CJ A a1 Value {AF*1e-9*Cj(V(a1,A))*ddt(V(A,a1))}

Ecurr Id 0 Value {V(N)}

.param Is = 1e-06
.func n(Tj) {table(Tj,25,0.056241,75,0.052507,125,0.048934,175,0.051447)}
.func Rs(Tj) {table(Tj,25,0.009767,75,0.013228,125,0.017929,175,0.022621)}

.func Cj(V) {table(V,0.0010,5.9067,0.0016,5.9066,0.0026,5.9063,0.0043,5.9059,0.0069,5.9052,0.0112,5.9041,0.0181,5.9024,0.0293,5.8995,0.0475,5.8948,0.0770,5.8873,0.1248,5.8508,0.2023,5.7541,0.3277,5.6057,0.5311,5.3997,0.8606,5.1030,1.3945,4.7105,2.2596,4.2477,3.6615,3.7294,5.9331,3.2006,9.6142,2.6984,15.5790,2.2437,25.2444,1.8363,40.9065,1.4578,66.2857,0.9332,107.4105,0.6621,174.0498,0.4950,282.0333,0.3787,457.0118,0.2945,740.5499,0.2556,1200.0000,0.2535)}

.ENDS 102
