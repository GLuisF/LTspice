Version 4
SHEET 1 2212 2244
WIRE -528 -256 -528 -352
WIRE -528 -208 -528 -256
WIRE -528 -96 -528 -128
WIRE -480 896 -480 864
WIRE -480 1008 -480 976
WIRE -464 -352 -528 -352
WIRE -416 864 -480 864
WIRE -416 1360 -480 1360
WIRE -416 1392 -480 1392
WIRE -368 2016 -368 1984
WIRE -368 2096 -368 2016
WIRE -368 2208 -368 2176
WIRE -352 336 -400 336
WIRE -336 464 -400 464
WIRE -336 592 -400 592
WIRE -336 624 -400 624
WIRE -304 -256 -528 -256
WIRE -304 1984 -368 1984
WIRE -288 16 -288 -32
WIRE -288 112 -288 80
WIRE -288 1440 -480 1440
WIRE -288 1824 -288 1440
WIRE -240 -32 -288 -32
WIRE -240 1744 -240 1488
WIRE -224 336 -272 336
WIRE -224 416 -224 336
WIRE -224 1360 -352 1360
WIRE -208 1312 -208 1232
WIRE -208 1696 -208 1616
WIRE -192 416 -224 416
WIRE -192 464 -272 464
WIRE -176 -256 -224 -256
WIRE -176 -256 -176 -352
WIRE -176 -208 -176 -224
WIRE -176 1312 -208 1312
WIRE -176 1360 -224 1360
WIRE -176 1696 -208 1696
WIRE -176 1744 -240 1744
WIRE -128 -352 -176 -352
WIRE -112 -256 -176 -256
WIRE -112 -224 -176 -224
WIRE -112 592 -272 592
WIRE -112 592 -112 512
WIRE -96 1440 -288 1440
WIRE -96 1440 -96 1408
WIRE -96 1824 -288 1824
WIRE -96 1824 -96 1792
WIRE -64 0 -64 -32
WIRE -64 112 -64 80
WIRE 0 -352 -48 -352
WIRE 0 -240 -48 -240
WIRE 0 -240 0 -352
WIRE 16 1232 -208 1232
WIRE 16 1360 0 1360
WIRE 16 1360 16 1232
WIRE 16 1616 -208 1616
WIRE 16 1744 0 1744
WIRE 16 1744 16 1616
WIRE 32 2080 -32 2080
WIRE 48 416 -32 416
WIRE 48 1312 -16 1312
WIRE 48 1312 48 1184
WIRE 48 1696 -16 1696
WIRE 48 1696 48 1568
WIRE 64 -240 0 -240
WIRE 64 -32 -64 -32
WIRE 80 896 80 864
WIRE 80 1008 80 976
WIRE 112 1312 112 1232
WIRE 112 1696 112 1616
WIRE 144 1312 112 1312
WIRE 144 1360 16 1360
WIRE 144 1696 112 1696
WIRE 144 1744 16 1744
WIRE 160 864 80 864
WIRE 160 2016 -368 2016
WIRE 160 2080 96 2080
WIRE 208 -240 144 -240
WIRE 208 -32 144 -32
WIRE 224 -176 224 -192
WIRE 224 32 224 16
WIRE 224 1440 -96 1440
WIRE 224 1440 224 1408
WIRE 224 1824 -96 1824
WIRE 224 1824 224 1792
WIRE 272 -176 272 -192
WIRE 272 32 272 16
WIRE 288 -176 272 -176
WIRE 304 32 272 32
WIRE 336 1232 112 1232
WIRE 336 1360 320 1360
WIRE 336 1360 336 1232
WIRE 336 1616 112 1616
WIRE 336 1744 320 1744
WIRE 336 1744 336 1616
WIRE 368 1312 304 1312
WIRE 368 1312 368 1184
WIRE 368 1696 304 1696
WIRE 368 1696 368 1568
WIRE 384 2064 336 2064
WIRE 432 1312 432 1232
WIRE 432 1696 432 1616
WIRE 464 -240 288 -240
WIRE 464 -32 288 -32
WIRE 464 -32 464 -240
WIRE 464 160 464 -32
WIRE 464 1312 432 1312
WIRE 464 1360 336 1360
WIRE 464 1696 432 1696
WIRE 464 1744 336 1744
WIRE 512 -32 464 -32
WIRE 528 32 528 16
WIRE 544 208 544 192
WIRE 544 1440 224 1440
WIRE 544 1440 544 1408
WIRE 544 1824 224 1824
WIRE 544 1824 544 1792
WIRE 576 -240 464 -240
WIRE 576 32 576 16
WIRE 576 160 464 160
WIRE 576 192 544 192
WIRE 608 32 576 32
WIRE 608 896 608 864
WIRE 608 1008 608 976
WIRE 656 1232 432 1232
WIRE 656 1360 640 1360
WIRE 656 1360 656 1232
WIRE 656 1616 432 1616
WIRE 656 1744 640 1744
WIRE 656 1744 656 1616
WIRE 688 864 608 864
WIRE 688 1312 624 1312
WIRE 688 1312 688 1184
WIRE 688 1696 624 1696
WIRE 688 1696 688 1568
WIRE 752 -240 640 -240
WIRE 752 -32 592 -32
WIRE 752 -32 752 -240
WIRE 752 176 640 176
WIRE 752 176 752 -32
WIRE 752 1312 752 1232
WIRE 752 1696 752 1616
WIRE 784 1312 752 1312
WIRE 784 1360 656 1360
WIRE 784 1696 752 1696
WIRE 784 1744 656 1744
WIRE 800 240 800 208
WIRE 816 -32 752 -32
WIRE 848 176 752 176
WIRE 848 208 800 208
WIRE 864 1440 544 1440
WIRE 864 1440 864 1408
WIRE 864 1824 544 1824
WIRE 864 1824 864 1792
WIRE 960 192 912 192
WIRE 976 1232 752 1232
WIRE 976 1360 960 1360
WIRE 976 1360 976 1232
WIRE 976 1616 752 1616
WIRE 976 1744 960 1744
WIRE 976 1744 976 1616
WIRE 1008 1312 944 1312
WIRE 1008 1312 1008 1184
WIRE 1008 1360 976 1360
WIRE 1008 1488 -240 1488
WIRE 1008 1488 1008 1360
WIRE 1008 1696 944 1696
WIRE 1008 1696 1008 1568
FLAG 224 -176 0
FLAG 224 32 0
FLAG 288 -176 sw_meas
IOPIN 288 -176 In
FLAG 304 32 sw_ref
IOPIN 304 32 In
FLAG 528 32 0
FLAG 544 208 0
FLAG 608 32 sw_zero
IOPIN 608 32 In
FLAG -528 -96 0
FLAG -64 112 0
FLAG 80 1008 0
FLAG 608 1008 0
FLAG 160 864 sw_zero
IOPIN 160 864 Out
FLAG 688 864 sw_meas
IOPIN 688 864 Out
FLAG -400 336 +5V
FLAG -400 464 sw_meas
FLAG 800 240 0
FLAG 960 192 ff_reset
IOPIN 960 192 Out
FLAG -400 624 ff_reset
FLAG 48 416 sw_ref
IOPIN 48 416 Out
FLAG -288 112 0
FLAG -240 -32 +5V
FLAG -400 592 sw_zero
FLAG -64 -32 +2.5V
FLAG 48 1184 q0
FLAG 368 1184 q1
FLAG 688 1184 q2
FLAG 1008 1184 q3
FLAG 48 1568 q4
FLAG 368 1568 q5
FLAG 688 1568 q6
FLAG 1008 1568 q7
FLAG -480 1440 sw_zero
FLAG -224 1360 gclk
FLAG -416 864 clk1
IOPIN -416 864 Out
FLAG -480 1008 0
FLAG -480 1360 clk1
FLAG -480 1392 sw_ref
FLAG -368 2208 0
FLAG -304 1984 sum
IOPIN -304 1984 Out
FLAG -32 2080 clk1
FLAG 384 2064 sum_1
IOPIN 384 2064 Out
FLAG -176 -208 0
FLAG -464 -352 meas
FLAG 816 -32 int1
IOPIN 816 -32 Out
SYMBOL cap 576 -224 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL sw 496 -32 R270
WINDOW 0 38 2 VRight 0
WINDOW 3 42 82 VRight 0
SYMATTR InstName S1
SYMATTR Value sw1
SYMBOL res 48 -224 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL sw 192 -240 R270
WINDOW 0 38 2 VRight 0
WINDOW 3 43 86 VRight 0
SYMATTR InstName S2
SYMATTR Value sw1
SYMBOL res 48 -16 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL sw 192 -32 R270
WINDOW 0 38 2 VRight 0
WINDOW 3 41 87 VRight 0
SYMATTR InstName S3
SYMATTR Value sw1
SYMBOL Opamps\\opamp 608 112 R0
WINDOW 3 11 94 Left 0
SYMATTR InstName U1
SYMBOL voltage -528 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vmeas
SYMATTR Value SINE(2 0.5 50)
SYMBOL voltage -64 -16 R0
SYMATTR InstName Vref
SYMATTR Value 2.5V
SYMBOL voltage 80 880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0 10n 10n 100m 400m)
SYMBOL voltage 608 880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 100m 10n 10n 100m 400m)
SYMBOL Digital\\dflop -112 368 R0
SYMATTR InstName A1
SYMATTR Value2 td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\inv -336 400 R0
SYMATTR InstName A2
SYMATTR SpiceLine Vhigh=5
SYMBOL res -368 352 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL Opamps\\opamp 880 128 R0
WINDOW 3 11 94 Left 0
SYMATTR Value comp
SYMATTR InstName U2
SYMBOL Misc\\cell -288 16 R0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL Digital\\or -304 544 R0
SYMATTR InstName A3
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop -96 1264 R0
SYMATTR InstName A4
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop 224 1264 R0
SYMATTR InstName A5
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop 544 1264 R0
SYMATTR InstName A6
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop 864 1264 R0
SYMATTR InstName A7
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop -96 1648 R0
SYMATTR InstName A8
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop 224 1648 R0
SYMATTR InstName A9
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop 544 1648 R0
SYMATTR InstName A10
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\dflop 864 1648 R0
SYMATTR InstName A11
SYMATTR Value2 Td=10n
SYMATTR SpiceLine Vhigh=5
SYMBOL Digital\\and -384 1312 R0
SYMATTR InstName A12
SYMATTR SpiceLine Vhigh=5
SYMBOL voltage -480 880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 0 10n 10n {0.5/f1} {1/f1})
SYMBOL bv -368 2080 R0
SYMATTR InstName B1
SYMATTR Value V=(V(q0)+2*V(q1)+4*V(q2)+8*V(q3)+16*V(q4)+32*V(q5)+64*V(q6)+128*V(q7))/5
SYMBOL SpecialFunctions\\sample 240 2048 R0
SYMATTR InstName A13
SYMATTR SpiceLine ref=2.5
SYMATTR SpiceLine2 vhigh=1e4
SYMBOL Digital\\inv 32 2016 R0
SYMATTR InstName A14
SYMATTR SpiceLine Vhigh=5
SYMBOL Opamps\\opamp -80 -304 R0
WINDOW 3 11 94 Left 0
SYMATTR InstName U3
SYMBOL res -320 -240 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -144 -336 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R5
SYMATTR Value 10k
TEXT 296 304 Left 0 !* OPAMP, output limited to +/-5V\n.subckt opamp in- in+ out\n.param V0=100000\n.param Rout=100\nB1 0 out  I=limit( ({-5/Rout}), ((V(in+)-V(in-))*{V0/Rout}),  ({5/Rout}) )\nRo out 0 {Rout}\n.ends
TEXT -512 -608 Left 0 !.tran 0 400m 0 10u
TEXT -512 -568 Left 0 !.options plotwinsize=0
TEXT 416 -416 Left 0 !* SWITCH\n.model sw1 SW(Ron=100 Roff=1G Vt=2.5V Vh=0)
TEXT 288 520 Left 0 !* COMPARATOR,  output limited to 0/5V, small hysteresis added\n.subckt comp in- in+ out\n.param V0=100000\n.param Rout=100\nB1 0 out I=limit( ( 0, (V(in+)-V(in-)+1e-4*V(out))*{V0/Rout}),  ({5/Rout}) )\nRo out 0 {Rout}\n.ends
TEXT -512 -520 Left 0 !.param f1=2500 ; Hz
TEXT -496 824 Left 0 ;counter clock f1
TEXT 72 824 Left 0 ;100ms reset
TEXT 600 824 Left 0 ;100ms integrate
TEXT 824 104 Left 0 ;zero detector
TEXT 560 -336 Left 0 ;integrator
TEXT -72 -96 Left 0 ;reference
TEXT -512 -304 Left 0 ;0 to 2.5V
TEXT -536 -384 Left 0 ;signal with 50Hz noise
TEXT 16 -320 Left 0 ;0 to -2.5V
TEXT -192 -696 Left 0 ;DUAL SLOPE ANALOG/DIGITAL CONVERTER\nHelmut Sennewald, V1.0\n \nExplore the 50Hz noise suppression if the integration\nperiod is a multiple of the noise period. Watch V(int1).\n \nV(sum_1) is the deglitched digital result.\n \nRightMouseClick on the digital components to see\ntheir settings. Vhigh=5, Td=10n, Ref=2.5
TEXT -560 1160 Left 0 ;counter with gate
TEXT -496 -88 Left 0 ;2V-DC + 1Vpp-noise
RECTANGLE Normal 1056 1872 -608 1120
