Version 4
SHEET 1 1520 1380
WIRE -112 176 16 176
WIRE 48 176 96 176
WIRE 192 176 320 176
WIRE 96 192 96 176
WIRE 96 176 160 176
WIRE 96 256 96 272
WIRE 32 304 32 208
WIRE -112 304 -112 176
WIRE -112 176 -144 176
WIRE -16 336 16 336
WIRE 64 336 160 336
WIRE 176 304 176 208
WIRE 464 176 592 176
WIRE 624 176 672 176
WIRE 768 176 896 176
WIRE 672 192 672 176
WIRE 672 176 736 176
WIRE 672 256 672 272
WIRE 608 304 608 208
WIRE 464 304 464 176
WIRE 464 176 432 176
WIRE 640 336 736 336
WIRE 784 336 800 336
WIRE 752 304 752 208
WIRE 320 304 320 176
WIRE 272 336 304 336
WIRE 352 336 448 336
WIRE 320 176 352 176
WIRE -80 336 -64 336
WIRE 208 336 224 336
WIRE 496 336 512 336
WIRE -128 336 -256 336
WIRE -256 224 -256 176
WIRE -256 176 -224 176
WIRE 896 304 896 176
WIRE 848 336 880 336
WIRE 928 336 944 336
WIRE 896 176 944 176
WIRE 592 336 560 336
WIRE 176 80 176 64
WIRE 176 -16 176 -48
WIRE 176 -48 208 -48
WIRE 864 -48 896 -48
WIRE 896 -48 896 -16
WIRE 896 64 896 80
WIRE -112 512 32 512
WIRE 32 512 160 512
WIRE 32 528 32 512
WIRE -112 640 -112 512
WIRE -112 512 -144 512
WIRE -16 672 64 672
WIRE 80 640 80 608
WIRE 240 512 416 512
WIRE 416 512 608 512
WIRE 416 528 416 512
WIRE 368 672 448 672
WIRE 496 672 512 672
WIRE 464 640 464 608
WIRE 176 672 256 672
WIRE -80 672 -64 672
WIRE 112 672 128 672
WIRE 304 672 320 672
WIRE -128 672 -256 672
WIRE -256 560 -256 512
WIRE -256 512 -224 512
WIRE 608 640 608 512
WIRE 560 672 592 672
WIRE 640 672 656 672
WIRE 608 512 656 512
WIRE 864 512 896 512
WIRE 896 512 896 544
WIRE 896 624 896 640
WIRE 64 608 80 608
WIRE 144 592 160 592
WIRE 240 592 272 592
WIRE 272 592 272 640
WIRE 448 608 464 608
WIRE 864 848 896 848
WIRE 896 848 896 880
WIRE 896 960 896 976
WIRE -112 848 32 848
WIRE 32 848 160 848
WIRE 32 864 32 848
WIRE -112 976 -112 848
WIRE -112 848 -144 848
WIRE -16 1008 80 1008
WIRE 80 1008 80 944
WIRE 240 848 352 848
WIRE 352 848 464 848
WIRE 352 864 352 848
WIRE 384 1136 384 944
WIRE -80 1008 -64 1008
WIRE -128 1008 -256 1008
WIRE -256 896 -256 848
WIRE -256 848 -224 848
WIRE 464 1168 464 848
WIRE -16 1200 448 1200
WIRE 496 1200 512 1200
WIRE 464 848 512 848
WIRE 64 944 80 944
WIRE 144 928 160 928
WIRE 240 928 272 928
WIRE 272 928 272 1072
WIRE -16 1072 272 1072
WIRE -16 1136 384 1136
WIRE -80 1040 -80 1072
WIRE -80 1072 -64 1072
WIRE -112 1040 -112 1136
WIRE -112 1136 -64 1136
WIRE -144 1040 -144 1200
WIRE -144 1200 -64 1200
WIRE -256 304 -256 336
WIRE -256 640 -256 672
WIRE -256 976 -256 1008
FLAG 96 272 0
FLAG 672 272 0
FLAG 944 336 cmd
IOPIN 944 336 In
FLAG 944 176 out1
IOPIN 944 176 Out
FLAG 176 80 0
FLAG 208 -48 cmd
IOPIN 208 -48 Out
FLAG 896 80 0
FLAG 864 -48 out1
IOPIN 864 -48 In
FLAG 32 624 0
FLAG 416 624 0
FLAG 656 672 cmd
IOPIN 656 672 In
FLAG 656 512 out2
IOPIN 656 512 Out
FLAG 896 640 0
FLAG 864 512 out2
IOPIN 864 512 In
FLAG 144 592 0
FLAG 896 976 0
FLAG 864 848 out3
IOPIN 864 848 In
FLAG 32 960 0
FLAG 352 960 0
FLAG 512 1200 cmd
IOPIN 512 1200 In
FLAG 512 848 out3
IOPIN 512 848 Out
FLAG 144 928 0
SYMBOL Isense 32 176 R0
SYMATTR InstName X1
SYMBOL cap 80 192 R0
WINDOW 3 24 56 Left 0
SYMATTR Value {C2}
SYMATTR InstName C2
SYMBOL Isense 176 176 R0
SYMATTR InstName X2
SYMBOL ind -240 192 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L1
SYMATTR Value {L1}
SYMBOL Isense 608 176 R0
SYMATTR InstName X6
SYMBOL cap 656 192 R0
WINDOW 3 24 56 Left 0
SYMATTR Value {C4}
SYMATTR InstName C4
SYMBOL Isense 752 176 R0
SYMATTR InstName X7
SYMBOL ind 336 192 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L3
SYMATTR Value {L3}
SYMBOL gainblock -32 336 M0
SYMATTR SpiceLine K=L1*pi*fs/n
SYMATTR SpiceModel 0 0
SYMATTR InstName X17
SYMBOL gainblock 256 336 M0
SYMATTR SpiceLine K=C2*pi*fs/n**2
SYMATTR SpiceModel 0 0
SYMATTR InstName X11
SYMBOL gainblock 544 336 M0
SYMATTR SpiceLine K=L3*pi*fs/n**3
SYMATTR SpiceModel 0 0
SYMATTR InstName X13
SYMBOL gainblock 832 336 M0
SYMATTR SpiceLine K=C4*pi*fs/n**4
SYMATTR SpiceModel 0 0
SYMATTR InstName X14
SYMBOL Summer++ -112 336 M0
SYMATTR InstName X3
SYMBOL Summer++ 176 336 M0
SYMATTR InstName X4
SYMBOL Summer++ 464 336 M0
SYMATTR InstName X5
SYMBOL Summer++ 752 336 M0
SYMATTR InstName X8
SYMBOL Summer+- 32 336 M0
SYMATTR InstName X9
SYMBOL Summer+- 320 336 M0
SYMATTR InstName X10
SYMBOL Summer+- 608 336 M0
SYMATTR InstName X12
SYMBOL Summer+- 896 336 M0
SYMATTR InstName X15
SYMBOL voltage 176 -32 R0
WINDOW 123 40 56 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 1u 1u 1u 49u 100u)
SYMBOL res 880 -32 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL cap 16 528 R0
WINDOW 3 24 53 Left 0
SYMATTR Value {C2}
SYMATTR InstName C22
SYMBOL Isense 32 608 R270
SYMATTR InstName X18
SYMBOL ind -240 528 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L21
SYMATTR Value {L1}
SYMBOL cap 400 528 R0
WINDOW 3 24 53 Left 0
SYMATTR Value {C4}
SYMATTR InstName C24
SYMBOL Isense 416 608 R270
SYMATTR InstName X20
SYMBOL ind2 144 528 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L23
SYMATTR Value {L3}
SYMATTR Type ind
SYMBOL gainblock -32 672 M0
SYMATTR SpiceLine K=L1*pi*fs/n
SYMATTR SpiceModel 0 0
SYMATTR InstName X21
SYMBOL gainblock 160 672 M0
SYMATTR SpiceLine K=C2*pi*fs/n**2
SYMATTR SpiceModel 0 0
SYMATTR InstName X22
SYMBOL gainblock 352 672 M0
SYMATTR SpiceLine K=L3*pi*fs/n**3
SYMATTR SpiceModel 0 0
SYMATTR InstName X23
SYMBOL gainblock 544 672 M0
SYMATTR SpiceLine K=C4*pi*fs/n**4
SYMATTR SpiceModel 0 0
SYMATTR InstName X24
SYMBOL Summer++ -112 672 M0
SYMATTR InstName X25
SYMBOL Summer++ 80 672 M0
SYMATTR InstName X26
SYMBOL Summer++ 272 672 M0
SYMATTR InstName X27
SYMBOL Summer++ 464 672 M0
SYMATTR InstName X28
SYMBOL Summer+- 608 672 M0
SYMATTR InstName X32
SYMBOL res 880 528 R0
SYMATTR InstName R2
SYMATTR Value {R}
SYMBOL ind2 144 608 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L23a
SYMATTR Value {L3}
SYMATTR Type ind
SYMBOL res 880 864 R0
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL cap 16 864 R0
WINDOW 3 24 53 Left 0
SYMATTR Value {C2}
SYMATTR InstName C32
SYMBOL Isense 32 944 R270
SYMATTR InstName X16
SYMBOL ind -240 864 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L31
SYMATTR Value {L1}
SYMBOL cap 336 864 R0
WINDOW 3 24 53 Left 0
SYMATTR Value {C4}
SYMATTR InstName C34
SYMBOL Isense 352 944 R270
SYMATTR InstName X19
SYMBOL ind2 144 864 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L33
SYMATTR Value {L3}
SYMATTR Type ind
SYMBOL gainblock -32 1008 M0
WINDOW 39 -32 25 Right 0
SYMATTR SpiceLine K=L1*(pi*fs) /n
SYMATTR SpiceModel 0 0
SYMATTR InstName X29
SYMBOL gainblock -32 1072 M0
WINDOW 39 -32 24 Right 0
SYMATTR SpiceLine K=L1*C2*(pi*fs)**2 /n**3
SYMATTR SpiceModel 0 0
SYMATTR InstName X30
SYMBOL gainblock -32 1136 M0
WINDOW 39 -32 24 Right 0
SYMATTR SpiceLine K=L1*C2*L3*(pi*fs)**3 /n**6
SYMATTR SpiceModel 0 0
SYMATTR InstName X31
SYMBOL gainblock -32 1200 M0
WINDOW 39 -32 24 Right 0
SYMATTR SpiceLine K=L1*C2*L3*C4*(pi*fs)**4 /n**10
SYMATTR SpiceModel 0 0
SYMATTR InstName X33
SYMBOL Summer+- 464 1200 M0
SYMATTR InstName X38
SYMBOL ind2 144 944 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 5 56 VBottom 0
SYMATTR InstName L33a
SYMATTR Value {L3}
SYMATTR Type ind
SYMBOL Summer+5 -112 1008 M0
SYMATTR Value Summer++
SYMATTR InstName X34
SYMBOL Delay -304 256 R270
WINDOW 39 -104 48 VCenter 0
SYMATTR SpiceLine Delay=td
SYMATTR InstName X35
SYMBOL Delay -304 592 R270
WINDOW 39 -104 48 VCenter 0
SYMATTR SpiceLine Delay=td
SYMATTR InstName X36
SYMBOL Delay -304 928 R270
WINDOW 39 -104 48 VCenter 0
SYMATTR SpiceLine Delay=td
SYMATTR InstName X37
TEXT 344 -176 Center 0 ;The "Leapfrog" Method of Switching Amplifier Control Loop Design\ncopyright by analog@ieee.org\n(see PDF of same name for design details)
TEXT -296 -112 Left 0 ;.tran 300u
TEXT -296 -88 Left 0 !.ac dec 101 100 200k
TEXT -296 -64 Left 0 !.step param R list 8 4 2 1
TEXT -296 -16 Left 0 !.param R=4 L=5u C=10u
TEXT -296 16 Left 0 !.param fs=500k td=.7u
TEXT -296 48 Left 0 !.param n=1.6 m=2
TEXT -296 96 Left 0 !.param L1=L*m C2=C L3=L C4=C/m
TEXT 200 440 Center 0 !K2 L23 L23a 1
TEXT 200 776 Center 0 !K3 L33 L33a 1
