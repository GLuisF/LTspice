Version 4
SHEET 1 1836 12876
WIRE -496 -400 -1456 -400
WIRE -496 -192 -496 -400
WIRE -1456 -128 -1456 -400
WIRE -672 -112 -736 -112
WIRE -544 -112 -592 -112
WIRE -736 -64 -736 -112
WIRE -1456 64 -1456 -48
WIRE -1280 64 -1456 64
WIRE -1280 96 -1280 64
WIRE -736 112 -736 16
WIRE -496 112 -496 -96
WIRE -496 112 -736 112
WIRE -192 112 -496 112
WIRE -1456 160 -1456 64
WIRE -496 288 -496 112
WIRE -672 368 -704 368
WIRE -544 368 -592 368
WIRE -704 432 -704 368
WIRE -192 560 -192 112
WIRE -1456 624 -1456 240
WIRE -704 624 -704 512
WIRE -704 624 -1456 624
WIRE -496 624 -496 384
WIRE -496 624 -704 624
WIRE -192 672 -192 640
FLAG -192 672 0
FLAG -1280 96 0
SYMBOL voltage -1456 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL voltage -736 -80 R0
WINDOW 3 24 104 Invisible 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 15 {T_delay_1} {T_rise} {T_fall} {T_on_1} {T_period})
SYMATTR InstName V2
SYMBOL res -576 -128 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rg1
SYMATTR Value 1
SYMBOL voltage -704 416 R0
WINDOW 3 19 114 Invisible 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 15 {T_delay_2} {T_rise} {T_fall} {T_on_2} {T_period})
SYMATTR InstName V4
SYMBOL res -576 352 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rg2
SYMATTR Value 1
SYMBOL current -192 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value {I_load_phase}
SYMBOL voltage -1456 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 30
SYMBOL Misc\\nigbt -544 -192 R0
SYMATTR InstName U1
SYMATTR Value IGX50N60T_L2
SYMBOL Misc\\nigbt -544 288 R0
SYMATTR InstName U2
SYMATTR Value IGX50N60T_L2
TEXT -1608 408 Left 0 !.tran 5e-5
TEXT -312 720 Left 0 !.param I_load_phase 20
TEXT -1328 -352 Left 0 !.param T_period = 5e-5\n.param T_delay_1 = 4.3e-6\n.param D 0.6 \n.param T_rise = 1e-7\n.param T_fall = 1e-7\n.param T_on_1 = {D*(T_period-T_delay_1-T_rise-T_fall)}\n.param T_delay_2 = {2*T_delay_1+T_rise+T_on_1+T_fall}\n.param T_on_2 = {T_period-T_delay_2-T_rise-T_fall}\n \n.param T_j 20
TEXT 88 -328 Left 0 !*****************************************************************\n* Level2 Version of 600V IGBT3 Models oct 2007                                  *\n*****************************************************************\n* INFINEON TECHNOLOGIES AG                      IKXXXN60T_L2.LIB                *\n*                                                                                                                               *\n*  (V2.6c)      10/07           (updated)                                                       *\n*                                                               *\n* Models provided by INFINEON are not warranted by INFINEON as  *\n* fully representing all of the specifications and operating    *\n* characteristics of the semiconductor product to which the     *\n* model relates. The model describe the characteristics of a    * \n* typical device.                                               * \n* In all cases, the current data sheet information for a given  *\n* device is the final design guideline and the only actual      *\n* performance specification.                                    *\n* Altough models can be a useful tool in evaluating device      *\n* performance, they cannot model exact device performance under *\n* all conditions, nor are they intended to replace bread-       *\n* boarding for final verification. INFINEON therefore does not  *\n* assume any liability arising from their use.                  *\n* INFINEON reserves the right to change models without prior    * \n* notice.                                                       *\n*                                                               *\n* This library contains Level 2 models for the following        * \n* INFINEON Technologies 600 V IGBT3                                                             *\n* devices/chip-models including lead inductances related        *\n*                                                                                                                               *\n* to packages:                                                                                                  *\n*                                                                                                                               *\n* type                                                          BV/V            Ice/A                                           *               \n*                                                                                                                               *\n* DUOPACKS                                                                                                      *\n* IKX04N60T                                     600             4 (comp. all 4A devs)           *\n* IKX06N60T                                     600             6 (comp. all 6A devs)           *\n* IKX10N60T                                     600             10 (comp. all 10A devs)         *\n* IKX15N60T                                     600             15 (comp. all 15A devs)         *\n* IKX20N60T                                     600             20 (comp. all 20A devs)         *\n* IKX30N60T                                     600             30 (comp. all 30A devs)         *\n* IKX50N60T                                     600             50 (comp. all 50A devs)         *\n* IKX75N60T                                     600             75 (comp. all 75A devs)         *\n*                                                                                                                               *\n* SINGLE IGBTS                                                                                                  *\n* IGX04N60T                                     600             4 (comp. all 4A devs)           *\n* IGX06N60T                                     600             6 (comp. all 6A devs)           *\n* IGX10N60T                                     600             10 (comp. all 10A devs)         *\n* IGX15N60T                                     600             15 (comp. all 15A devs)         *\n* IGX30N60T                                     600             30 (comp. all 30A devs)         *\n* IGX50N60T                                     600             50 (comp. all 50A devs)         *\n* IGX75N60T                                     600             75 (comp. all 75A devs)         *\n*                                                                                                                               *\n* CHIPS                                                                                                                         *\n* SIGC06T60GS                                   600             10  chip model                  *\n* SIGC04T60GS                                   600             6  chip model                   *\n* SIGC100T60R3                                  600             200  chip model                 *\n*                                                                                                                               *\n*                                                                                                                               *\n*                                                                                                                               *\n* the model is based on the publication:                                        *\n*                                                                                                                               *\n* R.Kraus, P.Türkes, J.Sigg                                                                     *\n* Physics-based Models Of Power Semiconductor Devices                           *\n* For The Circuit Simulator Spice                                                               *\n*                                                                                                                               *\n* Power Electronics Specialists Conference, 1998.                               * \n* PESC 98 Record. 29th Annual IEEE                                                              *\n*                                                                                                                               *\n* SUPPORTemail: simulate@infineon.com                                                           *\n*****************************************************************\n.SUBCKT SIGC04T60GS_L2  ano gate kat PARAMS:    TJ = 27\n*\nXL75xxD ano     gate            kat             L75xxD_L2       PARAMS:   TJ = {TJ} Atotal = 0.041              A = 0.022  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT SIGC06T60GS_L2 ano gate kat PARAMS:     TJ = 27\n* \nXL75xxD ano     gate            kat             L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.059               A = 0.036  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT SIGC100T60R3_L2 ano gate kat PARAMS:    TJ = 27\n* \nXL75xxA ano     gate            kat             L75xxA_L2       PARAMS:  TJ = {TJ}  Atotal = 0.995              A = 0.801  Rg = 2\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX04N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS:   TJ = {TJ} Atotal = 0.031              A = 0.014  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS:   TJ = {TJ} A=0.0077    N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX06N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS:   TJ = {TJ} Atotal = 0.041              A = 0.022  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS:   TJ = {TJ} A=0.0131    N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX10N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.059               A = 0.036  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS: TJ = {TJ} A=0.021       N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX15N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.08                A = 0.052  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS: TJ = {TJ} A=0.0288      N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX20N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.102               A = 0.071  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS: TJ = {TJ} A=0.0386      N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX30N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.152               A = 0.107  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS: TJ = {TJ} A=0.0577      N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX50N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.276               A = 0.20  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS: TJ = {TJ} A=0.1112      N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IKX75N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.389               A = 0.30  Rg = 10m\nXDIO            katl            anol                            L4XXXM_L2       PARAMS: TJ = {TJ} A=0.1666      N_ideal = 1.0\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX04N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS:   TJ = {TJ} Atotal = 0.031              A = 0.014  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX06N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS:   TJ = {TJ} Atotal = 0.041              A = 0.022  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX10N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.059               A = 0.036  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX15N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.08                A = 0.052  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX20N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.102               A = 0.071  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX30N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.152               A = 0.107  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX50N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.276               A = 0.20  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT IGX75N60T_L2 ano gate kat PARAMS:       TJ = 27\n* \nLANO            ano             anol            5n\nRANO            ano             anol            10\nLKAT            katl            kat             7n\nRKAT            katl            kat             10\nXL75xxD anol    gate            katl            L75xxD_L2       PARAMS: TJ = {TJ}  Atotal = 0.389               A = 0.30  Rg = 10m\n.ENDS\n*$\n*****************************************************************\n.SUBCKT L75xxD_L2 ano gate kat PARAMS: TJ = 27 Atotal = 1.5 A = 1.2 Rg = 1\n.PARAM \n+q = 1.6E-19    eps0 = 8.85E-14 epsi = 11.8     eox= 2.8  \n+t0= 273        k=1.381e-23     \n+un = 1350      up = 450        u_surf= 650     ni0=1.45e10\n+vlimit = 8e6 pi = 3.1416  vsat = 8e5\n.PARAM\n+TX1 = 110e-7\n+NA2 = 1.2e17 NA3 = 7.5E13 NA1=1e15\n+TX2 = 3u       ETAUB = 2       wb0 = 45E-4 EMU = -2\n+BV_FW=650      BV_RW=28  \n.PARAM wb = 65E-4\n.PARAM  Lspec =2.401e-4\n.PARAM\n+lchann=2.0e-4  \n+vsw = -.5\n.PARAM\n+Rs = 0.2625m   \n.PARAM nzell =                  {A*5.569e5}\n.PARAM Ads =                    {nzell*0.5184u}\n.PARAM wchann=                  {nzell*28.8u}\n.PARAM Cox_d =                  {nzell*2.076e-14}\n.PARAM Cox1 =                   {nzell*8.330e-14}\n.PARAM Cox2 =                   0\n.PARAM Cox_g =                  {(Atotal-A)*22.527n}\n.PARAM Cox_fp =                 {(Cox1 + Cox2 + Cox_g)}\n.PARAM Cgs =                    {nzell*1.298e-14}\n.PARAM Cje =                    {Atotal *2.994n}\n.PARAM Agd_d  =                 {Cox_d*4.439e7}\n.PARAM Agd_fp  =                {A - Ads + nzell*1.851u}\n.PARAM A_j =                    {nzell*1.796u}\n.PARAM Ise0 =                   {A*48.96p}\n.PARAM Isbs2=                   {A*52.26p} \n.PARAM Isbs2_g=                 {A*3.333e-14} \n.PARAM Isbs1=                   {A*7.127u} \n.PARAM Isbs1_g=                 {A*2.136e-19} \n.PARAM  Q0 =                    {A*54.07n}\nMFET    dx      g               s               s               MOS W={wchann},L={lchann/100},IC=OFF\nGMFET_T         dn              kat             VALUE = {LIMIT(I(VIMOS)*((TJ+t0)/300)**{EMU},-1e6,1e6) }\nGDE1            ano             e1              VALUE = \n+ {TANH(1e3*I(VDE1))*(((Isx1(TJ,V(xj1,0))**((t0 + TJ)/(t0 + 27)))/Isx1(27,V(xj1,0)))**((t0 + 27)/(t0 + TJ)) \n+ * ABS(I(VDE1))**((t0 + 27)/(t0 + TJ)) - ABS(I(VDE1)))}\nGDE2            ano             e1              VALUE = \n+ {TANH(1e3*I(VDE2))*(((Isx2(TJ)**((t0 + TJ)/(t0 + 27)))/Isx2(27))**((t0 + 27)/(t0 + TJ)) \n+ * ABS(I(VDE2))**((t0 + 27)/(t0 + TJ)) - ABS(I(VDE2)))}\nCPN             ano_x           e1              {Cje}\nRJE             ano             ano_x           1m\nGJCAP           d               kat             VALUE = {1e6*I(VIJCT)}\nVDE1            ano             anx1            0\nVDE2            ano             anx2            0\nDE1             anx1            e1              D11\nDE2             anx2            e1              D12\nDS      kat     d               D2  \n.MODEL  MOS     NMOS    (LEVEL=3,nsub={NA2},tox={TX1/100},uo={u_surf},cgso=1p,cgdo=1p,THETA = 0.05)\n.MODEL          D11             D               (IS = {Isbs1}, N = 2)\n.MODEL          D12             D               (IS = {Isbs2}, N = 1.0)\n.MODEL  D2      D       (IS={ISE0},BV={BV_FW})\nRG1             gate            g_t             {(Rg + .25)/(((TJ + t0)/300)**EMU)}\nRS              s               kat             {Rs/A}\nETHERM  g_t     g               VALUE = {DVt(TJ)}\nEVGCOX          vgcox           0               VALUE { V(ox_fp,kat)-{vsw} }\nGICOX_fp  g     ox_fp           VALUE = {((Cox_fp)/100 + 99*Cox_fp*(1+ tanh(100*V(vgcox,0)) )/200)* 1e6*I(VDUGD_fp)}\nGICOX_d  g      ox_d            VALUE = {((Cox_d)/100 + 99*Cox_d*(1+ tanh(100*V(vgcox,0)) )/200)* 1e6*I(VDUGD_d)}\nGICGS           g               s               VALUE = {(Cgs + 99*(Cox_fp + Cox_d)*(1 + tanh(-100*V(vgcox,0)) )/200)* 1e6*I(VDUGS)}\nVIA             e1              e               0\nEDEP_fp         d               ox_fp           VALUE = {MAX(Vdep_fp(V(d,g),V(xj1,0),I(VIPC)),0)}\nEDEP_d          d               ox_d            VALUE = {MAX(Vdep_d(V(d,g),V(xj1,0),I(VIPC)),0)}\nEGIA            e               d               VALUE = {I(VIA)*Rb(V(b,0),TJ)}\nVINC            d               dn              0\nEAUX1           dxvr            kat             VALUE = {V(d,kat)}\nERDRAIN         dxvr            dxv             VALUE = {I(VIMOS)*RDR(V(nsqr),V(dxvr,dxv),TJ)}\nVIMOS           dxv             dx              0\nGIC             ds              s               VALUE = {IPC(I(VINC),V(b,0),V(xj1,0),I(VDXJ),TJ)}\nVIPC            d               ds              0\nCQB             b 0             1u\nRHELP           b 0             1meg\nGRQB            b 0             VALUE   {1u*V(b,0)*(1/(TAU_X(TJ,V(xj1,0)) )) }\nGINC            0 b             VALUE           {I(VINC)}\nGINE            b 0             VALUE           {INE(I(VINC),V(b,0),V(xj1,0),I(VDXJ),TJ)}\nEXJ             xj1 0           VALUE           {MAX(xj(V(d,kat),I(VIPC),MAX(V(xj1,0),1e-4)), 1e-4)}\nCXJ             xj  0           1u\nRXJ             xjr  xj 0.1m\nVDXJ            xj1 xjr         0\nEDUGS           du1             0               VALUE {V(g,s)}\nVDUGS           du1             du1cr           0\nRDUGS           du1cr           du1c            .1m             \nCDUGS           du1c            0               1u\nEDUGD_d         du2             0               VALUE {V(g,ox_d)}\nVDUGD_d         du2             du2cr           0\nRDUGD_d         du2cr           du2c            .1m             \nCDUGD_d         du2c            0               1u\nEDUGD_fp        du3             0               VALUE {V(g,ox_fp)}\nVDUGD_fp        du3             du3cr           0\nRDUGD_fp        du3cr           du3c            .1m             \nCDUGD_fp        du3c            0               1u\nEJUNCT          jct 0           VALUE = {QTOT(V(xj1,0),I(VIPC))}\nVIJCT           jct cpr         0\nRIJCT           cpr cp          .1m\nCJCT            0   cp          1u\nENSQR   nsqr    0               VALUE = {MAX(NSQR(I(VINC),V(dx,s),TJ),0)}\n.FUNC           NSQR(I,V,T)     {MAX(I,0)/MAX(V,0.001)*lchann/wchann/(u_surf*((T+t0)/300)**EMU)/q/3.2e-4/1e16}\n.FUNC           RDR(X,V,T)      {3.2e-4/Ads/q/(MAX(NA3,1e16*X))\n+ /(un*((T + t0)/300)**EMU)*(1+((un*((T + t0)/300)**EMU)*MAX(V,0)/3.2e-4)/vsat)}\n.FUNC  N1(X,Y)                  {(2*(NA3 + MAX(Y,0)/q/A/vlimit  )+ NA1)*pi*X}\n.FUNC  N2(X)                    {NA1*Lspec*log(1+((X-wb0)/Lspec)**2)}\n.FUNC  N3(X)                    {2*NA1*arctan((-X+wb0)/Lspec)*(wb0-X)}\n.FUNC  QTOT(X,Y)                {q*A_j/2/pi*(N1(X,Y)-N2(X)+N3(X)+NA1*(Lspec*log((Lspec**2+wb0**2)/Lspec**2)-2*wb0*arctan(wb0/Lspec)))}\n.FUNC  QCOX_D(X,Y)              {q*Ads/2/pi*(N1(X,Y)-N2(X)+N3(X)+NA1*(Lspec*log((Lspec**2+wb0**2)/Lspec**2)-2*wb0*arctan(wb0/Lspec)))}\n.FUNC  QCOX_FP(X,Y)             {q*(A-Ads)/2/pi*(N1(X,Y)-N2(X)+N3(X)+NA1*(Lspec*log((Lspec**2+wb0**2)/Lspec**2)-2*wb0*arctan(wb0/Lspec)))}\n.FUNC           TAU_X(T,V)      {(TX2*((T+t0)/300)**{ETAUB})/(1+1*NA1/NA3*(0.5+1/pi*arctan((V-wb0)/Lspec)))}\n.FUNC   VXX(T)                  {psi2(T) + TX1*sqrt(2*eps0*epsi*q*NA2*psi2(T))/eps0/eox}\n.FUNC   EG(T)                   {1.16 - 7.02e-4*(T+t0)**2/(T+t0 + 1108)}\n.FUNC   ni(T)                   {ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300)}\n.FUNC           psi2(T)                         {2*k/q*(T + t0)*log(NA2/ni(T))}\n.FUNC           DVt(T)                          {psi2(T) - psi2(27) + TX1*(sqrt(2*eps0*epsi*q*NA2*psi2(T)) \n+ - sqrt(2*eps0*epsi*q*NA2*psi2(27)))/eps0/eox}\n.FUNC   VTX(T)                  {psi2(T) + TX1*sqrt(2*eps0*epsi*q*NA2*psi2(T))/eps0/eox}\n.FUNC           DA(T)                           {2*k*un*up/q/(un + up)*(T + t0)*(((T + t0)/300)**EMU)}\n.FUNC           LA(T,V)                         {sqrt(DA(T) * TAU_X(T,V)) }\n.FUNC   Isx2(T)                 {LIMIT(Isbs2_g*k*(t0+T)*(up + un)*(((T + t0)/300)**EMU)*ni(T)*ni(T),-1e6,1e6)} \n.FUNC   Isx1(T,V)               {LIMIT(Isbs1_g * sqrt(DA(T)/(TAU_X(T,V)))*ni(T),-1e6,1e6)} \n.FUNC   Vdep_fp(V,X,Y)          {V - 1/Cox_fp*QCOX_FP(X,Y)}\n.FUNC   Vdep_d(V,X,Y)           {V - 1/Cox_d*QCOX_D(X,Y)}\n.FUNC           ATX1(X)                         {(MAX(X,.1m)**2 - wb0**2 +Lspec**2)*arctan((-MAX(X,.1m)+wb0)/Lspec)\n+ - (Lspec**2 - wb0**2)*arctan(wb0/Lspec)}\n.FUNC           ATX2(X)                         {Lspec*MAX(X,.1m) + Lspec*wb0*log((Lspec**2 +(MAX(X,.1m) -wb0)**2)/(Lspec**2 +wb0**2))}\n.FUNC           xj(V,Y2,X) {0.5*(MAX(X,.1m) + (2*eps0*epsi*MAX(V,0)/q/MAX(X,.1m)+NA1/pi/MAX(X,.1m)*(ATX1(X) + ATX2(X)) )/\n+ (NA3 + MAX(Y2,0)/q/A/vlimit + NA1/2))}\n.FUNC           Rb(X,T)                         {(wb)*(wb)/(un*(Q0)*(((T + t0)/300)**EMU) + (un + up)*MAX(X,0)*1e-6*(((T + t0)/300)**EMU))}\n.FUNC           FDX(V,X,T)      {LIMIT(TANH(MAX(wb-V,.1m)*1e6*MAX(X,0)/(8*DA(T))),-1e6,1e6)}\n.FUNC           Td(V,X,T)       {LIMIT((0.1/DA(T))*MAX(wb-V,.1m)*MAX(wb-V,.1m)*(1-FDX(V,X,T)),-1e6,1e6)}\n.FUNC           F1(V,T)                         {LIMIT(TAU_X(T,V)*(COSH(MAX(wb-V,.1m)/LA(T,V))-1),-1e6,1e6)}\n.FUNC           F2(V,X,T)       {LIMIT(0.5*(1+2*FDX(V,X,T)/(1+FDX(V,X,T)*FDX(V,X,T))),-1e6,1e6)}\n.FUNC           F3(V,X,T)       {LIMIT(1+Td(V,X,T)/(TAU_X(T,V)),-1e6,1e6)}\n.FUNC           QS0(V,T)        {LIMIT(q*A*LA(T,V)*ni(T)*TANH(0.5*MAX(wb-V,.1m)/LA(T,V)),-1e6,1e6)}\n.FUNC           Qbd(Y,Z,V,X,T)  {LIMIT(MAX(Z,0)*1e-6+Td(V,X,T)*Y,-1e6,1e6)}\n.FUNC           Qb0(Y,Z,V,X,T)  {LIMIT(2*Qbd(Y,Z,V,X,T)/(F3(V,X,T)+SQRT(F3(V,X,T)*F3(V,X,T) \n+ + Td(V,X,T)*3*IQR(V,T)*Qbd(Y,Z,V,X,T)/QS0(V,T))),-1e6,1e6)}\n.FUNC           INE(Y,Z,V,X,T)  {LIMIT(0.75*IQR(V,T)*Qb0(Y,Z,V,X,T)**2/QS0(V,T),-1e6,1e6)}\n.FUNC           IPC(Y,Z,V,X,T)  {LIMIT((1/3)*Y+(4/3)*(Qb0(Y,Z,V,X,T)/F1(V,T)\n+ +MAX(Qb0(Y,Z,V,X,T)/TAU_X(T,V)+INE(Y,Z,V,X,T)-Y,0)*F2(V,X,T)),-1e6,1e6)}\n.FUNC   IQR(V,T)                {Isx2(T)/QS0(V,T)}\n.ENDS\n*$\n.SUBCKT         L4XXXM_L2 anode kath PARAMS: TJ= 27 A = 1 N_ideal = 1\n.PARAM\n+q = 1.602e-19                  eps0 = 8.85e-14 epsi = 11.8\n+kb = 1.38e-23                  T0 = 273        ni0 = 1.45e10\n+un = 1350                      up = 450\n.PARAM  tau = 1u                \n.PARAM  Nd = 1.2e14             wb0 = 55e-4\n.PARAM  pi = 3.1416  Nbuf=1e15    ETAUB = 2\n.PARAM  wb = 75e-4 Lspec = 395.93u\n.PARAM          BV = 650        Rc = .6m\n.PARAM          vlimit =1.25e7\n.PARAM  Ut =    23.517m\n.PARAM  D =     15.874\n.PARAM  L =     2.8173m\n.PARAM          Ise0 =          {A*428p}\n.PARAM          Ise_g  = {A*0.4p}\n.PARAM  Ism0 =  {A*18.52u}\n.PARAM          Ism_g = {A*3.204e-19}\n.PARAM  QN =    {A*141n}\n.PARAM          Ra =            {55.5u/A} \nRSERIE          anode           ano             {Ra}\nGDE             ano             mi              VALUE = \n+ {LIMIT(TANH(1e3*I(VDE))*(((ISE(TJ)**((t0 + TJ)/(t0 + 27)))/ISE(27))**((t0 + 27)/(t0 + TJ)) \n+ * ABS(I(VDE))**((t0 + 27)/(t0 + TJ)) - ABS(I(VDE))),-1e6,1e6)}\nGD0             ano             mi1             VALUE = \n+ {LIMIT(TANH(1e3*I(VD0))*(((ISM(TJ,V(xj1,0))**((t0 + TJ)/(t0 + 27)))/ISM(27,V(xj1,0)))**((t0 + 27)/(t0 + TJ)) \n+ * ABS(I(VD0))**((t0 + 27)/(t0 + TJ)) - ABS(I(VD0))),-1e6,1e6)}\nVDE             ano             ano1            0\nDE              ano1            mi              D1\nD0              ano2            mi1             D2\nVD0             ano             ano2            0\n.model          D1              D               (is={Ise0}, BV = {BV}, N= {N_ideal})\n.model  D2      D               (is={Ism0}, N=2)\nVID0            mi1             mi              0\nVITOT           kat             kath            0\nGIR             mi              kat             VALUE = {V(mi,kat)/Rd(V(q,0),TJ)}\nGID             ano             mi              VALUE = {IQ(V(xj1,0),I(VID0),V(q,0),I(VDXJ),TJ) - 1e6*I(VIJCT)}\nCQB             q               0               1u\nRHELP           q               0               1meg\nGRQB            q               0               VALUE = {1u*V(q,0)/TAU_X(TJ,V(xj1,0)) }\nGIQ             0               q               VALUE = {I(VID0) + IQ(V(xj1,0),I(VID0),V(q,0),I(VDXJ),TJ)}\nEXJ             xj1 0           VALUE           {MAX(xj(V(mi,ano),I(VITOT),MAX(V(xj1,0),1e-4)),1e-4)}\nCXJ             xj  0           1u\nRXJ             xjr  xj 0.1m\nVDXJ            xj1 xjr         0\nEJUNCT          jct 0           VALUE = {QTOT(V(xj1,0))}\nVIJCT           jct cpr         0\nCJCT            cp   0          1u\nRCJCT           cpr  cp  0.1m\n.FUNC  LA(T,V)                  {sqrt(DA(T) * TAU_X(T,V)) }\n.FUNC  a0(T,V)                  {-0.5*tanh(0.5*wb0/LA(T,V))}\n.FUNC  a1(T,V)                  {(up/un)*(1 + a0(T,V))/(1 - a0(T,V))}\n.FUNC  a2(T,V)                  {0.1/((1 - 0.5*(1 - a1(T,V)*a1(T,V))*(1 - a0(T,V))) )}\n.FUNC  N1(X)                    {(2*Nd + Nbuf)*pi*X}\n.FUNC  N2(X)                    {Nbuf*Lspec*log(1+((X-wb0)/Lspec)**2)}\n.FUNC  N3(X)                    {2*Nbuf*arctan((-X+wb0)/Lspec)*(wb0-X)}\n.FUNC  QTOT(X)  {q*A/2/pi*(N1(X)-N2(X)+N3(X)+Nbuf*(Lspec*log((Lspec**2+wb0**2)/Lspec**2)-2*wb0*arctan(wb0/Lspec)))}\n.FUNC           TAU_X(T,V)      {(Tau*((T+t0)/300)**{ETAUB})/(1+1*Nbuf/Nd*(0.5+1/pi*arctan((V-wb0)/Lspec)))}\n.FUNC   EG(T)                   {1.16 - 7.02e-4*(T + t0)**2/(T + t0 + 1108)}\n.FUNC   ni(T)                   {ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300)}\n.FUNC           DA(T)                           {2*kb*un*up/q/(un + up)*(T + t0)*(((T + t0)/300)**-1.5)}\n.FUNC   ISE(T)                  {kb*(T + t0)*un*(((T + t0)/300)**-1.5)*ise_g*ni(T)*ni(T)}\n.FUNC           ISM(T,V)        {Ism_g*ni(T)*sqrt(DA(T)/Tau_X(T,V))}\n.FUNC           ATX1(X)                         {(MAX(X,.1m)**2 - wb0**2 +Lspec**2)*arctan((-MAX(X,.1m)+wb0)/Lspec)\n+ - (Lspec**2 - wb0**2)*arctan(wb0/Lspec)}\n.FUNC           ATX2(X)                         {Lspec*MAX(X,.1m) + Lspec*wb0*log((Lspec**2 +(MAX(X,.1m) -wb0)**2)/(Lspec**2 +wb0**2))}\n.FUNC           xj(V,Y2,X) {0.5*(MAX(X,.1m) + (2*eps0*epsi*MAX(V,0)/q/MAX(X,.1m)+Nbuf/pi/MAX(X,.1m)*(ATX1(X) + ATX2(X)) )/\n+ (Nd - MIN(Y2,0)/q/A/vlimit + Nbuf/2))}\n.FUNC           w(V,T)                          {MIN(MAX(wb-V*(1 + a1(T,V)),1e-4),wb-1e-4)}\n.FUNC           Rd(Z,T)                         {wb*wb/(un*QN*(((T + t0)/300)**-1.5) + (un + up)*MAX(Z,1m*QN)*1e-6*(((T + t0)/300)**-1.5))}\n.FUNC           Td(V,U,T)       {a2(T,V)*w(V,T)*w(V,T)/DA(T)/(1 + w(V,T)*1e6*MAX(U,0)/4/DA(T))}\n.FUNC           IQ(V,Y,Z,U,T)   {LIMIT((Tau_X(T,V)*MAX(Y,0) - MAX(Z,1m*QN)*1e-6)/Td(V,U,T),-1e6,1e6)}\n.ends\n*$
