Version 4
SHEET 1 1636 812
WIRE -176 608 -176 432
WIRE -176 704 -176 688
WIRE -80 96 -80 16
WIRE -64 592 -64 576
WIRE -64 704 -64 672
WIRE -48 16 -80 16
WIRE 32 496 -16 496
WIRE 48 576 -64 576
WIRE 48 608 48 576
WIRE 48 704 48 688
WIRE 96 624 96 576
WIRE 128 192 128 -16
WIRE 144 432 -176 432
WIRE 144 448 144 432
WIRE 144 544 144 528
WIRE 160 576 96 576
WIRE 160 608 160 576
WIRE 160 704 160 688
WIRE 240 432 144 432
WIRE 256 432 240 432
WIRE 256 464 256 432
WIRE 256 576 160 576
WIRE 256 608 256 576
WIRE 256 704 256 688
WIRE 288 -16 128 -16
WIRE 288 64 288 -16
WIRE 288 272 288 144
WIRE 464 192 464 -16
WIRE 496 624 496 432
WIRE 512 -16 464 -16
WIRE 512 16 512 -16
WIRE 512 128 512 96
WIRE 672 -16 512 -16
WIRE 672 16 672 -16
WIRE 672 128 512 128
WIRE 672 128 672 96
WIRE 672 160 672 128
WIRE 672 192 672 160
WIRE 672 432 496 432
WIRE 672 464 672 432
WIRE 672 592 672 544
WIRE 672 624 672 592
WIRE 720 160 672 160
WIRE 720 592 672 592
FLAG 288 272 0
FLAG 128 272 0
FLAG 288 -16 1
FLAG -80 176 0
FLAG -48 16 ctrl
IOPIN -48 16 Out
FLAG 672 272 0
FLAG 464 272 0
FLAG 672 -16 2
FLAG 720 160 EMF2
FLAG 496 704 0
FLAG 672 432 3
FLAG 672 704 0
FLAG 720 592 EMF3
FLAG 256 704 0
FLAG 96 672 0
FLAG 160 704 0
FLAG 256 544 0
FLAG 240 432 !p2
FLAG 48 704 0
FLAG -64 704 0
FLAG -176 704 0
FLAG -64 576 !p1
FLAG 32 496 !ctrl
IOPIN 32 496 Out
FLAG -16 496 ctrl
IOPIN -16 496 In
FLAG 144 544 0
FLAG -176 432 4
FLAG 96 576 !x
SYMBOL voltage -80 80 R0
WINDOW 0 8 7 Left 0
WINDOW 3 -143 138 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcontrol
SYMATTR Value PULSE(1 1.5 0.1 0.5 0.5 999)
SYMBOL current 128 272 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -142 -47 Left 0
SYMATTR Value PULSE(1 2 1 1 1 999)
SYMATTR InstName I1
SYMBOL ind 272 48 R0
SYMATTR InstName L1
SYMATTR Value Flux=V(ctrl)*x
SYMBOL bi 672 16 R0
SYMATTR InstName B1
SYMATTR Value I=sdt(V(2,emf2)/V(ctrl))
SYMBOL current 464 272 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -142 -47 Left 0
SYMATTR Value PULSE(1 2 1 1 1 999)
SYMATTR InstName I2
SYMBOL bv 672 176 R0
SYMATTR InstName B2
SYMATTR Value V=ddt(V(ctrl))*I(I2)
SYMBOL ind 496 0 R0
WINDOW 39 -83 5 Left 0
SYMATTR SpiceLine Rser=0 Rpar=100k
SYMATTR InstName Ldummy
SYMATTR Value 1MEG
SYMBOL current 496 704 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -142 -47 Left 0
SYMATTR Value PULSE(1 2 1 1 1 999)
SYMATTR InstName I3
SYMBOL bv 672 448 R0
SYMATTR InstName B3
SYMATTR Value V=ddt(i(B3))*V(ctrl)
SYMBOL bv 672 608 R0
SYMATTR InstName B4
SYMATTR Value V=ddt(V(ctrl))*I(B3)
SYMBOL g 48 592 M0
WINDOW 0 -10 10 Right 0
WINDOW 3 -16 104 Right 0
SYMATTR InstName G2
SYMATTR Value 1
SYMBOL res 144 592 R0
SYMATTR InstName R1
SYMATTR Value 1E7
SYMBOL bi 256 464 R0
WINDOW 3 30 111 Left 0
SYMATTR Value I=V(!x)/V(!ctrl)
SYMATTR InstName B5
SYMBOL bi 256 688 R180
WINDOW 0 24 88 Left 0
WINDOW 3 -158 78 Left 0
SYMATTR InstName B6
SYMATTR Value I=V(!p2)-V(!p1)
SYMBOL ind -80 576 R0
SYMATTR InstName Lref
SYMATTR Value 1
SYMBOL current -176 688 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -65 -39 Left 0
SYMATTR Value PULSE(1 2 1 1 1 999)
SYMATTR InstName I4
SYMBOL res 128 432 R0
SYMATTR InstName R2
SYMATTR Value 1E7
TEXT -42 -134 Left 0 !.tran 2.2
TEXT 88 -160 Left 0 ;Voltage Controlable Inductors, Vers. 30-nov-05
TEXT -40 -104 Left 0 !.options plotwinsize=0
TEXT 424 -128 Left 0 ;equivalent, allows to plot EMF,\nbut simulates slow and\nmay show "spikes" in simulation.\n-Not recommended-
TEXT -72 -24 Left 0 ;V(ctrl)=L
TEXT 208 -56 Left 0 ;preferred
TEXT 512 360 Left 0 ;equvalent, with EMF,\nprobably slower than 1
TEXT 736 -32 Left 0 ;Ldummy is for\ncorrect DC solution
TEXT -144 384 Left 0 ;vers. 4 should allow to control\nbuilt-in nonlinear inductors too
TEXT -160 456 Left 0 ;L=Lref*V(ctrl)
