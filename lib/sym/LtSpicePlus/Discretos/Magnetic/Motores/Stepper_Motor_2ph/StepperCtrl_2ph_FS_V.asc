Version 4
SHEET 1 2276 1548
WIRE -752 224 -768 224
WIRE -752 480 -752 224
WIRE -752 752 -768 752
WIRE -624 352 -624 288
WIRE -544 592 -544 544
WIRE -496 224 -752 224
WIRE -496 288 -624 288
WIRE -496 480 -752 480
WIRE -496 544 -544 544
WIRE -304 224 -352 224
WIRE -304 288 -352 288
WIRE -304 336 -304 288
WIRE -304 448 -304 336
WIRE -288 512 -352 512
WIRE -288 528 -288 512
WIRE -208 224 -304 224
WIRE -208 560 -208 224
WIRE -176 496 -176 272
WIRE -176 640 -176 496
WIRE -176 752 -752 752
WIRE -176 752 -176 640
WIRE -144 608 -144 384
WIRE -144 704 -144 608
WIRE -112 224 -208 224
WIRE -112 336 -304 336
WIRE -112 448 -304 448
WIRE -112 560 -208 560
WIRE -96 272 -176 272
WIRE -96 384 -144 384
WIRE -96 496 -176 496
WIRE -96 608 -144 608
WIRE 0 448 -32 448
WIRE 0 560 -32 560
WIRE 0 560 0 448
WIRE 32 272 -48 272
WIRE 32 496 -48 496
WIRE 32 496 32 272
WIRE 32 704 -144 704
WIRE 32 704 32 496
WIRE 32 736 32 704
WIRE 64 224 -32 224
WIRE 64 336 -32 336
WIRE 64 336 64 224
WIRE 64 384 -48 384
WIRE 64 608 -48 608
WIRE 64 608 64 384
WIRE 64 640 -176 640
WIRE 64 640 64 608
WIRE 112 512 112 288
WIRE 112 672 -240 672
WIRE 112 672 112 512
WIRE 176 224 64 224
WIRE 176 288 112 288
WIRE 176 448 0 448
WIRE 176 512 112 512
WIRE 384 272 352 272
WIRE 384 496 352 496
WIRE 384 672 112 672
FLAG -624 432 0
FLAG -768 224 fc
IOPIN -768 224 In
FLAG -752 832 0
FLAG -768 752 Rev
IOPIN -768 752 In
FLAG -304 288 1y
FLAG -304 224 1x
FLAG 384 272 B
IOPIN 384 272 Out
FLAG -288 528 fsf
IOPIN -288 528 Out
FLAG 384 672 clk
IOPIN 384 672 Out
FLAG 384 496 A
IOPIN 384 496 Out
FLAG -544 672 0
FLAG 32 816 0
FLAG -320 672 0
SYMBOL voltage -624 336 R0
WINDOW 3 -91 58 Left 0
WINDOW 0 16 7 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 {Vmax} 0 2n 5n 1E12)
SYMATTR InstName V1
SYMBOL res -768 736 R0
WINDOW 3 34 72 Left 0
SYMATTR Value 1MEG
SYMATTR InstName R1
SYMBOL SpecialFunctions\\modulate2 -496 224 R0
WINDOW 3 -16 125 Left 0
SYMATTR Value mark=1 space=0
SYMATTR InstName A1
SYMBOL SpecialFunctions\\sample 256 256 R0
WINDOW 3 -64 -52 Left 0
SYMATTR Value Rout=1m
SYMATTR InstName A2
SYMBOL SpecialFunctions\\modulate -496 480 R0
WINDOW 123 -4 118 Left 0
SYMATTR Value2 mark={2*nstep} space=0
SYMATTR InstName A3
SYMBOL SpecialFunctions\\sample 256 480 R0
WINDOW 3 -64 -52 Left 0
SYMATTR Value Rout=1m
SYMATTR InstName A5
SYMBOL voltage -544 576 R0
WINDOW 3 42 83 Left 0
WINDOW 0 39 55 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 5n 1n 1n 1E12)
SYMATTR InstName V3
SYMBOL sw -128 224 R270
SYMATTR InstName S1
SYMATTR Value SWD
SYMBOL sw -128 336 R270
SYMATTR InstName S2
SYMATTR Value SWD
SYMBOL sw -128 448 R270
SYMATTR InstName S3
SYMATTR Value SWD
SYMBOL sw -128 560 R270
SYMATTR InstName S4
SYMATTR Value SWD
SYMBOL voltage 32 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0.5
SYMBOL bv -224 672 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName B1
SYMATTR Value V=u(V(fsf))
TEXT -608 24 Left 0 ;Behavioral Fine-Step Motor Controller (voltage output) 11-aug-05\n----preliminary, bug to be fixed: V(A)=0 at t=0, should start at Vmax---
TEXT -432 88 Left 0 !.params Vmax=6
TEXT -736 144 Left 0 ;.tran 0 10 0
TEXT -432 120 Left 0 !.param nstep=8   ;for full output-swing
TEXT -736 112 Left 0 ;.options plotwinsize=0
TEXT -144 88 Left 0 !.model SWD SW(Ron=1 Roff=1MEG Vt=0 Vh=-0.1)
TEXT -840 712 Left 0 ;+1V -> reverse
TEXT 264 640 Left 0 ;Fine Step Clock
