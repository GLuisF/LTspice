Version 4
SHEET 1 1132 736
WIRE 224 240 256 240
WIRE 64 400 64 416
WIRE -224 416 -224 400
WIRE -224 320 -224 192
WIRE 96 192 -224 192
WIRE 256 240 304 240
WIRE 112 224 96 224
WIRE -32 256 -32 272
WIRE 304 336 304 352
WIRE 304 256 304 240
WIRE -560 416 -560 400
WIRE -560 320 -560 304
WIRE -560 304 -496 304
WIRE -336 304 -336 320
WIRE -336 400 -336 416
WIRE -336 304 -352 304
WIRE -432 304 -432 336
WIRE -432 400 -432 416
WIRE -496 304 -496 336
WIRE -496 400 -496 416
WIRE -496 304 -432 304
WIRE -352 304 -432 304
WIRE -32 352 -32 368
WIRE 96 224 -128 224
WIRE 112 256 96 256
WIRE 64 288 96 288
WIRE 96 256 -32 256
WIRE -880 400 -880 416
WIRE -880 320 -880 304
WIRE -880 240 -880 256
WIRE -880 160 -880 144
WIRE -880 304 -864 304
WIRE -880 144 -864 144
WIRE -128 224 -128 240
WIRE -128 320 -128 336
WIRE 384 208 384 256
WIRE 384 336 384 352
WIRE -560 240 -560 256
WIRE -560 160 -560 144
WIRE -560 144 -496 144
WIRE -496 144 -496 176
WIRE -496 240 -496 256
WIRE 176 208 256 208
WIRE 112 192 96 192
WIRE 96 288 112 288
WIRE 256 208 384 208
WIRE 176 272 176 288
WIRE 64 320 64 288
WIRE -496 144 -352 144
WIRE -336 144 -336 160
WIRE -336 240 -336 256
WIRE -352 144 -336 144
FLAG 64 416 0
FLAG -224 416 0
FLAG 96 224 2
FLAG 256 240 7
FLAG 96 256 3
FLAG -32 368 0
FLAG 304 352 0
FLAG -560 416 0
FLAG -336 416 0
FLAG -432 416 0
FLAG -496 416 0
FLAG -352 304 ac
FLAG 96 192 1
FLAG 96 288 4
FLAG -880 416 0
FLAG -880 256 0
FLAG -880 304 lim
FLAG -128 336 0
FLAG -880 144 mul
FLAG 384 352 0
FLAG -560 256 0
FLAG -352 144 dc
FLAG -496 256 0
FLAG 256 208 6
FLAG 176 288 0
FLAG -336 256 0
SYMBOL C:\\WINDOWS\\Desktop\\LTspice\\OTA-A\\ota1 160 240 R0
WINDOW 3 -416 -159 Left 0
WINDOW 123 -416 -128 Left 0
WINDOW 39 -416 -96 Left 0
SYMATTR InstName A1
SYMATTR Value g={g} isrc={isrc} isink={isink} ierr=0 ref={ref} rout={rout} cout={cout}
SYMATTR Value2 vlow={vlow} vhigh={vhigh} ioffset={ioffset} rclamp={rclamp}
SYMATTR SpiceLine powerup=1
SYMBOL bv -880 144 R0
SYMATTR InstName B1
SYMATTR Value V=g*(ref-V(1,2))*V(3,4)
SYMBOL bv -880 304 R0
SYMATTR InstName B2
SYMATTR Value V=tanh(V(mul)/iout)*iout+idc
SYMBOL bi -560 400 R180
WINDOW 0 24 88 Left 0
WINDOW 3 40 56 Left 0
SYMATTR InstName B3
SYMATTR Value I=V(lim)+ioffset
SYMBOL bi -560 240 R180
WINDOW 0 24 88 Left 0
WINDOW 3 40 56 Left 0
WINDOW 123 40 32 Left 0
SYMATTR InstName B4
SYMATTR Value I=isink
SYMATTR Value2 Rpar={rout}
SYMBOL diode -512 336 R0
WINDOW 0 24 8 Left 0
WINDOW 3 25 56 Left 0
SYMATTR InstName D1
SYMATTR Value vl
SYMBOL diode -512 176 R0
WINDOW 0 24 8 Left 0
WINDOW 3 25 56 Left 0
SYMATTR InstName D2
SYMATTR Value vl
SYMBOL cap -448 336 R0
WINDOW 39 24 112 Center 0
WINDOW 3 25 56 Left 0
SYMATTR SpiceLine Rpar={rout}
SYMATTR Value {cout}
SYMATTR InstName C1
SYMBOL res -352 304 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL res -352 144 R0
SYMATTR InstName R2
SYMATTR Value {R}
SYMBOL res 288 240 R0
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL res 368 240 R0
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL voltage -224 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 5m 2k)
SYMBOL voltage -128 224 R0
SYMATTR InstName V2
SYMATTR Value 0
SYMBOL voltage -32 256 R0
SYMATTR InstName V3
SYMATTR Value 1
SYMBOL voltage 64 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
TEXT -262 16 Left 0 !.tran 0 2m 10u 5u
TEXT -24 40 Left 0 ;.step param n list -1k 0
TEXT -936 16 Left 0 !.param ref=0 g=1 rout=10k cout=10p ioffset=0\n+ isrc=-2m isink=8m vlow=1u vhigh=6 rclamp=10
TEXT -936 96 Left 0 !.model vl d(ron={rclamp} vfwd={vhigh} vrev={-vlow})
TEXT -256 448 Left 0 ;limit: I = tanh(g*(ref-V(1,2))*V(3,4)/iout)*iout +idc+ioffset
TEXT -264 40 Left 0 !.param n=-1 R=1G
TEXT -936 448 Left 0 !.param iout=(isink-isrc)/2 idc=(isink+isrc)/2
TEXT 288 192 Left 0 ;(dc rail out)
TEXT 64 144 Left 0 ;linear ibuck=I(x)
TEXT -256 480 Left 0 ;linear: I =      g*(ref-V(1,2))*V(3,4)         +       ioffset
TEXT -200 -24 Center 0 ;Exploring Unsupported Parameters For The OTA A-Device - analog@ieee.org - 2004
