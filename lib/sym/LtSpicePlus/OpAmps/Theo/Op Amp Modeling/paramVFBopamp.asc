Version 4
SHEET 1 3396 1268
WIRE 1792 -1200 1792 -1248
WIRE 1856 -1200 1792 -1200
WIRE 1792 -1184 1792 -1200
WIRE 1792 -1088 1792 -1104
WIRE 1856 -1088 1792 -1088
WIRE 1792 -1056 1792 -1088
WIRE -304 -704 -304 -752
WIRE -192 -704 -192 -752
WIRE 2096 -688 2096 -736
WIRE 1440 -672 1440 -720
WIRE -304 -528 -304 -640
WIRE -304 -528 -416 -528
WIRE -128 -528 -304 -528
WIRE 0 -528 -64 -528
WIRE 64 -528 0 -528
WIRE 144 -528 64 -528
WIRE 288 -528 144 -528
WIRE 544 -528 368 -528
WIRE 576 -528 544 -528
WIRE 608 -528 576 -528
WIRE 1104 -528 1024 -528
WIRE 1360 -528 1104 -528
WIRE 1440 -528 1440 -608
WIRE 1440 -528 1360 -528
WIRE 1520 -528 1440 -528
WIRE 1696 -528 1568 -528
WIRE 1760 -528 1696 -528
WIRE 1792 -528 1760 -528
WIRE 1824 -528 1792 -528
WIRE 1984 -528 1904 -528
WIRE 2096 -528 2096 -624
WIRE 2096 -528 1984 -528
WIRE 2192 -528 2096 -528
WIRE -112 -512 -128 -528
WIRE 1360 -512 1360 -528
WIRE 1520 -512 1520 -528
WIRE 1696 -512 1696 -528
WIRE -192 -448 -192 -640
WIRE -192 -448 -416 -448
WIRE -128 -448 -112 -464
WIRE -128 -448 -192 -448
WIRE 144 -448 144 -464
WIRE 608 -448 608 -464
WIRE 1024 -448 1024 -528
WIRE 1104 -448 1104 -528
WIRE 1520 -448 1520 -464
WIRE 1760 -448 1760 -528
WIRE 1840 -448 1760 -448
WIRE 1984 -448 1984 -528
WIRE 1984 -448 1904 -448
WIRE 1440 -400 1440 -528
WIRE 2096 -384 2096 -528
WIRE 1104 -368 1104 -384
WIRE 1360 -368 1360 -432
WIRE 1696 -368 1696 -432
WIRE -304 -336 -304 -528
WIRE -192 -336 -192 -448
WIRE 1440 -288 1440 -336
WIRE 2096 -272 2096 -320
WIRE -304 -224 -304 -272
WIRE -192 -224 -192 -272
WIRE 1792 80 1792 48
WIRE 1856 80 1792 80
WIRE 1792 96 1792 80
WIRE 1792 192 1792 176
WIRE 1856 192 1792 192
WIRE 1792 240 1792 192
FLAG -416 -528 +in
IOPIN -416 -528 In
FLAG -416 -448 -in
IOPIN -416 -448 In
FLAG -304 -752 Vcc
IOPIN -304 -752 In
FLAG -304 -224 Vee
IOPIN -304 -224 In
FLAG -192 -752 Vcc
IOPIN -192 -752 In
FLAG -192 -224 Vee
IOPIN -192 -224 In
FLAG 1024 -368 0
FLAG 1104 -368 0
FLAG 1104 -528 n3
FLAG 1360 -368 0
FLAG -64 -448 0
FLAG 64 -448 0
FLAG 576 -528 n2
FLAG 608 -448 0
FLAG 144 -448 0
FLAG 544 -448 0
FLAG 0 -528 n1
FLAG 2192 -528 out
IOPIN 2192 -528 Out
FLAG 2096 -736 Vcc
IOPIN 2096 -736 In
FLAG 2096 -272 Vee
IOPIN 2096 -272 In
FLAG 1792 -528 n4
FLAG 1792 -976 0
FLAG 1792 -1248 Vcc
IOPIN 1792 -1248 In
FLAG 1792 240 Vee
IOPIN 1792 240 In
FLAG 1792 -32 0
FLAG 1920 -1088 0
FLAG 1920 80 0
FLAG 1440 -720 Vcc
IOPIN 1440 -720 In
FLAG 1440 -288 Vee
IOPIN 1440 -288 In
FLAG 1568 -448 0
FLAG 1520 -448 0
FLAG 1936 -1200 0
FLAG 1696 -368 0
FLAG 1936 192 0
SYMBOL diode -288 -640 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D1
SYMATTR Value Dclamp
SYMBOL diode -288 -272 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D2
SYMATTR Value Dclamp
SYMBOL diode -176 -640 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D3
SYMATTR Value Dclamp
SYMBOL diode -176 -272 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D4
SYMATTR Value Dclamp
SYMBOL !!Elements\\Bi 1024 -368 R180
WINDOW 0 32 60 Left 0
WINDOW 3 32 -13 Left 0
SYMATTR InstName B1
SYMATTR Value I=1e-3*slew*tanh(V(n2)*2*pi/slew)/2/pi
SYMATTR Value2 tripdv=10m tripdt={10m/GBW}
SYMBOL cap 1088 -448 R0
SYMATTR InstName C1
SYMATTR Value {1e-3/(2*pi*GBW)}
SYMATTR SpiceLine Rser=0
SYMBOL res 1376 -528 M0
SYMATTR InstName R1
SYMATTR Value {1e3*DCgain}
SYMBOL !!Elements\\G -64 -544 R0
SYMATTR InstName G1
SYMATTR Value 2e-3
SYMBOL cap 592 -528 R0
WINDOW 3 26 54 Left 0
SYMATTR Value {2.2034e-3/(fmargin*GBW*2*pi)}
SYMATTR InstName C2
SYMBOL cap 128 -528 R0
WINDOW 3 24 54 Left 0
SYMATTR Value {0.3374e-3/(fmargin*GBW*2*pi)}
SYMATTR InstName C3
SYMBOL ind 272 -512 R270
WINDOW 0 24 56 VTop 0
WINDOW 3 76 69 VBottom 0
SYMATTR InstName L1
SYMATTR Value {0.9705e3/(fmargin*GBW*2*pi)}
SYMBOL res 48 -544 R0
WINDOW 3 -47 132 Left 0
SYMATTR Value 1k noiseless
SYMATTR InstName R2
SYMBOL res 528 -544 R0
WINDOW 3 -47 132 Left 0
SYMATTR Value 1k noiseless
SYMATTR InstName R3
SYMBOL diode 2112 -624 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D5
SYMATTR Value Dclamp
SYMBOL diode 2112 -320 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D6
SYMATTR Value Dclamp
SYMBOL !!Elements\\Bi 1824 -528 R270
WINDOW 0 17 40 VTop 0
WINDOW 3 74 32 VBottom 0
SYMATTR InstName B_1
SYMATTR Value I=limit((V(n4)-V(out))/Rout,-curlimSink,curlimSource)
SYMATTR Value2 tripdv=10m tripdt={10m/GBW}
SYMBOL !!Elements\\Bi 1792 -1056 R0
SYMATTR InstName B2
SYMATTR Value I=if(I(B_1)>0,I(B_1)*1+Iq,I(B_1)*1e-3+Iq)
SYMATTR Value2 tripdv=10m tripdt={10m/GBW}
SYMBOL !!Elements\\Bi 1792 -32 R0
SYMATTR InstName B3
SYMATTR Value I=if(I(B_1)<-0,-I(B_1)+Iq,-I(B_1)*1e-3+Iq)
SYMATTR Value2 tripdv=10m tripdt={10m/GBW}
SYMBOL cap 1920 -1104 R90
WINDOW 0 -1 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C4
SYMATTR Value 1pF
SYMBOL cap 1920 64 R90
WINDOW 0 -1 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C5
SYMATTR Value 1pF
SYMBOL diode 1424 -608 M180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D_1
SYMATTR Value DsatPos
SYMBOL diode 1424 -336 M180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D_2
SYMATTR Value DsatNeg
SYMBOL !!Elements\\e 1568 -544 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL cap 1904 -464 R90
WINDOW 0 -1 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C6
SYMATTR Value 1p
SYMATTR SpiceLine Rpar=1e6
SYMBOL !!Elements\\Bi 1856 -1200 R270
WINDOW 0 17 40 VTop 0
WINDOW 3 -31 40 VBottom 0
SYMATTR InstName B4
SYMATTR Value I=I(D_1)
SYMATTR Value2 tripdv=10m tripdt={10m/GBW}
SYMBOL res 1712 -528 M0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL !!Elements\\Bi 1936 192 M270
WINDOW 0 17 40 VTop 0
WINDOW 3 -31 40 VBottom 0
SYMATTR InstName B5
SYMATTR Value I=I(D_2)
SYMATTR Value2 tripdv=10m tripdt={10m/GBW}
SYMBOL res 1808 -1200 M0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res 1808 80 M0
SYMATTR InstName R6
SYMATTR Value 100
TEXT -440 -856 Left 0 ;* PINOUT ORDER +IN -IN VCC VEE OUT
TEXT 168 -616 Left 0 ;high order poles (Bessel LPF)s)
TEXT -472 -1192 Left 0 ;Efficient voltage feedback opamp model.\nIntended as core model: add extra components to simulate additional parameters.
TEXT 1024 -576 Left 0 ;NOTE: series R sets zero
TEXT 1672 192 Left 0 ;optional
TEXT 1680 -1200 Left 0 ;optional
TEXT 616 144 Left 0 ;slew: slew rate [V/s], relative to GBW parameter\nfmargin: corner freq of high order poles [Hz], relative to GBW parameter
TEXT 608 32 Left 0 !.param GBW=10e6, DCgain=1e5, VsatPos=1.5V, VsatNeg=1.5V
TEXT 608 64 Left 0 !.param slew=1, fmargin=4, Rout=100, curlimSource=40mA, curlimSink=40mA, Iq=4mA
TEXT -488 -64 Left 0 !.model Dclamp D(Ron=0.1 Roff=2e8 Vfwd=0.6)
TEXT -488 -40 Left 0 !.model DsatPos D(Ron=300 Roff={DCgain*1e12} Vfwd={-VsatPos})
TEXT -488 -16 Left 0 !.model DsatNeg D(Ron=300 Roff={DCgain*1e12} Vfwd={-VsatNeg})
TEXT -472 -1104 Left 0 ;NOTES:\nsee LM328 version for crossover modelling\nsee TL072 version for phase reversal modelling
