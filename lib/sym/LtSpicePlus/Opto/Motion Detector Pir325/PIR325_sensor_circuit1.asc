Version 4
SHEET 1 1376 1704
WIRE 224 -592 160 -592
WIRE 160 -560 160 -592
WIRE 160 -464 160 -480
WIRE 640 -256 624 -256
WIRE 768 -256 752 -256
WIRE 624 -240 624 -256
WIRE 752 -240 752 -256
WIRE 624 -144 624 -160
WIRE 752 -144 752 -160
WIRE -512 0 -576 0
WIRE -368 0 -432 0
WIRE -272 0 -368 0
WIRE 240 0 -272 0
WIRE 352 0 320 0
WIRE 704 0 352 0
WIRE -272 16 -272 0
WIRE -48 64 -96 64
WIRE 80 64 16 64
WIRE 512 80 448 80
WIRE 640 80 576 80
WIRE -272 96 -272 80
WIRE 816 128 816 112
WIRE 704 144 704 0
WIRE 784 144 704 144
WIRE -96 160 -96 64
WIRE -48 160 -96 160
WIRE 80 160 80 64
WIRE 80 160 32 160
WIRE 896 160 848 160
WIRE 944 160 896 160
WIRE 1040 160 1008 160
WIRE 352 176 352 0
WIRE 448 176 448 80
WIRE 512 176 448 176
WIRE 640 176 640 80
WIRE 640 176 592 176
WIRE 784 176 640 176
WIRE -384 192 -496 192
WIRE -368 192 -368 0
WIRE -368 192 -384 192
WIRE 816 208 816 192
WIRE -496 224 -496 192
WIRE 0 288 0 272
WIRE -544 304 -560 304
WIRE -96 304 -96 160
WIRE -32 304 -96 304
WIRE 560 304 560 288
WIRE -560 320 -560 304
WIRE 80 320 80 160
WIRE 80 320 32 320
WIRE 144 320 80 320
WIRE 448 320 448 176
WIRE 448 320 224 320
WIRE 528 320 448 320
WIRE 816 320 816 304
WIRE -496 336 -496 320
WIRE -384 336 -496 336
WIRE -224 336 -384 336
WIRE -32 336 -224 336
WIRE 640 336 640 176
WIRE 640 336 592 336
WIRE 784 336 640 336
WIRE 224 352 224 320
WIRE 352 352 352 240
WIRE 528 352 352 352
WIRE 896 352 848 352
WIRE 944 352 896 352
WIRE 1040 352 1040 160
WIRE 1040 352 1008 352
WIRE 1072 352 1040 352
WIRE -224 368 -224 336
WIRE 0 368 0 352
WIRE 784 368 704 368
WIRE 560 384 560 368
WIRE 352 400 352 352
WIRE 816 400 816 384
WIRE -96 432 -96 304
WIRE 224 448 224 416
WIRE 1040 464 1040 352
WIRE -224 480 -224 448
WIRE 352 512 352 464
WIRE 704 512 704 368
WIRE 704 512 352 512
WIRE 816 528 816 496
WIRE 912 528 816 528
WIRE -96 560 -96 512
WIRE 144 560 144 320
WIRE 224 560 224 528
WIRE 224 560 144 560
WIRE 352 560 352 512
WIRE 816 560 816 528
WIRE 912 560 912 528
WIRE 816 656 816 640
WIRE 912 656 912 624
WIRE 1040 656 1040 544
WIRE -96 672 -96 624
WIRE 352 672 352 640
WIRE -400 848 -512 848
WIRE -352 848 -400 848
WIRE 736 848 688 848
WIRE 800 848 736 848
WIRE -512 880 -512 848
WIRE 800 880 800 848
WIRE 736 896 736 848
WIRE -512 976 -512 960
WIRE -368 976 -512 976
WIRE -512 992 -512 976
WIRE 736 992 736 960
WIRE 800 992 800 960
WIRE 800 992 736 992
WIRE 944 992 800 992
WIRE 800 1024 800 992
WIRE -368 1040 -368 1024
WIRE -512 1072 -512 1056
WIRE -96 1072 -144 1072
WIRE 512 1072 -96 1072
WIRE 640 1072 592 1072
WIRE 736 1072 640 1072
WIRE -368 1088 -448 1088
WIRE 640 1104 640 1072
WIRE -448 1120 -448 1088
WIRE -448 1120 -528 1120
WIRE -400 1120 -400 848
WIRE -368 1120 -400 1120
WIRE -112 1136 -144 1136
WIRE -400 1200 -400 1120
WIRE -368 1200 -400 1200
WIRE 640 1216 640 1184
WIRE 800 1216 800 1120
FLAG -224 480 0
FLAG 352 672 0
FLAG -96 672 0
FLAG 1040 656 0
FLAG 816 112 VCC
FLAG 816 304 VCC
FLAG 0 272 VCC
FLAG 560 288 VCC
FLAG 0 368 0
FLAG 560 384 0
FLAG 816 400 0
FLAG 816 208 0
FLAG 1072 352 comp1
IOPIN 1072 352 Out
FLAG 816 656 0
FLAG 816 496 VCC
FLAG 912 656 0
FLAG -576 0 VCC
FLAG -272 96 0
FLAG -384 336 2
FLAG -560 320 sensor1
FLAG 160 -464 0
FLAG 224 -592 sensor1
IOPIN 224 -592 Out
FLAG -384 192 1
FLAG -368 1040 0
FLAG -512 1072 0
FLAG -352 848 VCC
FLAG -96 1072 mf1
FLAG -528 1120 comp1
IOPIN -528 1120 In
FLAG 640 1216 0
FLAG 800 1216 0
FLAG 688 848 VCC
FLAG 944 992 relay1
IOPIN 944 992 Out
FLAG 896 160 cv1
FLAG 896 352 cv2
FLAG 624 -144 0
FLAG 752 -144 0
FLAG 640 -256 cv1
FLAG 768 -256 cv2
SYMBOL nmos -544 224 R0
SYMATTR InstName M1
SYMATTR Value MOS1
SYMBOL res -240 352 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 496 192 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R8
SYMATTR Value 1MEG
SYMBOL cap 512 96 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C5
SYMATTR Value .1µ
SYMBOL diode 336 400 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 336 176 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 336 544 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 224 16 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 208 432 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -112 416 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -64 176 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R4
SYMATTR Value 1MEG
SYMBOL cap -48 80 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C3
SYMATTR Value .1µ
SYMBOL diode 944 176 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 944 368 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 1024 448 R0
SYMATTR InstName R9
SYMATTR Value 1MEG
SYMBOL voltage 816 544 R0
WINDOW 3 31 86 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 5
SYMATTR InstName V3
SYMBOL polcap -112 560 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL polcap 208 352 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL polcap 896 560 R0
SYMATTR InstName C6
SYMATTR Value 10µ
SYMBOL polcap -288 16 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res -416 -16 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL voltage 160 -576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL pwl value_scale_factor=1 time_scale_factor=.7 FILE=pir_pwl.txt
SYMBOL CD4538B -256 912 R0
WINDOW 39 -63 348 Left 0
SYMATTR SpiceLine VDD=5  SPEED=1.0  TRIPDT=100e-6
SYMATTR InstName U10
SYMATTR SpiceModel VCC 0
SYMBOL res -528 864 R0
SYMATTR InstName R10
SYMATTR Value 1MEG
SYMBOL cap -528 992 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMBOL res 496 1088 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 624 1088 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL npn 736 1024 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL ind 784 864 R0
WINDOW 39 36 108 Left 0
SYMATTR SpiceLine Rser=100
SYMATTR InstName LRELAY
SYMATTR Value .1
SYMBOL diode 752 960 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL Opamps\\LT1491 816 288 R0
SYMATTR InstName U1D
SYMBOL Opamps\\LT1491 816 96 R0
SYMATTR InstName U1C
SYMBOL Opamps\\LT1491 0 256 R0
SYMATTR InstName U1A
SYMBOL Opamps\\LT1491 560 272 R0
SYMATTR InstName U1B
SYMBOL res 608 -256 R0
SYMATTR InstName RCV1
SYMATTR Value 1e6
SYMBOL res 736 -256 R0
SYMATTR InstName RCV2
SYMATTR Value 1e6
TEXT -696 -72 Left 0 !.op
TEXT -696 -96 Left 0 !.MODEL MOS1 NMOS(Level=1 Kp=20u W=100u L=2u Vto=-1.1 lambda=0.02)
TEXT -696 -208 Left 0 !.tran 0 5 0 1m
TEXT -392 432 Left 0 ;3
TEXT -416 728 Left 0 ;1
TEXT -528 728 Left 0 ;2
TEXT -528 600 Left 0 ;3
TEXT -688 624 Left 0 ;1 drain\n2 source\n3 ground
TEXT -520 560 Left 0 ;BOTTOM VIEW
TEXT -536 168 Left 0 ;PIR325
TEXT -680 568 Left 0 ;PIR325
TEXT -696 -712 Left 0 ;Infrared Motion Detector with PIR325\nCircuit from http://www.glolab.com/pirparts/infrared.html\nHelmut Sennewald,  \nChanges: Value of R6 and R7 decreased to 100kOhm!\nOpamps changed from LM324 to LT1491.\nRecommendations: This circuit requires a 5V-regulator \n(LM317, LM7805...), because it is very sensitive to changes \non the VCC voltage. It may be also better to replace R7 with \ntwo diodes in series. \nThe ouput voltage swing of the opamp is critical if VCC is\nonly 5V with a CMOS-level input connected to "comp1".\nThe opamps can be replaced with other single supply\nopamps like LM324 if the bias current and the minimum\noutput voltage is sufficient for proper operation of the \nCMOS monoflop. This may require the symbol "opamp2"\nand a  SPICE line:  .include LM324.lib
TEXT -696 -184 Left 0 !.options plotwinsize=0
TEXT 120 -704 Left 0 ;Sensor Pulse Model\n \nAdjust "value_scale_factor" and "time_scale_factor"
TEXT -144 1168 Left 0 ;Adjust TRIPDT to speedup the simulation\nRightMouseClick on the symbol body.\nChange the value of TRIPDT to 100e-6
TEXT -688 80 Left 0 ;.options tseed=1m
TEXT -696 -152 Left 0 !.options gminsteps=0\n.options method=Gear
TEXT 584 -352 Left 0 ;Only required with opamp LT1491 \nto solve a convergence problem.\nThe LT1367 have hadn't this problem.
TEXT 528 576 Left 0 ;optional \nreplacement \nfor R7
TEXT 24 -336 Left 0 ;The digital library models need a change \nfor very slow signals. \nAdjust TRIPDT to speedup the simulation\nRightMouseClick on the symbol body.\nChange the value of TRIPDT to 100e-6
TEXT 376 848 Left 0 ;LM7805
TEXT 496 832 Left 0 ;VCC
TEXT 256 832 Left 0 ;Vunreg
LINE Normal -375 448 -407 448
LINE Normal -375 480 -375 448
LINE Normal -359 480 -391 480
LINE Normal -375 496 -359 480
LINE Normal -391 480 -375 496
LINE Normal -592 256 -592 224
LINE Normal -608 272 -592 256
LINE Normal -592 288 -608 272
LINE Normal -608 304 -592 288
LINE Normal -608 304 -608 304
LINE Normal -640 448 -640 416
LINE Normal -410 448 -640 448
LINE Normal -640 176 -640 208
LINE Normal -560 176 -640 176
LINE Normal -560 304 -560 176
LINE Normal -640 304 -640 336
LINE Normal -592 320 -608 304
LINE Normal -608 336 -592 320
LINE Normal -592 352 -608 336
LINE Normal -608 368 -592 352
LINE Normal -592 384 -608 368
LINE Normal -592 448 -592 384
LINE Normal -592 448 -592 448
LINE Normal -592 176 -592 224
LINE Normal 512 560 480 560
LINE Normal 496 592 512 560
LINE Normal 480 560 496 592
LINE Normal 512 592 480 592
LINE Normal 512 624 480 624
LINE Normal 496 656 512 624
LINE Normal 480 624 496 656
LINE Normal 512 656 480 656
LINE Normal 496 624 496 592
LINE Normal 496 624 496 624
LINE Normal 496 560 496 544
LINE Normal 496 672 496 656
LINE Normal 464 592 448 592
LINE Normal 464 608 448 608
LINE Normal 456 584 440 600
LINE Normal 440 600 454 614
LINE Normal 416 912 416 886
LINE Normal 400 912 416 912
LINE Normal 416 928 400 912
LINE Normal 432 912 416 928
LINE Normal 416 912 432 912
LINE Normal 528 848 483 848
LINE Normal 352 848 307 848
RECTANGLE Normal -408 488 -696 144
RECTANGLE Normal -382 673 -398 657
RECTANGLE Normal -672 432 -704 192
RECTANGLE Normal -624 304 -656 208
RECTANGLE Normal -624 416 -656 336
RECTANGLE Normal 1040 -96 560 -384
RECTANGLE Normal 1040 -432 96 -736
RECTANGLE Normal 483 886 352 816
CIRCLE Normal -397 729 -525 601
CIRCLE Normal -423 706 -439 690
CIRCLE Normal -480 705 -496 689
CIRCLE Normal -481 644 -497 628
