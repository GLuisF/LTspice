Version 4
SHEET 1 1728 872
WIRE -96 208 -144 208
WIRE -96 320 -96 208
WIRE -96 544 -144 544
WIRE -96 544 -96 384
WIRE -16 208 -96 208
WIRE -16 320 -16 208
WIRE -16 432 -16 384
WIRE -16 544 -96 544
WIRE -16 544 -16 512
WIRE 48 208 -16 208
WIRE 48 544 -16 544
WIRE 288 416 288 368
WIRE 288 544 112 544
WIRE 288 544 288 496
WIRE 400 368 288 368
WIRE 400 416 400 368
WIRE 400 544 288 544
WIRE 400 544 400 496
WIRE 432 368 400 368
WIRE 480 368 432 368
WIRE 480 432 480 368
WIRE 480 544 400 544
WIRE 480 544 480 496
WIRE 624 416 624 368
WIRE 624 544 480 544
WIRE 624 544 624 496
WIRE 688 368 624 368
WIRE 752 368 688 368
WIRE 752 432 752 368
WIRE 752 544 624 544
WIRE 752 544 752 512
WIRE 864 368 752 368
WIRE 864 432 864 368
WIRE 864 544 752 544
WIRE 864 544 864 496
WIRE 928 208 112 208
WIRE 928 256 928 208
WIRE 928 368 864 368
WIRE 928 368 928 320
WIRE 976 672 976 640
WIRE 976 784 976 752
WIRE 976 800 976 784
WIRE 1008 368 928 368
WIRE 1040 640 976 640
WIRE 1056 208 928 208
WIRE 1056 288 1056 208
WIRE 1056 544 864 544
WIRE 1056 544 1056 384
WIRE 1136 640 1040 640
WIRE 1136 672 1136 640
WIRE 1136 784 976 784
WIRE 1136 784 1136 752
WIRE 1184 208 1056 208
WIRE 1184 208 1184 144
WIRE 1184 336 1184 208
WIRE 1184 544 1056 544
WIRE 1184 544 1184 400
WIRE 1248 640 1136 640
WIRE 1248 672 1248 640
WIRE 1248 784 1136 784
WIRE 1248 784 1248 736
WIRE 1328 208 1328 144
WIRE 1328 272 1328 208
WIRE 1328 544 1184 544
WIRE 1328 544 1328 352
WIRE 1456 208 1328 208
WIRE 1456 272 1456 208
WIRE 1456 400 1456 352
WIRE 1456 432 1456 400
WIRE 1456 544 1328 544
WIRE 1456 544 1456 512
WIRE 1584 208 1456 208
WIRE 1584 288 1584 208
WIRE 1584 400 1456 400
WIRE 1584 400 1584 352
WIRE 1632 400 1584 400
WIRE 1632 544 1456 544
FLAG -144 208 A
IOPIN -144 208 In
FLAG -144 544 K
IOPIN -144 544 In
FLAG 1632 544 S
IOPIN 1632 544 In
FLAG 1184 144 C
IOPIN 1184 144 In
FLAG 1328 144 V
IOPIN 1328 144 In
FLAG 1632 400 E
IOPIN 1632 400 In
FLAG 976 800 0
FLAG 1040 640 en
FLAG 688 368 ga
FLAG 432 368 ta
SYMBOL diode -32 320 R0
SYMATTR InstName D1
SYMATTR Value LED
SYMBOL cap -112 320 R0
SYMATTR InstName C1
SYMATTR Value 1p
SYMBOL voltage -16 416 R0
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL res 384 400 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL cap 464 432 R0
SYMATTR InstName C2
SYMATTR Value 200p
SYMBOL bi2 288 416 R0
WINDOW 3 -142 152 Left 0
SYMATTR Value I=TABLE(I(V1), 0,0,2.5m,50m,15m, 55m)
SYMATTR InstName B2
SYMBOL cap 48 224 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C10
SYMATTR Value 0.1p
SYMBOL cap 48 560 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C11
SYMATTR Value 0.1p
SYMBOL nmos 1008 288 R0
SYMATTR InstName M1
SYMATTR Value NMOS1
SYMBOL cap 912 256 R0
SYMATTR InstName C5
SYMATTR Value 10p
SYMBOL diode 1600 352 R180
WINDOW 0 -33 72 Left 0
WINDOW 3 -39 -11 Left 0
SYMATTR InstName De1
SYMATTR Value Dd1
SYMBOL res 1440 256 R0
SYMATTR InstName R6
SYMATTR Value 6k
SYMBOL res 1440 416 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL bi2 976 672 R0
WINDOW 3 -11 173 Left 0
SYMATTR Value I=TABLE(V(E,S), 0,0,1.4,0,1.5, 1m)
SYMATTR InstName B4
SYMBOL res 1120 656 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1312 256 R0
SYMATTR InstName R5
SYMATTR Value 1.5k
SYMBOL cap 1168 336 R0
SYMATTR InstName C6
SYMATTR Value 10p
SYMBOL cap 1232 672 R0
SYMATTR InstName C4
SYMATTR Value 10p
SYMBOL bi2 624 416 R0
WINDOW 3 -20 153 Left 0
SYMATTR Value I=V(ta,s)*V(en)*10m
SYMATTR InstName B3
SYMBOL res 736 416 R0
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL cap 848 432 R0
SYMATTR InstName C3
SYMATTR Value 20p
TEXT -120 -96 Left 0 !.model LED D(Is=1e-17 Rs=4 N=1.5 Eg=1.7 CJO=5p Tt=5n)
TEXT -112 -136 Left 0 ;Optocoupler 6N137
TEXT -120 -56 Left 0 !.model NMOS1 NMOS(Vt0=2 Kp=0.03 Rs=5 Rd=5 lambda=0.02)
TEXT 1080 624 Left 0 ;0 and 1
TEXT -120 -16 Left 0 !.model Dd1 D(Is=1e-7 Rs=10 Cjo=5p Tt=5n)
