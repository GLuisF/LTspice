Version 4
SHEET 1 880 680
WIRE 240 -48 160 -48
WIRE 352 -48 240 -48
WIRE 416 -48 352 -48
WIRE 240 -16 240 -48
WIRE 352 -16 352 -48
WIRE 160 0 160 -48
WIRE -336 32 -352 32
WIRE -176 32 -192 32
WIRE -48 32 -112 32
WIRE 64 32 32 32
WIRE -336 64 -336 32
WIRE 240 80 240 64
WIRE 240 80 160 80
WIRE 352 80 352 48
WIRE 352 80 240 80
WIRE 416 80 352 80
WIRE 416 112 416 80
WIRE 432 112 416 112
WIRE -192 144 -192 32
WIRE -176 144 -192 144
WIRE -96 144 -112 144
WIRE -48 144 -96 144
WIRE 64 144 64 32
WIRE 64 144 32 144
WIRE 96 144 64 144
WIRE 240 144 160 144
WIRE 352 144 240 144
WIRE 416 144 416 112
WIRE 416 144 352 144
WIRE -336 160 -336 128
WIRE 240 176 240 144
WIRE 352 176 352 144
WIRE -192 192 -192 144
WIRE 160 192 160 144
WIRE 64 208 64 144
WIRE -336 272 -336 240
WIRE -336 272 -352 272
WIRE 240 272 240 256
WIRE 240 272 160 272
WIRE 352 272 352 240
WIRE 352 272 240 272
WIRE 416 272 352 272
FLAG -192 272 0
FLAG 96 144 l1
FLAG 64 272 0
FLAG -352 32 A
IOPIN -352 32 In
FLAG 416 272 Ldr2
FLAG -352 272 K
IOPIN -352 272 In
FLAG 416 -48 Ldr1
FLAG 432 112 Tab
FLAG -96 144 nd
SYMBOL bi 160 192 R0
WINDOW 3 -60 107 Left 0
SYMATTR Value I=if(V(l1)>0,V(Tab,Ldr2)/RLdr(V(l1),b,a,Rs),0)
SYMATTR InstName B1
SYMBOL res 224 160 R0
SYMATTR InstName Rdark
SYMATTR Value 1e6
SYMBOL cap 48 208 R0
WINDOW 3 -58 54 Left 0
SYMATTR Value 100n
SYMATTR InstName C1
SYMBOL cap 336 176 R0
WINDOW 3 32 52 Left 0
SYMATTR Value 3.5p
SYMATTR InstName C2
SYMBOL diode -112 128 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName D1
SYMATTR Value Dsw
SYMBOL res -64 48 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value 35k
SYMBOL diode -176 48 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName D2
SYMATTR Value Dsw
SYMBOL LED -352 64 R0
SYMATTR InstName D3
SYMATTR Value QTLP690C
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL h -192 176 R0
SYMATTR InstName H1
SYMATTR Value Vs 1
SYMBOL voltage -336 144 R0
SYMATTR InstName Vs
SYMATTR Value 0
SYMBOL bi 160 0 R0
WINDOW 3 35 -77 Left 0
SYMATTR Value I=if(V(l1)>0,V(Ldr1,Tab)/RLdr(V(l1),b,a,Rs),0)
SYMATTR InstName B2
SYMBOL res 224 -32 R0
SYMATTR InstName Rdark1
SYMATTR Value 1e6
SYMBOL cap 336 -16 R0
WINDOW 3 32 52 Left 0
SYMATTR Value 3.5p
SYMATTR InstName C3
SYMBOL bi 32 144 R90
WINDOW 0 -32 40 VBottom 0
WINDOW 3 32 40 VTop 0
SYMATTR InstName B3
SYMATTR Value I=V(l1,nd)**1.4/22.5k
TEXT -288 -40 Left 0 !.model dsw D(Ron=1 Roff=1G Vfwd=0)
TEXT -288 -88 Left 0 !.param b=3.156 a=1.197 Rs=264.7
TEXT -400 -168 Left 0 ;Vactrol VTL5C2/2, Mfg: Perkin-Elmer -somewhat preliminary-\n-LED I(V) characteristics was not fitted to datasheet-
TEXT -288 -64 Left 0 !.func RLdr(i,b,a,Rs) {b/i**a+Rs}
TEXT 176 112 Left 0 ;Rdark=min.Rdark
TEXT 296 -160 Left 0 ;Timing optimized for\nI= 0->10mA and 10mA->0
TEXT 416 184 Left 0 ;C2/C3 taken\nfrom NORP12
TEXT 448 -16 Left 0 ;Assumption:\npins ldr1/tab\nhave R(i) shown\nin Datasheet
TEXT -384 328 Left 0 !.model QTLP690C D(Is=1e-22 Rs=6 N=1.5 Iave=160m Vpk=5 mfg=Fairchild type=LED)
