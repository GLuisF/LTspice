Version 4
SHEET 1 1176 1092
WIRE -1072 -640 -1200 -640
WIRE -1056 -640 -1072 -640
WIRE -1008 -576 -1024 -576
WIRE -896 -576 -928 -576
WIRE -864 -576 -864 -592
WIRE -864 -576 -896 -576
WIRE -576 -576 -864 -576
WIRE -1024 -528 -1024 -576
WIRE -208 -528 -272 -528
WIRE -176 -528 -208 -528
WIRE 192 -528 96 -528
WIRE 352 -528 288 -528
WIRE -1072 -512 -1072 -640
WIRE 288 -512 288 -528
WIRE -528 -496 -528 -528
WIRE -272 -496 -272 -528
WIRE 96 -496 96 -528
WIRE 192 -496 192 -528
WIRE 240 -496 192 -496
WIRE -576 -480 -576 -576
WIRE -368 -480 -368 -624
WIRE -320 -480 -368 -480
WIRE -208 -480 -208 -528
WIRE -1200 -464 -1200 -640
WIRE -1088 -464 -1088 -528
WIRE -1072 -464 -1088 -464
WIRE -896 -464 -896 -576
WIRE -1088 -448 -1088 -464
WIRE -864 -448 -864 -576
WIRE -848 -448 -864 -448
WIRE -368 -448 -368 -480
WIRE 240 -448 192 -448
WIRE -576 -432 -608 -432
WIRE -1200 -368 -1200 -384
WIRE -1200 -368 -1264 -368
WIRE -1088 -368 -1200 -368
WIRE -1024 -368 -1024 -448
WIRE -1024 -368 -1088 -368
WIRE -896 -368 -896 -400
WIRE -896 -368 -1024 -368
WIRE -528 -368 -528 -416
WIRE -528 -368 -896 -368
WIRE -368 -368 -528 -368
WIRE -320 -368 -320 -432
WIRE -320 -368 -368 -368
WIRE -272 -368 -272 -416
WIRE -272 -368 -320 -368
WIRE -208 -368 -208 -416
WIRE -208 -368 -272 -368
WIRE 96 -368 96 -416
WIRE 96 -368 -208 -368
WIRE 192 -368 192 -448
WIRE 192 -368 96 -368
WIRE 288 -368 288 -432
WIRE 288 -368 192 -368
WIRE -1024 -336 -1024 -368
WIRE -784 -304 -784 -432
WIRE -704 -304 -784 -304
WIRE -528 -304 -704 -304
WIRE -528 -288 -784 -288
WIRE -384 -288 -464 -288
WIRE -1136 -224 -1184 -224
WIRE -1104 -224 -1136 -224
WIRE -944 -224 -1040 -224
WIRE -784 -224 -784 -288
WIRE -784 -224 -944 -224
WIRE -1136 -160 -1136 -224
WIRE -1104 -160 -1136 -160
WIRE -992 -160 -1040 -160
WIRE -1184 -128 -1184 -224
WIRE -1264 0 -1264 -368
WIRE -1184 0 -1184 -48
WIRE -1184 0 -1264 0
WIRE -464 32 -480 32
WIRE -352 32 -464 32
WIRE -256 32 -352 32
WIRE -224 32 -256 32
WIRE 368 32 368 -16
WIRE -128 48 -160 48
WIRE 912 48 912 0
WIRE 864 64 704 64
WIRE 288 80 240 80
WIRE 592 80 448 80
WIRE 704 80 704 64
WIRE 704 80 592 80
WIRE -464 112 -464 32
WIRE -352 112 -352 96
WIRE -160 112 -192 112
WIRE 288 128 -96 128
WIRE 800 128 464 128
WIRE 864 128 864 112
WIRE -256 144 -256 32
WIRE -160 144 -256 144
WIRE 48 176 -144 176
WIRE 912 176 912 128
WIRE 1088 176 912 176
WIRE 256 192 112 192
WIRE -464 208 -464 192
WIRE -352 208 -352 192
WIRE -352 208 -464 208
WIRE 48 208 32 208
WIRE 256 208 128 208
WIRE 368 208 368 176
WIRE 368 208 320 208
WIRE -352 224 -352 208
WIRE 256 224 224 224
WIRE 800 224 800 128
WIRE 832 224 800 224
WIRE 256 240 224 240
WIRE 912 240 912 176
WIRE 832 256 832 224
WIRE 864 256 832 256
WIRE -544 272 -752 272
WIRE -384 272 -464 272
WIRE -144 272 -144 176
WIRE -144 272 -384 272
WIRE 128 288 128 208
WIRE 128 288 112 288
WIRE -384 304 -384 272
WIRE 864 336 864 304
WIRE 912 336 912 320
WIRE 592 368 592 80
WIRE 592 368 144 368
WIRE -384 384 -384 368
WIRE -384 384 -576 384
WIRE -576 400 -576 384
WIRE 144 416 144 368
WIRE 160 416 144 416
WIRE 160 432 96 432
WIRE 160 448 144 448
WIRE 256 464 224 464
WIRE 368 464 368 432
WIRE 368 464 320 464
WIRE -976 576 -976 544
WIRE -768 576 -816 576
WIRE -624 576 -704 576
WIRE -624 608 -704 608
WIRE -976 672 -976 640
FLAG -192 112 0
FLAG -752 272 cs
IOPIN -752 272 In
FLAG -576 400 0
FLAG -816 576 vcc
IOPIN -816 576 In
FLAG -624 608 uvl
IOPIN -624 608 Out
FLAG 112 288 uvl
IOPIN 112 288 In
FLAG -624 576 uvl_
IOPIN -624 576 Out
FLAG 912 336 0
FLAG 864 336 0
FLAG 864 128 0
FLAG 912 0 vcc
IOPIN 912 0 In
FLAG 1088 176 gd
IOPIN 1088 176 Out
FLAG 96 432 uvl
IOPIN 96 432 In
FLAG -976 672 0
FLAG -976 544 vcc
IOPIN -976 544 In
FLAG -480 32 zcd
IOPIN -480 32 In
FLAG -128 48 dis
IOPIN -128 48 Out
FLAG 224 224 dis
IOPIN 224 224 In
FLAG -352 224 0
FLAG -1024 -336 0
FLAG -1088 -528 inv
IOPIN -1088 -528 In
FLAG -864 -592 comp
IOPIN -864 -592 Out
FLAG -1056 -640 ref25
IOPIN -1056 -640 Out
FLAG -944 -224 dyn_ovp
FLAG -992 -160 soft_ovp
FLAG -1184 -224 iea
FLAG -704 -304 stat_ovp
FLAG -608 -432 ref25
IOPIN -608 -432 In
FLAG -528 -528 comp_offset
IOPIN -528 -528 Out
FLAG -368 -624 mult
IOPIN -368 -624 In
FLAG -176 -528 mult_clamp
IOPIN -176 -528 Out
FLAG 352 -528 mult_out
IOPIN 352 -528 Out
FLAG -384 -288 ovp
IOPIN -384 -288 Out
FLAG 224 240 ovp
IOPIN 224 240 In
FLAG 32 208 mult_out
IOPIN 32 208 In
FLAG 368 -16 delaytest
FLAG 240 80 uvl_
IOPIN 240 80 In
FLAG 368 432 delaytest
FLAG 144 448 dis
IOPIN 144 448 Out
SYMBOL Digital\\diffschmtbuf -160 64 R0
WINDOW 3 -311 -97 Left 0
SYMATTR Value trise=10n vt=-2 vh=0.1 td = 200n tripdt=10n
SYMATTR InstName A5
SYMBOL cap -400 304 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMATTR SpiceLine Rpar=2meg
SYMBOL res -448 256 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R2
SYMATTR Value 40k
SYMBOL sw 912 144 M180
SYMATTR InstName S2
SYMATTR Value myswitch
SYMBOL sw 912 336 M180
SYMATTR InstName S3
SYMATTR Value myswitch
SYMBOL diode -960 640 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D1
SYMATTR Value Dvcc
SYMBOL res -480 96 R0
SYMATTR InstName R5
SYMATTR Value 2meg
SYMBOL e -1024 -544 R0
SYMATTR InstName Eopamp
SYMATTR Value table
SYMATTR Value2 (0,2)(1m,5.8)
SYMBOL res -1104 -464 R0
SYMATTR InstName R8
SYMATTR Value 2meg
SYMBOL h -1184 -144 R0
SYMATTR InstName H1
SYMATTR Value Eopamp 100000
SYMBOL e -528 -512 R0
SYMATTR InstName E6
SYMATTR Value table
SYMATTR Value2 (0,0)(0.2,0.05)(0.5,0.2)(0.7,0.33)(1,0.5)(1.5,0.9)(2,1.3)(2.5,1.6)(3.3,1.8)
SYMBOL res -384 -464 R0
SYMATTR InstName R16
SYMATTR Value 2meg
SYMBOL e 288 -528 R0
SYMATTR InstName E9
SYMATTR Value table
SYMATTR Value2 (0,0)(1.6,1.6)(2,1.7)
SYMBOL Digital\\or -496 -336 R0
WINDOW 3 -8 36 Left 0
SYMATTR Value trise=20n
SYMATTR InstName A14
SYMBOL Digital\\buf -848 -512 R0
WINDOW 3 8 44 Left 0
SYMATTR Value ref = 2.25 trise = 100n tripdt=3n
SYMATTR InstName A10
SYMBOL Digital\\buf1 -1104 -224 R0
WINDOW 3 8 95 Left 0
SYMATTR Value ref = 3.7 trise = 100n
SYMATTR InstName A11
SYMBOL Digital\\diffschmitt -768 528 R0
WINDOW 3 8 44 Left 0
SYMATTR Value vt=10.75 vh=1.25
SYMATTR InstName A12
SYMATTR Value2 trise=100n td=100n
SYMBOL Digital\\diffschmitt -1104 -272 R0
WINDOW 3 8 44 Left 0
SYMATTR Value vt = 2.5 vh =1.5 trise = 100n
SYMATTR InstName A2
SYMBOL bv -1200 -480 R0
SYMATTR InstName B1
SYMATTR Value V=V(uvl_)*2.5
SYMBOL bv 96 -512 R0
SYMATTR InstName B2
SYMATTR Value V=if(v(soft_ovp),0.1,v(mult_clamp)*v(comp_offset))
SYMBOL res -912 -592 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL cap -912 -464 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL Digital\\dflop 368 32 R0
WINDOW 3 8 12 Left 0
SYMATTR Value td=20n trise=20n
SYMATTR InstName A1
SYMBOL Digital\\diffschmtbuf 48 128 R0
WINDOW 3 -182 115 Left 0
SYMATTR Value td=200n tripdt=10n vt=1m trise=20n
SYMATTR InstName A3
SYMBOL Digital\\or 288 160 R0
WINDOW 3 -8 36 Left 0
SYMATTR Value trise=20n
SYMATTR InstName A7
SYMBOL voltage -352 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0.6
SYMBOL diode -336 96 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName D2
SYMATTR Value Dzcd
SYMBOL Digital\\or 192 384 R0
WINDOW 3 -109 142 Left 0
SYMATTR Value trise=300u tfall=100n
SYMATTR InstName A13
SYMBOL Digital\\schmtbuf 256 400 R0
WINDOW 3 29 96 Left 0
SYMATTR Value vt=0.5 vh=0.1 trise=20n
SYMATTR InstName A15
SYMBOL Digital\\buf -224 -32 R0
WINDOW 3 61 23 Left 0
SYMATTR Value ref = 0.15 trise = 100n
SYMATTR InstName A4
SYMBOL g -272 -512 R0
SYMATTR InstName G1
SYMATTR Value table
SYMATTR Value2 (0,0)(3,0.3)
SYMBOL cap -224 -480 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMATTR SpiceLine Rpar=10
TEXT -1104 136 Left 0 !.model myswitch sw(ron=25 roff=1meg vt=0.5 vh=-0.2)\n.model Dvcc d(vfwd = 0.6 vrev =20 roff=240k)\n.model Dzcd d(ron=50 vfwd=0 vrev=4.5)
