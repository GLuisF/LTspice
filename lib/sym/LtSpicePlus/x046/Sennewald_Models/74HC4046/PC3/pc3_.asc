Version 4
SHEET 1 1156 2252
WIRE -720 -2288 -960 -2288
WIRE -2944 -2272 -2976 -2272
WIRE -2848 -2272 -2880 -2272
WIRE -2144 -2256 -2176 -2256
WIRE -2048 -2256 -2064 -2256
WIRE -2016 -2256 -2048 -2256
WIRE -2976 -2192 -2976 -2272
WIRE -2944 -2192 -2976 -2192
WIRE -2848 -2192 -2848 -2272
WIRE -2848 -2192 -2864 -2192
WIRE -2736 -2192 -2784 -2192
WIRE -2320 -2176 -2384 -2176
WIRE -2160 -2176 -2240 -2176
WIRE -2048 -2176 -2048 -2256
WIRE -2048 -2176 -2160 -2176
WIRE -960 -2176 -960 -2288
WIRE -928 -2176 -960 -2176
WIRE -608 -2176 -768 -2176
WIRE -1408 -2128 -1440 -2128
WIRE -1296 -2128 -1344 -2128
WIRE -928 -2128 -1216 -2128
WIRE -720 -2128 -720 -2288
WIRE -720 -2128 -752 -2128
WIRE -3136 -2096 -3184 -2096
WIRE -2976 -2096 -2976 -2192
WIRE -2976 -2096 -3056 -2096
WIRE -2912 -2096 -2976 -2096
WIRE -2736 -2080 -2736 -2192
WIRE -2736 -2080 -2848 -2080
WIRE -2528 -2080 -2736 -2080
WIRE -2384 -2080 -2384 -2176
WIRE -2384 -2080 -2448 -2080
WIRE -2304 -2080 -2384 -2080
WIRE -2912 -2064 -2944 -2064
WIRE -2160 -2064 -2160 -2176
WIRE -2160 -2064 -2240 -2064
WIRE -1712 -2064 -1776 -2064
WIRE -1616 -2064 -1712 -2064
WIRE -2304 -2048 -2336 -2048
WIRE -1440 -2032 -1440 -2128
WIRE -1440 -2032 -1472 -2032
WIRE -1776 -2000 -1776 -2064
WIRE -2944 -1984 -2944 -2064
WIRE -2336 -1968 -2336 -2048
WIRE -1776 -1904 -1776 -1920
WIRE -2464 -1792 -2464 -1856
WIRE -608 -1792 -608 -2176
WIRE -608 -1792 -1312 -1792
WIRE -2464 -1680 -2464 -1712
WIRE -2688 -1584 -2688 -1616
WIRE -2288 -1584 -2288 -1616
WIRE -2688 -1488 -2688 -1504
WIRE -2288 -1488 -2288 -1504
WIRE -976 -1488 -1680 -1488
WIRE -1296 -1456 -1536 -1456
WIRE -1680 -1424 -1680 -1488
WIRE -1648 -1424 -1680 -1424
WIRE -1536 -1408 -1536 -1456
WIRE -1440 -1408 -1536 -1408
WIRE -1296 -1408 -1296 -1456
WIRE -1264 -1408 -1296 -1408
WIRE -1776 -1376 -1952 -1376
WIRE -1648 -1376 -1712 -1376
WIRE -1536 -1376 -1536 -1408
WIRE -1536 -1376 -1584 -1376
WIRE -1440 -1376 -1472 -1376
WIRE -1344 -1376 -1376 -1376
WIRE -1264 -1376 -1344 -1376
WIRE -1104 -1376 -1200 -1376
WIRE -1472 -1344 -1472 -1376
WIRE -1328 -1344 -1472 -1344
WIRE -1104 -1344 -1136 -1344
WIRE -1008 -1344 -1040 -1344
WIRE -944 -1344 -1008 -1344
WIRE -848 -1344 -944 -1344
WIRE -752 -1344 -784 -1344
WIRE -656 -1344 -688 -1344
WIRE -576 -1344 -592 -1344
WIRE -432 -1344 -496 -1344
WIRE -1344 -1328 -1344 -1376
WIRE -1344 -1328 -1472 -1328
WIRE -1136 -1312 -1136 -1344
WIRE -976 -1312 -976 -1488
WIRE -976 -1312 -1136 -1312
WIRE -1008 -1296 -1008 -1344
WIRE -1008 -1296 -1136 -1296
WIRE -1776 -1280 -1920 -1280
WIRE -1648 -1280 -1712 -1280
WIRE -1472 -1280 -1472 -1328
WIRE -1440 -1280 -1472 -1280
WIRE -1536 -1248 -1584 -1248
WIRE -1440 -1248 -1536 -1248
WIRE -1328 -1248 -1328 -1344
WIRE -1328 -1248 -1376 -1248
WIRE -1264 -1248 -1328 -1248
WIRE -1136 -1248 -1136 -1296
WIRE -1104 -1248 -1136 -1248
WIRE -1648 -1232 -1680 -1232
WIRE -1104 -1216 -1200 -1216
WIRE -976 -1216 -976 -1312
WIRE -976 -1216 -1040 -1216
WIRE -1536 -1200 -1536 -1248
WIRE -1264 -1200 -1536 -1200
WIRE -1680 -1168 -1680 -1232
WIRE -944 -1168 -944 -1344
WIRE -944 -1168 -1680 -1168
WIRE -1040 -1072 -1744 -1072
WIRE -1744 -1024 -1744 -1072
WIRE -1712 -1024 -1744 -1024
WIRE -1376 -1024 -1616 -1024
WIRE -1712 -992 -1808 -992
WIRE -1616 -976 -1616 -1024
WIRE -1616 -976 -1648 -976
WIRE -1600 -976 -1616 -976
WIRE -1520 -976 -1536 -976
WIRE -1376 -976 -1424 -976
WIRE -1280 -976 -1312 -976
WIRE -1200 -976 -1216 -976
WIRE -1056 -976 -1104 -976
WIRE -1712 -944 -1808 -944
WIRE -1616 -928 -1648 -928
WIRE -1600 -928 -1616 -928
WIRE -1520 -928 -1536 -928
WIRE -1376 -928 -1408 -928
WIRE -1280 -928 -1312 -928
WIRE -1200 -928 -1216 -928
WIRE -1040 -928 -1040 -1072
WIRE -1040 -928 -1088 -928
WIRE -1056 -896 -1056 -976
WIRE -976 -896 -1056 -896
WIRE -1712 -880 -1744 -880
WIRE -1616 -880 -1616 -928
WIRE -1376 -880 -1616 -880
WIRE -1744 -832 -1744 -880
WIRE -1056 -832 -1056 -896
WIRE -1056 -832 -1744 -832
WIRE -1360 -768 -1504 -768
WIRE -1392 -736 -1456 -736
WIRE -1216 -736 -1328 -736
WIRE -1392 -720 -1392 -736
WIRE -1360 -720 -1360 -768
WIRE -1328 -720 -1328 -736
WIRE -1360 -560 -1360 -608
WIRE -400 -560 -832 -560
WIRE -1632 -528 -1680 -528
WIRE -1456 -528 -1456 -736
WIRE -1456 -528 -1632 -528
WIRE -832 -528 -832 -560
WIRE -752 -528 -832 -528
WIRE -880 -512 -912 -512
WIRE -752 -512 -880 -512
WIRE -640 -512 -688 -512
WIRE -2288 -496 -2320 -496
WIRE -2208 -496 -2208 -544
WIRE -2160 -496 -2208 -496
WIRE -2080 -496 -2080 -528
WIRE -2048 -496 -2080 -496
WIRE -1904 -496 -1952 -496
WIRE -1632 -480 -1632 -528
WIRE -1584 -480 -1632 -480
WIRE -1504 -480 -1504 -768
WIRE -1504 -480 -1520 -480
WIRE -1456 -480 -1472 -480
WIRE -1232 -480 -1264 -480
WIRE -1072 -480 -1232 -480
WIRE -880 -480 -880 -512
WIRE -848 -480 -880 -480
WIRE -752 -480 -784 -480
WIRE -640 -480 -640 -512
WIRE -576 -480 -640 -480
WIRE -432 -480 -480 -480
WIRE -432 -464 -432 -480
WIRE -352 -464 -432 -464
WIRE -2384 -448 -2432 -448
WIRE -2320 -448 -2320 -496
WIRE -2304 -448 -2304 -528
WIRE -2288 -448 -2304 -448
WIRE -2080 -448 -2080 -496
WIRE -2080 -448 -2128 -448
WIRE -2048 -448 -2064 -448
WIRE -1472 -448 -1472 -480
WIRE -1456 -448 -1472 -448
WIRE -2160 -432 -2160 -496
WIRE -2080 -432 -2080 -448
WIRE -2080 -432 -2160 -432
WIRE -576 -432 -640 -432
WIRE -400 -432 -400 -560
WIRE -400 -432 -464 -432
WIRE -1216 -416 -1216 -736
WIRE -1216 -416 -1264 -416
WIRE -2208 -400 -2208 -464
WIRE -1584 -400 -1632 -400
WIRE -1504 -400 -1520 -400
WIRE -1472 -400 -1472 -448
WIRE -848 -400 -880 -400
WIRE -752 -400 -784 -400
WIRE -640 -400 -640 -432
WIRE -640 -400 -688 -400
WIRE -1632 -368 -1632 -400
WIRE -1632 -368 -1664 -368
WIRE -1456 -368 -1632 -368
WIRE -880 -368 -880 -400
WIRE -880 -368 -912 -368
WIRE -752 -368 -880 -368
WIRE -2304 -352 -2304 -448
WIRE -2288 -352 -2304 -352
WIRE -2080 -352 -2080 -384
WIRE -2080 -352 -2128 -352
WIRE -2064 -352 -2064 -448
WIRE -2064 -352 -2080 -352
WIRE -752 -352 -832 -352
WIRE -2080 -320 -2080 -352
WIRE -2080 -320 -2208 -320
WIRE -832 -320 -832 -352
WIRE -432 -320 -432 -464
WIRE -432 -320 -832 -320
WIRE -2368 -304 -2432 -304
WIRE -2288 -304 -2304 -304
WIRE -1360 -272 -1360 -336
WIRE -2208 -256 -2208 -320
WIRE -1456 -128 -1456 -368
WIRE -1392 -128 -1392 -160
WIRE -1392 -128 -1456 -128
WIRE -1328 -128 -1328 -160
WIRE -1232 -128 -1232 -480
WIRE -1232 -128 -1328 -128
WIRE -1504 -96 -1504 -400
WIRE -1360 -96 -1360 -160
WIRE -1360 -96 -1504 -96
FLAG -2288 -1488 0
FLAG -2288 -1616 V1
FLAG -2464 -1680 0
FLAG -2880 -2048 0
FLAG -2880 -2112 V1
FLAG -3184 -2096 15
IOPIN -3184 -2096 In
FLAG -1712 -2064 nf
FLAG -1776 -1904 0
FLAG -2016 -2256 VCOinB
IOPIN -2016 -2256 Out
FLAG -2176 -2256 0
FLAG -1312 -1792 COMP
IOPIN -1312 -1792 Out
FLAG -2464 -1856 SIG1
IOPIN -2464 -1856 Out
FLAG -2304 -528 V1
FLAG -2080 -384 R
FLAG -2080 -528 S
FLAG -2208 -464 0
FLAG -2432 -448 SIG1
IOPIN -2432 -448 In
FLAG -2432 -304 COMP
IOPIN -2432 -304 In
FLAG -1808 -992 SIG1
IOPIN -1808 -992 In
FLAG -1808 -944 COMP
IOPIN -1808 -944 In
FLAG -1472 -400 0
FLAG -1680 -528 SIG1
IOPIN -1680 -528 In
FLAG -1664 -368 COMP
IOPIN -1664 -368 In
FLAG -912 -512 SIG1
IOPIN -912 -512 In
FLAG -912 -368 COMP
IOPIN -912 -368 In
FLAG -976 -896 15
IOPIN -976 -896 Out
FLAG -2944 -1984 V2
FLAG -1952 -1376 SIG1
IOPIN -1952 -1376 In
FLAG -1920 -1280 COMP
IOPIN -1920 -1280 In
FLAG -2272 -2032 0
FLAG -2272 -2096 V1
FLAG -2336 -1968 V2
FLAG -2688 -1488 0
FLAG -2688 -1616 V2
FLAG -1216 -976 S
FLAG -1216 -928 R
SYMBOL voltage -2288 -1600 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL Misc\\signal -2464 -1808 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 0 20n 20n 14u 28u)
SYMBOL res -3040 -2112 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R6
SYMATTR Value 9.0k
SYMBOL Opamps\\LT1006 -2880 -2144 R0
SYMATTR InstName U6
SYMBOL res -2848 -2208 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R7
SYMATTR Value 6.1k
SYMBOL cap -2880 -2288 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName C3
SYMATTR Value 47n
SYMBOL SpecialFunctions\\modulate -1616 -2064 R0
WINDOW 3 16 -20 Left 0
SYMATTR Value mark={fmax} space={fmin}
SYMATTR InstName A10
SYMBOL Digital\\buf1 -1408 -2192 R0
WINDOW 3 -24 -6 Left 0
SYMATTR Value ref=0 Vhigh={vcc1} vlow=0
SYMATTR InstName A11
SYMATTR Value2 td={tdel1} tripdt={tripdt1}
SYMBOL bv -1776 -2016 R0
WINDOW 3 31 120 Left 0
SYMATTR Value V=Table(V(VCOinB), 0,0, 0.9, 0, {vcc1-0.9}, 1)
SYMATTR InstName B2
SYMBOL res -1200 -2112 M270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL res -2048 -2240 M270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL cap -2848 -2176 R270
WINDOW 0 32 32 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName C4
SYMATTR Value 470n
SYMBOL Digital\\srflop -1472 -1024 R0
WINDOW 3 -40 28 Invisible 0
WINDOW 0 -20 66 Left 0
SYMATTR Value vhigh=5 td=30n
SYMATTR InstName A1
SYMBOL Digital\\inv -1600 -1040 R0
WINDOW 3 8 60 Invisible 0
SYMATTR Value ref=1.5 vhigh=5 td={tdp}
SYMATTR InstName A5
SYMBOL Digital\\srflop -1152 -1024 R0
WINDOW 3 -40 28 Invisible 0
SYMATTR Value vhigh=5 td=50n
SYMATTR InstName A2
SYMBOL Digital\\inv -1280 -992 R0
WINDOW 3 8 60 Invisible 0
WINDOW 0 12 100 Left 0
SYMATTR Value ref=1.5 vhigh=5 td={tdp}
SYMATTR InstName A4
SYMBOL Digital\\inv -1280 -1040 R0
WINDOW 3 8 60 Invisible 0
SYMATTR Value ref=1.5 vhigh=5 td=50n
SYMATTR InstName A6
SYMBOL Digital\\srflop -2000 -544 R0
WINDOW 3 -40 152 Invisible 0
SYMATTR Value Vhigh=6 ref=3
SYMATTR InstName A9
SYMATTR Value2 Td={td1}
SYMBOL Digital\\dflop -2208 -400 M180
WINDOW 3 8 168 Invisible 0
WINDOW 0 8 -16 Invisible 0
SYMATTR Value Vhigh={Vhigh1} ref=0.1
SYMATTR InstName A13
SYMATTR Value2 Td={td1}
SYMBOL Digital\\dflop -2208 -400 R0
WINDOW 3 8 168 Invisible 0
WINDOW 0 8 -16 Invisible 0
SYMATTR Value Vhigh={Vhigh1} ref=0.1
SYMATTR InstName A14
SYMATTR Value2 Td={td1}
SYMBOL Digital\\inv -2384 -512 R0
WINDOW 3 8 104 Invisible 0
SYMATTR Value Vhigh={Vhigh1} ref={ref1}
SYMATTR InstName A15
SYMBOL Digital\\inv -2368 -368 R0
WINDOW 3 8 104 Invisible 0
SYMATTR Value Vhigh={Vhigh1} ref={ref1}
SYMATTR InstName A16
SYMATTR Value2 Td={60*td1}
SYMBOL EXTRA\\CD4000\\CD4013B -1360 -560 R0
SYMATTR InstName U9
SYMATTR SpiceLine VDD=5  SPEED=1  TRIPDT=5e-9
SYMBOL EXTRA\\CD4000\\CD4073B -1280 -672 R90
SYMATTR InstName U12
SYMBOL EXTRA\\CD4000\\CD4073B -1440 -208 R270
SYMATTR InstName U13
SYMBOL Digital\\inv -1584 -544 R0
WINDOW 3 0 0 Invisible 0
SYMATTR Value vhigh=5 td={tdp1}
SYMATTR InstName A18
SYMBOL Digital\\inv -1584 -464 R0
WINDOW 3 8 60 Invisible 0
SYMATTR Value vhigh=5 td={tdp1}
SYMATTR InstName A19
SYMBOL Digital\\srflop -528 -528 R0
SYMATTR InstName A7
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\and -720 -560 R0
SYMATTR InstName A8
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\and -720 -448 R0
SYMATTR InstName A17
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\inv -848 -464 R0
WINDOW 3 0 0 Invisible 0
SYMATTR Value vhigh=5 td={tdp}
SYMATTR InstName A21
SYMBOL Digital\\inv -848 -544 R0
WINDOW 3 0 0 Invisible 0
SYMATTR Value vhigh=5 td={tdp}
SYMATTR InstName A20
SYMBOL Digital\\and -1680 -1056 R0
SYMATTR InstName A24
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\and -1680 -848 M180
SYMATTR InstName A25
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\and -1344 -1056 R0
SYMATTR InstName A26
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\and -1344 -848 M180
SYMATTR InstName A27
SYMATTR Value2 vhigh=5 td=10n
SYMBOL Digital\\dflop -848 -2224 R0
WINDOW 3 8 168 Invisible 0
WINDOW 0 8 -16 Invisible 0
SYMATTR Value Vhigh={Vhigh1} ref=0.1
SYMATTR InstName A28
SYMATTR Value2 Td={td1}
SYMBOL Digital\\inv -1776 -1344 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A29
SYMBOL Digital\\inv -1776 -1440 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A30
SYMBOL Digital\\inv -848 -1408 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A31
SYMBOL Digital\\and -1616 -1456 R0
WINDOW 3 16 52 Invisible 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A32
SYMBOL Digital\\and -1616 -1328 R0
WINDOW 3 16 52 Invisible 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A33
SYMBOL Digital\\and -1408 -1456 R0
WINDOW 3 16 52 Invisible 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A34
SYMBOL Digital\\and -1232 -1456 R0
WINDOW 3 -260 -45 Left 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A35
SYMBOL Digital\\and -1408 -1328 R0
WINDOW 3 16 52 Invisible 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A36
SYMBOL Digital\\and -1232 -1296 R0
WINDOW 3 -191 139 Left 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A37
SYMBOL Digital\\and -1072 -1424 R0
WINDOW 3 -59 -15 Left 0
SYMATTR Value td={tdel1/2} tripdt={tripdt1}
SYMATTR InstName A38
SYMBOL Digital\\and -1072 -1296 R0
WINDOW 3 -29 129 Left 0
SYMATTR Value td={tdel1/2} tripdt={tripdt1}
SYMATTR InstName A39
SYMBOL Digital\\buf1 -656 -1408 R0
WINDOW 3 -47 95 Invisible 0
WINDOW 39 -87 108 Left 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR SpiceLine vhigh={vcc1}
SYMATTR InstName A40
SYMATTR Value2 ref=0.5
SYMBOL Digital\\inv -752 -1408 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A41
SYMBOL res -592 -1328 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res -2432 -2096 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R2
SYMATTR Value 9.5k
SYMBOL Opamps\\LT1006 -2272 -2128 R0
SYMATTR InstName U1
SYMBOL res -2224 -2192 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R3
SYMATTR Value 9.5k
SYMBOL voltage -2688 -1600 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 2.5
SYMBOL Digital\\inv -1600 -992 R0
WINDOW 3 8 60 Invisible 0
SYMATTR Value ref=1.5 vhigh=5 td={tdp}
SYMATTR InstName A3
TEXT -1744 -1856 Left 0 !.param   VCC1=5 FMIN=2.0e4 FMAX=1.16e5 SPEED=1.0 TDEL1=20n TRIPDT1=8n
TEXT -2056 -1448 Left 0 !.include CD4000.lib
TEXT -2176 -1496 Left 0 !.tran 0 10mm 10u 500n startup uic
TEXT -2352 -648 Left 0 !.params: Vhigh1=5 ref1=2.5 Td1=50n
TEXT -2352 -608 Left 0 !.ic  V(R)=0 V(S)=5
TEXT -896 -616 Left 0 !.param tdp=50n
TEXT -1280 -1456 Left 0 ;x_delay
TEXT -1280 -1304 Left 0 ;x_delay
TEXT -1728 -784 Left 0 ;From Texas Datasheet
TEXT -2448 -184 Left 0 ;From user files (Induction Heater)
TEXT -904 -288 Left 0 ;From Phillips Datasheet
TEXT -1792 -248 Left 0 ;My own implementation
TEXT -1680 -1128 Left 0 ;From 74HC4046 in files list
TEXT -2016 -1688 Left 0 ;The additional inverter (with a suitable delay) combined with the AND gate generates a short pulse that trips the latch.
TEXT -2016 -1648 Left 0 ;This avoids the instability I have not tested this beyond 50kHz.
TEXT -2016 -1616 Left 0 ;To test the different versions move the port flag 15 to the output of the various detectors.
TEXT -896 -656 Left 0 !.param tdp1=200n
