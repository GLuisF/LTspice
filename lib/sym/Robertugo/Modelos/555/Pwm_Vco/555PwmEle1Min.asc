Version 4
SHEET 1 1612 680
WIRE -112 288 -112 64
WIRE -112 336 -112 288
WIRE -112 464 -112 416
WIRE 16 336 16 160
WIRE 16 352 16 336
WIRE 16 464 -112 464
WIRE 16 464 16 416
WIRE 16 496 16 464
WIRE 48 464 16 464
WIRE 48 464 48 96
WIRE 80 96 48 96
WIRE 80 160 16 160
WIRE 80 224 -16 224
WIRE 80 288 -112 288
WIRE 352 288 304 288
WIRE 352 288 352 208
WIRE 368 64 -112 64
WIRE 368 96 304 96
WIRE 368 96 368 64
WIRE 464 224 304 224
WIRE 464 336 16 336
WIRE 464 336 464 224
WIRE 512 160 304 160
WIRE 512 160 512 96
WIRE 512 256 512 160
WIRE 512 352 512 336
WIRE 512 368 512 352
WIRE 512 464 48 464
WIRE 512 464 512 448
WIRE 544 96 512 96
WIRE 544 160 512 160
WIRE 560 352 512 352
WIRE 560 352 560 240
WIRE 592 240 560 240
WIRE 592 256 592 240
WIRE 592 352 592 336
WIRE 592 368 592 352
WIRE 592 464 512 464
WIRE 592 464 592 448
WIRE 656 96 608 96
WIRE 656 160 624 160
WIRE 656 160 656 96
WIRE 656 224 464 224
WIRE 656 224 656 160
WIRE 656 352 592 352
WIRE 720 208 352 208
WIRE 720 304 720 208
WIRE 720 464 592 464
WIRE 720 464 720 400
FLAG 16 496 0
FLAG -16 224 Out555
SYMBOL voltage -112 320 R0
WINDOW 3 -30 58 Left 0
SYMATTR Value {vdd}
SYMATTR InstName Vcc
SYMBOL Robertugo\\555_ALL 240 208 R0
WINDOW 38 -93 79 Left 0
SYMATTR InstName U1
SYMBOL cap 0 352 R0
WINDOW 0 -29 9 Left 0
WINDOW 3 -47 52 Left 0
SYMATTR InstName Ct
SYMATTR Value 2n7
SYMBOL res 640 144 R90
WINDOW 0 61 90 VBottom 0
WINDOW 3 36 8 VTop 0
SYMATTR InstName Rtoff
SYMATTR Value 22k
SYMBOL diode 544 80 M90
WINDOW 0 16 -5 VBottom 0
WINDOW 3 -10 81 VTop 0
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL res 496 240 R0
SYMATTR InstName Rton
SYMATTR Value 5k6
SYMBOL voltage 512 352 R0
WINDOW 3 -116 92 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -27 59 Left 0
SYMATTR Value {vpwm}
SYMATTR InstName Vctrl
SYMBOL npn2 656 304 R0
SYMATTR InstName Q1
SYMATTR Value BC548A
SYMBOL res 576 352 R0
SYMATTR InstName Rd1
SYMATTR Value 18k
SYMBOL res 576 240 R0
SYMATTR InstName Rd2
SYMATTR Value 220k
TEXT 62 480 Left 0 !.tran 0 2m 0 2u startup
TEXT 808 104 Left 0 !.params: Vdd 12 Ronx=.1\n.step param Vpwm 8.25 12 .25\n.meas tran ta FIND time WHEN V(out555)={Vdd/2} td=.5m rise=1\n.meas tran tb FIND time WHEN V(out555)={Vdd/2} td=.5m rise=11\n.meas tran Frec PARAM 10/(tb-ta)\n.Meas tran Tc FIND time WHEN V(Out555)={Vdd/2} td=.5m fall=1\n.Meas tran Td FIND time WHEN V(Out555)={Vdd/2} td=.5m fall=2\n.Meas tran T1 Param  (Tc-Ta)\n.Meas tran T2  Param  (Td-Ta)\n.Meas tran Ton Param If (T1>0, T1, T2)\n.Meas tran Duty% Param  Ton*Frec*100
