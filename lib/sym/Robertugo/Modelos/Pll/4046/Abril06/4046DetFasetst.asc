Version 4
SHEET 1 1544 872
WIRE -672 400 -672 368
WIRE -608 304 -608 256
WIRE -608 400 -672 400
WIRE -608 400 -608 384
WIRE -608 416 -608 400
WIRE -608 512 -608 496
WIRE -544 368 -560 368
WIRE -544 512 -608 512
WIRE -544 512 -544 368
WIRE -528 512 -544 512
WIRE -512 384 -512 352
WIRE -512 416 -512 384
WIRE -496 0 -512 0
WIRE -496 160 -496 0
WIRE -496 256 -496 160
WIRE -496 320 -560 320
WIRE -496 416 -512 416
WIRE -480 256 -496 256
WIRE -464 0 -496 0
WIRE -464 48 -464 32
WIRE -464 80 -464 48
WIRE -464 112 -464 80
WIRE -464 160 -496 160
WIRE -464 192 -512 192
WIRE -464 384 -512 384
WIRE -464 384 -464 368
WIRE -448 80 -464 80
WIRE -416 320 -432 320
WIRE -416 336 -432 336
WIRE -416 336 -416 320
WIRE -416 352 -432 352
WIRE -416 352 -416 336
WIRE -416 384 -464 384
WIRE -416 384 -416 352
WIRE -416 592 -448 592
WIRE -416 640 -416 624
WIRE -416 656 -432 656
WIRE -416 656 -416 640
WIRE -400 48 -464 48
WIRE -400 48 -400 16
WIRE -384 -16 -400 -16
WIRE -384 144 -400 144
WIRE -384 176 -400 176
WIRE -384 256 -400 256
WIRE -384 256 -384 176
WIRE -368 -16 -384 -16
WIRE -368 16 -368 -16
WIRE -368 112 -464 112
WIRE -368 112 -368 96
WIRE -368 688 -400 688
WIRE -352 640 -416 640
WIRE -352 640 -352 608
WIRE -304 -16 -368 -16
WIRE -304 176 -304 -16
WIRE -304 304 -432 304
WIRE -304 304 -304 176
WIRE -304 368 -432 368
WIRE -304 528 -304 368
WIRE -304 576 -352 576
WIRE -304 576 -304 528
WIRE -272 336 -288 336
WIRE -272 336 -272 224
WIRE -272 480 -272 336
WIRE -256 688 -304 688
WIRE -256 688 -256 672
WIRE -256 720 -256 688
WIRE -256 800 -256 784
WIRE -240 128 -240 80
WIRE -240 176 -304 176
WIRE -240 224 -272 224
WIRE -240 480 -272 480
WIRE -240 528 -304 528
WIRE -240 608 -256 608
WIRE -240 608 -240 576
WIRE -224 80 -240 80
WIRE -176 640 -176 624
WIRE -176 736 -176 704
WIRE -160 128 -160 80
WIRE -160 352 -208 352
WIRE -160 352 -160 272
WIRE -160 432 -160 352
WIRE -160 592 -160 576
WIRE -112 624 -176 624
WIRE -96 624 -112 624
WIRE -96 640 -96 624
WIRE -96 736 -176 736
WIRE -96 736 -96 720
WIRE -48 224 -80 224
WIRE -48 336 -48 224
WIRE -48 480 -80 480
WIRE -48 480 -48 352
WIRE -32 384 -32 368
WIRE -32 400 -32 384
WIRE -32 416 -32 400
WIRE -32 448 -32 416
WIRE -16 336 -48 336
WIRE -16 352 -48 352
WIRE -16 368 -32 368
WIRE -16 384 -32 384
WIRE -16 400 -32 400
WIRE -16 448 -32 448
WIRE 0 416 -32 416
WIRE 0 416 0 400
WIRE 0 736 -96 736
WIRE 48 416 0 416
WIRE 48 416 48 384
WIRE 48 624 32 624
WIRE 48 640 48 624
WIRE 48 736 0 736
WIRE 48 736 48 720
WIRE 128 480 -48 480
WIRE 128 480 128 192
WIRE 160 624 144 624
WIRE 160 640 160 624
WIRE 160 736 48 736
WIRE 160 736 160 720
WIRE 208 224 -48 224
WIRE 208 512 208 224
WIRE 240 144 240 128
WIRE 240 160 240 144
WIRE 240 208 240 160
WIRE 240 224 240 208
WIRE 256 144 240 144
WIRE 256 160 240 160
WIRE 256 176 -64 176
WIRE 256 192 128 192
WIRE 256 208 240 208
WIRE 272 224 240 224
WIRE 272 224 272 208
WIRE 288 224 272 224
WIRE 288 480 288 464
WIRE 288 496 288 480
WIRE 288 544 288 496
WIRE 288 560 272 560
WIRE 288 560 288 544
WIRE 304 480 288 480
WIRE 304 496 288 496
WIRE 304 512 208 512
WIRE 304 528 -64 528
WIRE 304 544 288 544
WIRE 320 128 240 128
WIRE 320 160 320 128
WIRE 320 560 288 560
WIRE 320 560 320 544
WIRE 320 624 288 624
WIRE 320 640 320 624
WIRE 320 736 160 736
WIRE 320 736 320 720
WIRE 368 464 288 464
WIRE 368 496 368 464
WIRE 400 80 -160 80
WIRE 400 352 48 352
WIRE 400 352 400 80
WIRE 400 592 -160 592
WIRE 400 592 400 352
WIRE 432 192 320 192
WIRE 432 272 432 192
WIRE 432 528 368 528
WIRE 432 528 432 288
WIRE 464 240 464 224
WIRE 464 256 464 240
WIRE 464 304 464 256
WIRE 464 320 464 304
WIRE 480 240 464 240
WIRE 480 256 464 256
WIRE 480 272 432 272
WIRE 480 288 432 288
WIRE 480 304 464 304
WIRE 480 624 448 624
WIRE 480 640 480 624
WIRE 480 736 320 736
WIRE 480 736 480 720
WIRE 480 752 480 736
WIRE 496 320 464 320
WIRE 496 320 496 304
WIRE 512 320 496 320
WIRE 544 224 464 224
WIRE 544 256 544 224
WIRE 576 480 544 480
WIRE 576 480 576 336
WIRE 592 288 544 288
WIRE 592 336 576 336
WIRE 624 576 592 576
WIRE 624 592 624 576
WIRE 624 736 480 736
WIRE 624 736 624 672
WIRE 640 272 640 144
WIRE 640 368 640 352
WIRE 640 384 640 368
WIRE 640 480 576 480
WIRE 640 480 640 464
WIRE 672 368 640 368
WIRE 768 608 752 608
WIRE 768 608 768 576
WIRE 800 192 432 192
WIRE 800 208 800 192
WIRE 800 256 784 256
WIRE 800 528 432 528
WIRE 800 576 768 576
WIRE 848 144 640 144
WIRE 848 144 848 112
WIRE 848 192 848 144
WIRE 848 336 848 272
WIRE 848 512 848 336
WIRE 848 608 768 608
WIRE 848 608 848 592
WIRE 864 336 848 336
FLAG -288 336 Vdd
IOPIN -288 336 In
FLAG -448 592 Comp
IOPIN -448 592 In
FLAG 672 368 Ppout
IOPIN 672 368 Out
FLAG 848 112 Vdd
IOPIN 848 112 In
FLAG 864 336 CBout
IOPIN 864 336 Out
FLAG -672 368 CAout
IOPIN -672 368 Out
FLAG -608 256 Vdd
IOPIN -608 256 In
FLAG -512 0 Sigin
IOPIN -512 0 In
FLAG -384 144 ca
FLAG -384 -16 cc
FLAG -432 656 Vss
FLAG -256 608 Vss
FLAG 272 560 Vss
FLAG 544 480 Vss
FLAG 752 608 Vss
FLAG -528 512 Vss
FLAG -496 416 Vss
FLAG -208 352 Vss
FLAG -224 80 Vss
FLAG -448 80 Vss
FLAG -512 192 Vss
FLAG -16 448 Vss
FLAG 288 224 Vss
FLAG 512 320 Vss
FLAG 784 256 Vss
FLAG 480 752 0
FLAG 592 576 Sigin
IOPIN 592 576 Out
FLAG 448 624 Comp
IOPIN 448 624 Out
FLAG 0 736 Vss
FLAG 288 624 Vdd
IOPIN 288 624 Out
FLAG 32 624 Rms
IOPIN 32 624 Out
FLAG -112 624 x
FLAG -400 688 Sigin
IOPIN -400 688 In
FLAG -256 800 0
FLAG -256 672 Vr
FLAG 144 624 C
IOPIN 144 624 Out
SYMBOL Digital\\dflop -160 432 R0
SYMATTR InstName ADff2
SYMBOL Digital\\dflop -160 272 M180
SYMATTR InstName ADff1
SYMBOL Digital\\or 288 112 R0
WINDOW 0 -20 70 Left 0
SYMATTR InstName An1
SYMBOL Digital\\or 336 448 R0
WINDOW 0 -21 68 Left 0
SYMATTR InstName An2
SYMBOL Digital\\xor -480 272 M0
WINDOW 0 -25 63 Left 0
SYMATTR InstName Axor
SYMBOL Digital\\or 512 208 R0
WINDOW 0 -19 64 Left 0
SYMATTR InstName An3
SYMBOL Digital\\and 16 304 R0
WINDOW 0 -29 66 Left 0
WINDOW 3 -87 244 Left 0
SYMATTR InstName And
SYMATTR Value td=20n tripdt=20n
SYMBOL sw 848 288 M180
WINDOW 0 -25 54 Left 0
WINDOW 3 -46 121 Left 0
SYMATTR InstName SH
SYMATTR Value Std
SYMBOL sw 848 608 M180
WINDOW 0 -27 54 Left 0
WINDOW 3 -59 116 Left 0
SYMATTR InstName SL
SYMATTR Value Std
SYMBOL sw 640 368 M180
WINDOW 0 -25 54 Left 0
WINDOW 3 -62 12 Left 0
SYMATTR InstName pcpo
SYMATTR Value Std
SYMBOL res 656 480 R180
WINDOW 0 -31 67 Left 0
WINDOW 3 -38 33 Left 0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL sw -608 400 R180
WINDOW 0 -25 54 Left 0
WINDOW 3 6 105 Left 0
SYMATTR InstName Pc1o
SYMATTR Value Std
SYMBOL res -624 400 R0
WINDOW 0 32 45 Left 0
WINDOW 3 22 97 Left 0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL Digital\\schmitt -416 528 R0
WINDOW 3 76 129 Invisible 0
SYMATTR Value vt={Vdd/2} vh={(Vdd/2)-.5} td=20n tripdt=50n
SYMATTR InstName A2
SYMBOL Digital\\schmitt -464 96 R0
WINDOW 3 -181 102 Invisible 0
WINDOW 0 14 106 Left 0
SYMATTR Value vt=0 vh=150m td=20n tripdt=50n
SYMATTR InstName A1
SYMBOL Digital\\schmitt -464 -64 R0
WINDOW 3 108 39 Invisible 0
SYMATTR Value vt={Vdd/2} vh={(Vdd/2)-.5} td=20n tripdt=50n
SYMATTR InstName A3
SYMBOL res -384 240 R90
WINDOW 0 7 100 VBottom 0
WINDOW 3 -25 25 VTop 0
SYMATTR InstName R4
SYMATTR Value 1e7
SYMBOL res -384 0 R0
WINDOW 0 36 46 Left 0
SYMATTR InstName R2
SYMATTR Value 1g
SYMBOL voltage 624 576 R0
WINDOW 3 18 108 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {Vdd} 2e6 0 0 0 0)
SYMATTR InstName Vsig
SYMBOL voltage 480 624 R0
WINDOW 3 51 133 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE({Vdd/2} {Vdd/2} 2e6 0 0 0)
SYMATTR InstName Vcmp
SYMBOL voltage 320 624 R0
WINDOW 0 -21 59 Left 0
WINDOW 3 23 94 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc
SYMATTR Value {Vdd}
SYMBOL bv 48 624 R0
WINDOW 3 -160 165 Left 0
SYMATTR Value V=Sqrt(V(x)/Time)
SYMATTR InstName B1
SYMBOL cap -192 640 R0
SYMATTR InstName C1
SYMATTR Value 1
SYMATTR SpiceLine Rpar=1g
SYMBOL bi2 -96 640 R0
WINDOW 3 -86 114 Left 0
SYMATTR Value I=(V(Sigin)**2)
SYMATTR InstName B2
SYMBOL diode -368 704 R270
WINDOW 0 -28 32 VTop 0
WINDOW 3 42 -3 VBottom 0
SYMATTR InstName Dlimh1
SYMATTR Value Dio
SYMBOL cap -272 720 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMATTR SpiceLine Rpar=1
SYMBOL bv 160 624 R0
WINDOW 3 -38 132 Left 0
SYMATTR Value V=V(Rms)*1.4142
SYMATTR InstName Bc
TEXT 408 96 Left 0 !.Param Vdd 15\n*..step param fase 0 315 45
TEXT -560 -32 Left 0 ;14
TEXT -520 568 Left 0 ;3
TEXT -672 248 VLeft 0 ;2
TEXT 912 304 Left 0 ;13
TEXT 712 336 Left 0 ;1
TEXT 408 64 Left 0 !.tran 0 10u 0
TEXT 328 0 Left 0 !.model Std Sw(Ron=10 Roff=1t Vt=.5 Vh=.4
TEXT -200 0 Left 0 ;cc vt={Vcc/2} vh={(Vcc/2)-.5} td=1e-7 tripdt=20n\nca vt=0 vh=150m td=1e-7 tripdt=20n
TEXT 368 800 Left 0 !.model Dio D (IS=10u N=0.1 CJO=80f RS=1m)
