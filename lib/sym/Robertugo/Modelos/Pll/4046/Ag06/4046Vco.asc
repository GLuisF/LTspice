Version 4
SHEET 1 1176 680
WIRE -144 64 -176 64
WIRE -112 64 -144 64
WIRE -16 64 -32 64
WIRE 16 64 -16 64
WIRE 688 64 672 64
WIRE 480 80 320 80
WIRE -288 96 -304 96
WIRE -224 96 -288 96
WIRE -304 112 -304 96
WIRE -144 112 -144 64
WIRE -144 112 -160 112
WIRE -112 112 -144 112
WIRE -16 112 -16 64
WIRE -16 112 -48 112
WIRE 160 112 112 112
WIRE 192 112 160 112
WIRE 288 112 272 112
WIRE 320 112 320 80
WIRE 320 112 288 112
WIRE 368 112 320 112
WIRE 448 112 432 112
WIRE 464 112 448 112
WIRE 480 112 480 80
WIRE 512 112 480 112
WIRE 592 112 576 112
WIRE 608 112 592 112
WIRE -224 128 -224 96
WIRE -144 128 -144 112
WIRE -16 128 -16 112
WIRE 160 128 160 112
WIRE 464 128 464 112
WIRE 608 128 608 112
WIRE 688 128 688 64
WIRE 320 144 320 112
WIRE -304 224 -304 192
WIRE -224 224 -224 208
WIRE -224 224 -304 224
WIRE -144 224 -144 208
WIRE -144 224 -224 224
WIRE -16 224 -16 208
WIRE -16 224 -144 224
WIRE 80 224 -16 224
WIRE 160 224 160 208
WIRE 160 224 80 224
WIRE 320 224 320 208
WIRE 320 224 160 224
WIRE 464 224 464 208
WIRE 464 224 320 224
WIRE 608 224 608 208
WIRE 608 224 464 224
WIRE 688 224 688 208
WIRE 688 224 608 224
WIRE -352 336 -368 336
WIRE 704 336 688 336
WIRE -368 352 -368 336
WIRE -304 352 -368 352
WIRE -160 352 -208 352
WIRE -128 352 -160 352
WIRE 16 352 -48 352
WIRE 32 352 16 352
WIRE 176 352 112 352
WIRE 192 352 176 352
WIRE 336 352 272 352
WIRE 480 352 464 352
WIRE 688 352 576 352
WIRE 704 352 704 336
WIRE 704 352 688 352
WIRE -368 368 -368 352
WIRE -304 368 -304 352
WIRE -208 368 -208 352
WIRE -128 368 -128 352
WIRE 16 368 16 352
WIRE 176 368 176 352
WIRE 336 368 336 352
WIRE 480 368 480 352
WIRE 576 368 576 352
WIRE 688 368 688 352
WIRE -48 384 -48 352
WIRE -32 384 -48 384
WIRE 112 384 112 352
WIRE 128 384 112 384
WIRE 272 384 272 352
WIRE -368 464 -368 432
WIRE -304 464 -304 448
WIRE -304 464 -368 464
WIRE -208 464 -208 448
WIRE -208 464 -304 464
WIRE -128 464 -128 448
WIRE -128 464 -208 464
WIRE 16 464 16 448
WIRE 16 464 -128 464
WIRE 176 464 176 448
WIRE 176 464 16 464
WIRE 224 464 176 464
WIRE 336 464 336 448
WIRE 336 464 224 464
WIRE 480 464 480 448
WIRE 480 464 336 464
WIRE 576 464 576 448
WIRE 576 464 480 464
WIRE 688 464 688 448
WIRE 688 464 576 464
FLAG 224 464 Vss
FLAG 464 352 Vcoin
IOPIN 464 352 In
FLAG -160 352 M
FLAG 112 384 Ir2
FLAG 128 432 Vdd
FLAG 192 352 r2
IOPIN 192 352 In
FLAG -48 384 Ir1
FLAG -32 432 M
FLAG 32 352 r1
IOPIN 32 352 In
FLAG 80 224 Vss
FLAG -288 96 Adj
FLAG 16 64 Ce1
IOPIN 16 64 In
FLAG -176 64 Ce2
IOPIN -176 64 In
FLAG 112 112 Pul
FLAG 288 112 Sqr
FLAG 448 112 13
FLAG 592 112 14
FLAG 672 64 Vcout
IOPIN 672 64 Out
FLAG -352 336 Zener
IOPIN -352 336 Out
FLAG 688 336 Demout
IOPIN 688 336 Out
FLAG 272 384 Inh
IOPIN 272 384 In
SYMBOL res 464 352 R0
WINDOW 0 -51 41 Left 0
WINDOW 3 -67 69 Left 0
SYMATTR InstName Rin
SYMATTR Value {Rin}
SYMBOL bv -128 352 R0
WINDOW 0 -18 58 Left 0
WINDOW 3 -162 125 Left 0
SYMATTR InstName Bm
SYMATTR Value V=(if(v(vcoin,vss)<v(vdd,vss),S1*v(vcoin,vss),S2*(v(vcoin,vss)+v(vdd,vss)))*Kb+Vfree)
SYMBOL res -224 352 R0
WINDOW 0 24 47 Left 0
SYMATTR InstName Rm
SYMATTR Value 1
SYMBOL e 176 464 M180
WINDOW 0 -17 58 Left 0
WINDOW 3 -59 96 Left 0
SYMATTR InstName Er2
SYMATTR Value 2e8
SYMBOL e 16 464 M180
WINDOW 0 -17 58 Left 0
WINDOW 3 -58 96 Left 0
SYMATTR InstName Er1
SYMATTR Value 2e8
SYMBOL bv -224 112 R0
WINDOW 0 -30 56 Left 0
WINDOW 3 -191 127 Left 0
SYMATTR InstName Badj
SYMATTR Value V=TABLE ((abs(V(vdd)*V(M)/I(Er2)*I(Er1))),.5,1.43, 1,1.6, 10,1.04, 50,.67, 100,.84, 101,1, 102,1, 1000,1)
SYMBOL res -320 96 R0
WINDOW 0 33 16 Left 0
WINDOW 3 34 48 Left 0
SYMATTR InstName Radj
SYMATTR Value 1g
SYMBOL bi -16 128 R0
WINDOW 0 -19 24 Left 0
WINDOW 3 -396 138 Left 0
SYMATTR InstName Bim
SYMATTR Value I=((M1*I(Er1)*V(adj)+M2*I(Er2))*Kc*V(sqr))
SYMBOL voltage -144 112 R0
WINDOW 0 -32 55 Left 0
WINDOW 3 42 81 Left 0
SYMATTR InstName vcext
SYMATTR Value 0
SYMBOL cap -48 96 R90
WINDOW 0 56 28 VBottom 0
WINDOW 3 -12 -16 VTop 0
SYMATTR InstName Cstray
SYMATTR Value 5p
SYMBOL res -16 48 R90
WINDOW 0 17 123 VBottom 0
WINDOW 3 -11 11 VTop 0
SYMATTR InstName Rcext
SYMATTR Value 1g
SYMBOL bv 160 112 R0
WINDOW 0 -26 59 Left 0
WINDOW 3 -52 155 Left 0
SYMATTR InstName Bsqr
SYMATTR Value V=(1.2e6*V(sqr)-1e7*V(Ce1))
SYMBOL res 288 96 R90
WINDOW 0 -2 112 VBottom 0
WINDOW 3 -28 61 VTop 0
SYMATTR InstName Rint
SYMATTR Value .1T
SYMBOL cap 304 144 R0
WINDOW 0 -58 29 Left 0
WINDOW 3 -47 57 Left 0
SYMATTR InstName Cint
SYMATTR Value 10f
SYMBOL diode 368 128 R270
WINDOW 0 -28 32 VTop 0
WINDOW 3 42 -3 VBottom 0
SYMATTR InstName Dlimh
SYMATTR Value Dio
SYMBOL voltage 464 112 R0
WINDOW 0 -67 99 Left 0
WINDOW 3 -30 61 Left 0
SYMATTR InstName Vlimh
SYMATTR Value {Vdd}
SYMBOL diode 576 96 R90
WINDOW 0 1 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Dliml
SYMATTR Value Dio
SYMBOL voltage 608 224 R180
WINDOW 0 20 15 Left 0
WINDOW 3 -30 56 Left 0
SYMATTR InstName Vliml
SYMATTR Value {Vdd}
SYMBOL bv 688 112 R0
WINDOW 0 -28 58 Left 0
WINDOW 3 -530 187 Left 0
SYMATTR InstName BOut
SYMATTR Value V=table ((1-u(v(inh)))*(v(sqr)),.1,.1, v(vdd),v(vdd))
SYMBOL res 320 352 R0
WINDOW 0 -41 21 Left 0
WINDOW 3 -34 65 Left 0
SYMATTR InstName Rinh
SYMATTR Value 1e6
SYMBOL zener -352 432 R180
WINDOW 0 -17 62 Left 0
WINDOW 3 -33 -15 Left 0
SYMATTR InstName Dz
SYMATTR Value Zen
SYMBOL res -320 352 R0
WINDOW 0 59 49 Right 0
WINDOW 3 30 84 Left 0
SYMATTR InstName Rz
SYMATTR Value 1g
SYMBOL bv 688 352 R0
WINDOW 0 -32 57 Left 0
WINDOW 3 13 152 Right 0
SYMATTR InstName bdem
SYMATTR Value V=v(vcoin)*(1-u(v(inh)))
SYMBOL res 560 352 R0
WINDOW 0 22 12 Left 0
SYMATTR InstName Rdem
SYMATTR Value 1g
TEXT -416 -32 Left 0 !.model zen D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484 Vj=.75 Fc=.5\n+Isr=1.8n Nr=2 Bv=7 Ibv=27.721m Nbv=1.178 Ibvl=1.165m Nbvl=21.894 Tbv1=176.47u)\n.model Dio D (IS=10u N=0.1 CJO=80f RS=1m)
