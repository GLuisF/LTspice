Version 4
SHEET 1 1528 1028
WIRE -416 -112 -624 -112
WIRE -624 -96 -624 -112
WIRE 1088 -96 1072 -96
WIRE 1264 -96 1200 -96
WIRE 1424 -96 1408 -96
WIRE 1072 -80 1072 -96
WIRE 1136 -80 1072 -80
WIRE 1200 -80 1200 -96
WIRE 1408 -80 1312 -80
WIRE 1424 -80 1424 -96
WIRE 1424 -80 1408 -80
WIRE -768 -64 -800 -64
WIRE -64 -64 -112 -64
WIRE 80 -64 -64 -64
WIRE 1072 -64 1072 -80
WIRE 1136 -64 1136 -80
WIRE 1264 -64 1264 -96
WIRE 1312 -64 1312 -80
WIRE 1408 -64 1408 -80
WIRE -864 -48 -912 -48
WIRE -768 -48 -768 -64
WIRE -704 -48 -768 -48
WIRE -352 -48 -528 -48
WIRE 80 -48 80 -64
WIRE 896 -48 592 -48
WIRE 912 -48 896 -48
WIRE -352 -32 -400 -32
WIRE -256 -32 -288 -32
WIRE 32 -32 -256 -32
WIRE 592 -16 592 -48
WIRE 896 -16 896 -48
WIRE -736 0 -944 0
WIRE -704 0 -736 0
WIRE -512 0 -544 0
WIRE -368 0 -512 0
WIRE -256 0 -256 -32
WIRE -224 0 -256 0
WIRE 544 0 512 0
WIRE 960 0 944 0
WIRE 32 16 -144 16
WIRE 208 16 176 16
WIRE -944 32 -944 0
WIRE -768 32 -768 -48
WIRE -768 32 -784 32
WIRE -512 32 -512 0
WIRE -496 32 -512 32
WIRE -64 32 -64 -64
WIRE 1072 32 1072 0
WIRE 1136 32 1136 16
WIRE 1136 32 1072 32
WIRE 1200 32 1200 0
WIRE 1200 32 1136 32
WIRE 1312 32 1312 16
WIRE 1312 32 1200 32
WIRE 1408 32 1408 16
WIRE 1408 32 1312 32
WIRE -848 48 -896 48
WIRE -416 48 -416 -112
WIRE -416 48 -432 48
WIRE -112 48 -160 48
WIRE 960 48 944 48
WIRE 1072 48 1072 32
WIRE 1072 48 960 48
WIRE -224 64 -256 64
WIRE -736 80 -736 0
WIRE -720 80 -736 80
WIRE 176 80 176 16
WIRE 208 80 176 80
WIRE -880 96 -896 96
WIRE -768 96 -784 96
WIRE -496 96 -512 96
WIRE -144 96 -144 16
WIRE -112 96 -144 96
WIRE 288 96 272 96
WIRE 592 96 592 64
WIRE 688 96 592 96
WIRE 896 96 896 64
WIRE 896 96 800 96
WIRE 144 112 144 96
WIRE 208 112 144 112
WIRE -1008 128 -1008 96
WIRE -944 128 -944 112
WIRE -944 128 -1008 128
WIRE -880 128 -880 96
WIRE -624 128 -624 48
WIRE -624 128 -880 128
WIRE -144 128 -144 96
WIRE -144 128 -624 128
WIRE -64 128 -64 112
WIRE -48 128 -64 128
WIRE 592 128 592 96
WIRE 896 128 896 96
WIRE 288 144 288 96
WIRE 320 144 288 144
WIRE 448 144 416 144
WIRE -624 160 -624 128
WIRE -64 160 -64 128
WIRE 1424 176 1424 144
WIRE -1008 192 -1008 128
WIRE -992 192 -1008 192
WIRE -880 192 -880 128
WIRE -880 192 -912 192
WIRE 80 192 80 32
WIRE 80 192 64 192
WIRE 320 192 288 192
WIRE 448 192 432 192
WIRE 688 192 688 96
WIRE 800 192 800 96
WIRE 1056 192 1056 144
WIRE 1168 192 1168 144
WIRE 1248 192 1248 160
WIRE -736 208 -736 80
WIRE -704 208 -736 208
WIRE -512 208 -512 96
WIRE -512 208 -544 208
WIRE -400 208 -400 -32
WIRE -400 208 -512 208
WIRE 640 208 640 192
WIRE 848 208 848 192
WIRE 992 208 992 176
WIRE 1104 208 1104 176
WIRE 1120 208 1104 208
WIRE -368 224 -368 0
WIRE -352 224 -368 224
WIRE 176 224 176 80
WIRE 208 224 176 224
WIRE 80 240 80 192
WIRE 288 240 288 192
WIRE 288 240 272 240
WIRE -768 256 -768 96
WIRE -768 256 -800 256
WIRE -704 256 -768 256
WIRE -352 256 -528 256
WIRE -256 256 -256 64
WIRE -256 256 -288 256
WIRE 32 256 -256 256
WIRE 144 256 144 240
WIRE 208 256 144 256
WIRE -864 272 -896 272
WIRE 32 304 0 304
WIRE 688 304 688 272
WIRE 800 304 800 272
WIRE 800 304 688 304
WIRE 1056 304 1056 272
WIRE 1056 304 800 304
WIRE 1168 304 1168 272
WIRE 1168 304 1056 304
WIRE -624 320 -624 304
WIRE -416 320 -416 48
WIRE -416 320 -624 320
WIRE -144 320 -144 128
WIRE -144 320 -176 320
WIRE -64 320 -64 240
WIRE -64 320 -144 320
WIRE 0 320 0 304
WIRE 0 320 -64 320
WIRE 80 320 0 320
WIRE 320 320 320 224
WIRE 320 320 80 320
WIRE 544 320 544 48
WIRE 544 320 320 320
WIRE 640 320 640 256
WIRE 640 320 544 320
WIRE 848 320 848 256
WIRE 848 320 640 320
WIRE 960 320 960 48
WIRE 960 320 848 320
WIRE 992 320 992 288
WIRE 992 320 960 320
WIRE 1120 320 1120 256
WIRE 1120 320 992 320
WIRE 1248 320 1248 240
WIRE 1248 320 1120 320
WIRE 1296 320 1296 256
WIRE 1296 320 1248 320
WIRE 1424 320 1424 256
WIRE 1424 320 1296 320
FLAG 592 128 Ce1
IOPIN 592 128 BiDir
FLAG 896 128 Ce2
IOPIN 896 128 BiDir
FLAG 912 -48 Vdd
IOPIN 912 -48 In
FLAG 1056 144 R1
IOPIN 1056 144 BiDir
FLAG 1168 144 R2
IOPIN 1168 144 BiDir
FLAG 448 144 PSW
IOPIN 448 144 Out
FLAG 448 192 NSW
IOPIN 448 192 Out
FLAG 640 192 PSW
IOPIN 640 192 In
FLAG 848 192 NSW
IOPIN 848 192 In
FLAG 960 0 PSW
IOPIN 960 0 In
FLAG 512 0 NSW
IOPIN 512 0 In
FLAG 144 96 Ce2
IOPIN 144 96 In
FLAG 144 240 Ce1
IOPIN 144 240 In
FLAG 1424 144 Th_ref
IOPIN 1424 144 Out
FLAG 208 16 Th_ref
IOPIN 208 16 In
FLAG 1104 176 Th_ref
IOPIN 1104 176 In
FLAG 992 176 VcoIn
IOPIN 992 176 In
FLAG 1296 176 Vcout
IOPIN 1296 176 Out
FLAG 1248 160 PSW
IOPIN 1248 160 In
FLAG 1408 -96 Demout
IOPIN 1408 -96 Out
FLAG 1264 -64 Inh
IOPIN 1264 -64 In
FLAG 1088 -96 Zener
IOPIN 1088 -96 Out
FLAG -896 272 Comp
IOPIN -896 272 In
FLAG -48 128 Ppout
IOPIN -48 128 Out
FLAG -112 -64 Vdd
IOPIN -112 -64 In
FLAG 64 192 CBout
IOPIN 64 192 Out
FLAG -1008 96 CAout
IOPIN -1008 96 Out
FLAG -720 80 Vdd
IOPIN -720 80 In
FLAG -912 -48 Sigin
IOPIN -912 -48 In
FLAG -176 320 Vss
SYMBOL sw 688 288 M180
WINDOW 3 -27 55 Left 0
WINDOW 0 16 12 Left 0
SYMATTR Value Std
SYMATTR InstName S1c
SYMBOL sw 800 288 R180
WINDOW 3 -26 55 Left 0
WINDOW 0 6 12 Left 0
SYMATTR Value Std
SYMATTR InstName S2c
SYMBOL sw 592 80 M180
WINDOW 0 12 106 Left 0
WINDOW 3 -28 56 Left 0
SYMATTR InstName S1v
SYMATTR Value Std
SYMBOL sw 896 80 R180
WINDOW 0 -58 98 Left 0
WINDOW 3 -26 56 Left 0
SYMATTR InstName S2v
SYMATTR Value Std
SYMBOL Digital\\srflop 368 96 R0
WINDOW 3 -133 183 Left 0
WINDOW 0 -28 29 Left 0
SYMATTR Value Td=10ns Trise=10ns Tfall=10ns
SYMATTR InstName AsrFf
SYMBOL Digital\\diffschmtbuf 208 32 R0
WINDOW 3 7 22 Left 0
WINDOW 0 23 63 Left 0
SYMATTR Value Vt=0 Vh=.1
SYMATTR InstName A1
SYMBOL Digital\\diffschmtbuf 208 176 R0
WINDOW 3 -5 -3 Left 0
WINDOW 0 24 63 Left 0
SYMATTR Value Vt=0 Vh=.1
SYMATTR InstName A2
SYMBOL voltage 1424 160 R0
WINDOW 0 -23 59 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -90 106 Left 0
SYMATTR InstName Vref
SYMATTR Value {Vdd*.6}
SYMBOL e 1296 160 R0
WINDOW 0 -25 56 Left 0
WINDOW 3 28 21 Left 0
SYMATTR InstName Eout
SYMATTR Value {Vdd}
SYMBOL bv 1408 -80 R0
WINDOW 0 -32 57 Left 0
WINDOW 3 -2 128 Right 0
SYMATTR InstName bdem
SYMATTR Value V=v(vcoin)*(1-u(v(inh)))
SYMBOL res 1296 -80 R0
WINDOW 0 22 12 Left 0
SYMATTR InstName Rdem
SYMATTR Value 1g
SYMBOL res 1184 -96 R0
WINDOW 0 27 16 Left 0
WINDOW 3 25 100 Left 0
SYMATTR InstName Rinh
SYMATTR Value 1e6
SYMBOL zener 1088 0 R180
WINDOW 0 -17 62 Left 0
WINDOW 3 -33 -15 Left 0
SYMATTR InstName Dz
SYMATTR Value Zen
SYMBOL res 1120 -80 R0
WINDOW 0 59 49 Right 0
WINDOW 3 30 84 Left 0
SYMATTR InstName Rz
SYMATTR Value 1g
SYMBOL g 1168 288 M180
SYMATTR InstName G2
SYMATTR Value .9n
SYMBOL Digital\\dflop -624 48 M180
SYMATTR InstName ADff1
SYMBOL Digital\\dflop -624 160 R0
WINDOW 0 -74 161 Left 0
SYMATTR InstName ADff2
SYMBOL Digital\\or -320 -112 R0
WINDOW 0 -20 70 Left 0
WINDOW 3 -45 136 Left 0
SYMATTR InstName An1
SYMATTR Value td=20n
SYMBOL Digital\\or -320 176 R0
WINDOW 0 -21 68 Left 0
WINDOW 3 -12 121 Left 0
SYMATTR InstName An2
SYMATTR Value td=20n
SYMBOL Digital\\xor -832 0 M0
WINDOW 0 -23 61 Left 0
SYMATTR InstName Axor1
SYMBOL Digital\\or -192 -32 R0
WINDOW 0 -19 64 Left 0
SYMATTR InstName An3
SYMBOL Digital\\and -464 0 R0
WINDOW 0 -29 66 Left 0
WINDOW 3 -127 113 Left 0
SYMATTR InstName And1
SYMATTR Value td=20n tripdt=20n
SYMBOL sw 80 48 M180
WINDOW 0 -25 54 Left 0
WINDOW 3 -45 99 Left 0
SYMATTR InstName SH1
SYMATTR Value Std
SYMBOL sw 80 336 M180
WINDOW 0 -27 54 Left 0
WINDOW 3 -59 116 Left 0
SYMATTR InstName SL1
SYMATTR Value Std
SYMBOL sw -64 128 M180
WINDOW 0 -29 54 Left 0
WINDOW 3 -44 98 Left 0
SYMATTR InstName Spout1
SYMATTR Value Std
SYMBOL res -48 256 R180
WINDOW 0 25 82 Left 0
WINDOW 3 34 49 Left 0
SYMATTR InstName Rpout1
SYMATTR Value 10k
SYMBOL sw -944 128 R180
WINDOW 0 -22 50 Left 0
WINDOW 3 6 105 Left 0
SYMATTR InstName Sca1
SYMATTR Value Std
SYMBOL res -896 176 R90
WINDOW 0 -2 76 VBottom 0
WINDOW 3 -28 24 VTop 0
SYMATTR InstName Rcpa1
SYMATTR Value 10k
SYMBOL Digital\\schmitt -864 208 R0
WINDOW 3 -256 140 Invisible 0
SYMATTR Value vt={Vdd/2} vh={(Vdd/2)-.5} td=20n tripdt=50n
SYMATTR InstName Acmp1
SYMBOL Digital\\schmitt -864 -112 R0
WINDOW 3 -125 -3 Left 0
WINDOW 0 34 33 Left 0
SYMATTR Value vt={Vx/2} vh=100m td=20n tripdt=50n
SYMATTR InstName Ain1
SYMBOL bi 1056 192 R0
WINDOW 0 -13 28 Left 0
WINDOW 3 -82 148 Left 0
SYMATTR InstName B1
SYMATTR Value I=-2*V(Vcoin)/{R1}
SYMBOL res 976 192 R0
WINDOW 0 -12 30 Left 0
WINDOW 3 23 91 Left 0
SYMATTR InstName R1
SYMATTR Value 1g
TEXT -992 -72 Left 0 ;14
TEXT -976 240 Left 0 ;3
TEXT -1008 -8 VLeft 0 ;2
TEXT 32 168 Left 0 ;13
TEXT -8 104 Left 0 ;1
TEXT -320 -152 Left 0 !.model Zen  D(Is=1e-12 Rs=40 BV=7 IBV=.5m)\n.model Dio D (IS=100u N=.1 CJO=80f RS=1m)\n.model Std Sw(Ron=10 Roff=1t Vt=.5 Vh=.4
TEXT -992 -144 Left 0 ;vt=100m vh=100m td=20n tripdt=50n ; no Vx parameter
