Version 4
SHEET 1 1184 680
WIRE 416 -160 -32 -160
WIRE 560 -160 416 -160
WIRE 656 -160 560 -160
WIRE 848 -160 736 -160
WIRE 944 -160 864 -160
WIRE 240 -144 144 -144
WIRE 336 -144 240 -144
WIRE 16 -128 -352 -128
WIRE 48 -128 16 -128
WIRE 144 -128 144 -144
WIRE 560 -128 560 -160
WIRE 832 -128 560 -128
WIRE 944 -128 944 -160
WIRE -208 -112 -288 -112
WIRE -32 -112 -32 -160
WIRE -32 -112 -112 -112
WIRE 240 -112 240 -144
WIRE -352 -96 -352 -128
WIRE 432 -96 400 -96
WIRE 528 -96 512 -96
WIRE 592 -96 544 -96
WIRE 832 -96 832 -128
WIRE 832 -96 816 -96
WIRE 848 -96 848 -160
WIRE 912 -96 848 -96
WIRE 1024 -96 976 -96
WIRE 1024 -48 1024 -96
WIRE -160 -32 -160 -48
WIRE -128 -32 -160 -32
WIRE -32 -32 -32 -112
WIRE -32 -32 -48 -32
WIRE 144 -32 144 -48
WIRE 144 -32 0 -32
WIRE 336 -32 336 -48
WIRE 576 -32 496 -32
WIRE 592 -32 576 -32
WIRE 864 -32 864 -160
WIRE 864 -32 816 -32
WIRE -160 -16 -160 -32
WIRE 864 -16 864 -32
WIRE 48 0 48 -128
WIRE 96 0 48 0
WIRE 240 0 240 -32
WIRE 240 0 176 0
WIRE 272 0 240 0
WIRE 368 0 336 0
WIRE 416 0 416 -160
WIRE 416 0 368 0
WIRE -288 16 -288 -112
WIRE 528 16 528 -96
WIRE 48 32 48 0
WIRE 368 32 368 0
WIRE 528 32 528 16
WIRE 592 32 528 32
WIRE 832 32 816 32
WIRE 240 48 240 0
WIRE 496 48 496 -32
WIRE -160 64 -160 48
WIRE -96 64 -160 64
WIRE 0 64 0 -32
WIRE 0 64 -96 64
WIRE -384 80 -384 64
WIRE -352 80 -352 -16
WIRE -352 80 -384 80
WIRE -160 80 -160 64
WIRE 832 80 832 32
WIRE 864 80 864 48
WIRE 864 80 832 80
WIRE 928 80 864 80
WIRE 1024 80 1024 32
WIRE 1024 80 992 80
WIRE -352 96 -352 80
WIRE 560 96 560 -128
WIRE 592 96 560 96
WIRE 880 96 816 96
WIRE 880 112 880 96
WIRE -32 128 -32 -32
WIRE 48 128 48 112
WIRE 240 128 240 112
WIRE 240 128 48 128
WIRE 368 128 368 96
WIRE 368 128 240 128
WIRE 496 128 496 112
WIRE 496 128 368 128
WIRE 576 128 576 -32
WIRE 832 128 832 80
WIRE 832 128 576 128
WIRE -288 160 -288 96
WIRE -288 160 -304 160
WIRE -272 160 -288 160
WIRE -160 160 -160 144
WIRE -160 160 -192 160
WIRE 368 160 368 128
WIRE -160 176 -160 160
WIRE 496 176 496 128
WIRE 544 176 544 -96
WIRE 544 176 496 176
WIRE 880 176 544 176
WIRE -288 224 -288 160
WIRE -288 240 -288 224
WIRE -208 240 -288 240
WIRE -32 240 -32 208
WIRE -32 240 -112 240
WIRE -352 272 -352 160
WIRE 48 272 48 128
WIRE 48 272 -352 272
FLAG 368 160 0
FLAG 528 16 Out
IOPIN 528 16 Out
FLAG 336 -32 0
FLAG 16 -128 Fase
FLAG -384 64 Carga
FLAG 368 0 +V
FLAG -288 224 G
FLAG -96 64 Drv
SYMBOL voltage 48 16 R0
WINDOW 3 14 98 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -17 58 Left 0
SYMATTR Value SINE(0 315 50)
SYMATTR InstName Vac
SYMBOL Miscel\\zener 224 112 M180
WINDOW 3 24 0 Invisible 0
WINDOW 0 48 33 Left 0
SYMATTR Value BZX84C12L
SYMATTR InstName Dz12
SYMBOL diode 272 16 R270
WINDOW 0 -34 -1 VTop 0
WINDOW 3 -8 54 VBottom 0
SYMATTR InstName Dr
SYMATTR Value 1N914
SYMBOL res 192 -16 R90
WINDOW 0 46 98 VBottom 0
WINDOW 3 17 3 VTop 0
SYMATTR InstName Rs
SYMATTR Value 10K
SYMBOL polcap 352 32 R0
SYMATTR InstName Cf
SYMATTR Value 220µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Irms=460m Rser=0.16 MTBF=3000 Lser=0 mfg="Nichicon" pn="UPL1C221MPH" type="Al electrolytic" ppPkg=1
SYMBOL Robertugo\\555_ALL 752 16 R0
WINDOW 38 -75 81 Left 0
WINDOW 0 -62 -81 Left 0
SYMATTR InstName U1
SYMBOL Robertugo\\Pote 1008 -112 R90
WINDOW 123 54 65 VCenter 0
WINDOW 0 33 102 VRight 0
WINDOW 3 -33 65 VRight 0
SYMATTR Value2 Set={.5}
SYMATTR InstName U2
SYMATTR Value Rt=6e6
SYMBOL res 752 -176 R90
WINDOW 0 45 134 VBottom 0
WINDOW 3 18 -5 VTop 0
SYMATTR InstName Ron
SYMATTR Value 1.8e6
SYMBOL cap 864 112 R0
WINDOW 0 21 8 Left 0
WINDOW 3 26 56 Left 0
SYMATTR InstName Cbp
SYMATTR Value 10n
SYMBOL diode 848 -16 R0
WINDOW 0 41 0 Left 0
WINDOW 3 43 30 Left 0
SYMATTR InstName Don
SYMATTR Value 1N914
SYMBOL diode 928 96 R270
WINDOW 0 22 -21 VTop 0
WINDOW 3 61 35 VBottom 0
SYMATTR InstName Doff
SYMATTR Value 1N914
SYMBOL res 1040 48 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 52 Left 0
SYMATTR InstName Roff
SYMATTR Value 1.8e6
SYMBOL polcap 512 48 M0
WINDOW 3 24 64 Left 0
SYMATTR Value 47n
SYMATTR InstName Ct
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Irms=825m Rser=0.084 MTBF=6000 Lser=0 mfg="United Chemi-Con" pn="LXF16VB471M10X16LL" type="Al electrolytic" ppPkg=1
SYMBOL res 528 -112 R90
WINDOW 0 -3 80 VBottom 0
WINDOW 3 -28 23 VTop 0
SYMATTR InstName Rbuf
SYMATTR Value 10k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp2 -208 -48 R270
WINDOW 0 33 32 VRight 0
WINDOW 3 55 9 VRight 0
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL npn2 -112 176 R90
WINDOW 0 33 33 VRight 0
WINDOW 3 70 6 VRight 0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cap -176 -16 R0
WINDOW 0 -55 8 Left 0
WINDOW 3 -35 50 Left 0
SYMATTR InstName CdifP
SYMATTR Value 47n
SYMBOL cap -176 80 R0
WINDOW 0 -59 10 Left 0
WINDOW 3 -45 45 Left 0
SYMATTR InstName CdifN
SYMATTR Value 47n
SYMBOL res -32 -48 R90
WINDOW 0 0 68 VBottom 0
WINDOW 3 -28 24 VTop 0
SYMATTR InstName R3
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -176 144 R90
WINDOW 0 62 86 VBottom 0
WINDOW 3 34 42 VTop 0
SYMATTR InstName R4
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -272 112 R180
WINDOW 0 -18 77 Bottom 0
WINDOW 3 -23 23 Top 0
SYMATTR InstName R1
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -16 224 R180
WINDOW 0 54 91 Bottom 0
WINDOW 3 52 34 Top 0
SYMATTR InstName R2
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 160 -32 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Rdif
SYMATTR Value 1K5
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 256 -16 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 40 Left 0
SYMATTR InstName Rc
SYMATTR Value 4k7
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL Triac_All -320 96 M0
WINDOW 0 28 0 Right 0
WINDOW 38 14 165 VLeft 0
SYMATTR InstName U4
SYMATTR SpiceModel L6008L6
SYMBOL npn2 400 -144 M0
WINDOW 0 33 33 VRight 0
WINDOW 3 70 6 VRight 0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL res -368 -112 R0
SYMATTR InstName RL
SYMATTR Value 44
TEXT 264 104 Left 0 ;1/4w
TEXT -352 -144 Left 0 !.tran 4
TEXT 72 152 Left 0 !.params: Vdd 12 Ronx=.1 \n;.step param Cursor  0 1 .5\n.meas tran ta FIND time WHEN V(out)={Vdd/2} td=.45 rise=1\n.meas tran tb FIND time WHEN V(out)={Vdd/2} td=.45 rise=11\n.meas tran Frec PARAM 10/(tb-ta)\n.Meas tran Tc FIND time WHEN V(Out)={Vdd/2} td=.45 fall=1\n.Meas tran Td FIND time WHEN V(Out)={Vdd/2} td=.45 fall=2\n.Meas tran T1 Param  (Tc-Ta)\n.Meas tran T2  Param  (Td-Ta)\n.Meas tran Ton Param If (T1>0, T1, T2)\n.Meas tran Duty% Param  Ton*Frec*100
TEXT 872 -112 Left 0 ;Ron
TEXT 976 -112 Left 0 ;Roff
TEXT 392 152 Left 0 ;Ct=470u
TEXT 632 152 Left 0 ;Ttot aprox 75'
