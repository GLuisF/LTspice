Version 4
SHEET 1 1184 680
WIRE -16 -128 -640 -128
WIRE 544 -128 432 -128
WIRE 640 -128 544 -128
WIRE 832 -128 720 -128
WIRE 928 -128 848 -128
WIRE -496 -112 -576 -112
WIRE -320 -112 -400 -112
WIRE 336 -112 -320 -112
WIRE 400 -112 336 -112
WIRE 544 -96 544 -128
WIRE 816 -96 544 -96
WIRE 928 -96 928 -128
WIRE 256 -64 -64 -64
WIRE 512 -64 336 -64
WIRE 576 -64 528 -64
WIRE 816 -64 816 -96
WIRE 816 -64 800 -64
WIRE 832 -64 832 -128
WIRE 896 -64 832 -64
WIRE 1008 -64 960 -64
WIRE -640 -48 -640 -128
WIRE -448 -32 -448 -48
WIRE -416 -32 -448 -32
WIRE -320 -32 -320 -112
WIRE -320 -32 -336 -32
WIRE 272 -32 -96 -32
WIRE -448 -16 -448 -32
WIRE 1008 -16 1008 -64
WIRE -16 0 -16 -128
WIRE 128 0 -16 0
WIRE 272 0 272 -32
WIRE 272 0 208 0
WIRE 304 0 272 0
WIRE 400 0 400 -112
WIRE 400 0 368 0
WIRE 560 0 480 0
WIRE 576 0 560 0
WIRE 848 0 848 -128
WIRE 848 0 800 0
WIRE -576 16 -576 -112
WIRE 848 16 848 0
WIRE -16 32 -16 0
WIRE 400 32 400 0
WIRE 272 48 272 0
WIRE 512 48 512 -64
WIRE -448 64 -448 48
WIRE -416 64 -448 64
WIRE -288 64 -336 64
WIRE -240 64 -288 64
WIRE -208 64 -240 64
WIRE -96 64 -96 -32
WIRE -96 64 -128 64
WIRE 512 64 512 48
WIRE 576 64 512 64
WIRE 816 64 800 64
WIRE -448 80 -448 64
WIRE -240 80 -240 64
WIRE 480 80 480 0
WIRE -640 96 -640 32
WIRE 816 112 816 64
WIRE 848 112 848 80
WIRE 848 112 816 112
WIRE 912 112 848 112
WIRE 1008 112 1008 64
WIRE 1008 112 976 112
WIRE -320 128 -320 -32
WIRE -64 128 -64 -64
WIRE -64 128 -176 128
WIRE -16 128 -16 112
WIRE 272 128 272 112
WIRE 272 128 -16 128
WIRE 400 128 400 96
WIRE 400 128 272 128
WIRE 432 128 432 -128
WIRE 432 128 400 128
WIRE 544 128 544 -96
WIRE 576 128 544 128
WIRE 864 128 800 128
WIRE -576 144 -576 96
WIRE 864 144 864 128
WIRE -576 160 -576 144
WIRE -576 160 -592 160
WIRE -560 160 -576 160
WIRE -448 160 -448 144
WIRE -448 160 -480 160
WIRE 400 160 400 128
WIRE 560 160 560 0
WIRE 816 160 816 112
WIRE 816 160 560 160
WIRE -448 176 -448 160
WIRE 480 208 480 144
WIRE 528 208 528 -64
WIRE 528 208 480 208
WIRE 800 208 528 208
WIRE 864 208 800 208
WIRE -576 240 -576 160
WIRE -496 240 -576 240
WIRE -320 240 -320 208
WIRE -320 240 -400 240
WIRE -640 256 -640 160
WIRE -240 256 -240 176
WIRE -240 256 -640 256
WIRE -16 256 -16 128
WIRE -16 256 -240 256
FLAG 400 160 0
FLAG 512 48 Out
IOPIN 512 48 Out
FLAG 336 -112 -12
FLAG 800 208 -12
FLAG -576 144 G
FLAG -288 64 Drv
SYMBOL voltage -16 16 R0
WINDOW 3 14 98 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 315 50)
SYMATTR InstName V1
SYMBOL Miscel\\zener 256 48 R0
WINDOW 3 24 72 Invisible 0
WINDOW 0 -65 40 Left 0
SYMATTR Value BZX84C12L
SYMATTR InstName Dz12
SYMBOL diode 368 16 M270
WINDOW 0 16 -5 VTop 0
WINDOW 3 0 32 VBottom 0
SYMATTR InstName Dr
SYMATTR Value 1N914
SYMBOL res 224 -16 R90
WINDOW 0 46 98 VBottom 0
WINDOW 3 17 3 VTop 0
SYMATTR InstName Rs
SYMATTR Value 10k
SYMBOL polcap 384 96 M180
WINDOW 0 -43 32 Left 0
WINDOW 3 -51 -5 Left 0
SYMATTR InstName Cf
SYMATTR Value 220µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Irms=1.41 Rser=0.047 MTBF=5000 Lser=0 mfg="Nichicon" pn="UPL1C102MPH" type="Al electrolytic" ppPkg=1
SYMBOL Robertugo\\555_ALL 736 48 R0
WINDOW 38 -75 81 Left 0
WINDOW 0 -62 -81 Left 0
SYMATTR InstName U1
SYMBOL Robertugo\\Pote 992 -80 R90
WINDOW 123 54 65 VCenter 0
WINDOW 0 33 102 VRight 0
WINDOW 3 -42 -33 VRight 0
SYMATTR Value2 Set={.5}
SYMATTR InstName U2
SYMATTR Value Rt=4.7e6
SYMBOL res 736 -144 R90
WINDOW 0 45 134 VBottom 0
WINDOW 3 18 -19 VTop 0
SYMATTR InstName Ron
SYMATTR Value 1.8e6
SYMBOL cap 848 144 R0
WINDOW 0 21 8 Left 0
WINDOW 3 26 56 Left 0
SYMATTR InstName Cbp
SYMATTR Value 10n
SYMBOL diode 832 16 R0
WINDOW 0 41 0 Left 0
WINDOW 3 43 30 Left 0
SYMATTR InstName Don
SYMATTR Value 1N914
SYMBOL diode 912 128 R270
WINDOW 0 22 -21 VTop 0
WINDOW 3 61 35 VBottom 0
SYMATTR InstName Doff
SYMATTR Value 1N914
SYMBOL res 1024 80 R180
WINDOW 0 36 76 Left 0
WINDOW 3 36 52 Left 0
SYMATTR InstName Roff
SYMATTR Value 1.8e6
SYMBOL polcap 496 80 M0
WINDOW 3 24 64 Left 0
SYMATTR Value 47n
SYMATTR InstName Ct
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Irms=825m Rser=0.084 MTBF=6000 Lser=0 mfg="United Chemi-Con" pn="LXF16VB471M10X16LL" type="Al electrolytic" ppPkg=1
SYMBOL res 352 -80 R90
WINDOW 0 2 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rbuf
SYMATTR Value 10k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp2 -400 176 R90
WINDOW 0 33 32 VRight 0
WINDOW 3 62 4 VRight 0
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL npn2 -496 -48 R270
WINDOW 0 33 33 VRight 0
WINDOW 3 35 -74 VRight 0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cap -464 -16 R0
WINDOW 0 -77 26 Left 0
WINDOW 3 -35 50 Left 0
SYMATTR InstName CdifN
SYMATTR Value 47n
SYMBOL cap -464 80 R0
WINDOW 0 -65 21 Left 0
WINDOW 3 -45 45 Left 0
SYMATTR InstName CdifP
SYMATTR Value 47n
SYMBOL res -320 -48 R90
WINDOW 0 -4 58 VBottom 0
WINDOW 3 29 66 VTop 0
SYMATTR InstName Rbe2
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -464 144 R90
WINDOW 0 65 74 VBottom 0
WINDOW 3 61 81 VTop 0
SYMATTR InstName Rbe1
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -560 112 R180
WINDOW 0 -18 77 Bottom 0
WINDOW 3 -20 23 Top 0
SYMATTR InstName R7
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -304 224 R180
WINDOW 0 54 91 Bottom 0
WINDOW 3 52 34 Top 0
SYMATTR InstName R8
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp2 -176 80 M0
WINDOW 0 49 24 Left 0
WINDOW 3 19 46 Left 0
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res -320 48 R90
WINDOW 0 -3 59 VBottom 0
WINDOW 3 66 61 VBottom 0
SYMATTR InstName Rdif
SYMATTR Value 1K5
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -112 48 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rc
SYMATTR Value 4k7
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL Triac_All -608 96 M0
WINDOW 0 28 0 Right 0
WINDOW 38 14 158 VLeft 0
SYMATTR InstName U4
SYMATTR SpiceModel L6008L6
SYMBOL res -656 -64 R0
SYMATTR InstName RL
SYMATTR Value 100
TEXT 200 112 Left 0 ;1/4w
TEXT 16 -128 Left 0 !.tran 4
TEXT -1296 -88 Left 0 !.params: Vdd 12 Ronx=.1 \n;.step param Cursor  0 1 .5\n.meas tran ta FIND time WHEN V(out)={Vdd/2} td=.4 rise=1\n.meas tran tb FIND time WHEN V(out)={Vdd/2} td=.4 rise=11\n.meas tran Frec PARAM 10/(tb-ta)\n.Meas tran Tc FIND time WHEN V(Out)={Vdd/2} td=.4 fall=1\n.Meas tran Td FIND time WHEN V(Out)={Vdd/2} td=.4 fall=2\n.Meas tran T1 Param  (Tc-Ta)\n.Meas tran T2  Param  (Td-Ta)\n.Meas tran Ton Param If (T1>0, T1, T2)\n.Meas tran Duty% Param  Ton*Frec*100
TEXT 864 -96 Left 0 ;Ron
TEXT 952 -96 Left 0 ;Roff
TEXT 536 192 Left 0 ;Ct=470u
TEXT 144 40 Left 0 ;x5W
